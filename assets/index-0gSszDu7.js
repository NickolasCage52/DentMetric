(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();function $r(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const Rt={},ji=[],Ie=()=>{},Ba=()=>!1,Ns=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),qr=e=>e.startsWith("onUpdate:"),Zt=Object.assign,Qr=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Rc=Object.prototype.hasOwnProperty,Tt=(e,t)=>Rc.call(e,t),st=Array.isArray,Vi=e=>Yn(e)==="[object Map]",sn=e=>Yn(e)==="[object Set]",Co=e=>Yn(e)==="[object Date]",gt=e=>typeof e=="function",zt=e=>typeof e=="string",Ge=e=>typeof e=="symbol",Ft=e=>e!==null&&typeof e=="object",Ha=e=>(Ft(e)||gt(e))&&gt(e.then)&&gt(e.catch),Wa=Object.prototype.toString,Yn=e=>Wa.call(e),Lc=e=>Yn(e).slice(8,-1),Ua=e=>Yn(e)==="[object Object]",Jr=e=>zt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,wn=$r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Bs=e=>{const t=Object.create(null);return(i=>t[i]||(t[i]=e(i)))},Oc=/-\w/g,di=Bs(e=>e.replace(Oc,t=>t.slice(1).toUpperCase())),Ic=/\B([A-Z])/g,Ri=Bs(e=>e.replace(Ic,"-$1").toLowerCase()),za=Bs(e=>e.charAt(0).toUpperCase()+e.slice(1)),er=Bs(e=>e?`on${za(e)}`:""),ci=(e,t)=>!Object.is(e,t),xs=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},ja=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},Hs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ko;const Ws=()=>ko||(ko=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Us(e){if(st(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=zt(n)?Nc(n):Us(n);if(s)for(const o in s)t[o]=s[o]}return t}else if(zt(e)||Ft(e))return e}const Dc=/;(?![^(]*\))/g,Gc=/:([^]+)/,Fc=/\/\*[^]*?\*\//g;function Nc(e){const t={};return e.replace(Fc,"").split(Dc).forEach(i=>{if(i){const n=i.split(Gc);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ht(e){let t="";if(zt(e))t=e;else if(st(e))for(let i=0;i<e.length;i++){const n=Ht(e[i]);n&&(t+=n+" ")}else if(Ft(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Bc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hc=$r(Bc);function Va(e){return!!e||e===""}function Wc(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=Kn(e[n],t[n]);return i}function Kn(e,t){if(e===t)return!0;let i=Co(e),n=Co(t);if(i||n)return i&&n?e.getTime()===t.getTime():!1;if(i=Ge(e),n=Ge(t),i||n)return e===t;if(i=st(e),n=st(t),i||n)return i&&n?Wc(e,t):!1;if(i=Ft(e),n=Ft(t),i||n){if(!i||!n)return!1;const s=Object.keys(e).length,o=Object.keys(t).length;if(s!==o)return!1;for(const r in e){const a=e.hasOwnProperty(r),l=t.hasOwnProperty(r);if(a&&!l||!a&&l||!Kn(e[r],t[r]))return!1}}return String(e)===String(t)}function Zr(e,t){return e.findIndex(i=>Kn(i,t))}const Xa=e=>!!(e&&e.__v_isRef===!0),pt=e=>zt(e)?e:e==null?"":st(e)||Ft(e)&&(e.toString===Wa||!gt(e.toString))?Xa(e)?pt(e.value):JSON.stringify(e,Ya,2):String(e),Ya=(e,t)=>Xa(t)?Ya(e,t.value):Vi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s],o)=>(i[ir(n,o)+" =>"]=s,i),{})}:sn(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>ir(i))}:Ge(t)?ir(t):Ft(t)&&!st(t)&&!Ua(t)?String(t):t,ir=(e,t="")=>{var i;return Ge(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};let le;class Uc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=le,!t&&le&&(this.index=(le.scopes||(le.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=le;try{return le=this,t()}finally{le=i}}}on(){++this._on===1&&(this.prevScope=le,le=this)}off(){this._on>0&&--this._on===0&&(le=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function zc(){return le}let Dt;const nr=new WeakSet;class Ka{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,le&&le.active&&le.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,nr.has(this)&&(nr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||qa(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Mo(this),Qa(this);const t=Dt,i=ke;Dt=this,ke=!0;try{return this.fn()}finally{Ja(this),Dt=t,ke=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)io(t);this.deps=this.depsTail=void 0,Mo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?nr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){yr(this)&&this.run()}get dirty(){return yr(this)}}let $a=0,Sn,Cn;function qa(e,t=!1){if(e.flags|=8,t){e.next=Cn,Cn=e;return}e.next=Sn,Sn=e}function to(){$a++}function eo(){if(--$a>0)return;if(Cn){let t=Cn;for(Cn=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;Sn;){let t=Sn;for(Sn=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function Qa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ja(e){let t,i=e.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),io(n),jc(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=i}function yr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Za(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Za(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Fn)||(e.globalVersion=Fn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!yr(e))))return;e.flags|=2;const t=e.dep,i=Dt,n=ke;Dt=e,ke=!0;try{Qa(e);const s=e.fn(e._value);(t.version===0||ci(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Dt=i,ke=n,Ja(e),e.flags&=-3}}function io(e,t=!1){const{dep:i,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let o=i.computed.deps;o;o=o.nextDep)io(o,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function jc(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let ke=!0;const tl=[];function Ye(){tl.push(ke),ke=!1}function Ke(){const e=tl.pop();ke=e===void 0?!0:e}function Mo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Dt;Dt=void 0;try{t()}finally{Dt=i}}}let Fn=0;class Vc{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class no{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Dt||!ke||Dt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Dt)i=this.activeLink=new Vc(Dt,this),Dt.deps?(i.prevDep=Dt.depsTail,Dt.depsTail.nextDep=i,Dt.depsTail=i):Dt.deps=Dt.depsTail=i,el(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=Dt.depsTail,i.nextDep=void 0,Dt.depsTail.nextDep=i,Dt.depsTail=i,Dt.deps===i&&(Dt.deps=n)}return i}trigger(t){this.version++,Fn++,this.notify(t)}notify(t){to();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{eo()}}}function el(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)el(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const _r=new WeakMap,Ti=Symbol(""),wr=Symbol(""),Nn=Symbol("");function Qt(e,t,i){if(ke&&Dt){let n=_r.get(e);n||_r.set(e,n=new Map);let s=n.get(i);s||(n.set(i,s=new no),s.map=n,s.key=i),s.track()}}function je(e,t,i,n,s,o){const r=_r.get(e);if(!r){Fn++;return}const a=l=>{l&&l.trigger()};if(to(),t==="clear")r.forEach(a);else{const l=st(e),h=l&&Jr(i);if(l&&i==="length"){const c=Number(n);r.forEach((d,u)=>{(u==="length"||u===Nn||!Ge(u)&&u>=c)&&a(d)})}else switch((i!==void 0||r.has(void 0))&&a(r.get(i)),h&&a(r.get(Nn)),t){case"add":l?h&&a(r.get("length")):(a(r.get(Ti)),Vi(e)&&a(r.get(wr)));break;case"delete":l||(a(r.get(Ti)),Vi(e)&&a(r.get(wr)));break;case"set":Vi(e)&&a(r.get(Ti));break}}eo()}function Ni(e){const t=Mt(e);return t===e?t:(Qt(t,"iterate",Nn),we(e)?t:t.map(Te))}function zs(e){return Qt(e=Mt(e),"iterate",Nn),e}function ni(e,t){return $e(e)?qi(Pi(e)?Te(t):t):Te(t)}const Xc={__proto__:null,[Symbol.iterator](){return sr(this,Symbol.iterator,e=>ni(this,e))},concat(...e){return Ni(this).concat(...e.map(t=>st(t)?Ni(t):t))},entries(){return sr(this,"entries",e=>(e[1]=ni(this,e[1]),e))},every(e,t){return Be(this,"every",e,t,void 0,arguments)},filter(e,t){return Be(this,"filter",e,t,i=>i.map(n=>ni(this,n)),arguments)},find(e,t){return Be(this,"find",e,t,i=>ni(this,i),arguments)},findIndex(e,t){return Be(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Be(this,"findLast",e,t,i=>ni(this,i),arguments)},findLastIndex(e,t){return Be(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Be(this,"forEach",e,t,void 0,arguments)},includes(...e){return rr(this,"includes",e)},indexOf(...e){return rr(this,"indexOf",e)},join(e){return Ni(this).join(e)},lastIndexOf(...e){return rr(this,"lastIndexOf",e)},map(e,t){return Be(this,"map",e,t,void 0,arguments)},pop(){return an(this,"pop")},push(...e){return an(this,"push",e)},reduce(e,...t){return To(this,"reduce",e,t)},reduceRight(e,...t){return To(this,"reduceRight",e,t)},shift(){return an(this,"shift")},some(e,t){return Be(this,"some",e,t,void 0,arguments)},splice(...e){return an(this,"splice",e)},toReversed(){return Ni(this).toReversed()},toSorted(e){return Ni(this).toSorted(e)},toSpliced(...e){return Ni(this).toSpliced(...e)},unshift(...e){return an(this,"unshift",e)},values(){return sr(this,"values",e=>ni(this,e))}};function sr(e,t,i){const n=zs(e),s=n[t]();return n!==e&&!we(e)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.done||(o.value=i(o.value)),o}),s}const Yc=Array.prototype;function Be(e,t,i,n,s,o){const r=zs(e),a=r!==e&&!we(e),l=r[t];if(l!==Yc[t]){const d=l.apply(e,o);return a?Te(d):d}let h=i;r!==e&&(a?h=function(d,u){return i.call(this,ni(e,d),u,e)}:i.length>2&&(h=function(d,u){return i.call(this,d,u,e)}));const c=l.call(r,h,n);return a&&s?s(c):c}function To(e,t,i,n){const s=zs(e);let o=i;return s!==e&&(we(e)?i.length>3&&(o=function(r,a,l){return i.call(this,r,a,l,e)}):o=function(r,a,l){return i.call(this,r,ni(e,a),l,e)}),s[t](o,...n)}function rr(e,t,i){const n=Mt(e);Qt(n,"iterate",Nn);const s=n[t](...i);return(s===-1||s===!1)&&oo(i[0])?(i[0]=Mt(i[0]),n[t](...i)):s}function an(e,t,i=[]){Ye(),to();const n=Mt(e)[t].apply(e,i);return eo(),Ke(),n}const Kc=$r("__proto__,__v_isRef,__isVue"),il=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ge));function $c(e){Ge(e)||(e=String(e));const t=Mt(this);return Qt(t,"has",e),t.hasOwnProperty(e)}class nl{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const s=this._isReadonly,o=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return o;if(i==="__v_raw")return n===(s?o?rh:al:o?ol:rl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const r=st(t);if(!s){let l;if(r&&(l=Xc[i]))return l;if(i==="hasOwnProperty")return $c}const a=Reflect.get(t,i,Jt(t)?t:n);if((Ge(i)?il.has(i):Kc(i))||(s||Qt(t,"get",i),o))return a;if(Jt(a)){const l=r&&Jr(i)?a:a.value;return s&&Ft(l)?Cr(l):l}return Ft(a)?s?Cr(a):Xi(a):a}}class sl extends nl{constructor(t=!1){super(!1,t)}set(t,i,n,s){let o=t[i];const r=st(t)&&Jr(i);if(!this._isShallow){const h=$e(o);if(!we(n)&&!$e(n)&&(o=Mt(o),n=Mt(n)),!r&&Jt(o)&&!Jt(n))return h||(o.value=n),!0}const a=r?Number(i)<t.length:Tt(t,i),l=Reflect.set(t,i,n,Jt(t)?t:s);return t===Mt(s)&&(a?ci(n,o)&&je(t,"set",i,n):je(t,"add",i,n)),l}deleteProperty(t,i){const n=Tt(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&n&&je(t,"delete",i,void 0),s}has(t,i){const n=Reflect.has(t,i);return(!Ge(i)||!il.has(i))&&Qt(t,"has",i),n}ownKeys(t){return Qt(t,"iterate",st(t)?"length":Ti),Reflect.ownKeys(t)}}class qc extends nl{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Qc=new sl,Jc=new qc,Zc=new sl(!0);const Sr=e=>e,ts=e=>Reflect.getPrototypeOf(e);function th(e,t,i){return function(...n){const s=this.__v_raw,o=Mt(s),r=Vi(o),a=e==="entries"||e===Symbol.iterator&&r,l=e==="keys"&&r,h=s[e](...n),c=i?Sr:t?qi:Te;return!t&&Qt(o,"iterate",l?wr:Ti),Zt(Object.create(h),{next(){const{value:d,done:u}=h.next();return u?{value:d,done:u}:{value:a?[c(d[0]),c(d[1])]:c(d),done:u}}})}}function es(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function eh(e,t){const i={get(s){const o=this.__v_raw,r=Mt(o),a=Mt(s);e||(ci(s,a)&&Qt(r,"get",s),Qt(r,"get",a));const{has:l}=ts(r),h=t?Sr:e?qi:Te;if(l.call(r,s))return h(o.get(s));if(l.call(r,a))return h(o.get(a));o!==r&&o.get(s)},get size(){const s=this.__v_raw;return!e&&Qt(Mt(s),"iterate",Ti),s.size},has(s){const o=this.__v_raw,r=Mt(o),a=Mt(s);return e||(ci(s,a)&&Qt(r,"has",s),Qt(r,"has",a)),s===a?o.has(s):o.has(s)||o.has(a)},forEach(s,o){const r=this,a=r.__v_raw,l=Mt(a),h=t?Sr:e?qi:Te;return!e&&Qt(l,"iterate",Ti),a.forEach((c,d)=>s.call(o,h(c),h(d),r))}};return Zt(i,e?{add:es("add"),set:es("set"),delete:es("delete"),clear:es("clear")}:{add(s){!t&&!we(s)&&!$e(s)&&(s=Mt(s));const o=Mt(this);return ts(o).has.call(o,s)||(o.add(s),je(o,"add",s,s)),this},set(s,o){!t&&!we(o)&&!$e(o)&&(o=Mt(o));const r=Mt(this),{has:a,get:l}=ts(r);let h=a.call(r,s);h||(s=Mt(s),h=a.call(r,s));const c=l.call(r,s);return r.set(s,o),h?ci(o,c)&&je(r,"set",s,o):je(r,"add",s,o),this},delete(s){const o=Mt(this),{has:r,get:a}=ts(o);let l=r.call(o,s);l||(s=Mt(s),l=r.call(o,s)),a&&a.call(o,s);const h=o.delete(s);return l&&je(o,"delete",s,void 0),h},clear(){const s=Mt(this),o=s.size!==0,r=s.clear();return o&&je(s,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=th(s,e,t)}),i}function so(e,t){const i=eh(e,t);return(n,s,o)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Tt(i,s)&&s in n?i:n,s,o)}const ih={get:so(!1,!1)},nh={get:so(!1,!0)},sh={get:so(!0,!1)};const rl=new WeakMap,ol=new WeakMap,al=new WeakMap,rh=new WeakMap;function oh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ah(e){return e.__v_skip||!Object.isExtensible(e)?0:oh(Lc(e))}function Xi(e){return $e(e)?e:ro(e,!1,Qc,ih,rl)}function lh(e){return ro(e,!1,Zc,nh,ol)}function Cr(e){return ro(e,!0,Jc,sh,al)}function ro(e,t,i,n,s){if(!Ft(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=ah(e);if(o===0)return e;const r=s.get(e);if(r)return r;const a=new Proxy(e,o===2?n:i);return s.set(e,a),a}function Pi(e){return $e(e)?Pi(e.__v_raw):!!(e&&e.__v_isReactive)}function $e(e){return!!(e&&e.__v_isReadonly)}function we(e){return!!(e&&e.__v_isShallow)}function oo(e){return e?!!e.__v_raw:!1}function Mt(e){const t=e&&e.__v_raw;return t?Mt(t):e}function ch(e){return!Tt(e,"__v_skip")&&Object.isExtensible(e)&&ja(e,"__v_skip",!0),e}const Te=e=>Ft(e)?Xi(e):e,qi=e=>Ft(e)?Cr(e):e;function Jt(e){return e?e.__v_isRef===!0:!1}function Kt(e){return hh(e,!1)}function hh(e,t){return Jt(e)?e:new dh(e,t)}class dh{constructor(t,i){this.dep=new no,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:Mt(t),this._value=i?t:Te(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||we(t)||$e(t);t=n?t:Mt(t),ci(t,i)&&(this._rawValue=t,this._value=n?t:Te(t),this.dep.trigger())}}function ee(e){return Jt(e)?e.value:e}const uh={get:(e,t,i)=>t==="__v_raw"?e:ee(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Jt(s)&&!Jt(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function ll(e){return Pi(e)?e:new Proxy(e,uh)}class fh{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new no(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Fn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Dt!==this)return qa(this,!0),!0}get value(){const t=this.dep.track();return Za(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gh(e,t,i=!1){let n,s;return gt(e)?n=e:(n=e.get,s=e.set),new fh(n,s,i)}const is={},Ps=new WeakMap;let Ci;function ph(e,t=!1,i=Ci){if(i){let n=Ps.get(i);n||Ps.set(i,n=[]),n.push(e)}}function mh(e,t,i=Rt){const{immediate:n,deep:s,once:o,scheduler:r,augmentJob:a,call:l}=i,h=k=>s?k:we(k)||s===!1||s===0?Ve(k,1):Ve(k);let c,d,u,f,g=!1,m=!1;if(Jt(e)?(d=()=>e.value,g=we(e)):Pi(e)?(d=()=>h(e),g=!0):st(e)?(m=!0,g=e.some(k=>Pi(k)||we(k)),d=()=>e.map(k=>{if(Jt(k))return k.value;if(Pi(k))return h(k);if(gt(k))return l?l(k,2):k()})):gt(e)?t?d=l?()=>l(e,2):e:d=()=>{if(u){Ye();try{u()}finally{Ke()}}const k=Ci;Ci=c;try{return l?l(e,3,[f]):e(f)}finally{Ci=k}}:d=Ie,t&&s){const k=d,A=s===!0?1/0:s;d=()=>Ve(k(),A)}const _=zc(),y=()=>{c.stop(),_&&_.active&&Qr(_.effects,c)};if(o&&t){const k=t;t=(...A)=>{k(...A),y()}}let w=m?new Array(e.length).fill(is):is;const M=k=>{if(!(!(c.flags&1)||!c.dirty&&!k))if(t){const A=c.run();if(s||g||(m?A.some((E,X)=>ci(E,w[X])):ci(A,w))){u&&u();const E=Ci;Ci=c;try{const X=[A,w===is?void 0:m&&w[0]===is?[]:w,f];w=A,l?l(t,3,X):t(...X)}finally{Ci=E}}}else c.run()};return a&&a(M),c=new Ka(d),c.scheduler=r?()=>r(M,!1):M,f=k=>ph(k,!1,c),u=c.onStop=()=>{const k=Ps.get(c);if(k){if(l)l(k,4);else for(const A of k)A();Ps.delete(c)}},t?n?M(!0):w=c.run():r?r(M.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function Ve(e,t=1/0,i){if(t<=0||!Ft(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=t))return e;if(i.set(e,t),t--,Jt(e))Ve(e.value,t,i);else if(st(e))for(let n=0;n<e.length;n++)Ve(e[n],t,i);else if(sn(e)||Vi(e))e.forEach(n=>{Ve(n,t,i)});else if(Ua(e)){for(const n in e)Ve(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ve(e[n],t,i)}return e}function $n(e,t,i,n){try{return n?e(...n):e()}catch(s){js(s,t,i)}}function Fe(e,t,i,n){if(gt(e)){const s=$n(e,t,i,n);return s&&Ha(s)&&s.catch(o=>{js(o,t,i)}),s}if(st(e)){const s=[];for(let o=0;o<e.length;o++)s.push(Fe(e[o],t,i,n));return s}}function js(e,t,i,n=!0){const s=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Rt;if(t){let a=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,h)===!1)return}a=a.parent}if(o){Ye(),$n(o,null,10,[e,l,h]),Ke();return}}bh(e,i,s,n,r)}function bh(e,t,i,n=!0,s=!1){if(s)throw e;console.error(e)}const se=[];let Ee=-1;const Yi=[];let si=null,Wi=0;const cl=Promise.resolve();let As=null;function We(e){const t=As||cl;return e?t.then(this?e.bind(this):e):t}function xh(e){let t=Ee+1,i=se.length;for(;t<i;){const n=t+i>>>1,s=se[n],o=Bn(s);o<e||o===e&&s.flags&2?t=n+1:i=n}return t}function ao(e){if(!(e.flags&1)){const t=Bn(e),i=se[se.length-1];!i||!(e.flags&2)&&t>=Bn(i)?se.push(e):se.splice(xh(t),0,e),e.flags|=1,hl()}}function hl(){As||(As=cl.then(ul))}function vh(e){st(e)?Yi.push(...e):si&&e.id===-1?si.splice(Wi+1,0,e):e.flags&1||(Yi.push(e),e.flags|=1),hl()}function Po(e,t,i=Ee+1){for(;i<se.length;i++){const n=se[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;se.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function dl(e){if(Yi.length){const t=[...new Set(Yi)].sort((i,n)=>Bn(i)-Bn(n));if(Yi.length=0,si){si.push(...t);return}for(si=t,Wi=0;Wi<si.length;Wi++){const i=si[Wi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}si=null,Wi=0}}const Bn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ul(e){try{for(Ee=0;Ee<se.length;Ee++){const t=se[Ee];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),$n(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ee<se.length;Ee++){const t=se[Ee];t&&(t.flags&=-2)}Ee=-1,se.length=0,dl(),As=null,(se.length||Yi.length)&&ul()}}let _e=null,fl=null;function Es(e){const t=_e;return _e=e,fl=e&&e.type.__scopeId||null,t}function yh(e,t=_e,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&Wo(-1);const o=Es(t);let r;try{r=e(...s)}finally{Es(o),n._d&&Wo(1)}return r};return n._n=!0,n._c=!0,n._d=!0,n}function Ut(e,t){if(_e===null)return e;const i=Ks(_e),n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,r,a,l=Rt]=t[s];o&&(gt(o)&&(o={mounted:o,updated:o}),o.deep&&Ve(r),n.push({dir:o,instance:i,value:r,oldValue:void 0,arg:a,modifiers:l}))}return e}function yi(e,t,i,n){const s=e.dirs,o=t&&t.dirs;for(let r=0;r<s.length;r++){const a=s[r];o&&(a.oldValue=o[r].value);let l=a.dir[n];l&&(Ye(),Fe(l,i,8,[e.el,a,e,t]),Ke())}}function _h(e,t){if(re){let i=re.provides;const n=re.parent&&re.parent.provides;n===i&&(i=re.provides=Object.create(n)),i[e]=t}}function vs(e,t,i=!1){const n=yd();if(n||Ki){let s=Ki?Ki._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&gt(t)?t.call(n&&n.proxy):t}}const wh=Symbol.for("v-scx"),Sh=()=>vs(wh);function ze(e,t,i){return gl(e,t,i)}function gl(e,t,i=Rt){const{immediate:n,deep:s,flush:o,once:r}=i,a=Zt({},i),l=t&&n||!t&&o!=="post";let h;if(Wn){if(o==="sync"){const f=Sh();h=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Ie,f.resume=Ie,f.pause=Ie,f}}const c=re;a.call=(f,g,m)=>Fe(f,c,g,m);let d=!1;o==="post"?a.scheduler=f=>{ne(f,c&&c.suspense)}:o!=="sync"&&(d=!0,a.scheduler=(f,g)=>{g?f():ao(f)}),a.augmentJob=f=>{t&&(f.flags|=4),d&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const u=mh(e,t,a);return Wn&&(h?h.push(u):l&&u()),u}function Ch(e,t,i){const n=this.proxy,s=zt(e)?e.includes(".")?pl(n,e):()=>n[e]:e.bind(n,n);let o;gt(t)?o=t:(o=t.handler,i=t);const r=qn(this),a=gl(s,o.bind(n),i);return r(),a}function pl(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const ml=Symbol("_vte"),kh=e=>e.__isTeleport,kn=e=>e&&(e.disabled||e.disabled===""),Ao=e=>e&&(e.defer||e.defer===""),Eo=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ro=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,kr=(e,t)=>{const i=e&&e.to;return zt(i)?t?t(i):null:i},bl={name:"Teleport",__isTeleport:!0,process(e,t,i,n,s,o,r,a,l,h){const{mc:c,pc:d,pbc:u,o:{insert:f,querySelector:g,createText:m,createComment:_}}=h,y=kn(t.props);let{shapeFlag:w,children:M,dynamicChildren:k}=t;if(e==null){const A=t.el=m(""),E=t.anchor=m("");f(A,i,n),f(E,i,n);const X=($,Q)=>{w&16&&c(M,$,Q,s,o,r,a,l)},G=()=>{const $=t.target=kr(t.props,g),Q=xl($,t,m,f);$&&(r!=="svg"&&Eo($)?r="svg":r!=="mathml"&&Ro($)&&(r="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add($),y||(X($,Q),ys(t,!1)))};y&&(X(i,E),ys(t,!0)),Ao(t.props)?(t.el.__isMounted=!1,ne(()=>{G(),delete t.el.__isMounted},o)):G()}else{if(Ao(t.props)&&e.el.__isMounted===!1){ne(()=>{bl.process(e,t,i,n,s,o,r,a,l,h)},o);return}t.el=e.el,t.targetStart=e.targetStart;const A=t.anchor=e.anchor,E=t.target=e.target,X=t.targetAnchor=e.targetAnchor,G=kn(e.props),$=G?i:E,Q=G?A:X;if(r==="svg"||Eo(E)?r="svg":(r==="mathml"||Ro(E))&&(r="mathml"),k?(u(e.dynamicChildren,k,$,s,o,r,a),uo(e,t,!0)):l||d(e,t,$,Q,s,o,r,a,!1),y)G?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ns(t,i,A,h,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ot=t.target=kr(t.props,g);ot&&ns(t,ot,null,h,0)}else G&&ns(t,E,X,h,1);ys(t,y)}},remove(e,t,i,{um:n,o:{remove:s}},o){const{shapeFlag:r,children:a,anchor:l,targetStart:h,targetAnchor:c,target:d,props:u}=e;if(d&&(s(h),s(c)),o&&s(l),r&16){const f=o||!kn(u);for(let g=0;g<a.length;g++){const m=a[g];n(m,t,i,f,!!m.dynamicChildren)}}},move:ns,hydrate:Mh};function ns(e,t,i,{o:{insert:n},m:s},o=2){o===0&&n(e.targetAnchor,t,i);const{el:r,anchor:a,shapeFlag:l,children:h,props:c}=e,d=o===2;if(d&&n(r,t,i),(!d||kn(c))&&l&16)for(let u=0;u<h.length;u++)s(h[u],t,i,2);d&&n(a,t,i)}function Mh(e,t,i,n,s,o,{o:{nextSibling:r,parentNode:a,querySelector:l,insert:h,createText:c}},d){function u(m,_,y,w){_.anchor=d(r(m),_,a(m),i,n,s,o),_.targetStart=y,_.targetAnchor=w}const f=t.target=kr(t.props,l),g=kn(t.props);if(f){const m=f._lpa||f.firstChild;if(t.shapeFlag&16)if(g)u(e,t,m,m&&r(m));else{t.anchor=r(e);let _=m;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")t.targetStart=_;else if(_.data==="teleport anchor"){t.targetAnchor=_,f._lpa=t.targetAnchor&&r(t.targetAnchor);break}}_=r(_)}t.targetAnchor||xl(f,t,c,h),d(m&&r(m),t,f,i,n,s,o)}ys(t,g)}else g&&t.shapeFlag&16&&u(e,t,e,r(e));return t.anchor&&r(t.anchor)}const Th=bl;function ys(e,t){const i=e.ctx;if(i&&i.ut){let n,s;for(t?(n=e.el,s=e.anchor):(n=e.targetStart,s=e.targetAnchor);n&&n!==s;)n.nodeType===1&&n.setAttribute("data-v-owner",i.uid),n=n.nextSibling;i.ut()}}function xl(e,t,i,n){const s=t.targetStart=i(""),o=t.targetAnchor=i("");return s[ml]=o,e&&(n(s,e),n(o,e)),o}const Ph=Symbol("_leaveCb");function lo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,lo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function vl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Rs=new WeakMap;function Mn(e,t,i,n,s=!1){if(st(e)){e.forEach((g,m)=>Mn(g,t&&(st(t)?t[m]:t),i,n,s));return}if(Tn(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&Mn(e,t,i,n.component.subTree);return}const o=n.shapeFlag&4?Ks(n.component):n.el,r=s?null:o,{i:a,r:l}=e,h=t&&t.r,c=a.refs===Rt?a.refs={}:a.refs,d=a.setupState,u=Mt(d),f=d===Rt?Ba:g=>Tt(u,g);if(h!=null&&h!==l){if(Lo(t),zt(h))c[h]=null,f(h)&&(d[h]=null);else if(Jt(h)){h.value=null;const g=t;g.k&&(c[g.k]=null)}}if(gt(l))$n(l,a,12,[r,c]);else{const g=zt(l),m=Jt(l);if(g||m){const _=()=>{if(e.f){const y=g?f(l)?d[l]:c[l]:l.value;if(s)st(y)&&Qr(y,o);else if(st(y))y.includes(o)||y.push(o);else if(g)c[l]=[o],f(l)&&(d[l]=c[l]);else{const w=[o];l.value=w,e.k&&(c[e.k]=w)}}else g?(c[l]=r,f(l)&&(d[l]=r)):m&&(l.value=r,e.k&&(c[e.k]=r))};if(r){const y=()=>{_(),Rs.delete(e)};y.id=-1,Rs.set(e,y),ne(y,i)}else Lo(e),_()}}}function Lo(e){const t=Rs.get(e);t&&(t.flags|=8,Rs.delete(e))}Ws().requestIdleCallback;Ws().cancelIdleCallback;const Tn=e=>!!e.type.__asyncLoader,yl=e=>e.type.__isKeepAlive;function Ah(e,t){_l(e,"a",t)}function Eh(e,t){_l(e,"da",t)}function _l(e,t,i=re){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(Vs(t,n,i),i){let s=i.parent;for(;s&&s.parent;)yl(s.parent.vnode)&&Rh(n,t,i,s),s=s.parent}}function Rh(e,t,i,n){const s=Vs(t,e,n,!0);Cl(()=>{Qr(n[t],s)},i)}function Vs(e,t,i=re,n=!1){if(i){const s=i[e]||(i[e]=[]),o=t.__weh||(t.__weh=(...r)=>{Ye();const a=qn(i),l=Fe(t,i,e,r);return a(),Ke(),l});return n?s.unshift(o):s.push(o),o}}const qe=e=>(t,i=re)=>{(!Wn||e==="sp")&&Vs(e,(...n)=>t(...n),i)},Lh=qe("bm"),wl=qe("m"),Oh=qe("bu"),Ih=qe("u"),Sl=qe("bum"),Cl=qe("um"),Dh=qe("sp"),Gh=qe("rtg"),Fh=qe("rtc");function Nh(e,t=re){Vs("ec",e,t)}const Bh=Symbol.for("v-ndc");function Pt(e,t,i,n){let s;const o=i,r=st(e);if(r||zt(e)){const a=r&&Pi(e);let l=!1,h=!1;a&&(l=!we(e),h=$e(e),e=zs(e)),s=new Array(e.length);for(let c=0,d=e.length;c<d;c++)s[c]=t(l?h?qi(Te(e[c])):Te(e[c]):e[c],c,void 0,o)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,o)}else if(Ft(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const c=a[l];s[l]=t(e[c],c,l,o)}}else s=[];return s}const Mr=e=>e?jl(e)?Ks(e):Mr(e.parent):null,Pn=Zt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Mr(e.parent),$root:e=>Mr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ml(e),$forceUpdate:e=>e.f||(e.f=()=>{ao(e.update)}),$nextTick:e=>e.n||(e.n=We.bind(e.proxy)),$watch:e=>Ch.bind(e)}),or=(e,t)=>e!==Rt&&!e.__isScriptSetup&&Tt(e,t),Hh={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:o,accessCache:r,type:a,appContext:l}=e;if(t[0]!=="$"){const u=r[t];if(u!==void 0)switch(u){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return o[t]}else{if(or(n,t))return r[t]=1,n[t];if(s!==Rt&&Tt(s,t))return r[t]=2,s[t];if(Tt(o,t))return r[t]=3,o[t];if(i!==Rt&&Tt(i,t))return r[t]=4,i[t];Tr&&(r[t]=0)}}const h=Pn[t];let c,d;if(h)return t==="$attrs"&&Qt(e.attrs,"get",""),h(e);if((c=a.__cssModules)&&(c=c[t]))return c;if(i!==Rt&&Tt(i,t))return r[t]=4,i[t];if(d=l.config.globalProperties,Tt(d,t))return d[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:o}=e;return or(s,t)?(s[t]=i,!0):n!==Rt&&Tt(n,t)?(n[t]=i,!0):Tt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,props:o,type:r}},a){let l;return!!(i[a]||e!==Rt&&a[0]!=="$"&&Tt(e,a)||or(t,a)||Tt(o,a)||Tt(n,a)||Tt(Pn,a)||Tt(s.config.globalProperties,a)||(l=r.__cssModules)&&l[a])},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Tt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Oo(e){return st(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Tr=!0;function Wh(e){const t=Ml(e),i=e.proxy,n=e.ctx;Tr=!1,t.beforeCreate&&Io(t.beforeCreate,e,"bc");const{data:s,computed:o,methods:r,watch:a,provide:l,inject:h,created:c,beforeMount:d,mounted:u,beforeUpdate:f,updated:g,activated:m,deactivated:_,beforeDestroy:y,beforeUnmount:w,destroyed:M,unmounted:k,render:A,renderTracked:E,renderTriggered:X,errorCaptured:G,serverPrefetch:$,expose:Q,inheritAttrs:ot,components:J,directives:ft,filters:lt}=t;if(h&&Uh(h,n,null),r)for(const nt in r){const j=r[nt];gt(j)&&(n[nt]=j.bind(i))}if(s){const nt=s.call(i,i);Ft(nt)&&(e.data=Xi(nt))}if(Tr=!0,o)for(const nt in o){const j=o[nt],mt=gt(j)?j.bind(i,i):gt(j.get)?j.get.bind(i,i):Ie,Ot=!gt(j)&&gt(j.set)?j.set.bind(i):Ie,dt=ae({get:mt,set:Ot});Object.defineProperty(n,nt,{enumerable:!0,configurable:!0,get:()=>dt.value,set:yt=>dt.value=yt})}if(a)for(const nt in a)kl(a[nt],n,i,nt);if(l){const nt=gt(l)?l.call(i):l;Reflect.ownKeys(nt).forEach(j=>{_h(j,nt[j])})}c&&Io(c,e,"c");function H(nt,j){st(j)?j.forEach(mt=>nt(mt.bind(i))):j&&nt(j.bind(i))}if(H(Lh,d),H(wl,u),H(Oh,f),H(Ih,g),H(Ah,m),H(Eh,_),H(Nh,G),H(Fh,E),H(Gh,X),H(Sl,w),H(Cl,k),H(Dh,$),st(Q))if(Q.length){const nt=e.exposed||(e.exposed={});Q.forEach(j=>{Object.defineProperty(nt,j,{get:()=>i[j],set:mt=>i[j]=mt,enumerable:!0})})}else e.exposed||(e.exposed={});A&&e.render===Ie&&(e.render=A),ot!=null&&(e.inheritAttrs=ot),J&&(e.components=J),ft&&(e.directives=ft),$&&vl(e)}function Uh(e,t,i=Ie){st(e)&&(e=Pr(e));for(const n in e){const s=e[n];let o;Ft(s)?"default"in s?o=vs(s.from||n,s.default,!0):o=vs(s.from||n):o=vs(s),Jt(o)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[n]=o}}function Io(e,t,i){Fe(st(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function kl(e,t,i,n){let s=n.includes(".")?pl(i,n):()=>i[n];if(zt(e)){const o=t[e];gt(o)&&ze(s,o)}else if(gt(e))ze(s,e.bind(i));else if(Ft(e))if(st(e))e.forEach(o=>kl(o,t,i,n));else{const o=gt(e.handler)?e.handler.bind(i):t[e.handler];gt(o)&&ze(s,o,e)}}function Ml(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,a=o.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(h=>Ls(l,h,r,!0)),Ls(l,t,r)),Ft(t)&&o.set(t,l),l}function Ls(e,t,i,n=!1){const{mixins:s,extends:o}=t;o&&Ls(e,o,i,!0),s&&s.forEach(r=>Ls(e,r,i,!0));for(const r in t)if(!(n&&r==="expose")){const a=zh[r]||i&&i[r];e[r]=a?a(e[r],t[r]):t[r]}return e}const zh={data:Do,props:Go,emits:Go,methods:pn,computed:pn,beforeCreate:ie,created:ie,beforeMount:ie,mounted:ie,beforeUpdate:ie,updated:ie,beforeDestroy:ie,beforeUnmount:ie,destroyed:ie,unmounted:ie,activated:ie,deactivated:ie,errorCaptured:ie,serverPrefetch:ie,components:pn,directives:pn,watch:Vh,provide:Do,inject:jh};function Do(e,t){return t?e?function(){return Zt(gt(e)?e.call(this,this):e,gt(t)?t.call(this,this):t)}:t:e}function jh(e,t){return pn(Pr(e),Pr(t))}function Pr(e){if(st(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ie(e,t){return e?[...new Set([].concat(e,t))]:t}function pn(e,t){return e?Zt(Object.create(null),e,t):t}function Go(e,t){return e?st(e)&&st(t)?[...new Set([...e,...t])]:Zt(Object.create(null),Oo(e),Oo(t??{})):t}function Vh(e,t){if(!e)return t;if(!t)return e;const i=Zt(Object.create(null),e);for(const n in t)i[n]=ie(e[n],t[n]);return i}function Tl(){return{app:null,config:{isNativeTag:Ba,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xh=0;function Yh(e,t){return function(n,s=null){gt(n)||(n=Zt({},n)),s!=null&&!Ft(s)&&(s=null);const o=Tl(),r=new WeakSet,a=[];let l=!1;const h=o.app={_uid:Xh++,_component:n,_props:s,_container:null,_context:o,_instance:null,version:Md,get config(){return o.config},set config(c){},use(c,...d){return r.has(c)||(c&&gt(c.install)?(r.add(c),c.install(h,...d)):gt(c)&&(r.add(c),c(h,...d))),h},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),h},component(c,d){return d?(o.components[c]=d,h):o.components[c]},directive(c,d){return d?(o.directives[c]=d,h):o.directives[c]},mount(c,d,u){if(!l){const f=h._ceVNode||Me(n,s);return f.appContext=o,u===!0?u="svg":u===!1&&(u=void 0),e(f,c,u),l=!0,h._container=c,c.__vue_app__=h,Ks(f.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Fe(a,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(c,d){return o.provides[c]=d,h},runWithContext(c){const d=Ki;Ki=h;try{return c()}finally{Ki=d}}};return h}}let Ki=null;const Kh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${di(t)}Modifiers`]||e[`${Ri(t)}Modifiers`];function $h(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||Rt;let s=i;const o=t.startsWith("update:"),r=o&&Kh(n,t.slice(7));r&&(r.trim&&(s=i.map(c=>zt(c)?c.trim():c)),r.number&&(s=i.map(Hs)));let a,l=n[a=er(t)]||n[a=er(di(t))];!l&&o&&(l=n[a=er(Ri(t))]),l&&Fe(l,e,6,s);const h=n[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Fe(h,e,6,s)}}const qh=new WeakMap;function Pl(e,t,i=!1){const n=i?qh:t.emitsCache,s=n.get(e);if(s!==void 0)return s;const o=e.emits;let r={},a=!1;if(!gt(e)){const l=h=>{const c=Pl(h,t,!0);c&&(a=!0,Zt(r,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(Ft(e)&&n.set(e,null),null):(st(o)?o.forEach(l=>r[l]=null):Zt(r,o),Ft(e)&&n.set(e,r),r)}function Xs(e,t){return!e||!Ns(t)?!1:(t=t.slice(2).replace(/Once$/,""),Tt(e,t[0].toLowerCase()+t.slice(1))||Tt(e,Ri(t))||Tt(e,t))}function Fo(e){const{type:t,vnode:i,proxy:n,withProxy:s,propsOptions:[o],slots:r,attrs:a,emit:l,render:h,renderCache:c,props:d,data:u,setupState:f,ctx:g,inheritAttrs:m}=e,_=Es(e);let y,w;try{if(i.shapeFlag&4){const k=s||n,A=k;y=Re(h.call(A,k,c,d,f,u,g)),w=a}else{const k=t;y=Re(k.length>1?k(d,{attrs:a,slots:r,emit:l}):k(d,null)),w=t.props?a:Qh(a)}}catch(k){An.length=0,js(k,e,1),y=Me(ui)}let M=y;if(w&&m!==!1){const k=Object.keys(w),{shapeFlag:A}=M;k.length&&A&7&&(o&&k.some(qr)&&(w=Jh(w,o)),M=Qi(M,w,!1,!0))}return i.dirs&&(M=Qi(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(i.dirs):i.dirs),i.transition&&lo(M,i.transition),y=M,Es(_),y}const Qh=e=>{let t;for(const i in e)(i==="class"||i==="style"||Ns(i))&&((t||(t={}))[i]=e[i]);return t},Jh=(e,t)=>{const i={};for(const n in e)(!qr(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function Zh(e,t,i){const{props:n,children:s,component:o}=e,{props:r,children:a,patchFlag:l}=t,h=o.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?No(n,r,h):!!r;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const u=c[d];if(r[u]!==n[u]&&!Xs(h,u))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===r?!1:n?r?No(n,r,h):!0:!!r;return!1}function No(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const o=n[s];if(t[o]!==e[o]&&!Xs(i,o))return!0}return!1}function td({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const Al={},El=()=>Object.create(Al),Rl=e=>Object.getPrototypeOf(e)===Al;function ed(e,t,i,n=!1){const s={},o=El();e.propsDefaults=Object.create(null),Ll(e,t,s,o);for(const r in e.propsOptions[0])r in s||(s[r]=void 0);i?e.props=n?s:lh(s):e.type.props?e.props=s:e.props=o,e.attrs=o}function id(e,t,i,n){const{props:s,attrs:o,vnode:{patchFlag:r}}=e,a=Mt(s),[l]=e.propsOptions;let h=!1;if((n||r>0)&&!(r&16)){if(r&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let u=c[d];if(Xs(e.emitsOptions,u))continue;const f=t[u];if(l)if(Tt(o,u))f!==o[u]&&(o[u]=f,h=!0);else{const g=di(u);s[g]=Ar(l,a,g,f,e,!1)}else f!==o[u]&&(o[u]=f,h=!0)}}}else{Ll(e,t,s,o)&&(h=!0);let c;for(const d in a)(!t||!Tt(t,d)&&((c=Ri(d))===d||!Tt(t,c)))&&(l?i&&(i[d]!==void 0||i[c]!==void 0)&&(s[d]=Ar(l,a,d,void 0,e,!0)):delete s[d]);if(o!==a)for(const d in o)(!t||!Tt(t,d))&&(delete o[d],h=!0)}h&&je(e.attrs,"set","")}function Ll(e,t,i,n){const[s,o]=e.propsOptions;let r=!1,a;if(t)for(let l in t){if(wn(l))continue;const h=t[l];let c;s&&Tt(s,c=di(l))?!o||!o.includes(c)?i[c]=h:(a||(a={}))[c]=h:Xs(e.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,r=!0)}if(o){const l=Mt(i),h=a||Rt;for(let c=0;c<o.length;c++){const d=o[c];i[d]=Ar(s,l,d,h[d],e,!Tt(h,d))}}return r}function Ar(e,t,i,n,s,o){const r=e[i];if(r!=null){const a=Tt(r,"default");if(a&&n===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&gt(l)){const{propsDefaults:h}=s;if(i in h)n=h[i];else{const c=qn(s);n=h[i]=l.call(null,t),c()}}else n=l;s.ce&&s.ce._setProp(i,n)}r[0]&&(o&&!a?n=!1:r[1]&&(n===""||n===Ri(i))&&(n=!0))}return n}const nd=new WeakMap;function Ol(e,t,i=!1){const n=i?nd:t.propsCache,s=n.get(e);if(s)return s;const o=e.props,r={},a=[];let l=!1;if(!gt(e)){const c=d=>{l=!0;const[u,f]=Ol(d,t,!0);Zt(r,u),f&&a.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return Ft(e)&&n.set(e,ji),ji;if(st(o))for(let c=0;c<o.length;c++){const d=di(o[c]);Bo(d)&&(r[d]=Rt)}else if(o)for(const c in o){const d=di(c);if(Bo(d)){const u=o[c],f=r[d]=st(u)||gt(u)?{type:u}:Zt({},u),g=f.type;let m=!1,_=!0;if(st(g))for(let y=0;y<g.length;++y){const w=g[y],M=gt(w)&&w.name;if(M==="Boolean"){m=!0;break}else M==="String"&&(_=!1)}else m=gt(g)&&g.name==="Boolean";f[0]=m,f[1]=_,(m||Tt(f,"default"))&&a.push(d)}}const h=[r,a];return Ft(e)&&n.set(e,h),h}function Bo(e){return e[0]!=="$"&&!wn(e)}const co=e=>e==="_"||e==="_ctx"||e==="$stable",ho=e=>st(e)?e.map(Re):[Re(e)],sd=(e,t,i)=>{if(t._n)return t;const n=yh((...s)=>ho(t(...s)),i);return n._c=!1,n},Il=(e,t,i)=>{const n=e._ctx;for(const s in e){if(co(s))continue;const o=e[s];if(gt(o))t[s]=sd(s,o,n);else if(o!=null){const r=ho(o);t[s]=()=>r}}},Dl=(e,t)=>{const i=ho(t);e.slots.default=()=>i},Gl=(e,t,i)=>{for(const n in t)(i||!co(n))&&(e[n]=t[n])},rd=(e,t,i)=>{const n=e.slots=El();if(e.vnode.shapeFlag&32){const s=t._;s?(Gl(n,t,i),i&&ja(n,"_",s,!0)):Il(t,n)}else t&&Dl(e,t)},od=(e,t,i)=>{const{vnode:n,slots:s}=e;let o=!0,r=Rt;if(n.shapeFlag&32){const a=t._;a?i&&a===1?o=!1:Gl(s,t,i):(o=!t.$stable,Il(t,s)),r=t}else t&&(Dl(e,t),r={default:1});if(o)for(const a in s)!co(a)&&r[a]==null&&delete s[a]},ne=dd;function ad(e){return ld(e)}function ld(e,t){const i=Ws();i.__VUE__=!0;const{insert:n,remove:s,patchProp:o,createElement:r,createText:a,createComment:l,setText:h,setElementText:c,parentNode:d,nextSibling:u,setScopeId:f=Ie,insertStaticContent:g}=e,m=(v,S,P,O=null,R=null,L=null,K=void 0,Y=null,W=!!S.dynamicChildren)=>{if(v===S)return;v&&!ln(v,S)&&(O=ti(v),yt(v,R,L,!0),v=null),S.patchFlag===-2&&(W=!1,S.dynamicChildren=null);const{type:I,ref:it,shapeFlag:q}=S;switch(I){case Ys:_(v,S,P,O);break;case ui:y(v,S,P,O);break;case _s:v==null&&w(S,P,O,K);break;case ut:J(v,S,P,O,R,L,K,Y,W);break;default:q&1?A(v,S,P,O,R,L,K,Y,W):q&6?ft(v,S,P,O,R,L,K,Y,W):(q&64||q&128)&&I.process(v,S,P,O,R,L,K,Y,W,xi)}it!=null&&R?Mn(it,v&&v.ref,L,S||v,!S):it==null&&v&&v.ref!=null&&Mn(v.ref,null,L,v,!0)},_=(v,S,P,O)=>{if(v==null)n(S.el=a(S.children),P,O);else{const R=S.el=v.el;S.children!==v.children&&h(R,S.children)}},y=(v,S,P,O)=>{v==null?n(S.el=l(S.children||""),P,O):S.el=v.el},w=(v,S,P,O)=>{[v.el,v.anchor]=g(v.children,S,P,O,v.el,v.anchor)},M=({el:v,anchor:S},P,O)=>{let R;for(;v&&v!==S;)R=u(v),n(v,P,O),v=R;n(S,P,O)},k=({el:v,anchor:S})=>{let P;for(;v&&v!==S;)P=u(v),s(v),v=P;s(S)},A=(v,S,P,O,R,L,K,Y,W)=>{if(S.type==="svg"?K="svg":S.type==="math"&&(K="mathml"),v==null)E(S,P,O,R,L,K,Y,W);else{const I=v.el&&v.el._isVueCE?v.el:null;try{I&&I._beginPatch(),$(v,S,R,L,K,Y,W)}finally{I&&I._endPatch()}}},E=(v,S,P,O,R,L,K,Y)=>{let W,I;const{props:it,shapeFlag:q,transition:tt,dirs:rt}=v;if(W=v.el=r(v.type,L,it&&it.is,it),q&8?c(W,v.children):q&16&&G(v.children,W,null,O,R,ar(v,L),K,Y),rt&&yi(v,null,O,"created"),X(W,v,v.scopeId,K,O),it){for(const vt in it)vt!=="value"&&!wn(vt)&&o(W,vt,null,it[vt],L,O);"value"in it&&o(W,"value",null,it.value,L),(I=it.onVnodeBeforeMount)&&Ae(I,O,v)}rt&&yi(v,null,O,"beforeMount");const ct=cd(R,tt);ct&&tt.beforeEnter(W),n(W,S,P),((I=it&&it.onVnodeMounted)||ct||rt)&&ne(()=>{I&&Ae(I,O,v),ct&&tt.enter(W),rt&&yi(v,null,O,"mounted")},R)},X=(v,S,P,O,R)=>{if(P&&f(v,P),O)for(let L=0;L<O.length;L++)f(v,O[L]);if(R){let L=R.subTree;if(S===L||Bl(L.type)&&(L.ssContent===S||L.ssFallback===S)){const K=R.vnode;X(v,K,K.scopeId,K.slotScopeIds,R.parent)}}},G=(v,S,P,O,R,L,K,Y,W=0)=>{for(let I=W;I<v.length;I++){const it=v[I]=Y?ri(v[I]):Re(v[I]);m(null,it,S,P,O,R,L,K,Y)}},$=(v,S,P,O,R,L,K)=>{const Y=S.el=v.el;let{patchFlag:W,dynamicChildren:I,dirs:it}=S;W|=v.patchFlag&16;const q=v.props||Rt,tt=S.props||Rt;let rt;if(P&&_i(P,!1),(rt=tt.onVnodeBeforeUpdate)&&Ae(rt,P,S,v),it&&yi(S,v,P,"beforeUpdate"),P&&_i(P,!0),(q.innerHTML&&tt.innerHTML==null||q.textContent&&tt.textContent==null)&&c(Y,""),I?Q(v.dynamicChildren,I,Y,P,O,ar(S,R),L):K||j(v,S,Y,null,P,O,ar(S,R),L,!1),W>0){if(W&16)ot(Y,q,tt,P,R);else if(W&2&&q.class!==tt.class&&o(Y,"class",null,tt.class,R),W&4&&o(Y,"style",q.style,tt.style,R),W&8){const ct=S.dynamicProps;for(let vt=0;vt<ct.length;vt++){const _t=ct[vt],Xt=q[_t],Yt=tt[_t];(Yt!==Xt||_t==="value")&&o(Y,_t,Xt,Yt,R,P)}}W&1&&v.children!==S.children&&c(Y,S.children)}else!K&&I==null&&ot(Y,q,tt,P,R);((rt=tt.onVnodeUpdated)||it)&&ne(()=>{rt&&Ae(rt,P,S,v),it&&yi(S,v,P,"updated")},O)},Q=(v,S,P,O,R,L,K)=>{for(let Y=0;Y<S.length;Y++){const W=v[Y],I=S[Y],it=W.el&&(W.type===ut||!ln(W,I)||W.shapeFlag&198)?d(W.el):P;m(W,I,it,null,O,R,L,K,!0)}},ot=(v,S,P,O,R)=>{if(S!==P){if(S!==Rt)for(const L in S)!wn(L)&&!(L in P)&&o(v,L,S[L],null,R,O);for(const L in P){if(wn(L))continue;const K=P[L],Y=S[L];K!==Y&&L!=="value"&&o(v,L,Y,K,R,O)}"value"in P&&o(v,"value",S.value,P.value,R)}},J=(v,S,P,O,R,L,K,Y,W)=>{const I=S.el=v?v.el:a(""),it=S.anchor=v?v.anchor:a("");let{patchFlag:q,dynamicChildren:tt,slotScopeIds:rt}=S;rt&&(Y=Y?Y.concat(rt):rt),v==null?(n(I,P,O),n(it,P,O),G(S.children||[],P,it,R,L,K,Y,W)):q>0&&q&64&&tt&&v.dynamicChildren&&v.dynamicChildren.length===tt.length?(Q(v.dynamicChildren,tt,P,R,L,K,Y),(S.key!=null||R&&S===R.subTree)&&uo(v,S,!0)):j(v,S,P,it,R,L,K,Y,W)},ft=(v,S,P,O,R,L,K,Y,W)=>{S.slotScopeIds=Y,v==null?S.shapeFlag&512?R.ctx.activate(S,P,O,K,W):lt(S,P,O,R,L,K,W):Z(v,S,W)},lt=(v,S,P,O,R,L,K)=>{const Y=v.component=vd(v,O,R);if(yl(v)&&(Y.ctx.renderer=xi),_d(Y,!1,K),Y.asyncDep){if(R&&R.registerDep(Y,H,K),!v.el){const W=Y.subTree=Me(ui);y(null,W,S,P),v.placeholder=W.el}}else H(Y,v,S,P,R,L,K)},Z=(v,S,P)=>{const O=S.component=v.component;if(Zh(v,S,P))if(O.asyncDep&&!O.asyncResolved){nt(O,S,P);return}else O.next=S,O.update();else S.el=v.el,O.vnode=S},H=(v,S,P,O,R,L,K)=>{const Y=()=>{if(v.isMounted){let{next:q,bu:tt,u:rt,parent:ct,vnode:vt}=v;{const xe=Fl(v);if(xe){q&&(q.el=vt.el,nt(v,q,K)),xe.asyncDep.then(()=>{v.isUnmounted||Y()});return}}let _t=q,Xt;_i(v,!1),q?(q.el=vt.el,nt(v,q,K)):q=vt,tt&&xs(tt),(Xt=q.props&&q.props.onVnodeBeforeUpdate)&&Ae(Xt,ct,q,vt),_i(v,!0);const Yt=Fo(v),ue=v.subTree;v.subTree=Yt,m(ue,Yt,d(ue.el),ti(ue),v,R,L),q.el=Yt.el,_t===null&&td(v,Yt.el),rt&&ne(rt,R),(Xt=q.props&&q.props.onVnodeUpdated)&&ne(()=>Ae(Xt,ct,q,vt),R)}else{let q;const{el:tt,props:rt}=S,{bm:ct,m:vt,parent:_t,root:Xt,type:Yt}=v,ue=Tn(S);_i(v,!1),ct&&xs(ct),!ue&&(q=rt&&rt.onVnodeBeforeMount)&&Ae(q,_t,S),_i(v,!0);{Xt.ce&&Xt.ce._def.shadowRoot!==!1&&Xt.ce._injectChildStyle(Yt);const xe=v.subTree=Fo(v);m(null,xe,P,O,v,R,L),S.el=xe.el}if(vt&&ne(vt,R),!ue&&(q=rt&&rt.onVnodeMounted)){const xe=S;ne(()=>Ae(q,_t,xe),R)}(S.shapeFlag&256||_t&&Tn(_t.vnode)&&_t.vnode.shapeFlag&256)&&v.a&&ne(v.a,R),v.isMounted=!0,S=P=O=null}};v.scope.on();const W=v.effect=new Ka(Y);v.scope.off();const I=v.update=W.run.bind(W),it=v.job=W.runIfDirty.bind(W);it.i=v,it.id=v.uid,W.scheduler=()=>ao(it),_i(v,!0),I()},nt=(v,S,P)=>{S.component=v;const O=v.vnode.props;v.vnode=S,v.next=null,id(v,S.props,O,P),od(v,S.children,P),Ye(),Po(v),Ke()},j=(v,S,P,O,R,L,K,Y,W=!1)=>{const I=v&&v.children,it=v?v.shapeFlag:0,q=S.children,{patchFlag:tt,shapeFlag:rt}=S;if(tt>0){if(tt&128){Ot(I,q,P,O,R,L,K,Y,W);return}else if(tt&256){mt(I,q,P,O,R,L,K,Y,W);return}}rt&8?(it&16&&Se(I,R,L),q!==I&&c(P,q)):it&16?rt&16?Ot(I,q,P,O,R,L,K,Y,W):Se(I,R,L,!0):(it&8&&c(P,""),rt&16&&G(q,P,O,R,L,K,Y,W))},mt=(v,S,P,O,R,L,K,Y,W)=>{v=v||ji,S=S||ji;const I=v.length,it=S.length,q=Math.min(I,it);let tt;for(tt=0;tt<q;tt++){const rt=S[tt]=W?ri(S[tt]):Re(S[tt]);m(v[tt],rt,P,null,R,L,K,Y,W)}I>it?Se(v,R,L,!0,!1,q):G(S,P,O,R,L,K,Y,W,q)},Ot=(v,S,P,O,R,L,K,Y,W)=>{let I=0;const it=S.length;let q=v.length-1,tt=it-1;for(;I<=q&&I<=tt;){const rt=v[I],ct=S[I]=W?ri(S[I]):Re(S[I]);if(ln(rt,ct))m(rt,ct,P,null,R,L,K,Y,W);else break;I++}for(;I<=q&&I<=tt;){const rt=v[q],ct=S[tt]=W?ri(S[tt]):Re(S[tt]);if(ln(rt,ct))m(rt,ct,P,null,R,L,K,Y,W);else break;q--,tt--}if(I>q){if(I<=tt){const rt=tt+1,ct=rt<it?S[rt].el:O;for(;I<=tt;)m(null,S[I]=W?ri(S[I]):Re(S[I]),P,ct,R,L,K,Y,W),I++}}else if(I>tt)for(;I<=q;)yt(v[I],R,L,!0),I++;else{const rt=I,ct=I,vt=new Map;for(I=ct;I<=tt;I++){const $t=S[I]=W?ri(S[I]):Re(S[I]);$t.key!=null&&vt.set($t.key,I)}let _t,Xt=0;const Yt=tt-ct+1;let ue=!1,xe=0;const vi=new Array(Yt);for(I=0;I<Yt;I++)vi[I]=0;for(I=rt;I<=q;I++){const $t=v[I];if(Xt>=Yt){yt($t,R,L,!0);continue}let fe;if($t.key!=null)fe=vt.get($t.key);else for(_t=ct;_t<=tt;_t++)if(vi[_t-ct]===0&&ln($t,S[_t])){fe=_t;break}fe===void 0?yt($t,R,L,!0):(vi[fe-ct]=I+1,fe>=xe?xe=fe:ue=!0,m($t,S[fe],P,null,R,L,K,Y,W),Xt++)}const on=ue?hd(vi):ji;for(_t=on.length-1,I=Yt-1;I>=0;I--){const $t=ct+I,fe=S[$t],B=S[$t+1],b=$t+1<it?B.el||Nl(B):O;vi[I]===0?m(null,fe,P,b,R,L,K,Y,W):ue&&(_t<0||I!==on[_t]?dt(fe,P,b,2):_t--)}}},dt=(v,S,P,O,R=null)=>{const{el:L,type:K,transition:Y,children:W,shapeFlag:I}=v;if(I&6){dt(v.component.subTree,S,P,O);return}if(I&128){v.suspense.move(S,P,O);return}if(I&64){K.move(v,S,P,xi);return}if(K===ut){n(L,S,P);for(let q=0;q<W.length;q++)dt(W[q],S,P,O);n(v.anchor,S,P);return}if(K===_s){M(v,S,P);return}if(O!==2&&I&1&&Y)if(O===0)Y.beforeEnter(L),n(L,S,P),ne(()=>Y.enter(L),R);else{const{leave:q,delayLeave:tt,afterLeave:rt}=Y,ct=()=>{v.ctx.isUnmounted?s(L):n(L,S,P)},vt=()=>{L._isLeaving&&L[Ph](!0),q(L,()=>{ct(),rt&&rt()})};tt?tt(L,ct,vt):vt()}else n(L,S,P)},yt=(v,S,P,O=!1,R=!1)=>{const{type:L,props:K,ref:Y,children:W,dynamicChildren:I,shapeFlag:it,patchFlag:q,dirs:tt,cacheIndex:rt}=v;if(q===-2&&(R=!1),Y!=null&&(Ye(),Mn(Y,null,P,v,!0),Ke()),rt!=null&&(S.renderCache[rt]=void 0),it&256){S.ctx.deactivate(v);return}const ct=it&1&&tt,vt=!Tn(v);let _t;if(vt&&(_t=K&&K.onVnodeBeforeUnmount)&&Ae(_t,S,v),it&6)Jn(v.component,P,O);else{if(it&128){v.suspense.unmount(P,O);return}ct&&yi(v,null,S,"beforeUnmount"),it&64?v.type.remove(v,S,P,xi,O):I&&!I.hasOnce&&(L!==ut||q>0&&q&64)?Se(I,S,P,!1,!0):(L===ut&&q&384||!R&&it&16)&&Se(W,S,P),O&&Vt(v)}(vt&&(_t=K&&K.onVnodeUnmounted)||ct)&&ne(()=>{_t&&Ae(_t,S,v),ct&&yi(v,null,S,"unmounted")},P)},Vt=v=>{const{type:S,el:P,anchor:O,transition:R}=v;if(S===ut){Zs(P,O);return}if(S===_s){k(v);return}const L=()=>{s(P),R&&!R.persisted&&R.afterLeave&&R.afterLeave()};if(v.shapeFlag&1&&R&&!R.persisted){const{leave:K,delayLeave:Y}=R,W=()=>K(P,L);Y?Y(v.el,L,W):W()}else L()},Zs=(v,S)=>{let P;for(;v!==S;)P=u(v),s(v),v=P;s(S)},Jn=(v,S,P)=>{const{bum:O,scope:R,job:L,subTree:K,um:Y,m:W,a:I}=v;Ho(W),Ho(I),O&&xs(O),R.stop(),L&&(L.flags|=8,yt(K,v,S,P)),Y&&ne(Y,S),ne(()=>{v.isUnmounted=!0},S)},Se=(v,S,P,O=!1,R=!1,L=0)=>{for(let K=L;K<v.length;K++)yt(v[K],S,P,O,R)},ti=v=>{if(v.shapeFlag&6)return ti(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const S=u(v.anchor||v.el),P=S&&S[ml];return P?u(P):S};let Fi=!1;const Zn=(v,S,P)=>{let O;v==null?S._vnode&&(yt(S._vnode,null,null,!0),O=S._vnode.component):m(S._vnode||null,v,S,null,null,null,P),S._vnode=v,Fi||(Fi=!0,Po(O),dl(),Fi=!1)},xi={p:m,um:yt,m:dt,r:Vt,mt:lt,mc:G,pc:j,pbc:Q,n:ti,o:e};return{render:Zn,hydrate:void 0,createApp:Yh(Zn)}}function ar({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function _i({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function cd(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function uo(e,t,i=!1){const n=e.children,s=t.children;if(st(n)&&st(s))for(let o=0;o<n.length;o++){const r=n[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=ri(s[o]),a.el=r.el),!i&&a.patchFlag!==-2&&uo(r,a)),a.type===Ys&&(a.patchFlag!==-1?a.el=r.el:a.__elIndex=o+(e.type===ut?1:0)),a.type===ui&&!a.el&&(a.el=r.el)}}function hd(e){const t=e.slice(),i=[0];let n,s,o,r,a;const l=e.length;for(n=0;n<l;n++){const h=e[n];if(h!==0){if(s=i[i.length-1],e[s]<h){t[n]=s,i.push(n);continue}for(o=0,r=i.length-1;o<r;)a=o+r>>1,e[i[a]]<h?o=a+1:r=a;h<e[i[o]]&&(o>0&&(t[n]=i[o-1]),i[o]=n)}}for(o=i.length,r=i[o-1];o-- >0;)i[o]=r,r=t[r];return i}function Fl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Fl(t)}function Ho(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Nl(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Nl(t.subTree):null}const Bl=e=>e.__isSuspense;function dd(e,t){t&&t.pendingBranch?st(e)?t.effects.push(...e):t.effects.push(e):vh(e)}const ut=Symbol.for("v-fgt"),Ys=Symbol.for("v-txt"),ui=Symbol.for("v-cmt"),_s=Symbol.for("v-stc"),An=[];let pe=null;function U(e=!1){An.push(pe=e?null:[])}function ud(){An.pop(),pe=An[An.length-1]||null}let Hn=1;function Wo(e,t=!1){Hn+=e,e<0&&pe&&t&&(pe.hasOnce=!0)}function Hl(e){return e.dynamicChildren=Hn>0?pe||ji:null,ud(),Hn>0&&pe&&pe.push(e),e}function V(e,t,i,n,s,o){return Hl(p(e,t,i,n,s,o,!0))}function Wl(e,t,i,n,s){return Hl(Me(e,t,i,n,s,!0))}function Ul(e){return e?e.__v_isVNode===!0:!1}function ln(e,t){return e.type===t.type&&e.key===t.key}const zl=({key:e})=>e??null,ws=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?zt(e)||Jt(e)||gt(e)?{i:_e,r:e,k:t,f:!!i}:e:null);function p(e,t=null,i=null,n=0,s=null,o=e===ut?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zl(t),ref:t&&ws(t),scopeId:fl,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:_e};return a?(fo(l,i),o&128&&e.normalize(l)):i&&(l.shapeFlag|=zt(i)?8:16),Hn>0&&!r&&pe&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&pe.push(l),l}const Me=fd;function fd(e,t=null,i=null,n=0,s=null,o=!1){if((!e||e===Bh)&&(e=ui),Ul(e)){const a=Qi(e,t,!0);return i&&fo(a,i),Hn>0&&!o&&pe&&(a.shapeFlag&6?pe[pe.indexOf(e)]=a:pe.push(a)),a.patchFlag=-2,a}if(kd(e)&&(e=e.__vccOpts),t){t=gd(t);let{class:a,style:l}=t;a&&!zt(a)&&(t.class=Ht(a)),Ft(l)&&(oo(l)&&!st(l)&&(l=Zt({},l)),t.style=Us(l))}const r=zt(e)?1:Bl(e)?128:kh(e)?64:Ft(e)?4:gt(e)?2:0;return p(e,t,i,n,s,r,o,!0)}function gd(e){return e?oo(e)||Rl(e)?Zt({},e):e:null}function Qi(e,t,i=!1,n=!1){const{props:s,ref:o,patchFlag:r,children:a,transition:l}=e,h=t?md(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&zl(h),ref:t&&t.ref?i&&o?st(o)?o.concat(ws(t)):[o,ws(t)]:ws(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ut?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qi(e.ssContent),ssFallback:e.ssFallback&&Qi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&lo(c,l.clone(c)),c}function Er(e=" ",t=0){return Me(Ys,null,e,t)}function pd(e,t){const i=Me(_s,null,e);return i.staticCount=t,i}function qt(e="",t=!1){return t?(U(),Wl(ui,null,e)):Me(ui,null,e)}function Re(e){return e==null||typeof e=="boolean"?Me(ui):st(e)?Me(ut,null,e.slice()):Ul(e)?ri(e):Me(Ys,null,String(e))}function ri(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Qi(e)}function fo(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(st(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),fo(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!Rl(t)?t._ctx=_e:s===3&&_e&&(_e.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else gt(t)?(t={default:t,_ctx:_e},i=32):(t=String(t),n&64?(i=16,t=[Er(t)]):i=8);e.children=t,e.shapeFlag|=i}function md(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=Ht([t.class,n.class]));else if(s==="style")t.style=Us([t.style,n.style]);else if(Ns(s)){const o=t[s],r=n[s];r&&o!==r&&!(st(o)&&o.includes(r))&&(t[s]=o?[].concat(o,r):r)}else s!==""&&(t[s]=n[s])}return t}function Ae(e,t,i,n=null){Fe(e,t,7,[i,n])}const bd=Tl();let xd=0;function vd(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||bd,o={uid:xd++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ol(n,s),emitsOptions:Pl(n,s),emit:null,emitted:null,propsDefaults:Rt,inheritAttrs:n.inheritAttrs,ctx:Rt,data:Rt,props:Rt,attrs:Rt,slots:Rt,refs:Rt,setupState:Rt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=$h.bind(null,o),e.ce&&e.ce(o),o}let re=null;const yd=()=>re||_e;let Os,Rr;{const e=Ws(),t=(i,n)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(n),o=>{s.length>1?s.forEach(r=>r(o)):s[0](o)}};Os=t("__VUE_INSTANCE_SETTERS__",i=>re=i),Rr=t("__VUE_SSR_SETTERS__",i=>Wn=i)}const qn=e=>{const t=re;return Os(e),e.scope.on(),()=>{e.scope.off(),Os(t)}},Uo=()=>{re&&re.scope.off(),Os(null)};function jl(e){return e.vnode.shapeFlag&4}let Wn=!1;function _d(e,t=!1,i=!1){t&&Rr(t);const{props:n,children:s}=e.vnode,o=jl(e);ed(e,n,o,t),rd(e,s,i||t);const r=o?wd(e,t):void 0;return t&&Rr(!1),r}function wd(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Hh);const{setup:n}=i;if(n){Ye();const s=e.setupContext=n.length>1?Cd(e):null,o=qn(e),r=$n(n,e,0,[e.props,s]),a=Ha(r);if(Ke(),o(),(a||e.sp)&&!Tn(e)&&vl(e),a){if(r.then(Uo,Uo),t)return r.then(l=>{zo(e,l)}).catch(l=>{js(l,e,0)});e.asyncDep=r}else zo(e,r)}else Vl(e)}function zo(e,t,i){gt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ft(t)&&(e.setupState=ll(t)),Vl(e)}function Vl(e,t,i){const n=e.type;e.render||(e.render=n.render||Ie);{const s=qn(e);Ye();try{Wh(e)}finally{Ke(),s()}}}const Sd={get(e,t){return Qt(e,"get",""),e[t]}};function Cd(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Sd),slots:e.slots,emit:e.emit,expose:t}}function Ks(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ll(ch(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in Pn)return Pn[i](e)},has(t,i){return i in t||i in Pn}})):e.proxy}function kd(e){return gt(e)&&"__vccOpts"in e}const ae=(e,t)=>gh(e,t,Wn),Md="3.5.27";let Lr;const jo=typeof window<"u"&&window.trustedTypes;if(jo)try{Lr=jo.createPolicy("vue",{createHTML:e=>e})}catch{}const Xl=Lr?e=>Lr.createHTML(e):e=>e,Td="http://www.w3.org/2000/svg",Pd="http://www.w3.org/1998/Math/MathML",Ue=typeof document<"u"?document:null,Vo=Ue&&Ue.createElement("template"),Ad={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t==="svg"?Ue.createElementNS(Td,e):t==="mathml"?Ue.createElementNS(Pd,e):i?Ue.createElement(e,{is:i}):Ue.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>Ue.createTextNode(e),createComment:e=>Ue.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ue.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,o){const r=i?i.previousSibling:t.lastChild;if(s&&(s===o||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===o||!(s=s.nextSibling)););else{Vo.innerHTML=Xl(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=Vo.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[r?r.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Ed=Symbol("_vtc");function Rd(e,t,i){const n=e[Ed];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Xo=Symbol("_vod"),Ld=Symbol("_vsh"),Od=Symbol(""),Id=/(?:^|;)\s*display\s*:/;function Dd(e,t,i){const n=e.style,s=zt(i);let o=!1;if(i&&!s){if(t)if(zt(t))for(const r of t.split(";")){const a=r.slice(0,r.indexOf(":")).trim();i[a]==null&&Ss(n,a,"")}else for(const r in t)i[r]==null&&Ss(n,r,"");for(const r in i)r==="display"&&(o=!0),Ss(n,r,i[r])}else if(s){if(t!==i){const r=n[Od];r&&(i+=";"+r),n.cssText=i,o=Id.test(i)}}else t&&e.removeAttribute("style");Xo in e&&(e[Xo]=o?n.display:"",e[Ld]&&(n.display="none"))}const Yo=/\s*!important$/;function Ss(e,t,i){if(st(i))i.forEach(n=>Ss(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Gd(e,t);Yo.test(i)?e.setProperty(Ri(n),i.replace(Yo,""),"important"):e[n]=i}}const Ko=["Webkit","Moz","ms"],lr={};function Gd(e,t){const i=lr[t];if(i)return i;let n=di(t);if(n!=="filter"&&n in e)return lr[t]=n;n=za(n);for(let s=0;s<Ko.length;s++){const o=Ko[s]+n;if(o in e)return lr[t]=o}return t}const $o="http://www.w3.org/1999/xlink";function qo(e,t,i,n,s,o=Hc(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS($o,t.slice(6,t.length)):e.setAttributeNS($o,t,i):i==null||o&&!Va(i)?e.removeAttribute(t):e.setAttribute(t,o?"":Ge(i)?String(i):i)}function Qo(e,t,i,n,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?Xl(i):i);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let r=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=Va(i):i==null&&a==="string"?(i="",r=!0):a==="number"&&(i=0,r=!0)}try{e[t]=i}catch{}r&&e.removeAttribute(s||t)}function oi(e,t,i,n){e.addEventListener(t,i,n)}function Fd(e,t,i,n){e.removeEventListener(t,i,n)}const Jo=Symbol("_vei");function Nd(e,t,i,n,s=null){const o=e[Jo]||(e[Jo]={}),r=o[t];if(n&&r)r.value=n;else{const[a,l]=Bd(t);if(n){const h=o[t]=Ud(n,s);oi(e,a,h,l)}else r&&(Fd(e,a,r,l),o[t]=void 0)}}const Zo=/(?:Once|Passive|Capture)$/;function Bd(e){let t;if(Zo.test(e)){t={};let n;for(;n=e.match(Zo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ri(e.slice(2)),t]}let cr=0;const Hd=Promise.resolve(),Wd=()=>cr||(Hd.then(()=>cr=0),cr=Date.now());function Ud(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Fe(zd(n,i.value),t,5,[n])};return i.value=e,i.attached=Wd(),i}function zd(e,t){if(st(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const ta=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,jd=(e,t,i,n,s,o)=>{const r=s==="svg";t==="class"?Rd(e,n,r):t==="style"?Dd(e,i,n):Ns(t)?qr(t)||Nd(e,t,i,n,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Vd(e,t,n,r))?(Qo(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&qo(e,t,n,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!zt(n))?Qo(e,di(t),n,o,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),qo(e,t,n,r))};function Vd(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&ta(t)&&gt(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ta(t)&&zt(i)?!1:t in e}const Ji=e=>{const t=e.props["onUpdate:modelValue"]||!1;return st(t)?i=>xs(t,i):t};function Xd(e){e.target.composing=!0}function ea(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Xe=Symbol("_assign");function ia(e,t,i){return t&&(e=e.trim()),i&&(e=Hs(e)),e}const wi={created(e,{modifiers:{lazy:t,trim:i,number:n}},s){e[Xe]=Ji(s);const o=n||s.props&&s.props.type==="number";oi(e,t?"change":"input",r=>{r.target.composing||e[Xe](ia(e.value,i,o))}),(i||o)&&oi(e,"change",()=>{e.value=ia(e.value,i,o)}),t||(oi(e,"compositionstart",Xd),oi(e,"compositionend",ea),oi(e,"change",ea))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:n,trim:s,number:o}},r){if(e[Xe]=Ji(r),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?Hs(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===i||s&&e.value.trim()===l)||(e.value=l))}},Yd={deep:!0,created(e,t,i){e[Xe]=Ji(i),oi(e,"change",()=>{const n=e._modelValue,s=Un(e),o=e.checked,r=e[Xe];if(st(n)){const a=Zr(n,s),l=a!==-1;if(o&&!l)r(n.concat(s));else if(!o&&l){const h=[...n];h.splice(a,1),r(h)}}else if(sn(n)){const a=new Set(n);o?a.add(s):a.delete(s),r(a)}else r(Yl(e,o))})},mounted:na,beforeUpdate(e,t,i){e[Xe]=Ji(i),na(e,t,i)}};function na(e,{value:t,oldValue:i},n){e._modelValue=t;let s;if(st(t))s=Zr(t,n.props.value)>-1;else if(sn(t))s=t.has(n.props.value);else{if(t===i)return;s=Kn(t,Yl(e,!0))}e.checked!==s&&(e.checked=s)}const oe={deep:!0,created(e,{value:t,modifiers:{number:i}},n){const s=sn(t);oi(e,"change",()=>{const o=Array.prototype.filter.call(e.options,r=>r.selected).map(r=>i?Hs(Un(r)):Un(r));e[Xe](e.multiple?s?new Set(o):o:o[0]),e._assigning=!0,We(()=>{e._assigning=!1})}),e[Xe]=Ji(n)},mounted(e,{value:t}){sa(e,t)},beforeUpdate(e,t,i){e[Xe]=Ji(i)},updated(e,{value:t}){e._assigning||sa(e,t)}};function sa(e,t){const i=e.multiple,n=st(t);if(!(i&&!n&&!sn(t))){for(let s=0,o=e.options.length;s<o;s++){const r=e.options[s],a=Un(r);if(i)if(n){const l=typeof a;l==="string"||l==="number"?r.selected=t.some(h=>String(h)===String(a)):r.selected=Zr(t,a)>-1}else r.selected=t.has(a);else if(Kn(Un(r),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Un(e){return"_value"in e?e._value:e.value}function Yl(e,t){const i=t?"_trueValue":"_falseValue";return i in e?e[i]:t}const Kd=["ctrl","shift","alt","meta"],$d={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Kd.some(i=>e[`${i}Key`]&&!t.includes(i))},qd=(e,t)=>{const i=e._withMods||(e._withMods={}),n=t.join(".");return i[n]||(i[n]=((s,...o)=>{for(let r=0;r<t.length;r++){const a=$d[t[r]];if(a&&a(s,t))return}return e(s,...o)}))},Qd=Zt({patchProp:jd},Ad);let ra;function Jd(){return ra||(ra=ad(Qd))}const Zd=((...e)=>{const t=Jd().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=eu(n);if(!s)return;const o=t._component;!gt(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const r=i(s,!1,tu(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),r},t});function tu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function eu(e){return zt(e)?document.querySelector(e):e}const iu="/DentMetric/assets/logo-BNlpBL9Q.png",nu=Math.PI/180;function su(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Mi=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},z={_global:Mi,version:"10.2.0",isBrowser:su(),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle(e){return z.angleDeg?e*nu:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return z.DD.isDragging},isTransforming(){var e,t;return(t=(e=z.Transformer)===null||e===void 0?void 0:e.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!z.DD.node},releaseCanvasOnDestroy:!0,document:Mi.document,_injectGlobal(e){typeof Mi.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Mi.Konva=e}},Wt=e=>{z[e.prototype.getClassName()]=e};z._injectGlobal(z);const ru=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,oa=()=>{if(typeof document>"u")throw new Error(ru)};class ge{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ge(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const i=this.m;return{x:i[0]*t.x+i[2]*t.y+i[4],y:i[1]*t.x+i[3]*t.y+i[5]}}translate(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this}scale(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this}rotate(t){const i=Math.cos(t),n=Math.sin(t),s=this.m[0]*i+this.m[2]*n,o=this.m[1]*i+this.m[3]*n,r=this.m[0]*-n+this.m[2]*i,a=this.m[1]*-n+this.m[3]*i;return this.m[0]=s,this.m[1]=o,this.m[2]=r,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,i){const n=this.m[0]+this.m[2]*i,s=this.m[1]+this.m[3]*i,o=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=s,this.m[2]=o,this.m[3]=r,this}multiply(t){const i=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],o=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=o,this.m[4]=r,this.m[5]=a,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,n=-this.m[1]*t,s=-this.m[2]*t,o=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=o,this.m[4]=r,this.m[5]=a,this}getMatrix(){return this.m}decompose(){const t=this.m[0],i=this.m[1],n=this.m[2],s=this.m[3],o=this.m[4],r=this.m[5],a=t*s-i*n,l={x:o,y:r,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||i!=0){const h=Math.sqrt(t*t+i*i);l.rotation=i>0?Math.acos(t/h):-Math.acos(t/h),l.scaleX=h,l.scaleY=a/h,l.skewX=(t*n+i*s)/a,l.skewY=0}else if(n!=0||s!=0){const h=Math.sqrt(n*n+s*s);l.rotation=Math.PI/2-(s>0?Math.acos(-n/h):-Math.acos(n/h)),l.scaleX=a/h,l.scaleY=h,l.skewX=0,l.skewY=(t*n+i*s)/a}return l.rotation=C._getRotation(l.rotation),l}}const ou="[object Array]",au="[object Number]",lu="[object String]",cu="[object Boolean]",hu=Math.PI/180,du=180/Math.PI,cn="#",uu="",fu="0",gu="Konva warning: ",aa="Konva error: ",pu="rgb(",hr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},mu=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let ss=[],hn=null;const bu=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,16)},C={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===ou},_isNumber(e){return Object.prototype.toString.call(e)===au&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===lu},_isBoolean(e){return Object.prototype.toString.call(e)===cu},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;const t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){ss.push(e),ss.length===1&&bu(function(){const t=ss;ss=[],t.forEach(function(i){i()})})},createCanvasElement(){oa();const e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return oa(),document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){const i=C.createImageElement();i.onload=function(){t(i)},i.src=e},_rgbToHex(e,t,i){return((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},_hexToRgb(e){e=e.replace(cn,uu);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let e=(Math.random()*16777215<<0).toString(16);for(;e.length<6;)e=fu+e;return cn+e},isCanvasFarblingActive(){if(hn!==null)return hn;if(typeof document>"u")return hn=!1,!1;const e=this.createCanvasElement();e.width=10,e.height=10;const t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const i=t.getImageData(0,0,10,10).data;let n=!1;for(let s=0;s<100;s++)if(i[s*4]!==40||i[s*4+1]!==40||i[s*4+2]!==40||i[s*4+3]!==255){n=!0;break}return hn=n,this.releaseCanvas(e),hn},getHitColor(){const e=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(e):e},getHitColorKey(e,t,i){return this.isCanvasFarblingActive()&&(e=Math.round(e/5)*5,t=Math.round(t/5)*5,i=Math.round(i/5)*5),cn+this._rgbToHex(e,t,i)},getSnappedHexColor(e){const t=this._hexToRgb(e);return cn+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(e){let t;return e in hr?(t=hr[e],{r:t[0],g:t[1],b:t[2]}):e[0]===cn?this._hexToRgb(e.substring(1)):e.substr(0,4)===pu?(t=mu.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",C._namedColorToRBA(e)||C._hex3ColorToRGBA(e)||C._hex4ColorToRGBA(e)||C._hex6ColorToRGBA(e)||C._hex8ColorToRGBA(e)||C._rgbColorToRGBA(e)||C._rgbaColorToRGBA(e)||C._hslColorToRGBA(e)},_namedColorToRBA(e){const t=hr[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];const t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];const t=e.split(/ *, */).map((i,n)=>i.slice(-1)==="%"?n===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if(e[0]==="#"&&e.length===9)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if(e[0]==="#"&&e.length===5)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),n=Number(i[0])/360,s=Number(i[1])/100,o=Number(i[2])/100;let r,a,l;if(s===0)return l=o*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};o<.5?r=o*(1+s):r=o+s-o*s;const h=2*o-r,c=[0,0,0];for(let d=0;d<3;d++)a=n+1/3*-(d-1),a<0&&a++,a>1&&a--,6*a<1?l=h+(r-h)*6*a:2*a<1?l=r:3*a<2?l=h+(r-h)*(2/3-a)*6:l=h,c[d]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){const t={};for(const i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*hu},radToDeg(e){return e*du},_degToRad(e){return C.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),C.degToRad(e)},_radToDeg(e){return C.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),C.radToDeg(e)},_getRotation(e){return z.angleDeg?C.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(aa+e)},error(e){console.error(aa+e)},warn(e){z.showWarnings&&console.warn(gu+e)},each(e,t){for(const i in e)t(i,e[i])},_inRange(e,t,i){return t<=e&&e<i},_getProjectionToSegment(e,t,i,n,s,o){let r,a,l;const h=(e-i)*(e-i)+(t-n)*(t-n);if(h==0)r=e,a=t,l=(s-i)*(s-i)+(o-n)*(o-n);else{const c=((s-e)*(i-e)+(o-t)*(n-t))/h;c<0?(r=e,a=t,l=(e-s)*(e-s)+(t-o)*(t-o)):c>1?(r=i,a=n,l=(i-s)*(i-s)+(n-o)*(n-o)):(r=e+c*(i-e),a=t+c*(n-t),l=(r-s)*(r-s)+(a-o)*(a-o))}return[r,a,l]},_getProjectionToLine(e,t,i){const n=C.cloneObject(e);let s=Number.MAX_VALUE;return t.forEach(function(o,r){if(!i&&r===t.length-1)return;const a=t[(r+1)%t.length],l=C._getProjectionToSegment(o.x,o.y,a.x,a.y,e.x,e.y),h=l[0],c=l[1],d=l[2];d<s&&(n.x=h,n.y=c,s=d)}),n},_prepareArrayForTween(e,t,i){const n=[],s=[];if(e.length>t.length){const r=t;t=e,e=r}for(let r=0;r<e.length;r+=2)n.push({x:e[r],y:e[r+1]});for(let r=0;r<t.length;r+=2)s.push({x:t[r],y:t[r+1]});const o=[];return s.forEach(function(r){const a=C._getProjectionToLine(r,n,i);o.push(a.x),o.push(a.y)}),o},_prepareToStringify(e){let t;e.visitedByCircularReferenceRemoval=!0;for(const i in e)if(e.hasOwnProperty(i)&&e[i]&&typeof e[i]=="object"){if(t=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||C._isElement(e[i]))if(t.configurable)delete e[i];else return null;else if(C._prepareToStringify(e[i])===null)if(t.configurable)delete e[i];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const i in t)e[i]=t[i];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){z.releaseCanvasOnDestroy&&e.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(e,t,i,n){let s=t<0?t:0,o=i<0?i:0;t=Math.abs(t),i=Math.abs(i);let r=0,a=0,l=0,h=0;typeof n=="number"?r=a=l=h=Math.min(n,t/2,i/2):(r=Math.min(n[0]||0,t/2,i/2),a=Math.min(n[1]||0,t/2,i/2),h=Math.min(n[2]||0,t/2,i/2),l=Math.min(n[3]||0,t/2,i/2)),e.moveTo(s+r,o),e.lineTo(s+t-a,o),e.arc(s+t-a,o+a,a,Math.PI*3/2,0,!1),e.lineTo(s+t,o+i-h),e.arc(s+t-h,o+i-h,h,0,Math.PI/2,!1),e.lineTo(s+l,o+i),e.arc(s+l,o+i-l,l,Math.PI/2,Math.PI,!1),e.lineTo(s,o+r),e.arc(s+r,o+r,r,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(e,t,i,n,s){n=Math.abs(n);for(let o=0;o<i;o++){const r=t[(o-1+i)%i],a=t[o],l=t[(o+1)%i],h={x:a.x-r.x,y:a.y-r.y},c={x:l.x-a.x,y:l.y-a.y},d=Math.hypot(h.x,h.y),u=Math.hypot(c.x,c.y);let f;typeof s=="number"?f=s:f=o<s.length?s[o]:0,f=n*Math.cos(Math.PI/i)*Math.min(1,f/n*2);const m={x:h.x/d,y:h.y/d},_={x:c.x/u,y:c.y/u},y={x:a.x-m.x*f,y:a.y-m.y*f},w={x:a.x+_.x*f,y:a.y+_.y*f};o===0?e.moveTo(y.x,y.y):e.lineTo(y.x,y.y),e.arcTo(a.x,a.y,w.x,w.y,f)}}};function xu(e){const t=[],i=e.length,n=C;for(let s=0;s<i;s++){let o=e[s];n._isNumber(o)?o=Math.round(o*1e3)/1e3:n._isString(o)||(o=o+""),t.push(o)}return t}const la=",",vu="(",yu=")",_u="([",wu="])",Su=";",Cu="()",ku="=",ca=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Mu=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],Tu=100;let rs=null;function ha(){if(rs!==null)return rs;try{const t=C.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(rs=!1,!1)}catch{return rs=!1,!1}}class $s{constructor(t){this.canvas=t,z.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){let n=this.traceArr,s=n.length,o="",r,a,l,h;for(r=0;r<s;r++)a=n[r],l=a.method,l?(h=a.args,o+=l,t?o+=Cu:C._isArray(h[0])?o+=_u+h.join(la)+wu:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),o+=vu+h.join(la)+yu)):(o+=a.property,t||(o+=ku+a.val)),o+=Su;return o}clearTrace(){this.traceArr=[]}_trace(t){let i=this.traceArr,n;i.push(t),n=i.length,n>=Tu&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){const i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}_applyMiterLimit(t){const i=t.attrs.miterLimit;i!=null&&this.setAttr("miterLimit",i)}setAttr(t,i){this._context[t]=i}arc(t,i,n,s,o,r){this._context.arc(t,i,n,s,o,r)}arcTo(t,i,n,s,o){this._context.arcTo(t,i,n,s,o)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,n,s,o,r){this._context.bezierCurveTo(t,i,n,s,o,r)}clearRect(t,i,n,s){this._context.clearRect(t,i,n,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){const n=arguments;if(n.length===2)return this._context.createImageData(t,i);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,n,s){return this._context.createLinearGradient(t,i,n,s)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,n,s,o,r){return this._context.createRadialGradient(t,i,n,s,o,r)}drawImage(t,i,n,s,o,r,a,l,h){const c=arguments,d=this._context;c.length===3?d.drawImage(t,i,n):c.length===5?d.drawImage(t,i,n,s,o):c.length===9&&d.drawImage(t,i,n,s,o,r,a,l,h)}ellipse(t,i,n,s,o,r,a,l){this._context.ellipse(t,i,n,s,o,r,a,l)}isPointInPath(t,i,n,s){return n?this._context.isPointInPath(n,t,i,s):this._context.isPointInPath(t,i,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,n,s){this._context.fillRect(t,i,n,s)}strokeRect(t,i,n,s){this._context.strokeRect(t,i,n,s)}fillText(t,i,n,s){s?this._context.fillText(t,i,n,s):this._context.fillText(t,i,n)}measureText(t){return this._context.measureText(t)}getImageData(t,i,n,s){return this._context.getImageData(t,i,n,s)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,n,s){this._context.rect(t,i,n,s)}roundRect(t,i,n,s,o){this._context.roundRect(t,i,n,s,o)}putImageData(t,i,n){this._context.putImageData(t,i,n)}quadraticCurveTo(t,i,n,s){this._context.quadraticCurveTo(t,i,n,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,n,s,o,r){this._context.setTransform(t,i,n,s,o,r)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,n,s){this._context.strokeText(t,i,n,s)}transform(t,i,n,s,o,r){this._context.transform(t,i,n,s,o,r)}translate(t,i){this._context.translate(t,i)}_enableTrace(){let t=this,i=ca.length,n=this.setAttr,s,o;const r=function(a){let l=t[a],h;t[a]=function(){return o=xu(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:a,args:o}),h}};for(s=0;s<i;s++)r(ca[s]);t.setAttr=function(){n.apply(t,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:a,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}}Mu.forEach(function(e){Object.defineProperty($s.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Pu extends $s{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){const i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),n=t.getFillPriority();if(i&&n==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(t);return}const o=t.getFillLinearGradientColorStops();if(o&&n==="linear-gradient"){this._fillLinearGradient(t);return}const r=t.getFillRadialGradientColorStops();if(r&&n==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):s?this._fillPattern(t):o?this._fillLinearGradient(t):r&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(let r=0;r<s.length;r+=2)o.addColorStop(s[r],s[r+1]);this.setAttr("strokeStyle",o)}}_stroke(t){const i=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var i,n,s;const o=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",r=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,a=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,d=l.y*h;this.setAttr("shadowColor",o),this.setAttr("shadowBlur",r*Math.min(Math.abs(c),Math.abs(d))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*d)}}class Au extends $s{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const i=t.getStrokeScaleEnabled();if(!i){this.save();const o=this.getCanvas().getPixelRatio();this.setTransform(o,0,0,o,0,0)}this._applyLineCap(t);const n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}let os;function Eu(){if(os)return os;const e=C.createCanvasElement(),t=e.getContext("2d");return os=(function(){const i=z._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n})(),C.releaseCanvas(e),os}class go{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(t||{}).pixelRatio||z.pixelRatio||Eu();this.pixelRatio=n,this._canvas=C.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(s){return C.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class ai extends go{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Pu(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class po extends go{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Au(this),this.setSize(t.width,t.height)}}const kt={get isDragging(){let e=!1;return kt._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return kt._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];kt._dragElements.forEach((i,n)=>{const{node:s}=i,o=s.getStage();o.setPointersPositions(e),i.pointerId===void 0&&(i.pointerId=C._getFirstPointerId(e));const r=o._changedPointerPositions.find(a=>a.id===i.pointerId);if(r){if(i.dragStatus!=="dragging"){const a=s.dragDistance();if(Math.max(Math.abs(r.x-i.startPointerPos.x),Math.abs(r.y-i.startPointerPos.y))<a||(s.startDrag({evt:e}),!s.isDragging()))return}s._setDragPosition(e,i),t.push(s)}}),t.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:e},!0)})},_endDragBefore(e){const t=[];kt._dragElements.forEach(i=>{const{node:n}=i,s=n.getStage();if(e&&s.setPointersPositions(e),!s._changedPointerPositions.find(a=>a.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(kt.justDragged=!0,z._mouseListenClick=!1,z._touchListenClick=!1,z._pointerListenClick=!1,i.dragStatus="stopped");const r=i.node.getLayer()||i.node instanceof z.Stage&&i.node;r&&t.indexOf(r)===-1&&t.push(r)}),t.forEach(i=>{i.draw()})},_endDragAfter(e){kt._dragElements.forEach((t,i)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&kt._dragElements.delete(i)})}};z.isBrowser&&(window.addEventListener("mouseup",kt._endDragBefore,!0),window.addEventListener("touchend",kt._endDragBefore,!0),window.addEventListener("touchcancel",kt._endDragBefore,!0),window.addEventListener("mousemove",kt._drag),window.addEventListener("touchmove",kt._drag),window.addEventListener("mouseup",kt._endDragAfter,!1),window.addEventListener("touchend",kt._endDragAfter,!1),window.addEventListener("touchcancel",kt._endDragAfter,!1));function gi(e){return C._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||C._isBoolean(e)?e:Object.prototype.toString.call(e)}function Kl(e){return e>255?255:e<0?0:Math.round(e)}function N(){if(z.isUnminified)return function(e,t){return C._isNumber(e)||C.warn(gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function qs(e){if(z.isUnminified)return function(t,i){let n=C._isNumber(t),s=C._isArray(t)&&t.length==e;return!n&&!s&&C.warn(gi(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function mo(){if(z.isUnminified)return function(e,t){return C._isNumber(e)||e==="auto"||C.warn(gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function Li(){if(z.isUnminified)return function(e,t){return C._isString(e)||C.warn(gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function $l(){if(z.isUnminified)return function(e,t){const i=C._isString(e),n=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||n||C.warn(gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function Ru(){if(z.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(C._isArray(e)?e.forEach(function(n){C._isNumber(n)||C.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):C.warn(gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function Pe(){if(z.isUnminified)return function(e,t){return e===!0||e===!1||C.warn(gi(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function Lu(e){if(z.isUnminified)return function(t,i){return t==null||C.isObject(t)||C.warn(gi(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}const dn="get",un="set",x={addGetterSetter(e,t,i,n,s){x.addGetter(e,t,i),x.addSetter(e,t,n,s),x.addOverloadedGetterSetter(e,t)},addGetter(e,t,i){const n=dn+C._capitalize(t);e.prototype[n]=e.prototype[n]||function(){const s=this.attrs[t];return s===void 0?i:s}},addSetter(e,t,i,n){const s=un+C._capitalize(t);e.prototype[s]||x.overWriteSetter(e,t,i,n)},overWriteSetter(e,t,i,n){const s=un+C._capitalize(t);e.prototype[s]=function(o){return i&&o!==void 0&&o!==null&&(o=i.call(this,o,t)),this._setAttr(t,o),n&&n.call(this),this}},addComponentsGetterSetter(e,t,i,n,s){const o=i.length,r=C._capitalize,a=dn+r(t),l=un+r(t);e.prototype[a]=function(){const c={};for(let d=0;d<o;d++){const u=i[d];c[u]=this.getAttr(t+r(u))}return c};const h=Lu(i);e.prototype[l]=function(c){const d=this.attrs[t];n&&(c=n.call(this,c,t)),h&&h.call(this,c,t);for(const u in c)c.hasOwnProperty(u)&&this._setAttr(t+r(u),c[u]);return c||i.forEach(u=>{this._setAttr(t+r(u),void 0)}),this._fireChangeEvent(t,d,c),s&&s.call(this),this},x.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){const i=C._capitalize(t),n=un+i,s=dn+i;e.prototype[t]=function(){return arguments.length?(this[n](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(e,t,i,n){C.error("Adding deprecated "+t);const s=dn+C._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[s]=function(){C.error(o);const r=this.attrs[t];return r===void 0?i:r},x.addSetter(e,t,n,function(){C.error(o)}),x.addOverloadedGetterSetter(e,t)},backCompat(e,t){C.each(t,function(i,n){const s=e.prototype[n],o=dn+C._capitalize(i),r=un+C._capitalize(i);function a(){s.apply(this,arguments),C.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}e.prototype[i]=a,e.prototype[o]=a,e.prototype[r]=a})},afterSetFilter(){this._filterUpToDate=!1}};function Ou(e){const t=/(\w+)\(([^)]+)\)/g;let i;for(;(i=t.exec(e))!==null;){const[,n,s]=i;switch(n){case"blur":{const o=parseFloat(s.replace("px",""));return function(r){this.blurRadius(o*.5);const a=z.Filters;a&&a.Blur&&a.Blur.call(this,r)}}case"brightness":{const o=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(r){this.brightness(o);const a=z.Filters;a&&a.Brightness&&a.Brightness.call(this,r)}}case"contrast":{const o=parseFloat(s);return function(r){const a=100*(Math.sqrt(o)-1);this.contrast(a);const l=z.Filters;l&&l.Contrast&&l.Contrast.call(this,r)}}case"grayscale":return function(o){const r=z.Filters;r&&r.Grayscale&&r.Grayscale.call(this,o)};case"sepia":return function(o){const r=z.Filters;r&&r.Sepia&&r.Sepia.call(this,o)};case"invert":return function(o){const r=z.Filters;r&&r.Invert&&r.Invert.call(this,o)};default:C.warn(`CSS filter "${n}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const Cs="absoluteOpacity",da="allEventListeners",He="absoluteTransform",ua="absoluteScale",Si="canvas",Iu="Change",Du="children",Gu="konva",Or="listening",Fu="mouseenter",Nu="mouseleave",Bu="pointerenter",Hu="pointerleave",Wu="touchenter",Uu="touchleave",fa="set",ga="Shape",ks=" ",pa="stage",ei="transform",zu="Stage",Ir="visible",ju=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(ks);let Vu=1;class F{constructor(t){this._id=Vu++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===ei||t===He)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){let n=this._cache.get(t);return(n===void 0||(t===ei||t===He)&&n.dirty===!0)&&(n=i.call(this),this._cache.set(t,n)),n}_calculate(t,i,n){if(!this._attachedDepsListeners.get(t)){const s=i.map(o=>o+"Change.konva").join(ks);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(Si)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===He&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Si)){const{scene:t,filter:i,hit:n}=this._cache.get(Si);C.releaseCanvas(t._canvas,i._canvas,n._canvas),this._cache.delete(Si)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const i=t||{};let n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(i.width||n.width),o=Math.ceil(i.height||n.height),r=i.pixelRatio,a=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,c=i.drawBorder||!1,d=i.hitCanvasPixelRatio||1;if(!s||!o){C.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const u=Math.abs(Math.round(n.x)-a)>.5?1:0,f=Math.abs(Math.round(n.y)-l)>.5?1:0;s+=h*2+u,o+=h*2+f,a-=h,l-=h;const g=new ai({pixelRatio:r,width:s,height:o}),m=new ai({pixelRatio:r,width:0,height:0,willReadFrequently:!0}),_=new po({pixelRatio:d,width:s,height:o}),y=g.getContext(),w=_.getContext(),M=new ai({width:g.width/g.pixelRatio+Math.abs(a),height:g.height/g.pixelRatio+Math.abs(l),pixelRatio:g.pixelRatio}),k=M.getContext();return _.isCache=!0,g.isCache=!0,this._cache.delete(Si),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(g.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),y.save(),w.save(),k.save(),y.translate(-a,-l),w.translate(-a,-l),k.translate(-a,-l),M.x=a,M.y=l,this._isUnderCache=!0,this._clearSelfAndDescendantCache(Cs),this._clearSelfAndDescendantCache(ua),this.drawScene(g,this,M),this.drawHit(_,this),this._isUnderCache=!1,y.restore(),w.restore(),c&&(y.save(),y.beginPath(),y.rect(0,0,s,o),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),C.releaseCanvas(M._canvas),this._cache.set(Si,{scene:g,filter:m,hit:_,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Si)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){const n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,o=1/0,r=-1/0,a=-1/0;const l=this.getAbsoluteTransform(i);return n.forEach(function(h){const c=l.point(h);s===void 0&&(s=r=c.x,o=a=c.y),s=Math.min(s,c.x),o=Math.min(o,c.y),r=Math.max(r,c.x),a=Math.max(a,c.y)}),{x:s,y:o,width:r-s,height:a-o}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);const n=this._getCachedSceneCanvas(),s=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/s,n.height/s),t.restore()}_drawCachedHitCanvas(t){const i=this._getCanvasCache(),n=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,o=s.getContext(),r,a,l,h;if(!t||t.length===0)return n;if(this._filterUpToDate)return s;let c=!0;for(let u=0;u<t.length;u++)if(typeof t[u]=="string"&&ha(),typeof t[u]!="string"||!ha()){c=!1;break}const d=n.pixelRatio;if(s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio),c){const u=t.join(" ");return o.save(),o.setAttr("filter",u),o.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),o.restore(),this._filterUpToDate=!0,s}try{for(r=t.length,o.clear(),o.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),a=o.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<r;l++)h=t[l],typeof h=="string"&&(h=Ou(h)),h.call(this,a),o.putImageData(a,0,0)}catch(u){C.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,i){if(this._cache&&this._cache.delete(da),arguments.length===3)return this._delegate.apply(this,arguments);const n=t.split(ks);for(let s=0;s<n.length;s++){const r=n[s].split("."),a=r[0],l=r[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:i})}return this}off(t,i){let n=(t||"").split(ks),s=n.length,o,r,a,l,h,c;if(this._cache&&this._cache.delete(da),!t)for(r in this.eventListeners)this._off(r);for(o=0;o<s;o++)if(a=n[o],l=a.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(r in this.eventListeners)this._off(r,c,i);return this}dispatchEvent(t){const i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(n){i.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,n){const s=this;this.on(t,function(o){const r=o.target.findAncestors(i,!0,s);for(let a=0;a<r.length;a++)o=C.cloneObject(o),o.currentTarget=r[a],n.call(r[a],o)})}remove(){return this.isDragging()&&this.stopDrag(),kt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(He),this._clearSelfAndDescendantCache(Cs),this._clearSelfAndDescendantCache(ua),this._clearSelfAndDescendantCache(pa),this._clearSelfAndDescendantCache(Ir),this._clearSelfAndDescendantCache(Or)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const i="get"+C._capitalize(t);return C._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){let t=this.getParent(),i=[];for(;t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let i,n;if(!t)return this;for(i in t)i!==Du&&(n=fa+C._capitalize(i),C._isFunction(this[n])?this[n](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Or,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(Ir,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);const n=this.getLayer();let s=!1;kt._dragElements.forEach(r=>{r.dragStatus==="dragging"&&(r.node.nodeType==="Stage"||r.node.getLayer()===n)&&(s=!0)});const o=!i&&!z.hitOnDragEnabled&&(s||z.isTransforming());return this.isListening()&&this.isVisible()&&!o}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),i=this,n=0,s,o,r,a;function l(c){for(s=[],o=c.length,r=0;r<o;r++)a=c[r],n++,a.nodeType!==ga&&(s=s.concat(a.getChildren().slice())),a._id===i._id&&(r=o);s.length>0&&s[0].getDepth()<=t&&l(s)}const h=this.getStage();return i.nodeType!==zu&&h&&l(h.getChildren()),n}getDepth(){let t=0,i=this.parent;for(;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(ei),this._clearSelfAndDescendantCache(He)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const i=t.getPointerPosition();if(!i)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(i)}getAbsolutePosition(t){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),o=new ge,r=this.offset();return o.m=s.slice(),o.translate(r.x,r.y),o.getTranslation()}setAbsolutePosition(t){const{x:i,y:n,...s}=this._clearTransform();this.attrs.x=i,this.attrs.y=n,this._clearCache(ei);const o=this._getAbsoluteTransform().copy();return o.invert(),o.translate(t.x,t.y),t={x:this.attrs.x+o.getTranslation().x,y:this.attrs.y+o.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(ei),this._clearSelfAndDescendantCache(He),this}_setTransform(t){let i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let i=t.x,n=t.y,s=this.x(),o=this.y();return i!==void 0&&(s+=i),n!==void 0&&(o+=n),this.setPosition({x:s,y:o}),this}_eachAncestorReverse(t,i){let n=[],s=this.getParent(),o,r;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(o=n.length,r=0;r<o;r++)t(n[r])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return C.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return C.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return C.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return C.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return C.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&C.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Cs,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),i,n,s,o,r;const a={attrs:{},className:this.getClassName()};for(i in t)n=t[i],r=C.isObject(n)&&!C._isPlainObject(n)&&!C._isArray(n),!r&&(s=typeof this[i]=="function"&&this[i],delete t[i],o=s?s.call(this):null,t[i]=n,o!==n&&(a.attrs[i]=n));return C._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,n){const s=[];i&&this._isMatch(t)&&s.push(this);let o=this.parent;for(;o;){if(o===n)return s;o._isMatch(t)&&s.push(o),o=o.parent}return s}isAncestorOf(t){return!1}findAncestor(t,i,n){return this.findAncestors(t,i,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let i=t.replace(/ /g,"").split(","),n=i.length,s,o;for(s=0;s<n;s++)if(o=i[s],C.isValidSelector(o)||(C.warn('Selector "'+o+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),C.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),C.warn("Konva is awesome, right?")),o.charAt(0)==="#"){if(this.id()===o.slice(1))return!0}else if(o.charAt(0)==="."){if(this.hasName(o.slice(1)))return!0}else if(this.className===o||this.nodeType===o)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(pa,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,i={},n){return i.target=i.target||this,n?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(He,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let i;if(t)return i=new ge,this._eachAncestorReverse(function(n){const s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;{i=this._cache.get(He)||new ge,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();const n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,o=this.attrs.y||0,r=this.attrs.offsetX||0,a=this.attrs.offsetY||0;i.translate(s-r,o-a)}return i.dirty=!1,i}}getAbsoluteScale(t){let i=this;for(;i;)i._isUnderCache&&(t=i),i=i.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(ei,this._getTransform)}_getTransform(){var t,i;const n=this._cache.get(ei)||new ge;n.reset();const s=this.x(),o=this.y(),r=z.getAngle(this.rotation()),a=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return(s!==0||o!==0)&&n.translate(s,o),r!==0&&n.rotate(r),(h!==0||c!==0)&&n.skew(h,c),(a!==1||l!==1)&&n.scale(a,l),(d!==0||u!==0)&&n.translate(-1*d,-1*u),n.dirty=!1,n}clone(t){let i=C.cloneObject(this.attrs),n,s,o,r,a;for(n in t)i[n]=t[n];const l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],o=s.length,r=0;r<o;r++)a=s[r],a.name.indexOf(Gu)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(a));return l}_toKonvaCanvas(t){t=t||{};const i=this.getClientRect(),n=this.getStage(),s=t.x!==void 0?t.x:Math.floor(i.x),o=t.y!==void 0?t.y:Math.floor(i.y),r=t.pixelRatio||1,a=new ai({width:t.width||Math.ceil(i.width)||(n?n.width():0),height:t.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:r}),l=a.getContext(),h=new ai({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(o),pixelRatio:a.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||o)&&l.translate(-1*s,-1*o),this.drawScene(a,void 0,h),l.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const i=t.mimeType||null,n=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(i,n);return t.callback&&t.callback(s),s}toImage(t){return new Promise((i,n)=>{try{const s=t?.callback;s&&delete t.callback,C._urlToImage(this.toDataURL(t),function(o){i(o),s?.(o)})}catch(s){n(s)}})}toBlob(t){return new Promise((i,n)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(o=>{i(o),s?.(o)},t?.mimeType,t?.quality)}catch(s){n(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():z.dragDistance}_off(t,i,n){let s=this.eventListeners[t],o,r,a;for(o=0;o<s.length;o++)if(r=s[o].name,a=s[o].handler,(r!=="konva"||i==="konva")&&(!i||r===i)&&(!n||n===a)){if(s.splice(o,1),s.length===0){delete this.eventListeners[t];break}o--}}_fireChangeEvent(t,i,n){this._fire(t+Iu,{oldVal:i,newVal:n})}addName(t){if(!this.hasName(t)){const i=this.name(),n=i?i+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const i=this.name();return i?(i||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const i=(this.name()||"").split(/\s/g),n=i.indexOf(t);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(t,i){const n=this[fa+C._capitalize(t)];return C._isFunction(n)?n.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(z.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,i){const n=this.attrs[t];n===i&&!C.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,i),this._requestDraw())}_setComponentAttr(t,i,n){let s;n!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=n,this._fireChangeEvent(t,s,n))}_fireAndBubble(t,i,n){i&&this.nodeType===ga&&(i.target=this);const s=[Fu,Nu,Bu,Hu,Wu,Uu];if(!(s.indexOf(t)!==-1&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(t,i);const r=s.indexOf(t)!==-1&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,i,n):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,n;const{nodeType:s}=this,o=F.protoListenerMap.get(s)||{};let r=o?.[t];if(r===void 0){r=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(n=(i=a.eventListeners)===null||i===void 0?void 0:i[t])!==null&&n!==void 0?n:[];r.push(...l),a=Object.getPrototypeOf(a)}o[t]=r,F.protoListenerMap.set(s,o)}return r}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const n=this._getProtoListeners(t);if(n)for(let o=0;o<n.length;o++)n[o].handler.call(this,i);const s=this.eventListeners[t];if(s)for(let o=0;o<s.length;o++)s[o].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const i=t?t.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition();if(!n)return;const o=n._getPointerById(i)||n._changedPointerPositions[0]||s;kt._dragElements.set(this._id,{node:this,startPointerPos:o,offset:{x:o.x-s.x,y:o.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){kt._dragElements.has(this._id)||this._createDragElement(t);const n=kt._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const n=this.getStage()._getPointerById(i.pointerId);if(!n)return;let s={x:n.x-i.offset.x,y:n.y-i.offset.y};const o=this.dragBoundFunc();if(o!==void 0){const r=o.call(this,s,t);r?s=r:C.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const i=kt._dragElements.get(this._id);i&&(i.dragStatus="stopped"),kt._endDragBefore(t),kt._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=kt._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||z.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;kt._dragElements.forEach(o=>{this.isAncestorOf(o.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const i=kt._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&kt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return C.haveIntersection(n,this.getClientRect())}static create(t,i){return C._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){let n=F.prototype.getClassName.call(t),s=t.children,o,r,a;i&&(t.attrs.container=i),z[n]||(C.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=z[n];if(o=new l(t.attrs),s)for(r=s.length,a=0;a<r;a++)o.add(F._createNode(s[a]));return o}}F.protoListenerMap=new Map;F.prototype.nodeType="Node";F.prototype._attrsAffectingSize=[];F.prototype.eventListeners={};F.prototype.on.call(F.prototype,ju,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(ei),this._clearSelfAndDescendantCache(He)});F.prototype.on.call(F.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Ir)});F.prototype.on.call(F.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Or)});F.prototype.on.call(F.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Cs)});const Lt=x.addGetterSetter;Lt(F,"zIndex");Lt(F,"absolutePosition");Lt(F,"position");Lt(F,"x",0,N());Lt(F,"y",0,N());Lt(F,"globalCompositeOperation","source-over",Li());Lt(F,"opacity",1,N());Lt(F,"name","",Li());Lt(F,"id","",Li());Lt(F,"rotation",0,N());x.addComponentsGetterSetter(F,"scale",["x","y"]);Lt(F,"scaleX",1,N());Lt(F,"scaleY",1,N());x.addComponentsGetterSetter(F,"skew",["x","y"]);Lt(F,"skewX",0,N());Lt(F,"skewY",0,N());x.addComponentsGetterSetter(F,"offset",["x","y"]);Lt(F,"offsetX",0,N());Lt(F,"offsetY",0,N());Lt(F,"dragDistance",void 0,N());Lt(F,"width",0,N());Lt(F,"height",0,N());Lt(F,"listening",!0,Pe());Lt(F,"preventDefault",!0,Pe());Lt(F,"filters",void 0,function(e){return this._filterUpToDate=!1,e});Lt(F,"visible",!0,Pe());Lt(F,"transformsEnabled","all",Li());Lt(F,"size");Lt(F,"dragBoundFunc");Lt(F,"draggable",!1,Pe());x.backCompat(F,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class me extends F{constructor(){super(...arguments),this.children=[]}getChildren(t){const i=this.children||[];return t?i.filter(t):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let n=0;n<t.length;n++)this.add(t[n]);return this}const i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){const n=[];return this._descendants(s=>{const o=s._isMatch(t);return o&&n.push(s),!!(o&&i)}),n}_descendants(t){let i=!1;const n=this.getChildren();for(const s of n){if(i=t(s),i)return!0;if(s.hasChildren()&&(i=s._descendants(t),i))return!0}return!1}toObject(){const t=F.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){let i=t.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){const i=F.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(t){const i=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(t)&&i.push(n)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(t,i,n){const s=this.getLayer(),o=t||s&&s.getCanvas(),r=o&&o.getContext(),a=this._getCanvasCache(),l=a&&a.scene,h=o&&o.isCache;if(!this.isVisible()&&!h)return this;if(l){r.save();const c=this.getAbsoluteTransform(i).getMatrix();r.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",o,i,n);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;const n=this.getLayer(),s=t||n&&n.hitCanvas,o=s&&s.getContext(),r=this._getCanvasCache();if(r&&r.hit){o.save();const l=this.getAbsoluteTransform(i).getMatrix();o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(t,i,n,s){var o;const r=i&&i.getContext(),a=this.clipWidth(),l=this.clipHeight(),h=this.clipFunc(),c=typeof a=="number"&&typeof l=="number"||h,d=n===this;if(c){r.save();const f=this.getAbsoluteTransform(n);let g=f.getMatrix();r.transform(g[0],g[1],g[2],g[3],g[4],g[5]),r.beginPath();let m;if(h)m=h.call(this,r,this);else{const _=this.clipX(),y=this.clipY();r.rect(_||0,y||0,a,l)}r.clip.apply(r,m),g=f.copy().invert().getMatrix(),r.transform(g[0],g[1],g[2],g[3],g[4],g[5])}const u=!d&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";u&&(r.save(),r._applyGlobalCompositeOperation(this)),(o=this.children)===null||o===void 0||o.forEach(function(f){f[t](i,n,s)}),u&&r.restore(),c&&r.restore()}getClientRect(t={}){var i;const n=t.skipTransform,s=t.relativeTo;let o,r,a,l,h={x:1/0,y:1/0,width:0,height:0};const c=this;(i=this.children)===null||i===void 0||i.forEach(function(f){if(!f.visible())return;const g=f.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});g.width===0&&g.height===0||(o===void 0?(o=g.x,r=g.y,a=g.x+g.width,l=g.y+g.height):(o=Math.min(o,g.x),r=Math.min(r,g.y),a=Math.max(a,g.x+g.width),l=Math.max(l,g.y+g.height)))});const d=this.find("Shape");let u=!1;for(let f=0;f<d.length;f++)if(d[f]._isVisible(this)){u=!0;break}return u&&o!==void 0?h={x:o,y:r,width:a-o,height:l-r}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,s)}}x.addComponentsGetterSetter(me,"clip",["x","y","width","height"]);x.addGetterSetter(me,"clipX",void 0,N());x.addGetterSetter(me,"clipY",void 0,N());x.addGetterSetter(me,"clipWidth",void 0,N());x.addGetterSetter(me,"clipHeight",void 0,N());x.addGetterSetter(me,"clipFunc");const zn=new Map,ql=z._global.PointerEvent!==void 0;function dr(e){return zn.get(e)}function bo(e){return{evt:e,pointerId:e.pointerId}}function Ql(e,t){return zn.get(e)===t}function Jl(e,t){En(e),t.getStage()&&(zn.set(e,t),ql&&t._fire("gotpointercapture",bo(new PointerEvent("gotpointercapture"))))}function En(e,t){const i=zn.get(e);if(!i)return;const n=i.getStage();n&&n.content,zn.delete(e),ql&&i._fire("lostpointercapture",bo(new PointerEvent("lostpointercapture")))}const Xu="Stage",Yu="string",ma="px",Ku="mouseout",Zl="mouseleave",tc="mouseover",ec="mouseenter",ic="mousemove",nc="mousedown",sc="mouseup",mn="pointermove",bn="pointerdown",zi="pointerup",xn="pointercancel",$u="lostpointercapture",as="pointerout",vn="pointerleave",ls="pointerover",cs="pointerenter",Dr="contextmenu",rc="touchstart",oc="touchend",ac="touchmove",lc="touchcancel",Gr="wheel",qu=5,Qu=[[ec,"_pointerenter"],[nc,"_pointerdown"],[ic,"_pointermove"],[sc,"_pointerup"],[Zl,"_pointerleave"],[rc,"_pointerdown"],[ac,"_pointermove"],[oc,"_pointerup"],[lc,"_pointercancel"],[tc,"_pointerover"],[Gr,"_wheel"],[Dr,"_contextmenu"],[bn,"_pointerdown"],[mn,"_pointermove"],[zi,"_pointerup"],[xn,"_pointercancel"],[vn,"_pointerleave"],[$u,"_lostpointercapture"]],ur={mouse:{[as]:Ku,[vn]:Zl,[ls]:tc,[cs]:ec,[mn]:ic,[bn]:nc,[zi]:sc,[xn]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[as]:"touchout",[vn]:"touchleave",[ls]:"touchover",[cs]:"touchenter",[mn]:ac,[bn]:rc,[zi]:oc,[xn]:lc,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[as]:as,[vn]:vn,[ls]:ls,[cs]:cs,[mn]:mn,[bn]:bn,[zi]:zi,[xn]:xn,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},yn=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",Bi=e=>{const t=yn(e);if(t==="pointer")return z.pointerEventsEnabled&&ur.pointer;if(t==="touch")return ur.touch;if(t==="mouse")return ur.mouse};function ba(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&C.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const Ju="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Rn=[];class Qs extends me{constructor(t){super(ba(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Rn.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ba(this.attrs)}),this._checkVisibility()}_validateAdd(t){const i=t.getType()==="Layer",n=t.getType()==="FastLayer";i||n||C.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Yu){let i;if(t.charAt(0)==="."){const n=t.slice(1);t=document.getElementsByClassName(n)[0]}else t.charAt(0)!=="#"?i=t:i=t.slice(1),t=document.getElementById(i);if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,i=t.length;for(let n=0;n<i;n++)t[n].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),me.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&C._isInDocument(t)&&this.container().removeChild(t);const i=Rn.indexOf(this);return i>-1&&Rn.splice(i,1),C.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(C.warn(Ju),null)}_getPointerById(t){return this._pointerPositions.find(i=>i.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const i=new ai({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=i.getContext()._context,s=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),s.forEach(function(o){if(!o.isVisible())return;const r=o._toKonvaCanvas(t);n.drawImage(r._canvas,t.x,t.y,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}),i}getIntersection(t){if(!t)return null;const i=this.children,n=i.length,s=n-1;for(let o=s;o>=0;o--){const r=i[o].getIntersection(t);if(r)return r}return null}_resizeDOM(){const t=this.width(),i=this.height();this.content&&(this.content.style.width=t+ma,this.content.style.height=i+ma),this.bufferCanvas.setSize(t,i),this.bufferHitCanvas.setSize(t,i),this.children.forEach(n=>{n.setSize({width:t,height:i}),n.draw()})}add(t,...i){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const n=this.children.length;return n>qu&&C.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),z.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return Ql(t,this)}setPointerCapture(t){Jl(t,this)}releaseCapture(t){En(t)}getLayers(){return this.children}_bindContentEvents(){z.isBrowser&&Qu.forEach(([t,i])=>{this.content.addEventListener(t,n=>{this[i](n)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const i=Bi(t.type);i&&this._fire(i.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const i=Bi(t.type);i&&this._fire(i.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let i=this[t+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(t){const i=Bi(t.type),n=yn(t.type);if(!i)return;this.setPointersPositions(t);const s=this._getTargetShape(n),o=!(z.isDragging()||z.isTransforming())||z.hitOnDragEnabled;s&&o?(s._fireAndBubble(i.pointerout,{evt:t}),s._fireAndBubble(i.pointerleave,{evt:t}),this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):o&&(this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const i=Bi(t.type),n=yn(t.type);if(!i)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(o=>{const r=this.getIntersection(o);if(kt.justDragged=!1,z["_"+n+"ListenClick"]=!0,!r||!r.isListening()){this[n+"ClickStartShape"]=void 0;return}z.capturePointerEventsEnabled&&r.setPointerCapture(o.id),this[n+"ClickStartShape"]=r,r._fireAndBubble(i.pointerdown,{evt:t,pointerId:o.id}),s=!0;const a=t.type.indexOf("touch")>=0;r.preventDefault()&&t.cancelable&&a&&t.preventDefault()}),s||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const i=Bi(t.type),n=yn(t.type);if(!i)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(z.isDragging()&&kt.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(z.isDragging()||z.isTransforming())||z.hitOnDragEnabled))return;const r={};let a=!1;const l=this._getTargetShape(n);this._changedPointerPositions.forEach(h=>{const c=dr(h.id)||this.getIntersection(h),d=h.id,u={evt:t,pointerId:d},f=l!==c;if(f&&l&&(l._fireAndBubble(i.pointerout,{...u},c),l._fireAndBubble(i.pointerleave,{...u},c)),c){if(r[c._id])return;r[c._id]=!0}c&&c.isListening()?(a=!0,f&&(c._fireAndBubble(i.pointerover,{...u},l),c._fireAndBubble(i.pointerenter,{...u},l),this[n+"targetShape"]=c),c._fireAndBubble(i.pointermove,{...u})):l&&(this._fire(i.pointerover,{evt:t,target:this,currentTarget:this,pointerId:d}),this[n+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const i=Bi(t.type),n=yn(t.type);if(!i)return;this.setPointersPositions(t);const s=this[n+"ClickStartShape"],o=this[n+"ClickEndShape"],r={};let a=!1;this._changedPointerPositions.forEach(l=>{const h=dr(l.id)||this.getIntersection(l);if(h){if(h.releaseCapture(l.id),r[h._id])return;r[h._id]=!0}const c=l.id,d={evt:t,pointerId:c};let u=!1;z["_"+n+"InDblClickWindow"]?(u=!0,clearTimeout(this[n+"DblTimeout"])):kt.justDragged||(z["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){z["_"+n+"InDblClickWindow"]=!1},z.dblClickWindow),h&&h.isListening()?(a=!0,this[n+"ClickEndShape"]=h,h._fireAndBubble(i.pointerup,{...d}),z["_"+n+"ListenClick"]&&s&&s===h&&(h._fireAndBubble(i.pointerclick,{...d}),u&&o&&o===h&&h._fireAndBubble(i.pointerdblclick,{...d}))):(this[n+"ClickEndShape"]=null,a||(this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a=!0),z["_"+n+"ListenClick"]&&this._fire(i.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:c}),u&&this._fire(i.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:c}))}),a||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),z["_"+n+"ListenClick"]=!1,t.cancelable&&n!=="touch"&&n!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Dr,{evt:t}):this._fire(Dr,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Gr,{evt:t}):this._fire(Gr,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const i=dr(t.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(zi,bo(t)),En(t.pointerId)}_lostpointercapture(t){En(t.pointerId)}setPointersPositions(t){const i=this._getContentPosition();let n=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,o=>{this._pointerPositions.push({id:o.identifier,x:(o.clientX-i.left)/i.scaleX,y:(o.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,o=>{this._changedPointerPositions.push({id:o.identifier,x:(o.clientX-i.left)/i.scaleX,y:(o.clientY-i.top)/i.scaleY})})):(n=(t.clientX-i.left)/i.scaleX,s=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:n,y:s},this._pointerPositions=[{x:n,y:s,id:C._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:s,id:C._getFirstPointerId(t)}])}_setPointerPosition(t){C.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new ai({width:this.width(),height:this.height()}),this.bufferHitCanvas=new po({pixelRatio:1,width:this.width(),height:this.height()}),!z.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return C.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Qs.prototype.nodeType=Xu;Wt(Qs);x.addGetterSetter(Qs,"container");z.isBrowser&&document.addEventListener("visibilitychange",()=>{Rn.forEach(e=>{e.batchDraw()})});const cc="hasShadow",hc="shadowRGBA",dc="patternImage",uc="linearGradient",fc="radialGradient";let hs;function fr(){return hs||(hs=C.createCanvasElement().getContext("2d"),hs)}const Ln={};function Zu(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function t0(e){e.stroke()}function e0(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function i0(e){e.stroke()}function n0(){this._clearCache(cc)}function s0(){this._clearCache(hc)}function r0(){this._clearCache(dc)}function o0(){this._clearCache(uc)}function a0(){this._clearCache(fc)}class D extends F{constructor(t){super(t);let i,n=0;for(;i=C.getHitColor(),!(i&&!(i in Ln));)if(n++,n>=1e4){C.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),i=C.getRandomColor();break}this.colorKey=i,Ln[i]=this}getContext(){return C.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return C.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(cc,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(dc,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const i=fr().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const n=new ge;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(z.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=n.getMatrix(),o=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);i.setTransform(o)}return i}}_getLinearGradient(){return this._getCache(uc,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const i=fr(),n=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),o=i.createLinearGradient(n.x,n.y,s.x,s.y);for(let r=0;r<t.length;r+=2)o.addColorStop(t[r],t[r+1]);return o}}_getRadialGradient(){return this._getCache(fc,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const i=fr(),n=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),o=i.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let r=0;r<t.length;r+=2)o.addColorStop(t[r],t[r+1]);return o}}getShadowRGBA(){return this._getCache(hc,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=C.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const i=this.getStage();if(!i)return!1;const n=i.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return F.prototype.destroy.call(this),delete Ln[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var i;if(!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const s=t||this.hasFill(),o=this.hasStroke(),r=this.getAbsoluteOpacity()!==1;if(s&&o&&r)return!0;const a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(s&&o&&a&&l)}setStrokeHitEnabled(t){C.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let i=!1,n=this.getParent();for(;n;){if(n.isCached()){i=!0;break}n=n.getParent()}const s=t.skipTransform,o=t.relativeTo||i&&this.getStage()||void 0,r=this.getSelfRect(),l=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,h=r.width+l,c=r.height+l,d=!t.skipShadow&&this.hasShadow(),u=d?this.shadowOffsetX():0,f=d?this.shadowOffsetY():0,g=h+Math.abs(u),m=c+Math.abs(f),_=d&&this.shadowBlur()||0,y=g+_*2,w=m+_*2,M={width:y,height:w,x:-(l/2+_)+Math.min(u,0)+r.x,y:-(l/2+_)+Math.min(f,0)+r.y};return s?M:this._transformedRect(M,o)}drawScene(t,i,n){const s=this.getLayer(),o=t||s.getCanvas(),r=o.getContext(),a=this._getCanvasCache(),l=this.getSceneFunc(),h=this.hasShadow();let c;const d=i===this;if(!this.isVisible()&&!d)return this;if(a){r.save();const u=this.getAbsoluteTransform(i).getMatrix();return r.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(r),r.restore(),this}if(!l)return this;if(r.save(),this._useBufferCanvas()){c=this.getStage();const u=n||c.bufferCanvas,f=u.getContext();n?(f.save(),f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,u.width,u.height),f.restore()):f.clear(),f.save(),f._applyLineJoin(this),f._applyMiterLimit(this);const g=this.getAbsoluteTransform(i).getMatrix();f.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.call(this,f,this),f.restore();const m=u.pixelRatio;h&&r._applyShadow(this),d||(r._applyOpacity(this),r._applyGlobalCompositeOperation(this)),r.drawImage(u._canvas,u.x||0,u.y||0,u.width/m,u.height/m)}else{if(r._applyLineJoin(this),r._applyMiterLimit(this),!d){const u=this.getAbsoluteTransform(i).getMatrix();r.transform(u[0],u[1],u[2],u[3],u[4],u[5]),r._applyOpacity(this),r._applyGlobalCompositeOperation(this)}h&&r._applyShadow(this),l.call(this,r,this)}return r.restore(),this}drawHit(t,i,n=!1){if(!this.shouldDrawHit(i,n))return this;const s=this.getLayer(),o=t||s.hitCanvas,r=o&&o.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),h=l&&l.hit;if(this.colorKey||C.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),h){r.save();const d=this.getAbsoluteTransform(i).getMatrix();return r.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(r),r.restore(),this}if(!a)return this;if(r.save(),r._applyLineJoin(this),r._applyMiterLimit(this),!(this===i)){const d=this.getAbsoluteTransform(i).getMatrix();r.transform(d[0],d[1],d[2],d[3],d[4],d[5])}return a.call(this,r,this),r.restore(),this}drawHitFromCache(t=0){const i=this._getCanvasCache(),n=this._getCachedSceneCanvas(),s=i.hit,o=s.getContext(),r=s.getWidth(),a=s.getHeight();o.clear(),o.drawImage(n._canvas,0,0,r,a);try{const l=o.getImageData(0,0,r,a),h=l.data,c=h.length,d=C._hexToRgb(this.colorKey);for(let u=0;u<c;u+=4)h[u+3]>t?(h[u]=d.r,h[u+1]=d.g,h[u+2]=d.b,h[u+3]=255):h[u+3]=0;o.putImageData(l,0,0)}catch(l){C.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(t){return Ql(t,this)}setPointerCapture(t){Jl(t,this)}releaseCapture(t){En(t)}}D.prototype._fillFunc=Zu;D.prototype._strokeFunc=t0;D.prototype._fillFuncHit=e0;D.prototype._strokeFuncHit=i0;D.prototype._centroid=!1;D.prototype.nodeType="Shape";Wt(D);D.prototype.eventListeners={};D.prototype.on.call(D.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",n0);D.prototype.on.call(D.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s0);D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",r0);D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",o0);D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",a0);x.addGetterSetter(D,"stroke",void 0,$l());x.addGetterSetter(D,"strokeWidth",2,N());x.addGetterSetter(D,"fillAfterStrokeEnabled",!1);x.addGetterSetter(D,"hitStrokeWidth","auto",mo());x.addGetterSetter(D,"strokeHitEnabled",!0,Pe());x.addGetterSetter(D,"perfectDrawEnabled",!0,Pe());x.addGetterSetter(D,"shadowForStrokeEnabled",!0,Pe());x.addGetterSetter(D,"lineJoin");x.addGetterSetter(D,"lineCap");x.addGetterSetter(D,"miterLimit");x.addGetterSetter(D,"sceneFunc");x.addGetterSetter(D,"hitFunc");x.addGetterSetter(D,"dash");x.addGetterSetter(D,"dashOffset",0,N());x.addGetterSetter(D,"shadowColor",void 0,Li());x.addGetterSetter(D,"shadowBlur",0,N());x.addGetterSetter(D,"shadowOpacity",1,N());x.addComponentsGetterSetter(D,"shadowOffset",["x","y"]);x.addGetterSetter(D,"shadowOffsetX",0,N());x.addGetterSetter(D,"shadowOffsetY",0,N());x.addGetterSetter(D,"fillPatternImage");x.addGetterSetter(D,"fill",void 0,$l());x.addGetterSetter(D,"fillPatternX",0,N());x.addGetterSetter(D,"fillPatternY",0,N());x.addGetterSetter(D,"fillLinearGradientColorStops");x.addGetterSetter(D,"strokeLinearGradientColorStops");x.addGetterSetter(D,"fillRadialGradientStartRadius",0);x.addGetterSetter(D,"fillRadialGradientEndRadius",0);x.addGetterSetter(D,"fillRadialGradientColorStops");x.addGetterSetter(D,"fillPatternRepeat","repeat");x.addGetterSetter(D,"fillEnabled",!0);x.addGetterSetter(D,"strokeEnabled",!0);x.addGetterSetter(D,"shadowEnabled",!0);x.addGetterSetter(D,"dashEnabled",!0);x.addGetterSetter(D,"strokeScaleEnabled",!0);x.addGetterSetter(D,"fillPriority","color");x.addComponentsGetterSetter(D,"fillPatternOffset",["x","y"]);x.addGetterSetter(D,"fillPatternOffsetX",0,N());x.addGetterSetter(D,"fillPatternOffsetY",0,N());x.addComponentsGetterSetter(D,"fillPatternScale",["x","y"]);x.addGetterSetter(D,"fillPatternScaleX",1,N());x.addGetterSetter(D,"fillPatternScaleY",1,N());x.addComponentsGetterSetter(D,"fillLinearGradientStartPoint",["x","y"]);x.addComponentsGetterSetter(D,"strokeLinearGradientStartPoint",["x","y"]);x.addGetterSetter(D,"fillLinearGradientStartPointX",0);x.addGetterSetter(D,"strokeLinearGradientStartPointX",0);x.addGetterSetter(D,"fillLinearGradientStartPointY",0);x.addGetterSetter(D,"strokeLinearGradientStartPointY",0);x.addComponentsGetterSetter(D,"fillLinearGradientEndPoint",["x","y"]);x.addComponentsGetterSetter(D,"strokeLinearGradientEndPoint",["x","y"]);x.addGetterSetter(D,"fillLinearGradientEndPointX",0);x.addGetterSetter(D,"strokeLinearGradientEndPointX",0);x.addGetterSetter(D,"fillLinearGradientEndPointY",0);x.addGetterSetter(D,"strokeLinearGradientEndPointY",0);x.addComponentsGetterSetter(D,"fillRadialGradientStartPoint",["x","y"]);x.addGetterSetter(D,"fillRadialGradientStartPointX",0);x.addGetterSetter(D,"fillRadialGradientStartPointY",0);x.addComponentsGetterSetter(D,"fillRadialGradientEndPoint",["x","y"]);x.addGetterSetter(D,"fillRadialGradientEndPointX",0);x.addGetterSetter(D,"fillRadialGradientEndPointY",0);x.addGetterSetter(D,"fillPatternRotation",0);x.addGetterSetter(D,"fillRule",void 0,Li());x.backCompat(D,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const l0="beforeDraw",c0="draw",gc=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h0=gc.length;class Oi extends me{constructor(t){super(t),this.canvas=new ai,this.hitCanvas=new po({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){F.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!F.prototype.moveUp.call(this))return!1;const i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(F.prototype.moveDown.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(F.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return F.prototype.remove.call(this),t&&t.parentNode&&C._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&C.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),F.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){C.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){C.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,C.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let i=1,n=!1;for(;;){for(let s=0;s<h0;s++){const o=gc[s],r=this._getIntersection({x:t.x+o.x*i,y:t.y+o.y*i}),a=r.shape;if(a)return a;if(n=!!r.antialiased,!r.antialiased)break}if(n)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,s=n[3];if(s===255){const o=C.getHitColorKey(n[0],n[1],n[2]),r=Ln[o];return r?{shape:r}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,i,n){const s=this.getLayer(),o=t||s&&s.getCanvas();return this._fire(l0,{node:this}),this.clearBeforeDraw()&&o.getContext().clear(),me.prototype.drawScene.call(this,o,i,n),this._fire(c0,{node:this}),this}drawHit(t,i){const n=this.getLayer(),s=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),me.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return C.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Oi.prototype.nodeType="Layer";Wt(Oi);x.addGetterSetter(Oi,"imageSmoothingEnabled",!0);x.addGetterSetter(Oi,"clearBeforeDraw",!0);x.addGetterSetter(Oi,"hitGraphEnabled",!0,Pe());class xo extends Oi{constructor(t){super(t),this.listening(!1),C.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}xo.prototype.nodeType="FastLayer";Wt(xo);class Zi extends me{_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&C.throw("You may only add groups and shapes to groups.")}}Zi.prototype.nodeType="Group";Wt(Zi);const gr=(function(){return Mi.performance&&Mi.performance.now?function(){return Mi.performance.now()}:function(){return new Date().getTime()}})();class ve{constructor(t,i){this.id=ve.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:gr(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){let i=[];return t&&(i=Array.isArray(t)?t:[t]),this.layers=i,this}getLayers(){return this.layers}addLayer(t){const i=this.layers,n=i.length;for(let s=0;s<n;s++)if(i[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const i=ve.animations,n=i.length;for(let s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=gr(),ve._addAnimation(this),this}stop(){return ve._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const i=t.id,n=this.animations,s=n.length;for(let o=0;o<s;o++)if(n[o].id===i){this.animations.splice(o,1);break}}static _runFrames(){const t={},i=this.animations;for(let n=0;n<i.length;n++){const s=i[n],o=s.layers,r=s.func;s._updateFrameObject(gr());const a=o.length;let l;if(r?l=r.call(s,s.frame)!==!1:l=!0,!!l)for(let h=0;h<a;h++){const c=o[h];c._id!==void 0&&(t[c._id]=c)}}for(const n in t)t.hasOwnProperty(n)&&t[n].batchDraw()}static _animationLoop(){const t=ve;t.animations.length?(t._runFrames(),C.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,C.requestAnimFrame(this._animationLoop))}}ve.animations=[];ve.animIdCounter=0;ve.animRunning=!1;const d0={node:1,duration:1,easing:1,onFinish:1,yoyo:1},u0=1,xa=2,va=3,ya=["fill","stroke","shadowColor"];let f0=0;class g0{constructor(t,i,n,s,o,r,a){this.prop=t,this.propFunc=i,this.begin=s,this._pos=s,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=o-this.begin,this.pause()}fire(t){const i=this[t];i&&i()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=xa,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=va,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===xa?this.setTime(t):this.state===va&&this.setTime(this.duration-t)}pause(){this.state=u0,this.fire("onPause")}getTimer(){return new Date().getTime()}}class It{constructor(t){const i=this,n=t.node,s=n._id,o=t.easing||On.Linear,r=!!t.yoyo;let a,l;typeof t.duration>"u"?a=.3:t.duration===0?a=.001:a=t.duration,this.node=n,this._id=f0++;const h=n.getLayer()||(n instanceof z.Stage?n.getLayers():null);h||C.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ve(function(){i.tween.onEnterFrame()},h),this.tween=new g0(l,function(c){i._tweenFunc(c)},o,0,1,a*1e3,r),this._addListeners(),It.attrs[s]||(It.attrs[s]={}),It.attrs[s][this._id]||(It.attrs[s][this._id]={}),It.tweens[s]||(It.tweens[s]={});for(l in t)d0[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,i){const n=this.node,s=n._id;let o,r,a,l,h;const c=It.tweens[s][t];c&&delete It.attrs[s][c][t];let d=n.getAttr(t);if(C._isArray(i))if(o=[],r=Math.max(i.length,d.length),t==="points"&&i.length!==d.length&&(i.length>d.length?(l=d,d=C._prepareArrayForTween(d,i,n.closed())):(a=i,i=C._prepareArrayForTween(i,d,n.closed()))),t.indexOf("fill")===0)for(let u=0;u<r;u++)if(u%2===0)o.push(i[u]-d[u]);else{const f=C.colorToRGBA(d[u]);h=C.colorToRGBA(i[u]),d[u]=f,o.push({r:h.r-f.r,g:h.g-f.g,b:h.b-f.b,a:h.a-f.a})}else for(let u=0;u<r;u++)o.push(i[u]-d[u]);else ya.indexOf(t)!==-1?(d=C.colorToRGBA(d),h=C.colorToRGBA(i),o={r:h.r-d.r,g:h.g-d.g,b:h.b-d.b,a:h.a-d.a}):o=i-d;It.attrs[s][this._id][t]={start:d,diff:o,end:i,trueEnd:a,trueStart:l},It.tweens[s][t]=this._id}_tweenFunc(t){const i=this.node,n=It.attrs[i._id][this._id];let s,o,r,a,l,h,c,d;for(s in n){if(o=n[s],r=o.start,a=o.diff,d=o.end,C._isArray(r))if(l=[],c=Math.max(r.length,d.length),s.indexOf("fill")===0)for(h=0;h<c;h++)h%2===0?l.push((r[h]||0)+a[h]*t):l.push("rgba("+Math.round(r[h].r+a[h].r*t)+","+Math.round(r[h].g+a[h].g*t)+","+Math.round(r[h].b+a[h].b*t)+","+(r[h].a+a[h].a*t)+")");else for(h=0;h<c;h++)l.push((r[h]||0)+a[h]*t);else ya.indexOf(s)!==-1?l="rgba("+Math.round(r.r+a.r*t)+","+Math.round(r.g+a.g*t)+","+Math.round(r.b+a.b*t)+","+(r.a+a.a*t)+")":l=r+a*t;i.setAttr(s,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,i=It.attrs[t._id][this._id];i.points&&i.points.trueEnd&&t.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,i=It.attrs[t._id][this._id];i.points&&i.points.trueStart&&t.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,i=this._id,n=It.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in n)delete It.tweens[t][s];delete It.attrs[t][i],It.tweens[t]&&(Object.keys(It.tweens[t]).length===0&&delete It.tweens[t],Object.keys(It.attrs[t]).length===0&&delete It.attrs[t])}}It.attrs={};It.tweens={};F.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new It(e).play()};const On={BackEaseIn(e,t,i,n){return i*(e/=n)*e*((1.70158+1)*e-1.70158)+t},BackEaseOut(e,t,i,n){return i*((e=e/n-1)*e*((1.70158+1)*e+1.70158)+1)+t},BackEaseInOut(e,t,i,n){let s=1.70158;return(e/=n/2)<1?i/2*(e*e*(((s*=1.525)+1)*e-s))+t:i/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+t},ElasticEaseIn(e,t,i,n,s,o){let r=0;return e===0?t:(e/=n)===1?t+i:(o||(o=n*.3),!s||s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/o))+t)},ElasticEaseOut(e,t,i,n,s,o){let r=0;return e===0?t:(e/=n)===1?t+i:(o||(o=n*.3),!s||s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*e)*Math.sin((e*n-r)*(2*Math.PI)/o)+i+t)},ElasticEaseInOut(e,t,i,n,s,o){let r=0;return e===0?t:(e/=n/2)===2?t+i:(o||(o=n*(.3*1.5)),!s||s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),e<1?-.5*(s*Math.pow(2,10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/o))+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*n-r)*(2*Math.PI)/o)*.5+i+t)},BounceEaseOut(e,t,i,n){return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,i,n){return i-On.BounceEaseOut(n-e,0,i,n)+t},BounceEaseInOut(e,t,i,n){return e<n/2?On.BounceEaseIn(e*2,0,i,n)*.5+t:On.BounceEaseOut(e*2-n,0,i,n)*.5+i*.5+t},EaseIn(e,t,i,n){return i*(e/=n)*e+t},EaseOut(e,t,i,n){return-i*(e/=n)*(e-2)+t},EaseInOut(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,i,n){return i*(e/=n)*e*e*e*e+t},StrongEaseOut(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,i,n){return i*e/n+t}},_a=C._assign(z,{Util:C,Transform:ge,Node:F,Container:me,Stage:Qs,stages:Rn,Layer:Oi,FastLayer:xo,Group:Zi,DD:kt,Shape:D,shapes:Ln,Animation:ve,Tween:It,Easings:On,Context:$s,Canvas:go});class Qe extends D{_sceneFunc(t){const i=z.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,n),t.arc(0,0,this.innerRadius(),i,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),n=this.clockwise(),s=z.getAngle(n?360-this.angle():this.angle()),o=Math.cos(Math.min(s,Math.PI)),r=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),l=Math.sin(Math.min(s,Math.PI/2)),h=o*(o>0?t:i),c=r*i,d=a*(a>0?t:i),u=l*(l>0?i:t);return{x:h,y:n?-1*u:d,width:c-h,height:u-d}}}Qe.prototype._centroid=!0;Qe.prototype.className="Arc";Qe.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Wt(Qe);x.addGetterSetter(Qe,"innerRadius",0,N());x.addGetterSetter(Qe,"outerRadius",0,N());x.addGetterSetter(Qe,"angle",0,N());x.addGetterSetter(Qe,"clockwise",!1,Pe());function Fr(e,t,i,n,s,o,r){const a=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(o-n,2)),h=r*a/(a+l),c=r*l/(a+l),d=i-h*(s-e),u=n-h*(o-t),f=i+c*(s-e),g=n+c*(o-t);return[d,u,f,g]}function wa(e,t){const i=e.length,n=[];for(let s=2;s<i-2;s+=2){const o=Fr(e[s-2],e[s-1],e[s],e[s+1],e[s+2],e[s+3],t);isNaN(o[0])||(n.push(o[0]),n.push(o[1]),n.push(e[s]),n.push(e[s+1]),n.push(o[2]),n.push(o[3]))}return n}function p0(e){const t=[[e[0],e[2],e[4],e[6]],[e[1],e[3],e[5],e[7]]],i=[];for(const n of t){const s=-3*n[0]+9*n[1]-9*n[2]+3*n[3];if(s!==0){const o=6*n[0]-12*n[1]+6*n[2],r=-3*n[0]+3*n[1],a=o*o-4*s*r;if(a>=0){const l=Math.sqrt(a);i.push((-o+l)/(2*s)),i.push((-o-l)/(2*s))}}}return i.filter(n=>n>0&&n<1).flatMap(n=>t.map(s=>{const o=1-n;return o*o*o*s[0]+3*o*o*n*s[1]+3*o*n*n*s[2]+n*n*n*s[3]}))}class Je extends D{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const i=this.points(),n=i.length,s=this.tension(),o=this.closed(),r=this.bezier();if(!n)return;let a=0;if(t.beginPath(),t.moveTo(i[0],i[1]),s!==0&&n>4){const l=this.getTensionPoints(),h=l.length;for(a=o?0:4,o||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);a<h-2;)t.bezierCurveTo(l[a++],l[a++],l[a++],l[a++],l[a++],l[a++]);o||t.quadraticCurveTo(l[h-2],l[h-1],i[n-2],i[n-1])}else if(r)for(a=2;a<n;)t.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);else for(a=2;a<n;a+=2)t.lineTo(i[a],i[a+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():wa(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),i=t.length,n=this.tension(),s=Fr(t[i-2],t[i-1],t[0],t[1],t[2],t[3],n),o=Fr(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],n),r=wa(t,n);return[s[2],s[3]].concat(r).concat([o[0],o[1],t[i-2],t[i-1],o[2],o[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...p0(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let i=t[0],n=t[0],s=t[1],o=t[1],r,a;for(let l=0;l<t.length/2;l++)r=t[l*2],a=t[l*2+1],i=Math.min(i,r),n=Math.max(n,r),s=Math.min(s,a),o=Math.max(o,a);return{x:i,y:s,width:n-i,height:o-s}}}Je.prototype.className="Line";Je.prototype._attrsAffectingSize=["points","bezier","tension"];Wt(Je);x.addGetterSetter(Je,"closed",!1);x.addGetterSetter(Je,"bezier",!1);x.addGetterSetter(Je,"tension",0,N());x.addGetterSetter(Je,"points",[],Ru());const m0=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],b0=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],x0=[[1],[1,1],[1,2,1],[1,3,3,1]],Sa=(e,t,i)=>{let n,s;const r=i/2;n=0;for(let a=0;a<20;a++)s=r*m0[20][a]+r,n+=b0[20][a]*v0(e,t,s);return r*n},Ca=(e,t,i)=>{i===void 0&&(i=1);const n=e[0]-2*e[1]+e[2],s=t[0]-2*t[1]+t[2],o=2*e[1]-2*e[0],r=2*t[1]-2*t[0],a=4*(n*n+s*s),l=4*(n*o+s*r),h=o*o+r*r;if(a===0)return i*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const c=l/(2*a),d=h/a,u=i+c,f=d-c*c,g=u*u+f>0?Math.sqrt(u*u+f):0,m=c*c+f>0?Math.sqrt(c*c+f):0,_=c+Math.sqrt(c*c+f)!==0?f*Math.log(Math.abs((u+g)/(c+m))):0;return Math.sqrt(a)/2*(u*g-c*m+_)};function v0(e,t,i){const n=Nr(1,i,e),s=Nr(1,i,t),o=n*n+s*s;return Math.sqrt(o)}const Nr=(e,t,i)=>{const n=i.length-1;let s,o;if(n===0)return 0;if(e===0){o=0;for(let r=0;r<=n;r++)o+=x0[n][r]*Math.pow(1-t,n-r)*Math.pow(t,r)*i[r];return o}else{s=new Array(n);for(let r=0;r<n;r++)s[r]=n*(i[r+1]-i[r]);return Nr(e-1,t,s)}},ka=(e,t,i)=>{let n=1,s=e/t,o=(e-i(s))/t,r=0;for(;n>.001;){const a=i(s+o),l=Math.abs(e-a)/t;if(l<n)n=l,s+=o;else{const h=i(s-o),c=Math.abs(e-h)/t;c<n?(n=c,s-=o):o/=2}if(r++,r>500)break}return s};class Gt extends D{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Gt.parsePathData(this.data()),this.pathLength=Gt.getPathLength(this.dataArray)}_sceneFunc(t){const i=this.dataArray;t.beginPath();let n=!1;for(let s=0;s<i.length;s++){const o=i[s].command,r=i[s].points;switch(o){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":const a=r[0],l=r[1],h=r[2],c=r[3],d=r[4],u=r[5],f=r[6],g=r[7],m=h>c?h:c,_=h>c?1:h/c,y=h>c?c/h:1;t.translate(a,l),t.rotate(f),t.scale(_,y),t.arc(0,0,m,d,d+u,1-g),t.scale(1/_,1/y),t.rotate(-f),t.translate(-a,-l);break;case"z":n=!0,t.closePath();break}}!n&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(l){if(l.command==="A"){const h=l.points[4],c=l.points[5],d=l.points[4]+c;let u=Math.PI/180;if(Math.abs(h-d)<u&&(u=Math.abs(h-d)),c<0)for(let f=h-u;f>d;f-=u){const g=Gt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);t.push(g.x,g.y)}else for(let f=h+u;f<d;f+=u){const g=Gt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);t.push(g.x,g.y)}}else if(l.command==="C")for(let h=0;h<=1;h+=.01){const c=Gt.getPointOnCubicBezier(h,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);t.push(c.x,c.y)}else t=t.concat(l.points)});let i=t[0],n=t[0],s=t[1],o=t[1],r,a;for(let l=0;l<t.length/2;l++)r=t[l*2],a=t[l*2+1],isNaN(r)||(i=Math.min(i,r),n=Math.max(n,r)),isNaN(a)||(s=Math.min(s,a),o=Math.max(o,a));return{x:i,y:s,width:n-i,height:o-s}}getLength(){return this.pathLength}getPointAtLength(t){return Gt.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,i,n,s){return Math.sqrt((n-t)*(n-t)+(s-i)*(s-i))}static getPathLength(t){let i=0;for(let n=0;n<t.length;++n)i+=t[n].pathLength;return i}static getPointAtLengthOfDataArray(t,i){let n,s=0,o=i.length;if(!o)return null;for(;s<o&&t>i[s].pathLength;)t-=i[s].pathLength,++s;if(s===o)return n=i[s-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return i[s].command==="M"?(n=i[s].points.slice(0,2),{x:n[0],y:n[1]}):{x:i[s].start.x,y:i[s].start.y};const r=i[s],a=r.points;switch(r.command){case"L":return Gt.getPointOnLine(t,r.start.x,r.start.y,a[0],a[1]);case"C":return Gt.getPointOnCubicBezier(ka(t,Gt.getPathLength(i),m=>Sa([r.start.x,a[0],a[2],a[4]],[r.start.y,a[1],a[3],a[5]],m)),r.start.x,r.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Gt.getPointOnQuadraticBezier(ka(t,Gt.getPathLength(i),m=>Ca([r.start.x,a[0],a[2]],[r.start.y,a[1],a[3]],m)),r.start.x,r.start.y,a[0],a[1],a[2],a[3]);case"A":const l=a[0],h=a[1],c=a[2],d=a[3],u=a[5],f=a[6];let g=a[4];return g+=u*t/r.pathLength,Gt.getPointOnEllipticalArc(l,h,c,d,g,f)}return null}static getPointOnLine(t,i,n,s,o,r,a){r=r??i,a=a??n;const l=this.getLineLength(i,n,s,o);if(l<1e-10)return{x:i,y:n};if(s===i)return{x:r,y:a+(o>n?t:-t)};const h=(o-n)/(s-i),c=Math.sqrt(t*t/(1+h*h))*(s<i?-1:1),d=h*c;if(Math.abs(a-n-h*(r-i))<1e-10)return{x:r+c,y:a+d};const u=((r-i)*(s-i)+(a-n)*(o-n))/(l*l),f=i+u*(s-i),g=n+u*(o-n),m=this.getLineLength(r,a,f,g),_=Math.sqrt(t*t-m*m),y=Math.sqrt(_*_/(1+h*h))*(s<i?-1:1),w=h*y;return{x:f+y,y:g+w}}static getPointOnCubicBezier(t,i,n,s,o,r,a,l,h){function c(_){return _*_*_}function d(_){return 3*_*_*(1-_)}function u(_){return 3*_*(1-_)*(1-_)}function f(_){return(1-_)*(1-_)*(1-_)}const g=l*c(t)+r*d(t)+s*u(t)+i*f(t),m=h*c(t)+a*d(t)+o*u(t)+n*f(t);return{x:g,y:m}}static getPointOnQuadraticBezier(t,i,n,s,o,r,a){function l(f){return f*f}function h(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}const d=r*l(t)+s*h(t)+i*c(t),u=a*l(t)+o*h(t)+n*c(t);return{x:d,y:u}}static getPointOnEllipticalArc(t,i,n,s,o,r){const a=Math.cos(r),l=Math.sin(r),h={x:n*Math.cos(o),y:s*Math.sin(o)};return{x:t+(h.x*a-h.y*l),y:i+(h.x*l+h.y*a)}}static parsePathData(t){if(!t)return[];let i=t;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(let d=0;d<n.length;d++)i=i.replace(new RegExp(n[d],"g"),"|"+n[d]);const s=i.split("|"),o=[],r=[];let a=0,l=0;const h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(let d=1;d<s.length;d++){let u=s[d],f=u.charAt(0);for(u=u.slice(1),r.length=0;c=h.exec(u);)r.push(c[0]);let g=[],m=f==="A"||f==="a"?0:-1;for(let _=0,y=r.length;_<y;_++){const w=r[_];if(w==="00"){g.push(0,0),m>=0&&(m+=2,m>=7&&(m-=7));continue}if(m>=0){if(m===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(w)){g.push(parseInt(w[0],10)),g.push(parseInt(w[1],10)),g.push(parseFloat(w.slice(2))),m+=3,m>=7&&(m-=7);continue}if(w==="11"||w==="10"||w==="01"){g.push(parseInt(w[0],10)),g.push(parseInt(w[1],10)),m+=2,m>=7&&(m-=7);continue}if(w==="0"||w==="1"){g.push(parseInt(w,10)),m+=1,m>=7&&(m-=7);continue}}else if(m===4){if(/^[01]\d+(?:\.\d+)?$/.test(w)){g.push(parseInt(w[0],10)),g.push(parseFloat(w.slice(1))),m+=2,m>=7&&(m-=7);continue}if(w==="0"||w==="1"){g.push(parseInt(w,10)),m+=1,m>=7&&(m-=7);continue}}const M=parseFloat(w);isNaN(M)?g.push(0):g.push(M),m+=1,m>=7&&(m-=7)}else{const M=parseFloat(w);isNaN(M)?g.push(0):g.push(M)}}for(;g.length>0&&!isNaN(g[0]);){let _="",y=[];const w=a,M=l;let k,A,E,X,G,$,Q,ot,J,ft;switch(f){case"l":a+=g.shift(),l+=g.shift(),_="L",y.push(a,l);break;case"L":a=g.shift(),l=g.shift(),y.push(a,l);break;case"m":const lt=g.shift(),Z=g.shift();if(a+=lt,l+=Z,_="M",o.length>2&&o[o.length-1].command==="z"){for(let H=o.length-2;H>=0;H--)if(o[H].command==="M"){a=o[H].points[0]+lt,l=o[H].points[1]+Z;break}}y.push(a,l),f="l";break;case"M":a=g.shift(),l=g.shift(),_="M",y.push(a,l),f="L";break;case"h":a+=g.shift(),_="L",y.push(a,l);break;case"H":a=g.shift(),_="L",y.push(a,l);break;case"v":l+=g.shift(),_="L",y.push(a,l);break;case"V":l=g.shift(),_="L",y.push(a,l);break;case"C":y.push(g.shift(),g.shift(),g.shift(),g.shift()),a=g.shift(),l=g.shift(),y.push(a,l);break;case"c":y.push(a+g.shift(),l+g.shift(),a+g.shift(),l+g.shift()),a+=g.shift(),l+=g.shift(),_="C",y.push(a,l);break;case"S":A=a,E=l,k=o[o.length-1],k.command==="C"&&(A=a+(a-k.points[2]),E=l+(l-k.points[3])),y.push(A,E,g.shift(),g.shift()),a=g.shift(),l=g.shift(),_="C",y.push(a,l);break;case"s":A=a,E=l,k=o[o.length-1],k.command==="C"&&(A=a+(a-k.points[2]),E=l+(l-k.points[3])),y.push(A,E,a+g.shift(),l+g.shift()),a+=g.shift(),l+=g.shift(),_="C",y.push(a,l);break;case"Q":y.push(g.shift(),g.shift()),a=g.shift(),l=g.shift(),y.push(a,l);break;case"q":y.push(a+g.shift(),l+g.shift()),a+=g.shift(),l+=g.shift(),_="Q",y.push(a,l);break;case"T":A=a,E=l,k=o[o.length-1],k.command==="Q"&&(A=a+(a-k.points[0]),E=l+(l-k.points[1])),a=g.shift(),l=g.shift(),_="Q",y.push(A,E,a,l);break;case"t":A=a,E=l,k=o[o.length-1],k.command==="Q"&&(A=a+(a-k.points[0]),E=l+(l-k.points[1])),a+=g.shift(),l+=g.shift(),_="Q",y.push(A,E,a,l);break;case"A":X=g.shift(),G=g.shift(),$=g.shift(),Q=g.shift(),ot=g.shift(),J=a,ft=l,a=g.shift(),l=g.shift(),_="A",y=this.convertEndpointToCenterParameterization(J,ft,a,l,Q,ot,X,G,$);break;case"a":X=g.shift(),G=g.shift(),$=g.shift(),Q=g.shift(),ot=g.shift(),J=a,ft=l,a+=g.shift(),l+=g.shift(),_="A",y=this.convertEndpointToCenterParameterization(J,ft,a,l,Q,ot,X,G,$);break}o.push({command:_||f,points:y,start:{x:w,y:M},pathLength:this.calcLength(w,M,_||f,y)})}(f==="z"||f==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,i,n,s){let o,r,a,l;const h=Gt;switch(n){case"L":return h.getLineLength(t,i,s[0],s[1]);case"C":return Sa([t,s[0],s[2],s[4]],[i,s[1],s[3],s[5]],1);case"Q":return Ca([t,s[0],s[2]],[i,s[1],s[3]],1);case"A":o=0;const c=s[4],d=s[5],u=s[4]+d;let f=Math.PI/180;if(Math.abs(c-u)<f&&(f=Math.abs(c-u)),r=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),d<0)for(l=c-f;l>u;l-=f)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),o+=h.getLineLength(r.x,r.y,a.x,a.y),r=a;else for(l=c+f;l<u;l+=f)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),o+=h.getLineLength(r.x,r.y,a.x,a.y),r=a;return a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],u,0),o+=h.getLineLength(r.x,r.y,a.x,a.y),o}return 0}static convertEndpointToCenterParameterization(t,i,n,s,o,r,a,l,h){const c=h*(Math.PI/180),d=Math.cos(c)*(t-n)/2+Math.sin(c)*(i-s)/2,u=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(i-s)/2,f=d*d/(a*a)+u*u/(l*l);f>1&&(a*=Math.sqrt(f),l*=Math.sqrt(f));let g=Math.sqrt((a*a*(l*l)-a*a*(u*u)-l*l*(d*d))/(a*a*(u*u)+l*l*(d*d)));o===r&&(g*=-1),isNaN(g)&&(g=0);const m=g*a*u/l,_=g*-l*d/a,y=(t+n)/2+Math.cos(c)*m-Math.sin(c)*_,w=(i+s)/2+Math.sin(c)*m+Math.cos(c)*_,M=function(Q){return Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1])},k=function(Q,ot){return(Q[0]*ot[0]+Q[1]*ot[1])/(M(Q)*M(ot))},A=function(Q,ot){return(Q[0]*ot[1]<Q[1]*ot[0]?-1:1)*Math.acos(k(Q,ot))},E=A([1,0],[(d-m)/a,(u-_)/l]),X=[(d-m)/a,(u-_)/l],G=[(-1*d-m)/a,(-1*u-_)/l];let $=A(X,G);return k(X,G)<=-1&&($=Math.PI),k(X,G)>=1&&($=0),r===0&&$>0&&($=$-2*Math.PI),r===1&&$<0&&($=$+2*Math.PI),[y,w,a,l,E,$,c,r]}}Gt.prototype.className="Path";Gt.prototype._attrsAffectingSize=["data"];Wt(Gt);x.addGetterSetter(Gt,"data");class Ii extends Je{_sceneFunc(t){super._sceneFunc(t);const i=Math.PI*2,n=this.points();let s=n;const o=this.tension()!==0&&n.length>4;o&&(s=this.getTensionPoints());const r=this.pointerLength(),a=n.length;let l,h;if(o){const u=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],n[a-2],n[a-1]],f=Gt.calcLength(s[s.length-4],s[s.length-3],"C",u),g=Gt.getPointOnQuadraticBezier(Math.min(1,1-r/f),u[0],u[1],u[2],u[3],u[4],u[5]);l=n[a-2]-g.x,h=n[a-1]-g.y}else l=n[a-2]-n[a-4],h=n[a-1]-n[a-3];const c=(Math.atan2(h,l)+i)%i,d=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[a-2],n[a-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-r,d/2),t.lineTo(-r,-d/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),o?(l=(s[0]+s[2])/2-n[0],h=(s[1]+s[3])/2-n[1]):(l=n[2]-n[0],h=n[3]-n[1]),t.rotate((Math.atan2(-h,-l)+i)%i),t.moveTo(0,0),t.lineTo(-r,d/2),t.lineTo(-r,-d/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x,y:t.y-i,width:t.width,height:t.height+i*2}}}Ii.prototype.className="Arrow";Wt(Ii);x.addGetterSetter(Ii,"pointerLength",10,N());x.addGetterSetter(Ii,"pointerWidth",10,N());x.addGetterSetter(Ii,"pointerAtBeginning",!1);x.addGetterSetter(Ii,"pointerAtEnding",!0);class rn extends D{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}rn.prototype._centroid=!0;rn.prototype.className="Circle";rn.prototype._attrsAffectingSize=["radius"];Wt(rn);x.addGetterSetter(rn,"radius",0,N());class pi extends D{_sceneFunc(t){const i=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),i!==n&&t.scale(1,n/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}pi.prototype.className="Ellipse";pi.prototype._centroid=!0;pi.prototype._attrsAffectingSize=["radiusX","radiusY"];Wt(pi);x.addComponentsGetterSetter(pi,"radius",["x","y"]);x.addGetterSetter(pi,"radiusX",0,N());x.addGetterSetter(pi,"radiusY",0,N());class be extends D{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",i=>{this._removeImageLoad(i.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),i=this.hasShadow();return t&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),n=this.getHeight(),s=this.cornerRadius(),o=this.attrs.image;let r;if(o){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?r=[o,this.cropX(),this.cropY(),a,l,0,0,i,n]:r=[o,0,0,i,n]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?C.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)),o&&(s&&t.clip(),t.drawImage.apply(t,r))}_hitFunc(t){const i=this.width(),n=this.height(),s=this.cornerRadius();t.beginPath(),s?C.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i,n;return(n=(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width)!==null&&n!==void 0?n:0}getHeight(){var t,i,n;return(n=(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height)!==null&&n!==void 0?n:0}static fromURL(t,i,n=null){const s=C.createImageElement();s.onload=function(){const o=new be({image:s});i(o)},s.onerror=n,s.crossOrigin="Anonymous",s.src=t}}be.prototype.className="Image";be.prototype._attrsAffectingSize=["image"];Wt(be);x.addGetterSetter(be,"cornerRadius",0,qs(4));x.addGetterSetter(be,"image");x.addComponentsGetterSetter(be,"crop",["x","y","width","height"]);x.addGetterSetter(be,"cropX",0,N());x.addGetterSetter(be,"cropY",0,N());x.addGetterSetter(be,"cropWidth",0,N());x.addGetterSetter(be,"cropHeight",0,N());const pc=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],y0="Change.konva",_0="none",Br="up",Hr="right",Wr="down",Ur="left",w0=pc.length;class vo extends Zi{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let i=this,n;const s=function(){i._sync()};for(n=0;n<w0;n++)t.on(pc[n]+y0,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),i=this.getTag(),n,s,o,r,a,l,h;if(t&&i){switch(n=t.width(),s=t.height(),o=i.pointerDirection(),r=i.pointerWidth(),h=i.pointerHeight(),a=0,l=0,o){case Br:a=n/2,l=-1*h;break;case Hr:a=n+r,l=s/2;break;case Wr:a=n/2,l=s+h;break;case Ur:a=-1*r,l=s/2;break}i.setAttrs({x:-1*a,y:-1*l,width:n,height:s}),t.setAttrs({x:-1*a,y:-1*l})}}}vo.prototype.className="Label";Wt(vo);class Di extends D{_sceneFunc(t){const i=this.width(),n=this.height(),s=this.pointerDirection(),o=this.pointerWidth(),r=this.pointerHeight(),a=this.cornerRadius();let l=0,h=0,c=0,d=0;typeof a=="number"?l=h=c=d=Math.min(a,i/2,n/2):(l=Math.min(a[0]||0,i/2,n/2),h=Math.min(a[1]||0,i/2,n/2),d=Math.min(a[2]||0,i/2,n/2),c=Math.min(a[3]||0,i/2,n/2)),t.beginPath(),t.moveTo(l,0),s===Br&&(t.lineTo((i-o)/2,0),t.lineTo(i/2,-1*r),t.lineTo((i+o)/2,0)),t.lineTo(i-h,0),t.arc(i-h,h,h,Math.PI*3/2,0,!1),s===Hr&&(t.lineTo(i,(n-r)/2),t.lineTo(i+o,n/2),t.lineTo(i,(n+r)/2)),t.lineTo(i,n-d),t.arc(i-d,n-d,d,0,Math.PI/2,!1),s===Wr&&(t.lineTo((i+o)/2,n),t.lineTo(i/2,n+r),t.lineTo((i-o)/2,n)),t.lineTo(c,n),t.arc(c,n-c,c,Math.PI/2,Math.PI,!1),s===Ur&&(t.lineTo(0,(n+r)/2),t.lineTo(-1*o,n/2),t.lineTo(0,(n-r)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,i=0,n=this.pointerWidth(),s=this.pointerHeight(),o=this.pointerDirection(),r=this.width(),a=this.height();return o===Br?(i-=s,a+=s):o===Wr?a+=s:o===Ur?(t-=n*1.5,r+=n):o===Hr&&(r+=n*1.5),{x:t,y:i,width:r,height:a}}}Di.prototype.className="Tag";Wt(Di);x.addGetterSetter(Di,"pointerDirection",_0);x.addGetterSetter(Di,"pointerWidth",0,N());x.addGetterSetter(Di,"pointerHeight",0,N());x.addGetterSetter(Di,"cornerRadius",0,qs(4));class Qn extends D{_sceneFunc(t){const i=this.cornerRadius(),n=this.width(),s=this.height();t.beginPath(),i?C.drawRoundedRectPath(t,n,s,i):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}}Qn.prototype.className="Rect";Wt(Qn);x.addGetterSetter(Qn,"cornerRadius",0,qs(4));class mi extends D{_sceneFunc(t){const i=this._getPoints(),n=this.radius(),s=this.sides(),o=this.cornerRadius();if(t.beginPath(),o)C.drawRoundedPolygonPath(t,i,s,n,o);else{t.moveTo(i[0].x,i[0].y);for(let r=1;r<i.length;r++)t.lineTo(i[r].x,i[r].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,n=[];for(let s=0;s<t;s++)n.push({x:i*Math.sin(s*2*Math.PI/t),y:-1*i*Math.cos(s*2*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();let i=t[0].x,n=t[0].x,s=t[0].y,o=t[0].y;return t.forEach(r=>{i=Math.min(i,r.x),n=Math.max(n,r.x),s=Math.min(s,r.y),o=Math.max(o,r.y)}),{x:i,y:s,width:n-i,height:o-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}mi.prototype.className="RegularPolygon";mi.prototype._centroid=!0;mi.prototype._attrsAffectingSize=["radius"];Wt(mi);x.addGetterSetter(mi,"radius",0,N());x.addGetterSetter(mi,"sides",0,N());x.addGetterSetter(mi,"cornerRadius",0,qs(4));const Ma=Math.PI*2;class Gi extends D{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Ma,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Ma,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Gi.prototype.className="Ring";Gi.prototype._centroid=!0;Gi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Wt(Gi);x.addGetterSetter(Gi,"innerRadius",0,N());x.addGetterSetter(Gi,"outerRadius",0,N());class Ne extends D{constructor(t){super(t),this._updated=!0,this.anim=new ve(()=>{const i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,o=this.animations()[i],r=this.frameOffsets(),a=o[s+0],l=o[s+1],h=o[s+2],c=o[s+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),d)if(r){const u=r[i],f=n*2;t.drawImage(d,a,l,h,c,u[f+0],u[f+1],h,c)}else t.drawImage(d,a,l,h,c,0,0,h,c)}_hitFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,o=this.animations()[i],r=this.frameOffsets(),a=o[s+2],l=o[s+3];if(t.beginPath(),r){const h=r[i],c=n*2;t.rect(h[c+0],h[c+1],a,l)}else t.rect(0,0,a,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),i=this.animation(),n=this.animations(),s=n[i],o=s.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)}}Ne.prototype.className="Sprite";Wt(Ne);x.addGetterSetter(Ne,"animation");x.addGetterSetter(Ne,"animations");x.addGetterSetter(Ne,"frameOffsets");x.addGetterSetter(Ne,"image");x.addGetterSetter(Ne,"frameIndex",0,N());x.addGetterSetter(Ne,"frameRate",17,N());x.backCompat(Ne,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class bi extends D{_sceneFunc(t){const i=this.innerRadius(),n=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(let o=1;o<s*2;o++){const r=o%2===0?n:i,a=r*Math.sin(o*Math.PI/s),l=-1*r*Math.cos(o*Math.PI/s);t.lineTo(a,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}bi.prototype.className="Star";bi.prototype._centroid=!0;bi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Wt(bi);x.addGetterSetter(bi,"numPoints",5,N());x.addGetterSetter(bi,"innerRadius",0,N());x.addGetterSetter(bi,"outerRadius",0,N());function ii(e){return[...e].reduce((t,i,n,s)=>{if(new RegExp("\\p{Emoji}","u").test(i)){const o=s[n+1];o&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(o)?(t.push(i+o),s[n+1]=""):t.push(i)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(s[n+1]||""))?t.push(i+s[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?t[t.length-1]+=i:i&&t.push(i);return t},[])}const Hi="auto",S0="center",mc="inherit",fn="justify",C0="Change.konva",k0="2d",Ta="-",bc="left",M0="text",T0="Text",P0="top",A0="bottom",Pa="middle",xc="normal",E0="px ",ds=" ",R0="right",Aa="rtl",L0="word",O0="char",Ea="none",pr="",vc=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],I0=vc.length;function D0(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!n&&(t=`"${t}"`),t}).join(", ")}let us;function mr(){return us||(us=C.createCanvasElement().getContext(k0),us)}function G0(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function F0(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function N0(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Nt extends D{constructor(t){super(N0(t)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<I0;i++)this.on(vc[i]+C0,this._setTextData);this._setTextData()}_sceneFunc(t){var i,n;const s=this.textArr,o=s.length;if(!this.text())return;let r=this.padding(),a=this.fontSize(),l=this.lineHeight()*a,h=this.verticalAlign(),c=this.direction(),d=0,u=this.align(),f=this.getWidth(),g=this.letterSpacing(),m=this.charRenderFunc(),_=this.fill(),y=this.textDecoration(),w=this.underlineOffset(),M=y.indexOf("underline")!==-1,k=y.indexOf("line-through")!==-1,A;c=c===mc?t.direction:c;let E=l/2,X=Pa;if(!z.legacyTextRendering){const G=this.measureSize("M");X="alphabetic";const $=(i=G.fontBoundingBoxAscent)!==null&&i!==void 0?i:G.actualBoundingBoxAscent,Q=(n=G.fontBoundingBoxDescent)!==null&&n!==void 0?n:G.actualBoundingBoxDescent;E=($-Q)/2+l/2}for(c===Aa&&t.setAttr("direction",c),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",X),t.setAttr("textAlign",bc),h===Pa?d=(this.getHeight()-o*l-r*2)/2:h===A0&&(d=this.getHeight()-o*l-r*2),t.translate(r,d+r),A=0;A<o;A++){let G=0,$=0;const Q=s[A],ot=Q.text,J=Q.width,ft=Q.lastInParagraph;if(t.save(),u===R0?G+=f-J-r*2:u===S0&&(G+=(f-J-r*2)/2),M){t.save(),t.beginPath();const Z=w??(z.legacyTextRendering?Math.round(a/2):Math.round(a/4)),H=G,nt=E+$+Z;t.moveTo(H,nt);const j=u===fn&&!ft?f-r*2:J;t.lineTo(H+Math.round(j),nt),t.lineWidth=a/15;const mt=this._getLinearGradient();t.strokeStyle=mt||_,t.stroke(),t.restore()}const lt=G;if(c!==Aa&&(g!==0||u===fn||m)){const Z=ot.split(" ").length-1,H=ii(ot);for(let nt=0;nt<H.length;nt++){const j=H[nt];if(j===" "&&!ft&&u===fn&&(G+=(f-r*2-J)/Z),this._partialTextX=G,this._partialTextY=E+$,this._partialText=j,m){t.save();const Ot=s.slice(0,A).reduce((yt,Vt)=>yt+ii(Vt.text).length,0),dt=nt+Ot;m({char:j,index:dt,x:G,y:E+$,lineIndex:A,column:nt,isLastInLine:ft,width:this.measureSize(j).width,context:t})}t.fillStrokeShape(this),m&&t.restore(),G+=this.measureSize(j).width+g}}else g!==0&&t.setAttr("letterSpacing",`${g}px`),this._partialTextX=G,this._partialTextY=E+$,this._partialText=ot,t.fillStrokeShape(this);if(k){t.save(),t.beginPath();const Z=z.legacyTextRendering?0:-Math.round(a/4),H=lt;t.moveTo(H,E+$+Z);const nt=u===fn&&!ft?f-r*2:J;t.lineTo(H+Math.round(nt),E+$+Z),t.lineWidth=a/15;const j=this._getLinearGradient();t.strokeStyle=j||_,t.stroke(),t.restore()}t.restore(),o>1&&(E+=l)}}_hitFunc(t){const i=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}setText(t){const i=C._isString(t)?t:t==null?"":t+"";return this._setAttr(M0,i),this}getWidth(){return this.attrs.width===Hi||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Hi||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i,n,s,o,r,a,l,h,c,d,u;let f=mr(),g=this.fontSize(),m;f.save(),f.font=this._getContextFont(),m=f.measureText(t),f.restore();const _=g/100;return{actualBoundingBoxAscent:(i=m.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*_,actualBoundingBoxDescent:(n=m.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(s=m.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*_,actualBoundingBoxRight:(o=m.actualBoundingBoxRight)!==null&&o!==void 0?o:75.732421875*_,alphabeticBaseline:(r=m.alphabeticBaseline)!==null&&r!==void 0?r:0,emHeightAscent:(a=m.emHeightAscent)!==null&&a!==void 0?a:100*_,emHeightDescent:(l=m.emHeightDescent)!==null&&l!==void 0?l:-20*_,fontBoundingBoxAscent:(h=m.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*_,fontBoundingBoxDescent:(c=m.fontBoundingBoxDescent)!==null&&c!==void 0?c:21*_,hangingBaseline:(d=m.hangingBaseline)!==null&&d!==void 0?d:72.80000305175781*_,ideographicBaseline:(u=m.ideographicBaseline)!==null&&u!==void 0?u:-21*_,width:m.width,height:g}}_getContextFont(){return this.fontStyle()+ds+this.fontVariant()+ds+(this.fontSize()+E0)+D0(this.fontFamily())}_addTextLine(t){this.align()===fn&&(t=t.trim());const n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){const i=this.letterSpacing(),n=t.length;return mr().measureText(t).width+i*n}_setTextData(){let t=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,o=this.attrs.width,r=this.attrs.height,a=o!==Hi&&o!==void 0,l=r!==Hi&&r!==void 0,h=this.padding(),c=o-h*2,d=r-h*2,u=0,f=this.wrap(),g=f!==Ea,m=f!==O0&&g,_=this.ellipsis();this.textArr=[],mr().font=this._getContextFont();const y=_?this._getTextWidth(pr):0;for(let w=0,M=t.length;w<M;++w){let k=t[w],A=this._getTextWidth(k);if(a&&A>c)for(;k.length>0;){let E=0,X=ii(k).length,G="",$=0;for(;E<X;){const Q=E+X>>>1,ot=ii(k),J=ot.slice(0,Q+1).join(""),ft=this._getTextWidth(J);(_&&l&&u+s>d?ft+y:ft)<=c?(E=Q+1,G=J,$=ft):X=Q}if(G){if(m){const J=ii(k),ft=ii(G),lt=J[ft.length],Z=lt===ds||lt===Ta;let H;if(Z&&$<=c)H=ft.length;else{const nt=ft.lastIndexOf(ds),j=ft.lastIndexOf(Ta);H=Math.max(nt,j)+1}H>0&&(E=H,G=J.slice(0,E).join(""),$=this._getTextWidth(G))}if(G=G.trimRight(),this._addTextLine(G),n=Math.max(n,$),u+=s,this._shouldHandleEllipsis(u)){this._tryToAddEllipsisToLastLine();break}if(k=ii(k).slice(E).join("").trimLeft(),k.length>0&&(A=this._getTextWidth(k),A<=c)){this._addTextLine(k),u+=s,n=Math.max(n,A);break}}else break}else this._addTextLine(k),u+=s,n=Math.max(n,A),this._shouldHandleEllipsis(u)&&w<M-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&u+s>d)break}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(t){const i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,o=s!==Hi&&s!==void 0,r=this.padding(),a=s-r*2;return!(this.wrap()!==Ea)||o&&t+n>a}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,i=t!==Hi&&t!==void 0,n=this.padding(),s=t-n*2,o=this.ellipsis(),r=this.textArr[this.textArr.length-1];!r||!o||(i&&(this._getTextWidth(r.text+pr)<s||(r.text=r.text.slice(0,r.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(r.text+pr))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return t&&i?!0:super._useBufferCanvas()}}Nt.prototype._fillFunc=G0;Nt.prototype._strokeFunc=F0;Nt.prototype.className=T0;Nt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Wt(Nt);x.overWriteSetter(Nt,"width",mo());x.overWriteSetter(Nt,"height",mo());x.addGetterSetter(Nt,"direction",mc);x.addGetterSetter(Nt,"fontFamily","Arial");x.addGetterSetter(Nt,"fontSize",12,N());x.addGetterSetter(Nt,"fontStyle",xc);x.addGetterSetter(Nt,"fontVariant",xc);x.addGetterSetter(Nt,"padding",0,N());x.addGetterSetter(Nt,"align",bc);x.addGetterSetter(Nt,"verticalAlign",P0);x.addGetterSetter(Nt,"lineHeight",1,N());x.addGetterSetter(Nt,"wrap",L0);x.addGetterSetter(Nt,"ellipsis",!1,Pe());x.addGetterSetter(Nt,"letterSpacing",0,N());x.addGetterSetter(Nt,"text","",Li());x.addGetterSetter(Nt,"textDecoration","");x.addGetterSetter(Nt,"underlineOffset",void 0,N());x.addGetterSetter(Nt,"charRenderFunc",void 0);const B0="",yc="normal";function _c(e){e.fillText(this.partialText,0,0)}function wc(e){e.strokeText(this.partialText,0,0)}class jt extends D{constructor(t){super(t),this.dummyCanvas=C.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Gt.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const i=this.pathLength;return t>i?null:Gt.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Gt.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const i=this.textDecoration(),n=this.fill(),s=this.fontSize(),o=this.glyphInfo,r=i.indexOf("underline")!==-1,a=i.indexOf("line-through")!==-1;r&&t.beginPath();for(let l=0;l<o.length;l++){t.save();const h=o[l].p0;t.translate(h.x,h.y),t.rotate(o[l].rotation),this.partialText=o[l].text,t.fillStrokeShape(this),r&&(l===0&&t.moveTo(0,s/2+1),t.lineTo(o[l].width,s/2+1)),t.restore()}if(r&&(t.strokeStyle=n,t.lineWidth=s/20,t.stroke()),a){t.beginPath();for(let l=0;l<o.length;l++){t.save();const h=o[l].p0;t.translate(h.x,h.y),t.rotate(o[l].rotation),l===0&&t.moveTo(0,0),t.lineTo(o[l].width,0),t.restore()}t.strokeStyle=n,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const i=this.glyphInfo;if(i.length>=1){const n=i[0].p0;t.moveTo(n.x,n.y)}for(let n=0;n<i.length;n++){const s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Nt.prototype.setText.call(this,t)}_getContextFont(){return Nt.prototype._getContextFont.call(this)}_getTextSize(t){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const s=n.measureText(t);return n.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=ii(this.text()),i=[];let n=0;for(let d=0;d<t.length;d++)i.push({char:t[d],width:this._getTextSize(t[d]).width}),n+=i[d].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=n,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const o=this.letterSpacing(),r=this.align(),a=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*o,0);let h=0;r==="center"&&(h=Math.max(0,this.pathLength/2-l/2)),r==="right"&&(h=Math.max(0,this.pathLength-l));let c=h;for(let d=0;d<i.length;d++){const u=this._getPointAtLength(c);if(!u)return;const f=i[d].char;let g=i[d].width+o;if(f===" "&&r==="justify"){const k=this.text().split(" ").length-1;g+=(this.pathLength-l)/k}const m=this._getPointAtLength(c+g);if(!m)return;const _=Gt.getLineLength(u.x,u.y,m.x,m.y);let y=0;if(a)try{y=a(i[d-1].char,f)*this.fontSize()}catch{y=0}u.x+=y,m.x+=y,this.textWidth+=y;const w=Gt.getPointOnLine(y+_/2,u.x,u.y,m.x,m.y),M=Math.atan2(m.y-u.y,m.x-u.x);this.glyphInfo.push({transposeX:w.x,transposeY:w.y,text:t[d],rotation:M,p0:u,p1:m,width:_}),c+=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(h){t.push(h.p0.x),t.push(h.p0.y),t.push(h.p1.x),t.push(h.p1.y)});let i=t[0]||0,n=t[0]||0,s=t[1]||0,o=t[1]||0,r,a;for(let h=0;h<t.length/2;h++)r=t[h*2],a=t[h*2+1],i=Math.min(i,r),n=Math.max(n,r),s=Math.min(s,a),o=Math.max(o,a);const l=this.fontSize();return{x:i-l/2,y:s-l/2,width:n-i+l,height:o-s+l}}destroy(){return C.releaseCanvas(this.dummyCanvas),super.destroy()}}jt.prototype._fillFunc=_c;jt.prototype._strokeFunc=wc;jt.prototype._fillFuncHit=_c;jt.prototype._strokeFuncHit=wc;jt.prototype.className="TextPath";jt.prototype._attrsAffectingSize=["text","fontSize","data"];Wt(jt);x.addGetterSetter(jt,"data");x.addGetterSetter(jt,"fontFamily","Arial");x.addGetterSetter(jt,"fontSize",12,N());x.addGetterSetter(jt,"fontStyle",yc);x.addGetterSetter(jt,"align","left");x.addGetterSetter(jt,"letterSpacing",0,N());x.addGetterSetter(jt,"textBaseline","middle");x.addGetterSetter(jt,"fontVariant",yc);x.addGetterSetter(jt,"text",B0);x.addGetterSetter(jt,"textDecoration","");x.addGetterSetter(jt,"kerningFunc",void 0);const Sc="tr-konva",H0=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${Sc}`).join(" "),Ra="nodesRect",W0=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],U0={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},z0="ontouchstart"in z._global;function j0(e,t,i){if(e==="rotater")return i;t+=C.degToRad(U0[e]||0);const n=(C.radToDeg(t)%360+360)%360;return C._inRange(n,315+22.5,360)||C._inRange(n,0,22.5)?"ns-resize":C._inRange(n,45-22.5,45+22.5)?"nesw-resize":C._inRange(n,90-22.5,90+22.5)?"ew-resize":C._inRange(n,135-22.5,135+22.5)?"nwse-resize":C._inRange(n,180-22.5,180+22.5)?"ns-resize":C._inRange(n,225-22.5,225+22.5)?"nesw-resize":C._inRange(n,270-22.5,270+22.5)?"ew-resize":C._inRange(n,315-22.5,315+22.5)?"nwse-resize":(C.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const Is=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function V0(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function Cc(e,t,i){const n=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),s=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:n,y:s}}function X0(e,t){const i=V0(e);return Cc(e,t,i)}function Y0(e,t,i){let n=t;for(let s=0;s<e.length;s++){const o=z.getAngle(e[s]),r=Math.abs(o-t)%(Math.PI*2);Math.min(r,Math.PI*2-r)<i&&(n=o)}return n}let zr=0;class xt extends Zi{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(H0,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return C.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Sc+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(s=>s.isAncestorOf(this)?(C.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const o=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const r=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(r,o)}s.on(W0.map(r=>r+`.${this._getEventNamespace()}`).join(" "),o),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,o),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,n=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!i)return;const s=t.getAbsolutePosition(),o=s.x-i.x,r=s.y-i.y;this.nodes().forEach(a=>{if(a===t||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+o,y:l.y+r}),a.startDrag(n)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Ra),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Ra,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),n){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(n),r=t.getAbsolutePosition(n),a=s.x*o.x-t.offsetX()*o.x,l=s.y*o.y-t.offsetY()*o.y,h=(z.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:r.x+a*Math.cos(h)+l*Math.sin(-h),y:r.y+l*Math.cos(h)+a*Math.sin(h),width:s.width*o.x,height:s.height*o.y,rotation:h};return Cc(c,-z.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const i=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),d=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],u=h.getAbsoluteTransform();d.forEach(function(f){const g=u.point(f);i.push(g)})});const n=new ge;n.rotate(-z.getAngle(this.rotation()));let s=1/0,o=1/0,r=-1/0,a=-1/0;i.forEach(function(h){const c=n.point(h);s===void 0&&(s=r=c.x,o=a=c.y),s=Math.min(s,c.x),o=Math.min(o,c.y),r=Math.max(r,c.x),a=Math.max(a,c.y)}),n.invert();const l=n.point({x:s,y:o});return{x:l.x,y:l.y,width:r-s,height:a-o,rotation:z.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Is.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const i=new Qn({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:z0?10:"auto"}),n=this;i.on("mousedown touchstart",function(s){n._handleMouseDown(s)}),i.on("dragstart",s=>{i.stopDrag(),s.cancelBubble=!0}),i.on("dragend",s=>{s.cancelBubble=!0}),i.on("mouseenter",()=>{const s=z.getAngle(this.rotation()),o=this.rotateAnchorCursor(),r=j0(t,s,o);i.getStage().content&&(i.getStage().content.style.cursor=r),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){const t=new D({name:"back",width:0,height:0,sceneFunc(i,n){const s=n.getParent(),o=s.padding(),r=n.width(),a=n.height();if(i.beginPath(),i.rect(-o,-o,r+o*2,a+o*2),s.rotateEnabled()&&s.rotateLineVisible()){const l=s.rotateAnchorAngle(),h=s.rotateAnchorOffset(),c=C.degToRad(l),d=Math.sin(c),u=-Math.cos(c),f=r/2,g=a/2;let m=1/0;u<0?m=Math.min(m,-g/u):u>0&&(m=Math.min(m,(a-g)/u)),d<0?m=Math.min(m,-f/d):d>0&&(m=Math.min(m,(r-f)/d));const _=f+d*m,y=g+u*m,w=C._sign(a),M=_+d*h*w,k=y+u*h*w;i.moveTo(_,y),i.lineTo(M,k)}i.fillStrokeShape(n)},hitFunc:(i,n)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();i.beginPath(),i.rect(-s,-s,n.width()+s*2,n.height()+s*2),i.fillStrokeShape(n)}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const i=this._getNodeRect(),n=i.width,s=i.height,o=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));this.sin=Math.abs(s/o),this.cos=Math.abs(n/o),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const r=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-r.x,y:a.y-r.y},zr++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){let i,n,s;const o=this.findOne("."+this._movingAnchorName),r=o.getStage();r.setPointersPositions(t);const a=r.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const h=o.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),o.setAbsolutePosition(l);const c=o.getAbsolutePosition();if(h.x===c.x&&h.y===c.y)return;if(this._movingAnchorName==="rotater"){const w=this._getNodeRect();i=o.x()-w.width/2,n=-o.y()+w.height/2;const M=z.getAngle(this.rotateAnchorAngle());let k=Math.atan2(-n,i)+Math.PI/2-M;w.height<0&&(k-=Math.PI);const E=z.getAngle(this.rotation())+k,X=z.getAngle(this.rotationSnapTolerance()),$=Y0(this.rotationSnaps(),E,X)-w.rotation,Q=X0(w,$);this._fitNodesInto(Q,t);return}const d=this.shiftBehavior();let u;d==="inverted"?u=this.keepRatio()&&!t.shiftKey:d==="none"?u=this.keepRatio():u=this.keepRatio()||t.shiftKey;let f=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(w.x-o.x(),2)+Math.pow(w.y-o.y(),2));const M=this.findOne(".top-left").x()>w.x?-1:1,k=this.findOne(".top-left").y()>w.y?-1:1;i=s*this.cos*M,n=s*this.sin*k,this.findOne(".top-left").x(w.x-i),this.findOne(".top-left").y(w.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(o.x()-w.x,2)+Math.pow(w.y-o.y(),2));const M=this.findOne(".top-right").x()<w.x?-1:1,k=this.findOne(".top-right").y()>w.y?-1:1;i=s*this.cos*M,n=s*this.sin*k,this.findOne(".top-right").x(w.x+i),this.findOne(".top-right").y(w.y-n)}var g=o.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(w.x-o.x(),2)+Math.pow(o.y()-w.y,2));const M=w.x<o.x()?-1:1,k=o.y()<w.y?-1:1;i=s*this.cos*M,n=s*this.sin*k,o.x(w.x-i),o.y(w.y+n)}g=o.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(o.x()-w.x,2)+Math.pow(o.y()-w.y,2));const M=this.findOne(".bottom-right").x()<w.x?-1:1,k=this.findOne(".bottom-right").y()<w.y?-1:1;i=s*this.cos*M,n=s*this.sin*k,this.findOne(".bottom-right").x(w.x+i),this.findOne(".bottom-right").y(w.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(f=this.centeredScaling()||t.altKey,f){const w=this.findOne(".top-left"),M=this.findOne(".bottom-right"),k=w.x(),A=w.y(),E=this.getWidth()-M.x(),X=this.getHeight()-M.y();M.move({x:-k,y:-A}),w.move({x:E,y:X})}const m=this.findOne(".top-left").getAbsolutePosition();i=m.x,n=m.y;const _=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),y=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:n,width:_,height:y,rotation:z.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();zr--,this._fire("transformend",{evt:t,target:n}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),n&&this._nodes.forEach(s=>{var o;s._fire("transformend",{evt:t,target:s}),(o=s.getLayer())===null||o===void 0||o.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,i){const n=this._getNodeRect(),s=1;if(C._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(C._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const o=new ge;if(o.rotate(z.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const u=o.point({x:-this.padding()*2,y:0});t.x+=u.x,t.y+=u.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const u=o.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const u=o.point({x:0,y:-this.padding()*2});t.x+=u.x,t.y+=u.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const u=o.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const u=this.boundBoxFunc()(n,t);u?t=u:C.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const r=1e7,a=new ge;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/r,n.height/r);const l=new ge,h=t.width/r,c=t.height/r;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(h),Math.abs(c))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(h,c));const d=l.multiply(a.invert());this._nodes.forEach(u=>{var f;if(!u.getStage())return;const g=u.getParent().getAbsoluteTransform(),m=u.getTransform().copy();m.translate(u.offsetX(),u.offsetY());const _=new ge;_.multiply(g.copy().invert()).multiply(d).multiply(g).multiply(m);const y=_.decompose();u.setAttrs(y),(f=u.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(C._getRotation(t.rotation)),this._nodes.forEach(u=>{this._fire("transform",{evt:i,target:u}),u._fire("transform",{evt:i,target:u})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t;const i=this._getNodeRect();this.rotation(C._getRotation(i.rotation));const n=i.width,s=i.height,o=this.enabledAnchors(),r=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),h=this.find("._anchor");h.forEach(E=>{E.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:r&&o.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:l/2+a,visible:r&&o.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:r&&o.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+a,visible:r&&o.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:s/2,offsetX:l/2-a,visible:r&&o.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+a,offsetY:l/2-a,visible:r&&o.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:s,offsetY:l/2-a,visible:r&&o.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:s,offsetX:l/2-a,offsetY:l/2-a,visible:r&&o.indexOf("bottom-right")>=0});const c=this.rotateAnchorAngle(),d=this.rotateAnchorOffset(),u=C.degToRad(c),f=Math.sin(u),g=-Math.cos(u),m=n/2,_=s/2;let y=1/0;g<0?y=Math.min(y,-_/g):g>0&&(y=Math.min(y,(s-_)/g)),f<0?y=Math.min(y,-m/f):f>0&&(y=Math.min(y,(n-m)/f));const w=m+f*y,M=_+g*y,k=C._sign(s);this._batchChangeChild(".rotater",{x:w+f*d*k,y:M+g*d*k-a*g,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(E=>E.draggable()),x:0,y:0});const A=this.anchorStyleFunc();A&&h.forEach(E=>{A(E)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Zi.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return F.prototype.toObject.call(this)}clone(t){return F.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}xt.isTransforming=()=>zr>0;function K0(e){return e instanceof Array||C.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Is.indexOf(t)===-1&&C.warn("Unknown anchor name: "+t+". Available names are: "+Is.join(", "))}),e||[]}xt.prototype.className="Transformer";Wt(xt);x.addGetterSetter(xt,"enabledAnchors",Is,K0);x.addGetterSetter(xt,"flipEnabled",!0,Pe());x.addGetterSetter(xt,"resizeEnabled",!0);x.addGetterSetter(xt,"anchorSize",10,N());x.addGetterSetter(xt,"rotateEnabled",!0);x.addGetterSetter(xt,"rotateLineVisible",!0);x.addGetterSetter(xt,"rotationSnaps",[]);x.addGetterSetter(xt,"rotateAnchorOffset",50,N());x.addGetterSetter(xt,"rotateAnchorAngle",0,N());x.addGetterSetter(xt,"rotateAnchorCursor","crosshair");x.addGetterSetter(xt,"rotationSnapTolerance",5,N());x.addGetterSetter(xt,"borderEnabled",!0);x.addGetterSetter(xt,"anchorStroke","rgb(0, 161, 255)");x.addGetterSetter(xt,"anchorStrokeWidth",1,N());x.addGetterSetter(xt,"anchorFill","white");x.addGetterSetter(xt,"anchorCornerRadius",0,N());x.addGetterSetter(xt,"borderStroke","rgb(0, 161, 255)");x.addGetterSetter(xt,"borderStrokeWidth",1,N());x.addGetterSetter(xt,"borderDash");x.addGetterSetter(xt,"keepRatio",!0);x.addGetterSetter(xt,"shiftBehavior","default");x.addGetterSetter(xt,"centeredScaling",!1);x.addGetterSetter(xt,"ignoreStroke",!1);x.addGetterSetter(xt,"padding",0,N());x.addGetterSetter(xt,"nodes");x.addGetterSetter(xt,"node");x.addGetterSetter(xt,"boundBoxFunc");x.addGetterSetter(xt,"anchorDragBoundFunc");x.addGetterSetter(xt,"anchorStyleFunc");x.addGetterSetter(xt,"shouldOverdrawWholeArea",!1);x.addGetterSetter(xt,"useSingleNodeRotation",!0);x.backCompat(xt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Ze extends D{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,z.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Ze.prototype.className="Wedge";Ze.prototype._centroid=!0;Ze.prototype._attrsAffectingSize=["radius"];Wt(Ze);x.addGetterSetter(Ze,"radius",0,N());x.addGetterSetter(Ze,"angle",0,N());x.addGetterSetter(Ze,"clockwise",!1);x.backCompat(Ze,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function La(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const $0=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],q0=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Q0(e,t){const i=e.data,n=e.width,s=e.height;let o,r,a,l,h,c,d,u,f,g,m,_,y,w,M,k,A,E,X,G;const $=t+t+1,Q=n-1,ot=s-1,J=t+1,ft=J*(J+1)/2,lt=new La,Z=$0[t],H=q0[t];let nt=null,j=lt,mt=null,Ot=null;for(let dt=1;dt<$;dt++)j=j.next=new La,dt===J&&(nt=j);j.next=lt,a=r=0;for(let dt=0;dt<s;dt++){_=y=w=M=l=h=c=d=0,u=J*(k=i[r]),f=J*(A=i[r+1]),g=J*(E=i[r+2]),m=J*(X=i[r+3]),l+=ft*k,h+=ft*A,c+=ft*E,d+=ft*X,j=lt;for(let yt=0;yt<J;yt++)j.r=k,j.g=A,j.b=E,j.a=X,j=j.next;for(let yt=1;yt<J;yt++)o=r+((Q<yt?Q:yt)<<2),l+=(j.r=k=i[o])*(G=J-yt),h+=(j.g=A=i[o+1])*G,c+=(j.b=E=i[o+2])*G,d+=(j.a=X=i[o+3])*G,_+=k,y+=A,w+=E,M+=X,j=j.next;mt=lt,Ot=nt;for(let yt=0;yt<n;yt++)i[r+3]=X=d*Z>>H,X!==0?(X=255/X,i[r]=(l*Z>>H)*X,i[r+1]=(h*Z>>H)*X,i[r+2]=(c*Z>>H)*X):i[r]=i[r+1]=i[r+2]=0,l-=u,h-=f,c-=g,d-=m,u-=mt.r,f-=mt.g,g-=mt.b,m-=mt.a,o=a+((o=yt+t+1)<Q?o:Q)<<2,_+=mt.r=i[o],y+=mt.g=i[o+1],w+=mt.b=i[o+2],M+=mt.a=i[o+3],l+=_,h+=y,c+=w,d+=M,mt=mt.next,u+=k=Ot.r,f+=A=Ot.g,g+=E=Ot.b,m+=X=Ot.a,_-=k,y-=A,w-=E,M-=X,Ot=Ot.next,r+=4;a+=n}for(let dt=0;dt<n;dt++){y=w=M=_=h=c=d=l=0,r=dt<<2,u=J*(k=i[r]),f=J*(A=i[r+1]),g=J*(E=i[r+2]),m=J*(X=i[r+3]),l+=ft*k,h+=ft*A,c+=ft*E,d+=ft*X,j=lt;for(let Vt=0;Vt<J;Vt++)j.r=k,j.g=A,j.b=E,j.a=X,j=j.next;let yt=n;for(let Vt=1;Vt<=t;Vt++)r=yt+dt<<2,l+=(j.r=k=i[r])*(G=J-Vt),h+=(j.g=A=i[r+1])*G,c+=(j.b=E=i[r+2])*G,d+=(j.a=X=i[r+3])*G,_+=k,y+=A,w+=E,M+=X,j=j.next,Vt<ot&&(yt+=n);r=dt,mt=lt,Ot=nt;for(let Vt=0;Vt<s;Vt++)o=r<<2,i[o+3]=X=d*Z>>H,X>0?(X=255/X,i[o]=(l*Z>>H)*X,i[o+1]=(h*Z>>H)*X,i[o+2]=(c*Z>>H)*X):i[o]=i[o+1]=i[o+2]=0,l-=u,h-=f,c-=g,d-=m,u-=mt.r,f-=mt.g,g-=mt.b,m-=mt.a,o=dt+((o=Vt+J)<ot?o:ot)*n<<2,l+=_+=mt.r=i[o],h+=y+=mt.g=i[o+1],c+=w+=mt.b=i[o+2],d+=M+=mt.a=i[o+3],mt=mt.next,u+=k=Ot.r,f+=A=Ot.g,g+=E=Ot.b,m+=X=Ot.a,_-=k,y-=A,w-=E,M-=X,Ot=Ot.next,r+=n}}const J0=function(t){const i=Math.round(this.blurRadius());i>0&&Q0(t,i)};x.addGetterSetter(F,"blurRadius",0,N(),x.afterSetFilter);const Z0=function(e){const t=this.brightness()*255,i=e.data,n=i.length;for(let s=0;s<n;s+=4)i[s]+=t,i[s+1]+=t,i[s+2]+=t};x.addGetterSetter(F,"brightness",0,N(),x.afterSetFilter);const tf=function(e){const t=this.brightness(),i=e.data,n=i.length;for(let s=0;s<n;s+=4)i[s]=Math.min(255,i[s]*t),i[s+1]=Math.min(255,i[s+1]*t),i[s+2]=Math.min(255,i[s+2]*t)},ef=function(e){const t=Math.pow((this.contrast()+100)/100,2),i=e.data,n=i.length;let s=150,o=150,r=150;for(let a=0;a<n;a+=4)s=i[a],o=i[a+1],r=i[a+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,r=r<0?0:r>255?255:r,i[a]=s,i[a+1]=o,i[a+2]=r};x.addGetterSetter(F,"contrast",0,N(),x.afterSetFilter);const nf=function(e){var t,i,n,s,o,r,a,l,h;const c=e.data,d=e.width,u=e.height,f=Math.min(1,Math.max(0,(i=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&i!==void 0?i:.5)),g=Math.min(1,Math.max(0,(s=(n=this.embossWhiteLevel)===null||n===void 0?void 0:n.call(this))!==null&&s!==void 0?s:.5)),_=(a={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(r=(o=this.embossDirection)===null||o===void 0?void 0:o.call(this))!==null&&r!==void 0?r:"top-left"])!==null&&a!==void 0?a:315,y=!!((h=(l=this.embossBlend)===null||l===void 0?void 0:l.call(this))!==null&&h!==void 0&&h),w=f*10,M=g*255,k=_*Math.PI/180,A=Math.cos(k),E=Math.sin(k),X=128/1020*w,G=new Uint8ClampedArray(c),$=new Float32Array(d*u);for(let lt=0,Z=0;Z<c.length;Z+=4,lt++)$[lt]=.2126*G[Z]+.7152*G[Z+1]+.0722*G[Z+2];const Q=[-1,0,1,-2,0,2,-1,0,1],ot=[-1,-2,-1,0,0,0,1,2,1],J=[-d-1,-d,-d+1,-1,0,1,d-1,d,d+1],ft=lt=>lt<0?0:lt>255?255:lt;for(let lt=1;lt<u-1;lt++)for(let Z=1;Z<d-1;Z++){const H=lt*d+Z;let nt=0,j=0;nt+=$[H+J[0]]*Q[0],j+=$[H+J[0]]*ot[0],nt+=$[H+J[1]]*Q[1],j+=$[H+J[1]]*ot[1],nt+=$[H+J[2]]*Q[2],j+=$[H+J[2]]*ot[2],nt+=$[H+J[3]]*Q[3],j+=$[H+J[3]]*ot[3],nt+=$[H+J[5]]*Q[5],j+=$[H+J[5]]*ot[5],nt+=$[H+J[6]]*Q[6],j+=$[H+J[6]]*ot[6],nt+=$[H+J[7]]*Q[7],j+=$[H+J[7]]*ot[7],nt+=$[H+J[8]]*Q[8],j+=$[H+J[8]]*ot[8];const mt=A*nt+E*j,Ot=ft(M+mt*X),dt=H*4;if(y){const yt=Ot-M;c[dt]=ft(G[dt]+yt),c[dt+1]=ft(G[dt+1]+yt),c[dt+2]=ft(G[dt+2]+yt),c[dt+3]=G[dt+3]}else c[dt]=c[dt+1]=c[dt+2]=Ot,c[dt+3]=G[dt+3]}for(let lt=0;lt<d;lt++){let Z=lt*4,H=((u-1)*d+lt)*4;c[Z]=G[Z],c[Z+1]=G[Z+1],c[Z+2]=G[Z+2],c[Z+3]=G[Z+3],c[H]=G[H],c[H+1]=G[H+1],c[H+2]=G[H+2],c[H+3]=G[H+3]}for(let lt=1;lt<u-1;lt++){let Z=lt*d*4,H=(lt*d+(d-1))*4;c[Z]=G[Z],c[Z+1]=G[Z+1],c[Z+2]=G[Z+2],c[Z+3]=G[Z+3],c[H]=G[H],c[H+1]=G[H+1],c[H+2]=G[H+2],c[H+3]=G[H+3]}return e};x.addGetterSetter(F,"embossStrength",.5,N(),x.afterSetFilter);x.addGetterSetter(F,"embossWhiteLevel",.5,N(),x.afterSetFilter);x.addGetterSetter(F,"embossDirection","top-left",void 0,x.afterSetFilter);x.addGetterSetter(F,"embossBlend",!1,void 0,x.afterSetFilter);function br(e,t,i,n,s){const o=i-t,r=s-n;if(o===0)return n+r/2;if(r===0)return n;let a=(e-t)/o;return a=r*a+n,a}const sf=function(e){const t=e.data,i=t.length;let n=t[0],s=n,o,r=t[1],a=r,l,h=t[2],c=h,d;const u=this.enhance();if(u===0)return;for(let M=0;M<i;M+=4)o=t[M+0],o<n?n=o:o>s&&(s=o),l=t[M+1],l<r?r=l:l>a&&(a=l),d=t[M+2],d<h?h=d:d>c&&(c=d);s===n&&(s=255,n=0),a===r&&(a=255,r=0),c===h&&(c=255,h=0);let f,g,m,_,y,w;if(u>0)f=s+u*(255-s),g=n-u*(n-0),m=a+u*(255-a),_=r-u*(r-0),y=c+u*(255-c),w=h-u*(h-0);else{const M=(s+n)*.5;f=s+u*(s-M),g=n+u*(n-M);const k=(a+r)*.5;m=a+u*(a-k),_=r+u*(r-k);const A=(c+h)*.5;y=c+u*(c-A),w=h+u*(h-A)}for(let M=0;M<i;M+=4)t[M+0]=br(t[M+0],n,s,g,f),t[M+1]=br(t[M+1],r,a,_,m),t[M+2]=br(t[M+2],h,c,w,y)};x.addGetterSetter(F,"enhance",0,N(),x.afterSetFilter);const rf=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4){const s=.34*t[n]+.5*t[n+1]+.16*t[n+2];t[n]=s,t[n+1]=s,t[n+2]=s}};x.addGetterSetter(F,"hue",0,N(),x.afterSetFilter);x.addGetterSetter(F,"saturation",0,N(),x.afterSetFilter);x.addGetterSetter(F,"luminance",0,N(),x.afterSetFilter);const of=function(e){const t=e.data,i=t.length,n=1,s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,r=this.luminance()*127,a=n*s*Math.cos(o*Math.PI/180),l=n*s*Math.sin(o*Math.PI/180),h=.299*n+.701*a+.167*l,c=.587*n-.587*a+.33*l,d=.114*n-.114*a-.497*l,u=.299*n-.299*a-.328*l,f=.587*n+.413*a+.035*l,g=.114*n-.114*a+.293*l,m=.299*n-.3*a+1.25*l,_=.587*n-.586*a-1.05*l,y=.114*n+.886*a-.2*l;let w,M,k,A;for(let E=0;E<i;E+=4)w=t[E+0],M=t[E+1],k=t[E+2],A=t[E+3],t[E+0]=h*w+c*M+d*k+r,t[E+1]=u*w+f*M+g*k+r,t[E+2]=m*w+_*M+y*k+r,t[E+3]=A},af=function(e){const t=e.data,i=t.length,n=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),o=Math.abs(this.hue()+360)%360,r=n*s*Math.cos(o*Math.PI/180),a=n*s*Math.sin(o*Math.PI/180),l=.299*n+.701*r+.167*a,h=.587*n-.587*r+.33*a,c=.114*n-.114*r-.497*a,d=.299*n-.299*r-.328*a,u=.587*n+.413*r+.035*a,f=.114*n-.114*r+.293*a,g=.299*n-.3*r+1.25*a,m=.587*n-.586*r-1.05*a,_=.114*n+.886*r-.2*a;for(let y=0;y<i;y+=4){const w=t[y+0],M=t[y+1],k=t[y+2],A=t[y+3];t[y+0]=l*w+h*M+c*k,t[y+1]=d*w+u*M+f*k,t[y+2]=g*w+m*M+_*k,t[y+3]=A}};x.addGetterSetter(F,"hue",0,N(),x.afterSetFilter);x.addGetterSetter(F,"saturation",0,N(),x.afterSetFilter);x.addGetterSetter(F,"value",0,N(),x.afterSetFilter);const lf=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},cf=function(e,t,i){const n=e.data,s=t.data,o=e.width,r=e.height,a=i.polarCenterX||o/2,l=i.polarCenterY||r/2;let h=Math.sqrt(a*a+l*l),c=o-a,d=r-l;const u=Math.sqrt(c*c+d*d);h=u>h?u:h;const f=r,g=o,m=360/g*Math.PI/180;for(let _=0;_<g;_+=1){const y=Math.sin(_*m),w=Math.cos(_*m);for(let M=0;M<f;M+=1){c=Math.floor(a+h*M/f*w),d=Math.floor(l+h*M/f*y);let k=(d*o+c)*4;const A=n[k+0],E=n[k+1],X=n[k+2],G=n[k+3];k=(_+M*o)*4,s[k+0]=A,s[k+1]=E,s[k+2]=X,s[k+3]=G}}},hf=function(e,t,i){const n=e.data,s=t.data,o=e.width,r=e.height,a=i.polarCenterX||o/2,l=i.polarCenterY||r/2;let h=Math.sqrt(a*a+l*l),c=o-a,d=r-l;const u=Math.sqrt(c*c+d*d);h=u>h?u:h;const f=r,g=o,m=0;let _,y;for(c=0;c<o;c+=1)for(d=0;d<r;d+=1){const w=c-a,M=d-l,k=Math.sqrt(w*w+M*M)*f/h;let A=(Math.atan2(M,w)*180/Math.PI+360+m)%360;A=A*g/360,_=Math.floor(A),y=Math.floor(k);let E=(y*o+_)*4;const X=n[E+0],G=n[E+1],$=n[E+2],Q=n[E+3];E=(d*o+c)*4,s[E+0]=X,s[E+1]=G,s[E+2]=$,s[E+3]=Q}},df=function(e){const t=e.width,i=e.height;let n,s,o,r,a,l,h,c,d,u,f=Math.round(this.kaleidoscopePower());const g=Math.round(this.kaleidoscopeAngle()),m=Math.floor(t*(g%360)/360);if(f<1)return;const _=C.createCanvasElement();_.width=t,_.height=i;const y=_.getContext("2d").getImageData(0,0,t,i);C.releaseCanvas(_),cf(e,y,{polarCenterX:t/2,polarCenterY:i/2});let w=t/Math.pow(2,f);for(;w<=8;)w=w*2,f-=1;w=Math.ceil(w);let M=w,k=0,A=M,E=1;for(m+w>t&&(k=M,A=0,E=-1),s=0;s<i;s+=1)for(n=k;n!==A;n+=E)o=Math.round(n+m)%t,d=(t*s+o)*4,a=y.data[d+0],l=y.data[d+1],h=y.data[d+2],c=y.data[d+3],u=(t*s+n)*4,y.data[u+0]=a,y.data[u+1]=l,y.data[u+2]=h,y.data[u+3]=c;for(s=0;s<i;s+=1)for(M=Math.floor(w),r=0;r<f;r+=1){for(n=0;n<M+1;n+=1)d=(t*s+n)*4,a=y.data[d+0],l=y.data[d+1],h=y.data[d+2],c=y.data[d+3],u=(t*s+M*2-n-1)*4,y.data[u+0]=a,y.data[u+1]=l,y.data[u+2]=h,y.data[u+3]=c;M*=2}hf(y,e,{})};x.addGetterSetter(F,"kaleidoscopePower",2,N(),x.afterSetFilter);x.addGetterSetter(F,"kaleidoscopeAngle",0,N(),x.afterSetFilter);function fs(e,t,i){let n=(i*e.width+t)*4;const s=[];return s.push(e.data[n++],e.data[n++],e.data[n++],e.data[n++]),s}function gn(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function uf(e){const t=[0,0,0];for(let i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function ff(e,t){const i=fs(e,0,0),n=fs(e,e.width-1,0),s=fs(e,0,e.height-1),o=fs(e,e.width-1,e.height-1),r=t||10;if(gn(i,n)<r&&gn(n,o)<r&&gn(o,s)<r&&gn(s,i)<r){const a=uf([n,i,o,s]),l=[];for(let h=0;h<e.width*e.height;h++){const c=gn(a,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<r?0:255}return l}}function gf(e,t){for(let i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function pf(e,t,i){const n=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(n.length)),o=Math.floor(s/2),r=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let d=0;d<s;d++)for(let u=0;u<s;u++){const f=a+d-o,g=l+u-o;if(f>=0&&f<i&&g>=0&&g<t){const m=f*t+g,_=n[d*s+u];c+=e[m]*_}}r[h]=c===2040?255:0}return r}function mf(e,t,i){const n=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(n.length)),o=Math.floor(s/2),r=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let d=0;d<s;d++)for(let u=0;u<s;u++){const f=a+d-o,g=l+u-o;if(f>=0&&f<i&&g>=0&&g<t){const m=f*t+g,_=n[d*s+u];c+=e[m]*_}}r[h]=c>=1020?255:0}return r}function bf(e,t,i){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(n.length)),o=Math.floor(s/2),r=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let d=0;d<s;d++)for(let u=0;u<s;u++){const f=a+d-o,g=l+u-o;if(f>=0&&f<i&&g>=0&&g<t){const m=f*t+g,_=n[d*s+u];c+=e[m]*_}}r[h]=c}return r}const xf=function(e){const t=this.threshold();let i=ff(e,t);return i&&(i=pf(i,e.width,e.height),i=mf(i,e.width,e.height),i=bf(i,e.width,e.height),gf(e,i)),e};x.addGetterSetter(F,"threshold",0,N(),x.afterSetFilter);const vf=function(e){const t=this.noise()*255,i=e.data,n=i.length,s=t/2;for(let o=0;o<n;o+=4)i[o+0]+=s-2*s*Math.random(),i[o+1]+=s-2*s*Math.random(),i[o+2]+=s-2*s*Math.random()};x.addGetterSetter(F,"noise",.2,N(),x.afterSetFilter);const yf=function(e){let t=Math.ceil(this.pixelSize()),i=e.width,n=e.height,s=Math.ceil(i/t),o=Math.ceil(n/t),r=e.data;if(t<=0){C.error("pixelSize value can not be <= 0");return}for(let a=0;a<s;a+=1)for(let l=0;l<o;l+=1){let h=0,c=0,d=0,u=0;const f=a*t,g=f+t,m=l*t,_=m+t;let y=0;for(let w=f;w<g;w+=1)if(!(w>=i))for(let M=m;M<_;M+=1){if(M>=n)continue;const k=(i*M+w)*4;h+=r[k+0],c+=r[k+1],d+=r[k+2],u+=r[k+3],y+=1}h=h/y,c=c/y,d=d/y,u=u/y;for(let w=f;w<g;w+=1)if(!(w>=i))for(let M=m;M<_;M+=1){if(M>=n)continue;const k=(i*M+w)*4;r[k+0]=h,r[k+1]=c,r[k+2]=d,r[k+3]=u}}};x.addGetterSetter(F,"pixelSize",8,N(),x.afterSetFilter);const _f=function(e){const t=Math.round(this.levels()*254)+1,i=e.data,n=i.length,s=255/t;for(let o=0;o<n;o+=1)i[o]=Math.floor(i[o]/s)*s};x.addGetterSetter(F,"levels",.5,N(),x.afterSetFilter);const wf=function(e){const t=e.data,i=t.length,n=this.red(),s=this.green(),o=this.blue();for(let r=0;r<i;r+=4){const a=(.34*t[r]+.5*t[r+1]+.16*t[r+2])/255;t[r]=a*n,t[r+1]=a*s,t[r+2]=a*o,t[r+3]=t[r+3]}};x.addGetterSetter(F,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(F,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(F,"blue",0,Kl,x.afterSetFilter);const Sf=function(e){const t=e.data,i=t.length,n=this.red(),s=this.green(),o=this.blue(),r=this.alpha();for(let a=0;a<i;a+=4){const l=1-r;t[a]=n*r+t[a]*l,t[a+1]=s*r+t[a+1]*l,t[a+2]=o*r+t[a+2]*l}};x.addGetterSetter(F,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(F,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(F,"blue",0,Kl,x.afterSetFilter);x.addGetterSetter(F,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const Cf=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4){const s=t[n+0],o=t[n+1],r=t[n+2];t[n+0]=Math.min(255,s*.393+o*.769+r*.189),t[n+1]=Math.min(255,s*.349+o*.686+r*.168),t[n+2]=Math.min(255,s*.272+o*.534+r*.131)}},kf=function(e){const i=e.data;for(let n=0;n<i.length;n+=4){const s=i[n],o=i[n+1],r=i[n+2];.2126*s+.7152*o+.0722*r>=128&&(i[n]=255-s,i[n+1]=255-o,i[n+2]=255-r)}return e},Mf=function(e){const t=this.threshold()*255,i=e.data,n=i.length;for(let s=0;s<n;s+=1)i[s]=i[s]<t?0:255};x.addGetterSetter(F,"threshold",.5,N(),x.afterSetFilter);const St=_a.Util._assign(_a,{Arc:Qe,Arrow:Ii,Circle:rn,Ellipse:pi,Image:be,Label:vo,Tag:Di,Line:Je,Path:Gt,Rect:Qn,RegularPolygon:mi,Ring:Gi,Sprite:Ne,Star:bi,Text:Nt,TextPath:jt,Transformer:xt,Wedge:Ze,Filters:{Blur:J0,Brightness:tf,Brighten:Z0,Contrast:ef,Emboss:nf,Enhance:sf,Grayscale:rf,HSL:of,HSV:af,Invert:lf,Kaleidoscope:df,Mask:xf,Noise:vf,Pixelate:yf,Posterize:_f,RGB:wf,RGBA:Sf,Sepia:Cf,Solarize:kf,Threshold:Mf}}),Tf=1.3,jr=30,Pf=12,gs=2,Af=8,Ef=16,Rf=.42,Lf=.8,Of=1.4,If=.6,Df=2,Gf=!0,Ff=245,li=10,Nf=26,Bf=20,Hf=36,Wf=.35,Uf=16,ps="#88E523",zf="rgba(136,229,35,0.22)",jf="rgba(136,229,35,0.9)",Vf="rgba(136,229,35,0.4)",Oa=8;let Ct=null,yo=null,ce=null,Le=null,et=null,bt=null,Oe=null,ye={},fi=null,de=null,tn=new Map,at=null,jn=null,Ds="",Et=null,ki=null,De=null,wt=!1,he=null,Vn=1,Xn={x:0,y:0},ht=null,Ai=0,en=0,Ms=!1,In=0,Dn=0;const Xf=4;let Ei=null,Ui=null,At=null,hi=null,_n={x:0,y:0},nn=!0;function Js(){if(!bt)return null;const e=bt.nodes();return e&&e.length>0?e[0]:null}function xr(e){if(!bt||!et)return;bt.keepRatio(nn),bt.nodes([e]),e&&e.moveToTop&&e.moveToTop(),bt.getParent()===et&&bt.moveToTop(),wt&&(hi=e&&e.getAttr?.("name")==="dent"?e:null,At&&(hi?(At.visible(!0),$i(hi)):At.visible(!1)));const t=et.getLayer?et.getLayer():et;t&&t.batchDraw(),de&&de(wo())}function kc(){if(At)return;At=new St.Group({name:"dent-handle",visible:!1,listening:!0});const e=new St.Line({name:"stem-line",points:[0,0,0,0],stroke:ps,strokeWidth:1,listening:!1}),t=new St.Group({name:"handle-plus",draggable:!0,listening:!0}),i=new St.Group({listening:!1}),n=new St.Circle({radius:Oa,x:0,y:0,fill:zf,stroke:jf,strokeWidth:1.5,shadowColor:ps,shadowBlur:8,shadowOpacity:.5,listening:!1}),s=new St.Line({points:[-5,0,5,0],stroke:ps,strokeWidth:1.8,lineCap:"round",listening:!1}),o=new St.Line({points:[0,-5,0,5],stroke:ps,strokeWidth:1.8,lineCap:"round",listening:!1}),r=new St.Circle({radius:Oa+2,x:0,y:0,stroke:Vf,strokeWidth:1,listening:!1});i.add(n),i.add(s),i.add(o),i.add(r);const a=new St.Circle({radius:Uf,x:0,y:0,fill:"rgba(0,0,0,0)",listening:!0});t.add(i),t.add(a),At.add(e),At.add(t),t.on("click tap dragstart",l=>{l.cancelBubble=!0}),t.on("mousedown touchstart",()=>{ht&&ht.draggable(!1)}),t.on("dragstart",l=>{l&&l.cancelBubble!==void 0&&(l.cancelBubble=!0),ht&&ht.draggable(!1),_n=t.position()}),t.on("dragmove",()=>{const l=hi||Js();if(!l||l.getAttr?.("name")!=="dent")return;const h=t.position(),c=h.x-_n.x,d=h.y-_n.y;l.x(l.x()+c),l.y(l.y()+d),wt&&De&&Gn(l),$i(l),bt&&(bt.nodes([l]),bt.forceUpdate&&bt.forceUpdate()),_n=t.position();const u=l._dentMeta;u&&_o(l,u.type,u.id,u.sizes);const f=et.getLayer?et.getLayer():et;f&&f.batchDraw()}),t.on("dragend",()=>{})}function Mc(){if(!At||!ht)return;const e=ht.scaleX(),t=At.getChildren?.()?.[1];t&&t.scale({x:1/e,y:1/e})}function $i(e){if(!At||!e)return;const t=e.getParent(),i=e.getClientRect({relativeTo:t}),n=i.x+i.width/2,s=i.y+i.height,o=Math.max(Nf,Math.max(Bf,Math.min(Hf,i.height*Wf))),r=n,a=s+o,l=At.getChildren?At.getChildren():[],h=l[0];h&&h.points([n,s,r,a]);const c=l[1];c&&(c.position({x:r,y:a}),_n={x:r,y:a},Mc())}function Vr(e,t){return!e||!t?!0:e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height}function vr(e){if(!e)return!0;const t=at?Vr(e,at):!0,i=jn?Vr(e,jn):!0;return t&&i}function Yf(e){return new Promise((t,i)=>{const n=e.naturalWidth||e.width,s=e.naturalHeight||e.height;if(!n||!s){t(e);return}const o=document.createElement("canvas");o.width=n,o.height=s;const r=o.getContext("2d");if(!r){t(e);return}r.drawImage(e,0,0);const a=r.getImageData(0,0,n,s),l=a.data,h=Ff;for(let u=0;u<l.length;u+=4)l[u]>h&&l[u+1]>h&&l[u+2]>h&&(l[u+3]=0);r.putImageData(a,0,0);const c=o.toDataURL("image/png"),d=new window.Image;d.crossOrigin="anonymous",d.onload=()=>t(d),d.onerror=()=>i(new Error("removeWhiteBackground: failed to load result image")),d.src=c})}function Kf(e,t=10){const i=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(!i||!n)return null;const s=document.createElement("canvas");s.width=i,s.height=n;const o=s.getContext("2d");if(!o)return null;o.drawImage(e,0,0);const r=o.getImageData(0,0,i,n).data;let a=i,l=n,h=0,c=0,d=!1;for(let u=0;u<n;u++)for(let f=0;f<i;f++){const g=(u*i+f)*4;r[g+3]>t&&(d=!0,f<a&&(a=f),f>h&&(h=f),u<l&&(l=u),u>c&&(c=u))}return d?{x:a,y:l,width:h-a+1,height:c-l+1}:null}function $f(e){const t=(e||"").replace(/^\/+/,""),i=(Ds||"/DentMetric/").replace(/\/$/,"")||"",n=t?i?`${window.location.origin}${i}/${t}`:`/${t}`:"";return new Promise((s,o)=>{const r=new window.Image;r.crossOrigin="anonymous",r.onload=()=>{!r.naturalWidth||!r.naturalHeight?o(new Error("Image invalid size")):s(r)},r.onerror=()=>o(new Error("Image load failed: "+n)),r.src=n})}async function qf(e,t,i,n,s="",o=null){if(!e||!t)return;yo=e,Ds=s||"",Oe=t,ye=i||{},fi=n,de=o??null,wt=!!(t.realSizeMm&&t.asset&&t.asset.type==="image"),Et=null,ki=null;let r=e.offsetWidth||0,a=e.offsetHeight||0;if((r<=0||a<=0)&&(await new Promise(h=>requestAnimationFrame(h)),r=e.offsetWidth||0,a=e.offsetHeight||0),(r<=0||a<=0)&&(r=Math.max(r,320),a=Math.max(a,240)),jn={x:0,y:0,width:r,height:a},Ct&&Ct.destroy(),Ct=new St.Stage({container:e,width:r,height:a}),wt){const h=new St.Layer;Ct.add(h),Ei=new St.Rect({x:0,y:0,width:r,height:a,fill:"#0b0f14",listening:!1}),h.add(Ei),ht=new St.Group,ht.listening(!0),ht.draggable(!1),h.add(ht),ce=new St.Group,ce.listening(!1),ce.setAttr("isBackground",!0),Le=new St.Group,Le.listening(!1),Le.setAttr("isBackground",!0),et=new St.Group,ht.add(ce),ht.add(Le),ht.add(et),await n1(r,a),Ai=ki?ki.width:0,en=ki?ki.height:0,ht.offset({x:0,y:0}),he&&ht.clip({x:he.x,y:he.y,width:he.width,height:he.height});const c=Ac(r,a);Vn=c.scaleFit,Xn={x:c.posFit.x,y:c.posFit.y},In=r,Dn=a,Xr()}else Ei=null,ht=null,Ai=0,en=0,ce=new St.Layer,Ct.add(ce),i1(r,a),et=new St.Layer,Ct.add(et);if(bt=new St.Transformer({anchorStroke:"#88E523",anchorFill:"#0B121E",anchorSize:15,borderStroke:"#88E523",borderDash:[4,4],centeredScaling:!0,rotateEnabled:!0,keepRatio:nn,boundBoxFunc:(h,c)=>c.width<li||c.height<li?h:c}),bt.on("mousedown touchstart",()=>{ht&&ht.draggable(!1)}),et.add(bt),wt&&kc(),wt&&At&&et.add(At),wt){Ui=new St.Layer({listening:!1}),Ct.add(Ui);const h=(Ds||"/DentMetric/").replace(/\/$/,"")||"",c=h?`${window.location.origin}${h}/logo.png`:`${window.location.origin}/logo.png`,d=new window.Image;d.crossOrigin="anonymous",d.onload=()=>{if(!Ui)return;const u=44,f=Math.min(44,d.naturalHeight/d.naturalWidth*u),g=new St.Image({image:d,x:10,y:10,width:u,height:f,opacity:.5,listening:!1});Ui.add(g),Ui.batchDraw()},d.onerror=()=>{},d.src=c}Ct.on("click tap",h=>{const c=h.target,d=c===Ct,u=c?.getAttr&&c.getAttr("isBackground")===!0,f=c===bt||c?.getParent&&c.getParent()===bt||bt&&typeof bt.isAncestorOf=="function"&&bt.isAncestorOf(c),g=c?.name?.()==="dent-handle"||c?.name?.()==="handle-plus"||c?.getParent?.()?.name?.()==="dent-handle"||c?.getParent?.()?.name?.()==="handle-plus";if(f||g)return;const m=ht&&c===ht,_=c?.getType&&c.getType()==="Layer";if(d||u||m||_||et&&c===et){bt.nodes([]),wt&&(hi=null,At&&At.visible(!1));const w=et?.getLayer?et.getLayer():et;w&&w.batchDraw(),de&&de(null)}});const l=et.getLayer?et.getLayer():et;l&&l.batchDraw()}function Gn(e,t={}){if(!Ct||!ht)return;const i=he?t.marginPx??0:t.marginPx??Pf;let n;if(he){const w=ht.scaleX(),M=ht.position();n={x:M.x+he.x*w,y:M.y+he.y*w,width:he.width*w,height:he.height*w}}else if(De)n=De.getClientRect({relativeTo:Ct});else return;const s={left:n.x-i,top:n.y-i,right:n.x+n.width+i,bottom:n.y+n.height+i},o=e.getClientRect({relativeTo:Ct}),r=o.x,a=o.y,l=o.x+o.width,h=o.y+o.height;let c=0,d=0;if(r<s.left?c=s.left-r:l>s.right&&(c=s.right-l),a<s.top?d=s.top-a:h>s.bottom&&(d=s.bottom-h),c===0&&d===0)return;const u=e.getParent();if(!u)return;const f=u.getAbsoluteTransform().copy().invert(),g=f.point({x:0,y:0}),m=f.point({x:c,y:d}),_=m.x-g.x,y=m.y-g.y;e.x(e.x()+_),e.y(e.y()+y)}function Tc(e){if(!e)return 20;const t=Math.max(.01,Math.abs(e.scaleX())),i=Math.max(.01,Math.abs(e.scaleY()));let n;if(e.className==="Ellipse"){const s=Math.abs(e.radiusX())*t*2,o=Math.abs(e.radiusY())*i*2;n=Math.min(s,o)}else n=Math.min(Math.abs(e.width())*t,Math.abs(e.height())*i);return n}function Gs(e){if(!e||!ht)return;const t=ht.scaleX(),n=Tc(e)*t,s=Math.max(Af,Math.min(Ef,n*Rf)),o=Math.max(2,s/t);e.hitStrokeWidth(o)}function Fs(e){if(!e||!ht)return;const t=ht.scaleX(),s=Tc(e)*t<40?Lf:Of,o=Math.max(If,Math.min(Df,s/t));e.strokeWidth(o)}function Pc(e){if(!e||!ht)return;const t=ht.scaleX();e.strokeWidth(Math.max(.6,1.2/t))}const Qf=8;function Ac(e,t){if(!Ai||!en||e<=0||t<=0)return{scaleFit:1,posFit:{x:0,y:0}};const n=Math.max(1,e-Qf*2)/Ai,s=Ai*n,o=en*n,r={x:(e-s)/2,y:(t-o)/2};return{scaleFit:n,posFit:r}}function Xr(){if(!ht||!Ct)return;ht.scale({x:Vn,y:Vn}),ht.position({x:Xn.x,y:Xn.y}),et&&(et.getChildren?et.getChildren():[]).forEach(i=>{i!==bt&&i.getAttr?.("name")==="dent"&&(Fs(i),Gs(i),Pc(i))}),Mc();const e=ht.getLayer();e&&e.batchDraw()}function Ia(e){nn=!!e,bt&&bt.keepRatio(nn)}function Jf(e){if(!Ct)return;Ct.listening(!!e),bt&&bt.visible(!!e),At&&At.visible(!!e&&!!hi),(et?.getChildren?.()||[]).forEach(n=>{n!==bt&&n!==At&&n.getAttr?.("name")==="dent"&&n.draggable(!!e)});const i=et?.getLayer?et.getLayer():et;i&&i.batchDraw()}function Zf(e,t){if(!Ct||e<=0||t<=0)return;Ct.width(e),Ct.height(t),jn={x:0,y:0,width:e,height:t},Ei&&(Ei.width(e),Ei.height(t));const i=et?et.getLayer?et.getLayer():et:null;i&&i.batchDraw()}function t1(){const e=yo||Ct&&Ct.container&&Ct.container();if(!Ct||!e)return;const t=e.clientWidth||e.offsetWidth,i=e.clientHeight||e.offsetHeight;t<=0||i<=0||Zf(t,i)}function e1(){if(t1(),!ht||Ai<=0||en<=0)return;const e=Ct.width(),t=Ct.height(),i=Xf;if(In>0&&Dn>0&&Math.abs(e-In)<=i&&Math.abs(t-Dn)<=i){Xr();return}In=e,Dn=t;const s=Ac(e,t);Vn=s.scaleFit,Xn={x:s.posFit.x,y:s.posFit.y},Xr()}function ms(e){Ms||(Ms=!0,requestAnimationFrame(()=>{Ms=!1,e1()}))}function i1(e,t){const i=e/320,n=t/420,s=Math.min(i,n),o=new St.Path({data:Oe.path,fill:"#151F2E",stroke:"#334155",strokeWidth:3/s,shadowColor:"black",shadowBlur:20,shadowOpacity:.5,scaleX:s,scaleY:s,x:(e-300*s)/2,y:(t-400*s)/2,name:"partPath"});ce.add(o),at=o.getClientRect(),Oe.ribs&&Oe.ribs.length&&Oe.ribs.forEach(r=>{const a=new St.Rect({x:r.x*s+o.x(),y:r.y*s+o.y(),width:r.w*s,height:r.h*s,fill:"rgba(255, 50, 50, 0.25)",stroke:"rgba(255, 50, 50, 0.5)",strokeWidth:1,name:"rib",listening:!1});ce.add(a)})}async function n1(e,t){const i=Oe.realSizeMm.w,n=Oe.realSizeMm.h,s=Oe.asset.src;let o=null,r=0,a=0,l=null;try{let f=await $f(s);if(Gf)try{f=await Yf(f)}catch{}l=f;const g=Math.max(1,f.naturalWidth),m=Math.max(1,f.naturalHeight),_=Math.min(e/g,t/m)||1;r=g*_,a=m*_,Et=Math.min(r/i,a/n)||.1;const y=new St.Rect({x:0,y:0,width:r,height:a,fill:"rgba(255,255,255,0.03)",listening:!1});ce.add(y),o=new St.Image({image:f,x:0,y:0,width:r,height:a,shadowColor:"black",shadowBlur:18,shadowOpacity:.45,name:"partImage",listening:!1}),o.setAttr("isBackground",!0),ce.add(o),De=o}catch{r=Math.min(300,e),a=Math.min(400,t),Et=Math.min(r/i,a/n)||.1,o=new St.Rect({x:0,y:0,width:r,height:a,fill:"#2a2a2a",stroke:"#444",strokeWidth:2,name:"partPlaceholder",listening:!1}),o.setAttr("isBackground",!0),ce.add(o);const g=new St.Text({text:Oe.name||"",fontSize:16,fill:"#888",width:280,padding:10,align:"center",listening:!1});g.position({x:10,y:(a-g.height())/2}),ce.add(g),De=o}ki={x:0,y:0,width:r,height:a},he=null;const h=l?l.naturalWidth||l.width:0,c=l?l.naturalHeight||l.height:0;let d={x:0,y:0,width:r,height:a};if(l&&h>0&&c>0){const f=Kf(l);if(f){const g=r/h,m=a/c,_=f.x*g-gs,y=f.y*m-gs,w=f.width*g+2*gs,M=f.height*m+2*gs,k=Math.min(r,_+w),A=Math.min(a,y+M);d={x:Math.max(0,_),y:Math.max(0,y),width:Math.max(1,k-Math.max(0,_)),height:Math.max(1,A-Math.max(0,y))}}}he=d,at=d,s1(d.x,d.y,d.width,d.height);const u=ce.getLayer();u&&u.batchDraw()}function s1(e,t,i,n){if(!Le||Et==null||i<=0||n<=0)return;Le.destroyChildren();const s=jr*Et,o=Math.floor(e/s),r=Math.ceil((e+i)/s),a=Math.floor(t/s),l=Math.ceil((t+n)/s);for(let c=o;c<=r;c++){const d=c*s,u=new St.Line({points:[d,t,d,t+n],stroke:"rgba(255,255,255,0.06)",strokeWidth:1,strokeScaleEnabled:!1,listening:!1});u.setAttr("isBackground",!0),Le.add(u)}for(let c=a;c<=l;c++){const d=c*s,u=new St.Line({points:[e,d,e+i,d],stroke:"rgba(255,255,255,0.06)",strokeWidth:1,strokeScaleEnabled:!1,listening:!1});u.setAttr("isBackground",!0),Le.add(u)}const h=Le.getLayer();h&&h.batchDraw()}function r1(e,t,i){if(!i||i.length===0)return 0;const n=[...i].sort((s,o)=>s.areaMm2-o.areaMm2);if(e<=n[0].areaMm2)return ye[n[0].code]??0;if(e>=n[n.length-1].areaMm2)return ye[n[n.length-1].code]??0;for(let s=0;s<n.length-1;s++){const o=n[s],r=n[s+1];if(e>=o.areaMm2&&e<=r.areaMm2){const a=ye[o.code]??0,l=ye[r.code]??0,h=(e-o.areaMm2)/(r.areaMm2-o.areaMm2);return a+(l-a)*h}}return ye[n[0].code]??0}function o1(e,t,i){if(!i||i.length===0)return 0;const n=[...i].sort((o,r)=>(o.area||0)-(r.area||0));if(n[0].area!=null&&e<=n[0].area)return ye[n[0].code]??n[0].basePrice??0;const s=n[n.length-1];if(s.area!=null&&e>=s.area)return ye[s.code]??s.basePrice??0;for(let o=0;o<n.length-1;o++){const r=n[o],a=n[o+1],l=r.area??0,h=a.area??0;if(h>l&&e>=l&&e<=h){const c=ye[r.code]??r.basePrice??0,d=ye[a.code]??a.basePrice??0,u=(e-l)/(h-l);return c+(d-c)*u}}return ye[n[0].code]??n[0].basePrice??0}function Ts(e){const t=Math.abs(e.scaleX())||1,i=Math.abs(e.scaleY())||1;if(e.className==="Ellipse"){const a=Math.abs(e.radiusX()*t),l=Math.abs(e.radiusY()*i);return{x:e.x()-a,y:e.y()-l,width:a*2,height:l*2}}const n=Math.abs(e.width()*t),s=Math.abs(e.height()*i),o=e.offsetX?e.offsetX():0,r=e.offsetY?e.offsetY():0;return{x:e.x()-(Math.abs(o*t)||n/2),y:e.y()-(Math.abs(r*i)||s/2),width:n,height:s}}function _o(e,t,i,n){if(!e||!Ct)return;const s=Math.abs(e.scaleX())||1,o=Math.abs(e.scaleY())||1;let r=0;e.className==="Ellipse"?r=Math.PI*Math.abs(e.radiusX()*s)*Math.abs(e.radiusY()*o):r=Math.abs(e.width()*s)*Math.abs(e.height()*o);let a=null,l=null;wt&&Et!=null&&Et>0&&(a=r/(Et*Et),l=a/(jr*jr));let h=!1,c=1;if(!wt){const f=e.getClientRect(),g=Ct.find(".rib");for(let m of g)if(St.Util.haveIntersection(m.getClientRect(),f)){h=!0,c=Tf;break}}let d;wt&&a!=null&&n&&n[0]&&n[0].areaMm2!=null?d=r1(a,t,n):d=o1(r,t,n),h&&(d*=c),h?(e.stroke("#FF4444"),e.fill("rgba(255, 68, 68, 0.3)")):(e.stroke(t==="circle"?"#88E523":"#A0AEC0"),e.fill(t==="circle"?"rgba(136, 229, 35, 0.3)":"rgba(200, 200, 200, 0.3)"));const u={id:i,type:t,areaPx:r,areaMm2:a??void 0,cellsCount:l!=null?Math.round(l*100)/100:void 0,isComplex:h,price:d};tn.set(i,u),fi&&fi(Array.from(tn.values()))}const Yr=2e3,bs=.1;function wo(){const e=Js();if(!e||!e._dentMeta||!wt||Et==null||Et<=0)return null;const t=Ts(e);return{id:e._dentMeta.id,type:e._dentMeta.type,widthMm:t.width/Et,heightMm:t.height/Et}}function a1(e,t){const i=Js();if(!i||!i._dentMeta||!wt||Et==null||Et<=0)return;const n=Math.max(bs,Math.min(Yr,Number(e)||bs)),s=Math.max(bs,Math.min(Yr,Number(t)||bs)),o=n*Et,r=s*Et;i.className==="Ellipse"?(i.radiusX(o/2),i.radiusY(r/2)):(i.width(o),i.height(r),i.scaleX(1),i.scaleY(1),i.offsetX(o/2),i.offsetY(r/2)),wt&&De&&Gn(i);const a=i._dentMeta;_o(i,a.type,a.id,a.sizes),Fs(i),Gs(i),wt&&At&&$i(i);const l=i.getLayer();l&&l.batchDraw(),de&&de(wo())}function l1(e,t,i){if(!Ct||!et||!bt)return;const n=i.find(f=>f.code===t);if(!n)return;const s=Date.now();let o,r;wt&&at||at?(o=at.x+at.width/2,r=at.y+at.height/2):(o=Ct.width()/2,r=Ct.height()/2);let a;if(e==="circle"){let f,g;if(wt&&Et!=null&&n.mm)f=n.mm.w/2*Et,g=n.mm.h/2*Et;else{const m=n.radius??20;f=m,g=m}a=new St.Ellipse({x:o,y:r,radiusX:f||15,radiusY:g||15,fill:"rgba(136, 229, 35, 0.3)",stroke:"#88E523",strokeWidth:1,draggable:!0,listening:!0,name:"dent",id:String(s)}),a.setAttr("type","circle")}else{let f,g;wt&&Et!=null&&n.mm?(f=(n.mm.w||n.w)*Et,g=(n.mm.h||n.h)*Et):(f=n.w??40,g=n.h??20),a=new St.Rect({x:o,y:r,width:f,height:g,offsetX:f/2,offsetY:g/2,cornerRadius:5,fill:"rgba(200, 200, 200, 0.3)",stroke:"#A0AEC0",strokeWidth:1,draggable:!0,listening:!0,name:"dent",id:String(s)}),a.setAttr("type","strip")}if(a._dentMeta={id:s,type:e,sizes:i},wt&&at){const f=Ts(a);let g=0,m=0;f.x<at.x?g=at.x-f.x:f.x+f.width>at.x+at.width&&(g=at.x+at.width-(f.x+f.width)),f.y<at.y?m=at.y-f.y:f.y+f.height>at.y+at.height&&(m=at.y+at.height-(f.y+f.height)),(g!==0||m!==0)&&a.position({x:a.x()+g,y:a.y()+m})}a.dragBoundFunc(f=>{if(wt)return f;const g=a.position(),m=a.getClientRect(),_=f.x-g.x,y=f.y-g.y,w={x:m.x+_,y:m.y+y,width:m.width,height:m.height};return vr(w)?f:g});const l=.1,h=()=>{const f=Math.max(l,Math.abs(a.scaleX())),g=Math.max(l,Math.abs(a.scaleY())),m={x:a.x(),y:a.y(),scaleX:f,scaleY:g,rotation:a.rotation()};a.className==="Ellipse"&&(m.radiusX=Math.abs(a.radiusX()),m.radiusY=Math.abs(a.radiusY())),a._lastGoodTransform=m};h();const c=(f,g)=>{const m=f.x(),_=f.y();return m>=g.x&&m<=g.x+g.width&&_>=g.y&&_<=g.y+g.height},d=()=>{if(_o(a,e,s,i),wt&&at){const f=Ts(a);(Vr(f,at)||c(a,at))&&h()}else vr(a.getClientRect())&&h()};a.on("mousedown touchstart",f=>{f.cancelBubble=!0,ht&&ht.draggable(!1)}),a.on("dragstart",f=>{f.cancelBubble=!0,xr(a),ht&&ht.draggable(!1)}),a.on("dragmove",()=>{wt&&De&&Gn(a),wt&&At&&$i(a),bt&&(bt.nodes([a]),bt.forceUpdate&&bt.forceUpdate()),d();const f=et.getLayer?et.getLayer():et;f&&f.batchDraw()}),a.on("dragend",()=>{wt&&De&&Gn(a),wt&&At&&$i(a),d();const f=et.getLayer?et.getLayer():et;f&&f.batchDraw()}),a.on("transform",d),a.on("transformstart",()=>{ht&&ht.draggable(!1)}),a.on("transformend",()=>{if(wt&&at){const f=Ts(a);let g=0,m=0;f.x<at.x?g=at.x-f.x:f.x+f.width>at.x+at.width&&(g=at.x+at.width-(f.x+f.width)),f.y<at.y?m=at.y-f.y:f.y+f.height>at.y+at.height&&(m=at.y+at.height-(f.y+f.height)),(g!==0||m!==0)&&a.position({x:a.x()+g,y:a.y()+m})}if(a.className==="Rect"){const f=Math.max(li,Math.abs(a.width()*a.scaleX())),g=Math.max(li,Math.abs(a.height()*a.scaleY()));a.width(f),a.height(g),a.scaleX(1),a.scaleY(1),a.offsetX(f/2),a.offsetY(g/2)}if(a.className==="Ellipse"){let f=Math.abs(a.radiusX()*a.scaleX()),g=Math.abs(a.radiusY()*a.scaleY());if(wt&&Et!=null&&Et>0){const m=Yr/2*Et;f=Math.min(f,m),g=Math.min(g,m)}f=Math.max(li/2,f),g=Math.max(li/2,g),a.radiusX(f),a.radiusY(g),a.scaleX(1),a.scaleY(1)}if(wt&&De&&Gn(a),Fs(a),Gs(a),wt&&at&&a._lastGoodTransform)if(!c(a,at))a.setAttrs(a._lastGoodTransform);else{const f=Math.max(l,Math.abs(a.scaleX())),g=Math.max(l,Math.abs(a.scaleY()));a.scaleX(f),a.scaleY(g),h()}else!wt&&!vr(a.getClientRect())&&a._lastGoodTransform&&a.setAttrs(a._lastGoodTransform);d(),wt&&At&&$i(a),de&&de(wo())}),a.on("click tap",f=>{f.cancelBubble=!0,wt&&(hi=a),xr(a)}),et.add(a),At&&At.moveToTop(),Fs(a),Gs(a),Pc(a),xr(a),d();const u=et.getLayer?et.getLayer():et;u&&u.batchDraw()}function Da(){const e=Js();if(!e||!e._dentMeta)return;tn.delete(e._dentMeta.id),bt.nodes([]),e.destroy();const t=et?et.getLayer():null;t&&t.batchDraw(),fi&&fi(Array.from(tn.values())),de&&de(null)}function Ga(){if(et){if(et.destroyChildren(),tn.clear(),Ct&&et){bt=new St.Transformer({anchorStroke:"#88E523",anchorFill:"#0B121E",anchorSize:15,borderStroke:"#88E523",borderDash:[4,4],centeredScaling:!0,rotateEnabled:!0,keepRatio:nn,boundBoxFunc:(t,i)=>i.width<li||i.height<li?t:i}),bt.on("mousedown touchstart",()=>{ht&&ht.draggable(!1)}),et.add(bt),wt&&(At=null,kc(),At&&et.add(At));const e=et.getLayer?et.getLayer():et;e&&e.batchDraw()}fi&&fi([]),de&&de(null)}}function c1(){Ct&&(Ct.destroy(),Ct=null),yo=null,Vn=1,Xn={x:0,y:0},Ms=!1,In=0,Dn=0,ce=null,Le=null,et=null,bt=null,Oe=null,ye={},fi=null,de=null,tn.clear(),at=null,jn=null,Et=null,ki=null,De=null,he=null,wt=!1,Ds="",ht=null,Ai=0,en=0,Ei=null,Ui=null,At=null,hi=null,nn=!0}const Bt={repairTypes:[{code:"R1",name:" ",mult:1},{code:"R2",name:" ",mult:.85}],materials:[{code:"M1",name:"",mult:1},{code:"M2",name:"",mult:1.3}],carClasses:[{code:"CLASS_STD",name:"",mult:1},{code:"CLASS_PREM",name:" / ",mult:1.2}],risks:[{code:"RK1",name:"",matrixKey:"K1"},{code:"RK2",name:"",matrixKey:"K2"},{code:"RK3",name:"",matrixKey:"K3"},{code:"RK4",name:"",matrixKey:"K4"}],disassembly:[{code:"Z0",name:" ",price:0},{code:"Z1",name:"",price:1e3},{code:"Z2",name:"",price:2e3},{code:"Z3",name:"",price:4e3},{code:"Z4",name:"+",price:3e3}],defaultMasters:[{name:"",rate:5e3},{name:"",rate:2500}],circleSizes:[{code:"S2",name:" ",basePrice:2e3,radius:15,area:706},{code:"S4",name:"  ",basePrice:3e3,radius:25,area:1963},{code:"S6",name:" ",basePrice:5e3,radius:35,area:3848},{code:"S8",name:" ",basePrice:7e3,radius:45,area:6361},{code:"S10",name:"  ",basePrice:12e3,radius:60,area:11309},{code:"S11",name:" ",basePrice:15e3,radius:75,area:17671}],stripSizes:[{code:"LS1",name:" . ",basePrice:4e3,w:40,h:20,area:800},{code:"LS2",name:" ",basePrice:6e3,w:80,h:10,area:800},{code:"LS3",name:" ",basePrice:9e3,w:120,h:10,area:1200},{code:"LS4",name:" ",basePrice:13e3,w:150,h:50,area:7500},{code:"LS5",name:" ",basePrice:16e3,w:200,h:100,area:2e4},{code:"LS6",name:" ",basePrice:22e3,w:250,h:150,area:37500},{code:"LS7",name:" ",basePrice:3e4,w:280,h:200,area:56e3},{code:"LS8",name:" ",basePrice:42e3,w:300,h:300,area:9e4}],complexityMatrix:{S2:{K1:1,K2:1.15,K3:2.3,K4:4},S4:{K1:1,K2:1.6,K3:2.3,K4:4},S6:{K1:1,K2:1.4,K3:2,K4:3},S8:{K1:1,K2:1.4,K3:1.8,K4:3},S10:{K1:1,K2:1.3,K3:1.6,K4:2.2},S11:{K1:1,K2:1.2,K3:1.9,K4:2.7},STRIP_DEFAULT:{K1:.95,K2:1,K3:1.15,K4:1.3}}},Fa={door:{id:"door",name:"",icon:"door",path:"M20,20 L280,20 Q300,20 300,50 L300,350 Q300,380 280,380 L20,380 Q0,380 0,350 L0,50 Q0,20 20,20 Z",ribs:[{x:0,y:150,w:300,h:20},{x:0,y:320,w:300,h:30}]},hood:{id:"hood",name:"",icon:"hood",path:"M50,20 L250,20 Q280,20 290,100 L300,350 Q300,380 150,390 Q0,380 0,350 L10,100 Q20,20 50,20 Z",ribs:[{x:140,y:20,w:20,h:370},{x:50,y:100,w:200,h:20}]},fender:{id:"fender",name:"",icon:"fender",path:"M20,20 L250,20 Q280,20 280,100 L280,350 Q150,250 20,350 L20,20 Z",ribs:[{x:20,y:180,w:260,h:40}]},trunk:{id:"trunk",name:"",icon:"trunk",path:"M20,20 L280,20 L280,350 L20,350 Z",ribs:[{x:0,y:200,w:300,h:30}]}},h1=[{id:"hood",name:"",icon:"hood",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/hood.jpg"},realSizeMm:{w:1570,h:1315}},{id:"door_front_left",name:"  ",icon:"door",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/door_front_left.jpg"},realSizeMm:{w:1112,h:950}},{id:"door_rear_left",name:"  ",icon:"door",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/door_rear_left.jpg"},realSizeMm:{w:1170,h:790}},{id:"fender_rear_right",name:"  ",icon:"fender",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/fender_rear_left.jpg"},realSizeMm:{w:585,h:390}}];function Na(e){return h1.filter(t=>t.classIds.includes(e))}const d1=[{code:"S2",name:"",mm:{w:25,h:25}},{code:"S4",name:"",mm:{w:45,h:60}},{code:"S6",name:"",mm:{w:90,h:90}},{code:"S8",name:"",mm:{w:85,h:180}},{code:"S10",name:" ",mm:{w:220,h:220}},{code:"S11",name:" ",mm:{w:440,h:440}}];function u1(e,t){return Math.PI*(e/2)*(t/2)}const f1=d1.map(e=>({...e,areaMm2:u1(e.mm.w,e.mm.h)}));function g1(e){if(!e||e.length===0)return 0;const t=[...e].sort((n,s)=>(s.price||0)-(n.price||0));let i=t[0].price||0;for(let n=1;n<t.length;n++)i+=(t[n].price||0)*.5;return i}function p1(e,t,i,n="STRIP_DEFAULT",s=100){const o=g1(e);return o<=0?0:t&&t.repairCode&&t.riskCode&&t.materialCode&&t.carClassCode&&t.disassemblyCode?Kr(o,t,i,n,s):Math.round(o/s)*s}function Kr(e,t,i,n="STRIP_DEFAULT",s=500){if(!t||!i||e<=0)return 0;const{repairCode:o,riskCode:r,materialCode:a,carClassCode:l,disassemblyCode:h}=t;if(!o||!r||!a||!l||!h)return 0;const c=i.risks.find(M=>M.code===r),d=c?c.matrixKey:"K2",f=(i.complexityMatrix[n]??i.complexityMatrix.STRIP_DEFAULT)[d]??1,g=i.repairTypes.find(M=>M.code===o)?.mult??1,m=i.materials.find(M=>M.code===a)?.mult??1,_=i.carClasses.find(M=>M.code===l)?.mult??1,y=i.disassembly.find(M=>M.code===h)?.price??0,w=e*g*m*f*_+y;return Math.round(w/s)*s}const Ec=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},m1={class:"conditions-panel"},b1=["open"],x1={class:"p-3 space-y-3"},v1={key:0,class:"text-xs text-gray-500 italic"},y1={key:1,class:"space-y-3"},_1=["value"],w1=["value"],S1=["value"],C1=["value"],k1=["value"],M1=["value"],T1=["value"],P1=["value"],A1=["value"],E1=["value"],R1={class:"card-metallic rounded-2xl p-5"},L1={class:"relative"},O1=["value","disabled"],I1=["value"],D1={class:"card-metallic rounded-2xl p-5 space-y-4"},G1={class:"relative"},F1=["value","disabled"],N1=["value"],B1={class:"relative"},H1=["value","disabled"],W1=["value"],U1={class:"relative"},z1=["value","disabled"],j1=["value"],V1={class:"card-metallic rounded-2xl p-5"},X1={class:"relative"},Y1=["value","disabled"],K1=["value"],$1={__name:"ConditionsPanel",props:{model:{type:Object,required:!0},initialData:{type:Object,required:!0},disabled:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},openWhenFormed:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const i=e,n=t;function s(o,r){i.model&&(i.model[o]=r,n("update:modelValue",i.model))}return(o,r)=>(U(),V("div",m1,[e.compact?(U(),V("details",{key:0,class:"card-metallic rounded-xl overflow-hidden border border-white/10",open:e.openWhenFormed},[r[20]||(r[20]=p("summary",{class:"flex items-center justify-between p-3 cursor-pointer select-none list-none border-b border-white/5"},[p("span",{class:"text-[10px] font-bold text-metric-green uppercase tracking-widest"},"  "),p("svg",{class:"w-4 h-4 text-gray-500 transition-transform duration-200 details-chevron",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),p("div",x1,[e.disabled?(U(),V("p",v1,"     .")):(U(),V("div",y1,[p("div",null,[r[11]||(r[11]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"},"",-1)),p("select",{value:e.model.repairCode,onChange:r[0]||(r[0]=a=>s("repairCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[r[10]||(r[10]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(e.initialData.repairTypes,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,w1))),128))],40,_1)]),p("div",null,[r[13]||(r[13]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"},"",-1)),p("select",{value:e.model.riskCode,onChange:r[1]||(r[1]=a=>s("riskCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[r[12]||(r[12]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(e.initialData.risks,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,C1))),128))],40,S1)]),p("div",null,[r[15]||(r[15]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"},"",-1)),p("select",{value:e.model.materialCode,onChange:r[2]||(r[2]=a=>s("materialCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[r[14]||(r[14]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(e.initialData.materials,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,M1))),128))],40,k1)]),p("div",null,[r[17]||(r[17]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"}," ",-1)),p("select",{value:e.model.carClassCode,onChange:r[3]||(r[3]=a=>s("carClassCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[r[16]||(r[16]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(e.initialData.carClasses,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,P1))),128))],40,T1)]),p("div",null,[r[19]||(r[19]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"}," ",-1)),p("select",{value:e.model.disassemblyCode,onChange:r[4]||(r[4]=a=>s("disassemblyCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[r[18]||(r[18]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(e.initialData.disassembly,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,E1))),128))],40,A1)])]))])],8,b1)):(U(),V(ut,{key:1},[p("div",R1,[r[23]||(r[23]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",L1,[p("select",{value:e.model.repairCode,onChange:r[5]||(r[5]=a=>s("repairCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[r[21]||(r[21]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(e.initialData.repairTypes,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,I1))),128))],40,O1),r[22]||(r[22]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",D1,[r[33]||(r[33]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),p("div",null,[r[26]||(r[26]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",G1,[p("select",{value:e.model.riskCode,onChange:r[6]||(r[6]=a=>s("riskCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[r[24]||(r[24]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(e.initialData.risks,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,N1))),128))],40,F1),r[25]||(r[25]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[r[29]||(r[29]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",B1,[p("select",{value:e.model.materialCode,onChange:r[7]||(r[7]=a=>s("materialCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[r[27]||(r[27]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(e.initialData.materials,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,W1))),128))],40,H1),r[28]||(r[28]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[r[32]||(r[32]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",U1,[p("select",{value:e.model.carClassCode,onChange:r[8]||(r[8]=a=>s("carClassCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[r[30]||(r[30]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(e.initialData.carClasses,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,j1))),128))],40,z1),r[31]||(r[31]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),p("div",V1,[r[36]||(r[36]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),r[37]||(r[37]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",X1,[p("select",{value:e.model.disassemblyCode,onChange:r[9]||(r[9]=a=>s("disassemblyCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[r[34]||(r[34]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(e.initialData.disassembly,a=>(U(),V("option",{key:a.code,value:a.code},pt(a.name),9,K1))),128))],40,Y1),r[35]||(r[35]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])],64))]))}},q1=Ec($1,[["__scopeId","data-v-28183ebc"]]),Q1={class:"max-w-md mx-auto relative h-screen flex flex-col bg-black text-white pb-[env(safe-area-inset-bottom)]"},J1={key:0,class:"flex flex-col h-full"},Z1={key:0,class:"p-4 space-y-4 shrink-0 z-20 bg-black"},t2={class:"card-metallic rounded-2xl p-4 relative overflow-hidden text-center"},e2={key:0,class:"text-2xl align-top"},i2={class:"flex space-x-1 bg-[#151515] p-1 rounded-xl border border-[#333]"},n2={key:0,class:"space-y-4"},s2={class:"card-metallic rounded-2xl p-5"},r2={class:"mb-5"},o2={class:"flex space-x-3"},a2={class:"mb-2"},l2={class:"relative group"},c2=["value"],h2={class:"card-metallic rounded-2xl p-5"},d2={class:"relative"},u2=["value"],f2={class:"card-metallic rounded-2xl p-5 space-y-4"},g2={class:"relative"},p2=["value"],m2={class:"relative"},b2=["value"],x2={class:"relative"},v2=["value"],y2={class:"card-metallic rounded-2xl p-5"},_2={class:"relative"},w2=["value"],S2={key:1,class:"space-y-4"},C2={class:"card-metallic rounded-2xl p-5"},k2={class:"flex gap-3"},M2={class:"relative flex-1"},T2=["value"],P2={class:"flex items-center bg-[#151515] border border-[#333] rounded-xl px-4 min-w-[100px] justify-center shadow-inner"},A2={class:"card-metallic rounded-2xl p-5"},E2={class:"relative"},R2=["value"],L2={class:"card-metallic rounded-2xl p-5"},O2={class:"card-metallic rounded-2xl p-5 space-y-4"},I2={class:"relative"},D2=["value"],G2={class:"relative"},F2=["value"],N2={class:"relative"},B2=["value"],H2={class:"card-metallic rounded-2xl p-5"},W2={class:"relative"},U2=["value"],z2={class:"graphics-header shrink-0 flex items-center gap-2 px-2 py-1.5 border-b border-white/10 bg-black/60"},j2={class:"flex-1 min-w-0 flex flex-wrap items-center gap-1.5"},V2=["disabled"],X2=["value"],Y2=["disabled"],K2=["value"],$2={key:0,class:"absolute inset-0 z-10 cursor-default pointer-events-auto","aria-label":" "},q2={key:1,class:"absolute top-2 left-2 z-20 px-2 py-1 rounded-md bg-black/60 border border-white/20 text-[10px] font-bold uppercase tracking-widest text-metric-silver pointer-events-none"},Q2={key:2,class:"absolute top-2 right-2 z-20 flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-black/55 backdrop-blur-sm border border-white/10 text-[11px] font-medium pointer-events-none"},J2={class:"mx-2 mb-2"},Z2={class:"grid grid-cols-2 gap-2 p-2"},tg={class:"px-2 pb-2 flex items-center gap-2"},eg={class:"flex items-center gap-2 cursor-pointer text-[10px] text-gray-400"},ig={key:0,ref:"dimensionsPanelRef",class:"mx-2 mb-2 rounded-xl bg-black/35 border border-white/10 p-2.5"},ng={class:"grid grid-cols-2 gap-3"},sg={class:"block text-[10px] text-gray-500 mb-1"},rg={class:"block text-[10px] text-gray-500 mb-1"},og={class:"mx-2 mb-2"},ag=["disabled","title"],lg={key:0,class:"text-[10px] text-gray-500 mt-1 text-center"},cg={key:1,class:"fixed top-4 left-1/2 transform -translate-x-1/2 z-40 card-metallic rounded-2xl p-4 relative overflow-hidden text-center max-w-[90%]"},hg={key:0,class:"text-2xl align-top"},dg={class:"bg-[#151F2E] w-full max-w-md rounded-2xl p-5 border border-white/10 shadow-2xl space-y-4 pb-8 max-h-[80vh] overflow-y-auto"},ug={class:"flex justify-between items-center border-b border-white/5 pb-3"},fg={class:"text-white font-bold text-lg pl-1"},gg={class:"grid grid-cols-2 gap-3 max-h-[50vh] overflow-y-auto"},pg=["onClick"],mg={class:"text-metric-green font-bold text-base"},bg={class:"text-gray-400 text-xs text-center leading-tight"},xg={key:2,class:"p-4 space-y-4 overflow-y-auto pb-24"},vg={class:"card-metallic rounded-2xl p-5 space-y-3"},yg={class:"space-y-3"},_g=["onUpdate:modelValue"],wg=["onUpdate:modelValue"],Sg=["onClick"],Cg={class:"card-metallic rounded-2xl p-5"},kg={class:"flex flex-col"},Mg={class:"font-bold text-sm text-gray-300"},Tg={class:"text-xs text-gray-500"},Pg=["onUpdate:modelValue"],Ag={class:"card-metallic rounded-2xl p-5"},Eg={class:"flex flex-col"},Rg={class:"font-bold text-sm text-gray-300"},Lg={class:"text-xs text-gray-500"},Og=["onUpdate:modelValue"],Ig={key:3,class:"p-4 space-y-3 overflow-y-auto pb-24"},Dg={class:"fixed bottom-0 left-0 w-full bg-[#050505] border-t border-[#222] flex justify-around items-center pb-[env(safe-area-inset-bottom)] z-50 shadow-[0_-5px_20px_rgba(0,0,0,0.8)]"},Gg=["onClick"],Fg={class:"text-2xl mb-1 filter drop-shadow-[0_0_5px_currentColor]"},Ng={class:"text-[9px] font-bold uppercase tracking-widest"},Bg=5,Hg={__name:"App",setup(e){const t=Kt("calc"),i=Kt("standard"),n=Kt(1),s=Kt("edit"),o=[{id:"calc",label:"",icon:""},{id:"settings",label:"",icon:""},{id:"info",label:"",icon:""}],r=Xi({shape:"circle",sizeCode:null,repairCode:null,riskCode:null,materialCode:null,carClassCode:null,disassemblyCode:null,hours:null,masterIndex:null}),a=()=>{const B={};return Bt.circleSizes.forEach(b=>{B[b.code]=b.basePrice}),Bt.stripSizes.forEach(b=>{B[b.code]=b.basePrice}),B},l=Xi({prices:a(),masters:JSON.parse(JSON.stringify(Bt.defaultMasters)),hourlyRate:0}),h=localStorage.getItem("dentRepairSettings_v5");if(h)try{const B=JSON.parse(h);B.prices&&Object.assign(l.prices,B.prices),B.masters&&(l.masters=B.masters)}catch(B){console.error("Failed to load settings",B)}const c=Xi({selectedClass:null,selectedPart:null,dents:[]}),d={carClasses:[{id:"sedan",name:"",icon:""},{id:"crossover",name:"",icon:""},{id:"suv",name:"",icon:""}]},u=ae(()=>s.value==="conditions"),f=ae(()=>c.selectedClass?.id==="crossover"?Na("crossover"):Object.values(Fa)),g=Kt("crossover"),m=Kt("hood");ze([c.selectedClass,c.selectedPart],()=>{c.selectedClass&&(g.value=c.selectedClass.id),c.selectedPart&&(m.value=c.selectedPart.id)},{immediate:!0});function _(){const B=g.value||d.carClasses[0]?.id,b=d.carClasses.find(tr=>tr.id===B)||d.carClasses[0];c.selectedClass=b||null;const T=b?.id==="crossover"?Na("crossover"):Object.values(Fa),te=m.value;let Ce=T.find(tr=>tr.id===te);Ce||(Ce=T[0]||null),c.selectedPart=Ce,Ce&&(m.value=Ce.id),b&&(g.value=b.id)}function y(){if(s.value==="conditions")return;const B=d.carClasses.find(T=>T.id===g.value);c.selectedClass=B||null;const b=f.value;c.selectedPart=b[0]||null,m.value=c.selectedPart?.id||"",We(()=>setTimeout(Yt,50))}function w(){if(s.value==="conditions")return;const B=f.value.find(b=>b.id===m.value);c.selectedPart=B||null,We(()=>setTimeout(Yt,50))}const M=Kt(!1),k=Kt(null),A=Kt(null),E=Kt(null),X=Kt(null),G=Kt(0),$=Kt(0);let Q=null;const ot=Kt(0),J=ae(()=>ot.value>0);let ft=null;function lt(){ft||(ft=requestAnimationFrame(()=>{ft=null;const B=window.visualViewport;if(!B){ot.value=0;return}const b=window.innerHeight-B.height-(B.offsetTop||0);ot.value=Math.max(0,Math.round(b))}))}let Z=!1;function H(B){const b=B?.target;!b||!b.scrollIntoView||Z||(Z=!0,requestAnimationFrame(()=>{setTimeout(()=>{b.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),setTimeout(()=>{Z=!1},600)},150)}))}ze(X,(B,b)=>{B&&(G.value=Math.round(B.widthMm*10)/10,$.value=Math.round(B.heightMm*10)/10),(B&&!b||!B&&b)&&i.value==="graphics"&&We(()=>setTimeout(()=>ms(),50))},{immediate:!0}),ze([G,$],()=>{X.value&&(Q&&clearTimeout(Q),Q=setTimeout(()=>{const B=Number(G.value),b=Number($.value);if(!Number.isFinite(B)||!Number.isFinite(b)||B<=0||b<=0){Q=null;return}const T=X.value;if(T&&Math.abs(T.widthMm-B)<.01&&Math.abs(T.heightMm-b)<.01){Q=null;return}a1(B,b),Q=null},150))});const nt=ae(()=>r.shape==="circle"?Bt.circleSizes:Bt.stripSizes),j=ae(()=>{const B=c.selectedPart;return B?.realSizeMm&&B?.asset?.type==="image"?f1:Bt.circleSizes}),mt=ae(()=>i.value==="graphics"&&E.value?E.value:typeof document<"u"?document.body:null),Ot=ae(()=>J.value?{paddingBottom:`calc(12px + env(safe-area-inset-bottom, 0px) + ${ot.value}px)`}:void 0),dt=Kt(!1);function yt(){Ia(!dt.value)}const Vt=ae(()=>{if(!r.sizeCode)return 0;const B=l.prices[r.sizeCode]||0;return Kr(B,r,Bt,r.sizeCode,500)}),Zs=ae(()=>{if(!r.hours)return 0;const B=r.hours*l.hourlyRate;return Kr(B,r,Bt,"STRIP_DEFAULT",100)}),Jn=ae(()=>p1(c.dents,r,Bt,"STRIP_DEFAULT",100)),Se=ae(()=>c.dents.length>=1),ti=ae(()=>Jn.value),Fi=Kt(null),Zn=Kt(null);function xi(){Se.value&&(s.value="conditions",We(()=>{Fi.value?.scrollIntoView?.({block:"start",behavior:"smooth"})}))}function So(){s.value="edit",We(()=>{ms()})}const v=ae(()=>t.value!=="calc"?0:i.value==="standard"?Vt.value:i.value==="time"?Zs.value:i.value==="graphics"?Jn.value:0),S=B=>new Intl.NumberFormat("ru-RU").format(B),P=B=>{const b=window.Telegram?.WebApp;b?.HapticFeedback&&b.isVersionAtLeast&&b.isVersionAtLeast("6.1")&&(B==="selection"&&b.HapticFeedback.selectionChanged(),B==="success"&&b.HapticFeedback.notificationOccurred("success"))},O=B=>{i.value=B,P("selection"),B==="graphics"&&(window.Telegram?.WebApp?.expand&&window.Telegram.WebApp.expand(),_(),n.value=3,s.value="edit",We(()=>setTimeout(Yt,100)))},R=B=>{t.value=B,P("selection")},L=B=>{r.shape=B,r.sizeCode=null,P("selection")},K=()=>{r.sizeCode=null,r.repairCode=null,r.riskCode=null,r.materialCode=null,r.carClassCode=null,r.disassemblyCode=null,r.hours=null,r.masterIndex=null,P("selection")},Y=()=>{r.masterIndex!==null&&(l.hourlyRate=l.masters[r.masterIndex].rate)},W=()=>l.masters.push({name:"",rate:0}),I=B=>l.masters.splice(B,1),it=()=>{const B={prices:l.prices,masters:l.masters};localStorage.setItem("dentRepairSettings_v5",JSON.stringify(B));const b=window.Telegram?.WebApp;b?.showPopup&&b?.isVersionAtLeast&&b.isVersionAtLeast("6.2")?b.showPopup({title:"",message:" ",buttons:[{type:"ok"}]}):alert(" "),P("success")},q=()=>{confirm("   ?")&&(Object.assign(l.prices,a()),it())},tt=()=>{i.value="standard",n.value=1,s.value="edit",c.dents=[],Ga(),P("selection")},rt=()=>{Ga(),c.dents=[],X.value=null,s.value="edit",r.repairCode=null,r.riskCode=null,r.materialCode=null,r.carClassCode=null,r.disassemblyCode=null,dt.value=!1,Ia(!0),M.value=!1,P("selection")};let ct=null,vt=null,_t=0,Xt=0;const Yt=async()=>{if(!A.value||!c.selectedPart)return;ct&&vt&&(ct.unobserve(vt),ct=null,vt=null);const B=typeof import.meta<"u"&&"/DentMetric/"||"";await qf(A.value,c.selectedPart,l.prices,b=>{c.dents=b},B,b=>{X.value=b}),_t=A.value.offsetWidth||0,Xt=A.value.offsetHeight||0,vt=A.value,ct=new ResizeObserver(()=>{if(!A.value)return;const b=A.value.offsetWidth||0,T=A.value.offsetHeight||0,te=Bg;(_t===0&&Xt===0||Math.abs(b-_t)>te)&&(_t=b,Xt=T,ms())}),ct.observe(vt)},ue=B=>{P("selection"),k.value=B,M.value=!0},xe=B=>{if(!c.selectedPart)return;P("selection"),M.value=!1;const b=k.value,T=b==="circle"?j.value:Bt.stripSizes;l1(b,B,T)},vi=()=>Da();ze(v,B=>{const b=window.Telegram?.WebApp?.MainButton;b&&(B>0?(b.setText(`: ${S(B)} `),b.show()):b.hide())});const on=B=>{if(!(i.value!=="graphics"||n.value!==3)&&s.value!=="conditions"&&(B.key==="Delete"||B.key==="Backspace")){const b=document.activeElement;if(b&&(b.tagName==="INPUT"||b.tagName==="TEXTAREA"||typeof b.isContentEditable=="boolean"&&b.isContentEditable))return;B.preventDefault(),Da()}};function $t(){lt()}function fe(){lt()}return wl(()=>{window.Telegram?.WebApp&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),window.Telegram.WebApp.MainButton.setParams({color:"#88E523",text_color:"#000000"})),window.addEventListener("keydown",on);const B=window.visualViewport;B&&(B.addEventListener("resize",$t),B.addEventListener("scroll",fe),lt())}),ze(()=>i.value==="graphics",B=>{typeof document>"u"||(document.body.classList.toggle("graphics-fullscreen-active",B),B&&window.Telegram?.WebApp?.expand&&window.Telegram.WebApp.expand())},{immediate:!0}),ze(s,B=>{i.value==="graphics"&&We(()=>{Jf(B==="edit"),B==="conditions"&&setTimeout(()=>ms(),150)})},{immediate:!0}),Sl(()=>{window.removeEventListener("keydown",on);const B=window.visualViewport;B&&(B.removeEventListener("resize",$t),B.removeEventListener("scroll",fe)),ct&&vt&&(ct.unobserve(vt),ct=null,vt=null),c1()}),(B,b)=>(U(),V("div",Q1,[t.value==="calc"?(U(),V("div",J1,[i.value!=="graphics"?(U(),V("div",Z1,[b[29]||(b[29]=p("div",{class:"flex justify-center pt-2 pb-2"},[p("img",{src:iu,alt:"DentMetric",class:"w-full max-w-[320px] h-auto object-contain drop-shadow-2xl",onerror:"this.style.display='none'"})],-1)),p("div",t2,[b[27]||(b[27]=p("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"},null,-1)),b[28]||(b[28]=p("div",{class:"text-[11px] uppercase font-bold text-gray-400 tracking-widest mb-1"}," ",-1)),p("div",{class:Ht(["text-5xl font-black transition-all duration-300",v.value>0?"text-metric-green drop-shadow-[0_0_15px_rgba(136,229,35,0.3)]":"text-gray-600"])},[Er(pt(v.value>0?S(v.value):"---")+" ",1),v.value>0?(U(),V("span",e2,"")):qt("",!0)],2),p("div",{class:Ht(["absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1/2 h-4 blur-xl transition-all duration-300",v.value>0?"bg-metric-green/10":"bg-transparent"])},null,2)]),p("div",i2,[p("button",{onClick:b[0]||(b[0]=T=>O("standard")),class:Ht(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="standard"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2),p("button",{onClick:b[1]||(b[1]=T=>O("time")),class:Ht(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="time"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2),p("button",{onClick:b[2]||(b[2]=T=>O("graphics")),class:Ht(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="graphics"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2)])])):qt("",!0),p("div",{class:Ht(["flex-1 overflow-y-auto p-4 pt-0 pb-24",{"overflow-hidden h-0":i.value==="graphics"}])},[i.value==="standard"?(U(),V("div",n2,[p("div",s2,[p("div",r2,[b[33]||(b[33]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-3 tracking-widest"}," ",-1)),p("div",o2,[p("div",{onClick:b[3]||(b[3]=T=>L("circle")),class:Ht(["flex-1 relative rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 border",r.shape==="circle"?"bg-[#222] border-metric-green shadow-neon":"bg-[#151515] border-white/5 hover:border-white/10"])},[p("div",{class:Ht(["w-4 h-4 rounded-full border-2 mb-2 shadow-[0_0_5px_currentColor]",r.shape==="circle"?"border-metric-green bg-metric-green":"border-gray-500"])},null,2),p("span",{class:Ht(["text-xs font-bold uppercase",r.shape==="circle"?"text-white":"text-gray-400"])},"/",2)],2),p("div",{onClick:b[4]||(b[4]=T=>L("strip")),class:Ht(["flex-1 relative rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 border",r.shape==="strip"?"bg-[#222] border-metric-green shadow-neon":"bg-[#151515] border-white/5 hover:border-white/10"])},[p("div",{class:Ht(["w-6 h-2 rounded-sm mb-3 shadow-[0_0_5px_currentColor]",r.shape==="strip"?"bg-metric-green":"bg-gray-500"])},null,2),p("span",{class:Ht(["text-xs font-bold uppercase",r.shape==="strip"?"text-white":"text-gray-400"])},"",2)],2)]),b[34]||(b[34]=p("br",null,null,-1)),p("div",a2,[b[32]||(b[32]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",l2,[Ut(p("select",{"onUpdate:modelValue":b[5]||(b[5]=T=>r.sizeCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[30]||(b[30]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(nt.value,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,c2))),128))],512),[[oe,r.sizeCode]]),b[31]||(b[31]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])])]),p("div",h2,[b[37]||(b[37]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",d2,[Ut(p("select",{"onUpdate:modelValue":b[6]||(b[6]=T=>r.repairCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[35]||(b[35]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).repairTypes,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,u2))),128))],512),[[oe,r.repairCode]]),b[36]||(b[36]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",f2,[b[47]||(b[47]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),p("div",null,[b[40]||(b[40]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",g2,[Ut(p("select",{"onUpdate:modelValue":b[7]||(b[7]=T=>r.riskCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[38]||(b[38]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).risks,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,p2))),128))],512),[[oe,r.riskCode]]),b[39]||(b[39]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[b[43]||(b[43]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",m2,[Ut(p("select",{"onUpdate:modelValue":b[8]||(b[8]=T=>r.materialCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[41]||(b[41]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).materials,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,b2))),128))],512),[[oe,r.materialCode]]),b[42]||(b[42]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[b[46]||(b[46]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",x2,[Ut(p("select",{"onUpdate:modelValue":b[9]||(b[9]=T=>r.carClassCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[44]||(b[44]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).carClasses,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,v2))),128))],512),[[oe,r.carClassCode]]),b[45]||(b[45]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),p("div",y2,[b[50]||(b[50]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),b[51]||(b[51]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",_2,[Ut(p("select",{"onUpdate:modelValue":b[10]||(b[10]=T=>r.disassemblyCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[48]||(b[48]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).disassembly,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,w2))),128))],512),[[oe,r.disassemblyCode]]),b[49]||(b[49]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("button",{onClick:K,class:"w-full py-4 text-xs font-bold uppercase tracking-widest text-red-400 hover:text-red-300 hover:bg-red-900/10 border border-transparent hover:border-red-900/20 rounded-xl transition-all flex items-center justify-center space-x-2 opacity-80 hover:opacity-100"},[...b[52]||(b[52]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p("span",null," ",-1)])])])):qt("",!0),i.value==="time"?(U(),V("div",S2,[p("div",C2,[b[55]||(b[55]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",k2,[p("div",M2,[Ut(p("select",{"onUpdate:modelValue":b[11]||(b[11]=T=>r.masterIndex=T),required:"",onChange:Y,class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[53]||(b[53]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(l.masters,(T,te)=>(U(),V("option",{key:te,value:te},pt(T.name),9,T2))),128))],544),[[oe,r.masterIndex]]),b[54]||(b[54]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))]),p("div",P2,[p("span",{class:Ht(["text-sm font-bold",l.hourlyRate>0?"text-metric-green":"text-gray-600"])},pt(l.hourlyRate>0?S(l.hourlyRate):"---"),3)])])]),p("div",A2,[b[58]||(b[58]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",E2,[Ut(p("select",{"onUpdate:modelValue":b[12]||(b[12]=T=>r.repairCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[56]||(b[56]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).repairTypes,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,R2))),128))],512),[[oe,r.repairCode]]),b[57]||(b[57]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",L2,[b[59]||(b[59]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"}," ()",-1)),Ut(p("input",{type:"number","onUpdate:modelValue":b[13]||(b[13]=T=>r.hours=T),min:"0",step:"0.5",placeholder:" ",inputmode:"decimal",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-xl font-bold shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none transition-colors placeholder-gray-600"},null,512),[[wi,r.hours,void 0,{number:!0}]])]),p("div",O2,[b[69]||(b[69]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),p("div",null,[b[62]||(b[62]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",I2,[Ut(p("select",{"onUpdate:modelValue":b[14]||(b[14]=T=>r.riskCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[60]||(b[60]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).risks,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,D2))),128))],512),[[oe,r.riskCode]]),b[61]||(b[61]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[b[65]||(b[65]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",G2,[Ut(p("select",{"onUpdate:modelValue":b[15]||(b[15]=T=>r.materialCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[63]||(b[63]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).materials,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,F2))),128))],512),[[oe,r.materialCode]]),b[64]||(b[64]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[b[68]||(b[68]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",N2,[Ut(p("select",{"onUpdate:modelValue":b[16]||(b[16]=T=>r.carClassCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[66]||(b[66]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).carClasses,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,B2))),128))],512),[[oe,r.carClassCode]]),b[67]||(b[67]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),p("div",H2,[b[72]||(b[72]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),b[73]||(b[73]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",W2,[Ut(p("select",{"onUpdate:modelValue":b[17]||(b[17]=T=>r.disassemblyCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[b[70]||(b[70]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(U(!0),V(ut,null,Pt(ee(Bt).disassembly,T=>(U(),V("option",{key:T.code,value:T.code},pt(T.name),9,U2))),128))],512),[[oe,r.disassemblyCode]]),b[71]||(b[71]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("button",{onClick:K,class:"w-full py-4 text-xs font-bold uppercase tracking-widest text-red-400 hover:text-red-300 hover:bg-red-900/10 border border-transparent hover:border-red-900/20 rounded-xl transition-all flex items-center justify-center space-x-2 opacity-80 hover:opacity-100"},[...b[74]||(b[74]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p("span",null," ",-1)])])])):qt("",!0),i.value==="graphics"?(U(),V("div",{key:2,ref_key:"graphicsRoot",ref:E,class:"graphics-fullscreen-wrapper"},[p("header",z2,[p("button",{onClick:tt,class:"text-metric-silver hover:text-white p-1.5 rounded border border-white/10 shrink-0","aria-label":""},""),p("div",j2,[Ut(p("select",{"onUpdate:modelValue":b[18]||(b[18]=T=>g.value=T),disabled:u.value,onChange:y,class:"graphics-select flex-1 min-w-0 max-w-[140px] bg-[#151515] border border-[#333] rounded-lg px-2 py-1.5 text-xs text-white focus:border-metric-green/50 outline-none disabled:opacity-60 disabled:cursor-not-allowed disabled:pointer-events-none"},[(U(!0),V(ut,null,Pt(d.carClasses,T=>(U(),V("option",{key:T.id,value:T.id},pt(T.name),9,X2))),128))],40,V2),[[oe,g.value]]),Ut(p("select",{"onUpdate:modelValue":b[19]||(b[19]=T=>m.value=T),disabled:u.value,onChange:w,class:"graphics-select flex-1 min-w-0 max-w-[160px] bg-[#151515] border border-[#333] rounded-lg px-2 py-1.5 text-xs text-white focus:border-metric-green/50 outline-none disabled:opacity-60 disabled:cursor-not-allowed disabled:pointer-events-none"},[(U(!0),V(ut,null,Pt(f.value,T=>(U(),V("option",{key:T.id,value:T.id},pt(T.name),9,K2))),128))],40,Y2),[[oe,m.value]])]),p("div",{class:"flex items-center gap-1 shrink-0"},[p("button",{onClick:rt,class:"text-xs text-red-400 px-2 py-1 hover:text-red-300 shrink-0"},"")])]),p("div",{class:Ht(["graphics-stage-area flex flex-col w-full border-b border-white/10",s.value==="conditions"?"graphics-stage-preview shrink-0":"flex-1 min-h-0"])},[p("div",{id:"canvas-wrapper",class:Ht(["canvas-editor-wrap relative w-full overflow-hidden",s.value==="conditions"?"h-[40vh] min-h-[200px] max-h-[45vh]":"flex-1 min-h-0"]),style:{"background-color":"#0b0f14"}},[p("div",{ref_key:"konvaContainer",ref:A,id:"konva-container",class:"absolute inset-0 w-full h-full",style:{"background-color":"#0b0f14"}},null,512),s.value==="conditions"?(U(),V("div",$2)):qt("",!0),s.value==="conditions"?(U(),V("div",q2,"  ")):qt("",!0),s.value==="edit"?(U(),V("div",Q2,[b[75]||(b[75]=p("svg",{class:"w-3.5 h-3.5 text-metric-green shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),b[76]||(b[76]=p("span",{class:"text-gray-400"},":",-1)),p("span",{class:Ht(ti.value>0?"text-metric-green font-bold":"text-gray-500")},pt(ti.value>0?S(ti.value)+" ":"---"),3)])):qt("",!0)],2)],2),p("div",{ref_key:"graphicsControlsAreaRef",ref:Zn,class:"graphics-controls-area shrink-0 overflow-y-auto border-t border-white/10 bg-black/80 pb-[env(safe-area-inset-bottom,0px)]",style:Us(Ot.value)},[s.value==="conditions"?(U(),V(ut,{key:0},[p("div",{class:"p-2 mb-2 flex flex-col gap-2",ref_key:"conditionsSectionRef",ref:Fi},[p("button",{type:"button",onClick:So,class:"w-full py-3 rounded-xl font-bold text-sm uppercase tracking-widest flex items-center justify-center gap-2 bg-metric-green text-black shadow-[0_0_15px_rgba(136,229,35,0.4)] hover:opacity-95 active:opacity-90 transition-opacity"},[...b[77]||(b[77]=[p("span",{"aria-hidden":"true"},"",-1),p("span",null,"  ",-1)])])],512),p("div",J2,[Me(q1,{model:r,"initial-data":ee(Bt),disabled:!1,compact:"","open-when-formed":!0},null,8,["model","initial-data"])])],64)):(U(),V(ut,{key:1},[p("div",Z2,[p("button",{onClick:b[20]||(b[20]=T=>ue("circle")),class:"card-metallic p-2.5 rounded-xl flex items-center gap-2 active:scale-95 hover:border-metric-green/30 transition-all"},[...b[78]||(b[78]=[p("div",{class:"w-5 h-5 rounded-full border-2 border-metric-green bg-metric-green/20 shrink-0"},null,-1),p("div",{class:"text-left min-w-0"},[p("div",{class:"font-bold text-[10px] text-white"},""),p("div",{class:"text-[9px] text-gray-500"},"/")],-1)])]),p("button",{onClick:b[21]||(b[21]=T=>ue("strip")),class:"card-metallic p-2.5 rounded-xl flex items-center gap-2 active:scale-95 hover:border-metric-green/30 transition-all"},[...b[79]||(b[79]=[p("div",{class:"w-5 h-2 bg-metric-silver rotate-45 rounded-sm shrink-0"},null,-1),p("div",{class:"text-left min-w-0"},[p("div",{class:"font-bold text-[10px] text-white"},""),p("div",{class:"text-[9px] text-gray-500"},"")],-1)])])]),p("div",{class:"px-2 pb-2 text-[11px]"},[p("button",{type:"button",class:"card-metallic w-full px-3 py-2 rounded-xl flex items-center justify-center gap-2 active:scale-95 hover:border-red-400/60 transition-all",onClick:vi},[...b[80]||(b[80]=[p("span",{class:"text-base text-red-400"},"",-1),p("span",{class:"text-[9px] text-gray-500"},"  ",-1)])])]),p("div",tg,[p("label",eg,[Ut(p("input",{type:"checkbox","onUpdate:modelValue":b[22]||(b[22]=T=>dt.value=T),onChange:yt,class:"rounded border-white/20 bg-[#151515] text-metric-green focus:ring-metric-green/50"},null,544),[[Yd,dt.value]]),b[81]||(b[81]=p("span",null,"  ( )",-1))])]),X.value?(U(),V("div",ig,[b[82]||(b[82]=p("div",{class:"text-[10px] uppercase font-bold text-metric-green tracking-widest mb-2"}," ()",-1)),p("div",ng,[p("div",null,[p("label",sg,pt(X.value.type==="circle"?"":""),1),Ut(p("input",{"onUpdate:modelValue":b[23]||(b[23]=T=>G.value=T),type:"number",min:"0.1",max:"2000",step:"0.5",inputmode:"numeric",pattern:"[0-9]*",enterkeyhint:"done",class:"w-full rounded-lg bg-white/5 border border-white/20 px-2 py-1.5 text-sm text-white focus:border-metric-green focus:ring-1 focus:ring-metric-green/50 outline-none",onFocus:H},null,544),[[wi,G.value,void 0,{number:!0}]])]),p("div",null,[p("label",rg,pt(X.value.type==="circle"?"":""),1),Ut(p("input",{"onUpdate:modelValue":b[24]||(b[24]=T=>$.value=T),type:"number",min:"0.1",max:"2000",step:"0.5",inputmode:"numeric",pattern:"[0-9]*",enterkeyhint:"done",class:"w-full rounded-lg bg-white/5 border border-white/20 px-2 py-1.5 text-sm text-white focus:border-metric-green focus:ring-1 focus:ring-metric-green/50 outline-none",onFocus:H},null,544),[[wi,$.value,void 0,{number:!0}]])])])],512)):qt("",!0),p("div",og,[p("button",{type:"button",onClick:xi,disabled:!Se.value,title:Se.value?"":"    ",class:Ht(["w-full py-3 rounded-xl font-bold text-sm uppercase tracking-widest transition-all flex items-center justify-center gap-2",Se.value?"bg-metric-green text-black shadow-[0_0_15px_rgba(136,229,35,0.4)] hover:opacity-95 active:opacity-90":"bg-white/10 text-gray-500 cursor-not-allowed"])},[...b[83]||(b[83]=[p("span",null,"    ",-1)])],10,ag),Se.value?qt("",!0):(U(),V("p",lg,"    "))])],64))],4)],512)):qt("",!0)],2)])):qt("",!0),t.value==="calc"&&i.value==="graphics"&&n.value===3?(U(),V("div",cg,[b[84]||(b[84]=p("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"},null,-1)),b[85]||(b[85]=p("div",{class:"text-[11px] uppercase font-bold text-gray-400 tracking-widest mb-1"}," ",-1)),p("div",{class:Ht(["text-5xl font-black transition-all duration-300",v.value>0?"text-metric-green drop-shadow-[0_0_15px_rgba(136,229,35,0.3)]":"text-gray-600"])},[Er(pt(v.value>0?S(v.value):"---")+" ",1),v.value>0?(U(),V("span",hg,"")):qt("",!0)],2),p("div",{class:Ht(["absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1/2 h-4 blur-xl transition-all duration-300",v.value>0?"bg-metric-green/10":"bg-transparent"])},null,2)])):qt("",!0),(U(),Wl(Th,{to:mt.value,disabled:!mt.value},[M.value?(U(),V("div",{key:0,class:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in",onClick:b[26]||(b[26]=qd(T=>M.value=!1,["self"]))},[p("div",dg,[p("div",ug,[p("h3",fg,"   ("+pt(k.value==="circle"?"/":"")+") ",1),p("button",{onClick:b[25]||(b[25]=T=>M.value=!1),class:"text-gray-400 p-2 text-xl"},"")]),p("div",gg,[(U(!0),V(ut,null,Pt(k.value==="circle"?j.value:ee(Bt).stripSizes,T=>(U(),V("button",{key:T.code,onClick:te=>xe(T.code),class:"card-metallic p-3 rounded-xl flex flex-col items-center justify-center gap-1 active:scale-95 transition-all hover:border-metric-green/50"},[p("span",mg,pt(T.code),1),p("span",bg,pt(T.name),1)],8,pg))),128))])])])):qt("",!0)],8,["to","disabled"])),t.value==="settings"?(U(),V("div",xg,[b[90]||(b[90]=p("div",{class:"card-metallic rounded-2xl p-5"},[p("h2",{class:"text-xl font-bold mb-1 text-white"},"")],-1)),p("div",vg,[p("div",{class:"flex justify-between items-center mb-4"},[b[86]||(b[86]=p("div",{class:"text-[10px] font-bold text-metric-green uppercase tracking-widest"},"",-1)),p("button",{onClick:W,class:"text-xs text-metric-green border border-metric-green px-2 py-1 rounded hover:bg-metric-green hover:text-black transition-colors"},"+ ")]),p("div",yg,[(U(!0),V(ut,null,Pt(l.masters,(T,te)=>(U(),V("div",{key:te,class:"flex gap-2 items-center"},[Ut(p("input",{"onUpdate:modelValue":Ce=>T.name=Ce,placeholder:"",class:"flex-1 bg-[#151515] border border-[#333] rounded-lg p-2 text-sm text-white focus:border-metric-green outline-none"},null,8,_g),[[wi,T.name]]),Ut(p("input",{type:"number","onUpdate:modelValue":Ce=>T.rate=Ce,placeholder:"/",class:"w-20 bg-[#151515] border border-[#333] rounded-lg p-2 text-sm text-right text-white focus:border-metric-green outline-none"},null,8,wg),[[wi,T.rate,void 0,{number:!0}]]),p("button",{onClick:Ce=>I(te),class:"text-red-500 p-2 hover:bg-red-900/20 rounded"},[...b[87]||(b[87]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Sg)]))),128))])]),p("div",Cg,[b[88]||(b[88]=p("div",{class:"text-[10px] font-bold text-metric-green uppercase mb-4 tracking-widest"},"/ ()",-1)),(U(!0),V(ut,null,Pt(ee(Bt).circleSizes,T=>(U(),V("div",{key:T.code,class:"flex items-center justify-between mb-3 last:mb-0 border-b border-white/5 pb-2 last:border-0 last:pb-0"},[p("div",kg,[p("span",Mg,pt(T.code),1),p("span",Tg,pt(T.name),1)]),Ut(p("input",{type:"number","onUpdate:modelValue":te=>l.prices[T.code]=te,inputmode:"numeric",class:"w-28 bg-[#151515] border border-[#333] rounded-lg p-2 text-right font-medium text-white shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none"},null,8,Pg),[[wi,l.prices[T.code],void 0,{number:!0}]])]))),128))]),p("div",Ag,[b[89]||(b[89]=p("div",{class:"text-[10px] font-bold text-metric-green uppercase mb-4 tracking-widest"}," ()",-1)),(U(!0),V(ut,null,Pt(ee(Bt).stripSizes,T=>(U(),V("div",{key:T.code,class:"flex items-center justify-between mb-3 last:mb-0 border-b border-white/5 pb-2 last:border-0 last:pb-0"},[p("div",Eg,[p("span",Rg,pt(T.code),1),p("span",Lg,pt(T.name),1)]),Ut(p("input",{type:"number","onUpdate:modelValue":te=>l.prices[T.code]=te,inputmode:"numeric",class:"w-28 bg-[#151515] border border-[#333] rounded-lg p-2 text-right font-medium text-white shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none"},null,8,Og),[[wi,l.prices[T.code],void 0,{number:!0}]])]))),128))]),p("div",{class:"flex flex-col space-y-3 pt-4"},[p("button",{onClick:it,class:"w-full bg-metric-green text-black font-bold py-3.5 rounded-xl active:opacity-90 transition-opacity shadow-[0_0_15px_rgba(136,229,35,0.4)]"}," "),p("button",{onClick:q,class:"w-full text-gray-400 text-sm font-medium py-3 hover:text-white transition-colors"},"  ")])])):qt("",!0),t.value==="info"?(U(),V("div",Ig,[...b[91]||(b[91]=[pd('<div class="flex items-center justify-center pb-4" data-v-32a4fc2a><div class="px-5 py-1.5 rounded-full border border-white/10 bg-[#1a1a1a] shadow-lg" data-v-32a4fc2a><span class="text-[10px] font-bold uppercase text-metric-green tracking-widest" data-v-32a4fc2a> &amp; FAQ</span></div></div><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-32a4fc2a><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-32a4fc2a><div class="flex items-center space-x-3" data-v-32a4fc2a><span class="text-lg opacity-80" data-v-32a4fc2a></span><span class="font-bold text-sm text-white" data-v-32a4fc2a> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-32a4fc2a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-32a4fc2a></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-32a4fc2a><ul class="space-y-2 list-disc pl-4 marker:text-metric-green" data-v-32a4fc2a><li data-v-32a4fc2a>     .</li><li data-v-32a4fc2a>  : <span class="text-white font-bold" data-v-32a4fc2a></span>, <span class="text-white font-bold" data-v-32a4fc2a> </span>  <span class="text-white font-bold" data-v-32a4fc2a></span>.</li><li data-v-32a4fc2a>   =  .    .</li></ul></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-32a4fc2a><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-32a4fc2a><div class="flex items-center space-x-3" data-v-32a4fc2a><span class="text-lg opacity-80" data-v-32a4fc2a></span><span class="font-bold text-sm text-white" data-v-32a4fc2a> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-32a4fc2a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-32a4fc2a></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-32a4fc2a><ol class="space-y-3 list-decimal pl-4 marker:text-metric-green marker:font-bold" data-v-32a4fc2a><li data-v-32a4fc2a>   ().</li><li data-v-32a4fc2a>   (/  ).</li><li data-v-32a4fc2a>  (S2-S11  LS1-LS8).   .</li><li data-v-32a4fc2a>  (, , , ).</li><li data-v-32a4fc2a>   .</li></ol></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-32a4fc2a><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-32a4fc2a><div class="flex items-center space-x-3" data-v-32a4fc2a><span class="text-lg opacity-80" data-v-32a4fc2a></span><span class="font-bold text-sm text-white" data-v-32a4fc2a> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-32a4fc2a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-32a4fc2a></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4 space-y-5" data-v-32a4fc2a><div data-v-32a4fc2a><div class="font-bold text-metric-green text-[10px] uppercase mb-1 tracking-widest" data-v-32a4fc2a></div><div class="text-gray-400 leading-snug" data-v-32a4fc2a>S ()  LS ().    .</div></div><div data-v-32a4fc2a><div class="font-bold text-metric-green text-[10px] uppercase mb-2 tracking-widest" data-v-32a4fc2a> (K)</div><div class="space-y-1.5" data-v-32a4fc2a><div class="flex space-x-2" data-v-32a4fc2a><span class="text-white font-bold w-6" data-v-32a4fc2a>K1:</span><span data-v-32a4fc2a></span></div><div class="flex space-x-2" data-v-32a4fc2a><span class="text-white font-bold w-6" data-v-32a4fc2a>K2:</span><span data-v-32a4fc2a></span></div><div class="flex space-x-2" data-v-32a4fc2a><span class="text-white font-bold w-6" data-v-32a4fc2a>K3:</span><span data-v-32a4fc2a>  ,  .</span></div><div class="flex space-x-2" data-v-32a4fc2a><span class="text-white font-bold w-6" data-v-32a4fc2a>K4:</span><span data-v-32a4fc2a>   , .</span></div></div></div><div data-v-32a4fc2a><div class="font-bold text-metric-green text-[10px] uppercase mb-1 tracking-widest" data-v-32a4fc2a> </div><div class="text-gray-400 leading-snug" data-v-32a4fc2a> (x1.0), / (x1.2).</div></div></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-32a4fc2a><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-32a4fc2a><div class="flex items-center space-x-3" data-v-32a4fc2a><span class="text-lg opacity-80" data-v-32a4fc2a></span><span class="font-bold text-sm text-white" data-v-32a4fc2a>  </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-32a4fc2a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-32a4fc2a></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-32a4fc2a><p class="mb-4 leading-snug" data-v-32a4fc2a>      .</p><div class="bg-[#151515] border border-white/10 rounded-lg p-3 font-mono text-xs text-metric-green flex items-center justify-center" data-v-32a4fc2a>  = (  )   </div></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-32a4fc2a><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-32a4fc2a><div class="flex items-center space-x-3" data-v-32a4fc2a><span class="text-lg opacity-80" data-v-32a4fc2a></span><span class="font-bold text-sm text-white" data-v-32a4fc2a> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-32a4fc2a><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-32a4fc2a></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-32a4fc2a><p class="mb-2" data-v-32a4fc2a>      .</p><ol class="space-y-2 list-decimal pl-4 marker:text-metric-green marker:font-bold" data-v-32a4fc2a><li data-v-32a4fc2a>    .</li><li data-v-32a4fc2a>  ()  .</li><li data-v-32a4fc2a>    .</li><li data-v-32a4fc2a><b class="text-white" data-v-32a4fc2a> :</b>      (),   .</li></ol></div></details><div class="border border-red-500/30 bg-red-900/10 rounded-2xl p-4 flex gap-4 items-start mt-4" data-v-32a4fc2a><div class="text-2xl pt-1" data-v-32a4fc2a></div><div data-v-32a4fc2a><div class="text-red-400 font-bold uppercase tracking-widest text-xs mb-1" data-v-32a4fc2a></div><div class="text-sm text-gray-300 leading-relaxed" data-v-32a4fc2a>   .          . </div></div></div>',7)])])):qt("",!0),p("div",Dg,[(U(),V(ut,null,Pt(o,T=>p("button",{key:T.id,onClick:te=>R(T.id),class:Ht(["flex-1 py-4 flex flex-col items-center justify-center transition-all duration-300",t.value===T.id?"text-metric-green scale-105":"text-gray-600 hover:text-gray-400"])},[p("span",Fg,pt(T.icon),1),p("span",Ng,pt(T.label),1)],10,Gg)),64))])]))}},Wg=Ec(Hg,[["__scopeId","data-v-32a4fc2a"]]);Zd(Wg).mount("#app");
