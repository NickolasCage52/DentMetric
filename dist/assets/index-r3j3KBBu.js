(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function kr(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const Tt={},Li=[],Te=()=>{},ca=()=>!1,us=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Tr=e=>e.startsWith("onUpdate:"),Yt=Object.assign,Mr=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},ql=Object.prototype.hasOwnProperty,_t=(e,t)=>ql.call(e,t),nt=Array.isArray,Ii=e=>An(e)==="[object Map]",gs=e=>An(e)==="[object Set]",to=e=>An(e)==="[object Date]",ot=e=>typeof e=="function",Ft=e=>typeof e=="string",Pe=e=>typeof e=="symbol",Lt=e=>e!==null&&typeof e=="object",ha=e=>(Lt(e)||ot(e))&&ot(e.then)&&ot(e.catch),da=Object.prototype.toString,An=e=>da.call(e),Ql=e=>An(e).slice(8,-1),fa=e=>An(e)==="[object Object]",Pr=e=>Ft(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,cn=kr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ps=e=>{const t=Object.create(null);return(i=>t[i]||(t[i]=e(i)))},Jl=/-\w/g,Ze=ps(e=>e.replace(Jl,t=>t.slice(1).toUpperCase())),Zl=/\B([A-Z])/g,yi=ps(e=>e.replace(Zl,"-$1").toLowerCase()),ua=ps(e=>e.charAt(0).toUpperCase()+e.slice(1)),Rs=ps(e=>e?`on${ua(e)}`:""),Je=(e,t)=>!Object.is(e,t),Vn=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},ga=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},ms=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let eo;const bs=()=>eo||(eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ar(e){if(nt(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=Ft(n)?nc(n):Ar(n);if(s)for(const r in s)t[r]=s[r]}return t}else if(Ft(e)||Lt(e))return e}const tc=/;(?![^(]*\))/g,ec=/:([^]+)/,ic=/\/\*[^]*?\*\//g;function nc(e){const t={};return e.replace(ic,"").split(tc).forEach(i=>{if(i){const n=i.split(ec);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function jt(e){let t="";if(Ft(e))t=e;else if(nt(e))for(let i=0;i<e.length;i++){const n=jt(e[i]);n&&(t+=n+" ")}else if(Lt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const sc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rc=kr(sc);function pa(e){return!!e||e===""}function oc(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=xs(e[n],t[n]);return i}function xs(e,t){if(e===t)return!0;let i=to(e),n=to(t);if(i||n)return i&&n?e.getTime()===t.getTime():!1;if(i=Pe(e),n=Pe(t),i||n)return e===t;if(i=nt(e),n=nt(t),i||n)return i&&n?oc(e,t):!1;if(i=Lt(e),n=Lt(t),i||n){if(!i||!n)return!1;const s=Object.keys(e).length,r=Object.keys(t).length;if(s!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!xs(e[o],t[o]))return!1}}return String(e)===String(t)}function ac(e,t){return e.findIndex(i=>xs(i,t))}const ma=e=>!!(e&&e.__v_isRef===!0),mt=e=>Ft(e)?e:e==null?"":nt(e)||Lt(e)&&(e.toString===da||!ot(e.toString))?ma(e)?mt(e.value):JSON.stringify(e,ba,2):String(e),ba=(e,t)=>ma(t)?ba(e,t.value):Ii(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s],r)=>(i[Os(n,r)+" =>"]=s,i),{})}:gs(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>Os(i))}:Pe(t)?Os(t):Lt(t)&&!nt(t)&&!fa(t)?String(t):t,Os=(e,t="")=>{var i;return Pe(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};let te;class lc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=te,!t&&te&&(this.index=(te.scopes||(te.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=te;try{return te=this,t()}finally{te=i}}}on(){++this._on===1&&(this.prevScope=te,te=this)}off(){this._on>0&&--this._on===0&&(te=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function cc(){return te}let Rt;const Ls=new WeakSet;class xa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,te&&te.active&&te.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ls.has(this)&&(Ls.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_a(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,io(this),va(this);const t=Rt,i=pe;Rt=this,pe=!0;try{return this.fn()}finally{wa(this),Rt=t,pe=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Or(t);this.deps=this.depsTail=void 0,io(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ls.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Js(this)&&this.run()}get dirty(){return Js(this)}}let ya=0,hn,dn;function _a(e,t=!1){if(e.flags|=8,t){e.next=dn,dn=e;return}e.next=hn,hn=e}function Er(){ya++}function Rr(){if(--ya>0)return;if(dn){let t=dn;for(dn=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;hn;){let t=hn;for(hn=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function va(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function wa(e){let t,i=e.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),Or(n),hc(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=i}function Js(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Sa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Sa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===vn)||(e.globalVersion=vn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Js(e))))return;e.flags|=2;const t=e.dep,i=Rt,n=pe;Rt=e,pe=!0;try{va(e);const s=e.fn(e._value);(t.version===0||Je(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Rt=i,pe=n,wa(e),e.flags&=-3}}function Or(e,t=!1){const{dep:i,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Or(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function hc(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let pe=!0;const Ca=[];function Ne(){Ca.push(pe),pe=!1}function Be(){const e=Ca.pop();pe=e===void 0?!0:e}function io(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Rt;Rt=void 0;try{t()}finally{Rt=i}}}let vn=0;class dc{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Lr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Rt||!pe||Rt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Rt)i=this.activeLink=new dc(Rt,this),Rt.deps?(i.prevDep=Rt.depsTail,Rt.depsTail.nextDep=i,Rt.depsTail=i):Rt.deps=Rt.depsTail=i,ka(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=Rt.depsTail,i.nextDep=void 0,Rt.depsTail.nextDep=i,Rt.depsTail=i,Rt.deps===i&&(Rt.deps=n)}return i}trigger(t){this.version++,vn++,this.notify(t)}notify(t){Er();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Rr()}}}function ka(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)ka(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Zs=new WeakMap,pi=Symbol(""),tr=Symbol(""),wn=Symbol("");function zt(e,t,i){if(pe&&Rt){let n=Zs.get(e);n||Zs.set(e,n=new Map);let s=n.get(i);s||(n.set(i,s=new Lr),s.map=n,s.key=i),s.track()}}function Ie(e,t,i,n,s,r){const o=Zs.get(e);if(!o){vn++;return}const a=l=>{l&&l.trigger()};if(Er(),t==="clear")o.forEach(a);else{const l=nt(e),c=l&&Pr(i);if(l&&i==="length"){const h=Number(n);o.forEach((d,f)=>{(f==="length"||f===wn||!Pe(f)&&f>=h)&&a(d)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),c&&a(o.get(wn)),t){case"add":l?c&&a(o.get("length")):(a(o.get(pi)),Ii(e)&&a(o.get(tr)));break;case"delete":l||(a(o.get(pi)),Ii(e)&&a(o.get(tr)));break;case"set":Ii(e)&&a(o.get(pi));break}}Rr()}function Ti(e){const t=yt(e);return t===e?t:(zt(t,"iterate",wn),ge(e)?t:t.map(me))}function ys(e){return zt(e=yt(e),"iterate",wn),e}function Ve(e,t){return He(e)?Hi(mi(e)?me(t):t):me(t)}const fc={__proto__:null,[Symbol.iterator](){return Is(this,Symbol.iterator,e=>Ve(this,e))},concat(...e){return Ti(this).concat(...e.map(t=>nt(t)?Ti(t):t))},entries(){return Is(this,"entries",e=>(e[1]=Ve(this,e[1]),e))},every(e,t){return Re(this,"every",e,t,void 0,arguments)},filter(e,t){return Re(this,"filter",e,t,i=>i.map(n=>Ve(this,n)),arguments)},find(e,t){return Re(this,"find",e,t,i=>Ve(this,i),arguments)},findIndex(e,t){return Re(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Re(this,"findLast",e,t,i=>Ve(this,i),arguments)},findLastIndex(e,t){return Re(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Re(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ds(this,"includes",e)},indexOf(...e){return Ds(this,"indexOf",e)},join(e){return Ti(this).join(e)},lastIndexOf(...e){return Ds(this,"lastIndexOf",e)},map(e,t){return Re(this,"map",e,t,void 0,arguments)},pop(){return Ki(this,"pop")},push(...e){return Ki(this,"push",e)},reduce(e,...t){return no(this,"reduce",e,t)},reduceRight(e,...t){return no(this,"reduceRight",e,t)},shift(){return Ki(this,"shift")},some(e,t){return Re(this,"some",e,t,void 0,arguments)},splice(...e){return Ki(this,"splice",e)},toReversed(){return Ti(this).toReversed()},toSorted(e){return Ti(this).toSorted(e)},toSpliced(...e){return Ti(this).toSpliced(...e)},unshift(...e){return Ki(this,"unshift",e)},values(){return Is(this,"values",e=>Ve(this,e))}};function Is(e,t,i){const n=ys(e),s=n[t]();return n!==e&&!ge(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=i(r.value)),r}),s}const uc=Array.prototype;function Re(e,t,i,n,s,r){const o=ys(e),a=o!==e&&!ge(e),l=o[t];if(l!==uc[t]){const d=l.apply(e,r);return a?me(d):d}let c=i;o!==e&&(a?c=function(d,f){return i.call(this,Ve(e,d),f,e)}:i.length>2&&(c=function(d,f){return i.call(this,d,f,e)}));const h=l.call(o,c,n);return a&&s?s(h):h}function no(e,t,i,n){const s=ys(e);let r=i;return s!==e&&(ge(e)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,e)}):r=function(o,a,l){return i.call(this,o,Ve(e,a),l,e)}),s[t](r,...n)}function Ds(e,t,i){const n=yt(e);zt(n,"iterate",wn);const s=n[t](...i);return(s===-1||s===!1)&&Gr(i[0])?(i[0]=yt(i[0]),n[t](...i)):s}function Ki(e,t,i=[]){Ne(),Er();const n=yt(e)[t].apply(e,i);return Rr(),Be(),n}const gc=kr("__proto__,__v_isRef,__isVue"),Ta=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pe));function pc(e){Pe(e)||(e=String(e));const t=yt(this);return zt(t,"has",e),t.hasOwnProperty(e)}class Ma{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?kc:Ra:r?Ea:Aa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=nt(t);if(!s){let l;if(o&&(l=fc[i]))return l;if(i==="hasOwnProperty")return pc}const a=Reflect.get(t,i,Xt(t)?t:n);if((Pe(i)?Ta.has(i):gc(i))||(s||zt(t,"get",i),r))return a;if(Xt(a)){const l=o&&Pr(i)?a:a.value;return s&&Lt(l)?ir(l):l}return Lt(a)?s?ir(a):Di(a):a}}class Pa extends Ma{constructor(t=!1){super(!1,t)}set(t,i,n,s){let r=t[i];const o=nt(t)&&Pr(i);if(!this._isShallow){const c=He(r);if(!ge(n)&&!He(n)&&(r=yt(r),n=yt(n)),!o&&Xt(r)&&!Xt(n))return c||(r.value=n),!0}const a=o?Number(i)<t.length:_t(t,i),l=Reflect.set(t,i,n,Xt(t)?t:s);return t===yt(s)&&(a?Je(n,r)&&Ie(t,"set",i,n):Ie(t,"add",i,n)),l}deleteProperty(t,i){const n=_t(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&n&&Ie(t,"delete",i,void 0),s}has(t,i){const n=Reflect.has(t,i);return(!Pe(i)||!Ta.has(i))&&zt(t,"has",i),n}ownKeys(t){return zt(t,"iterate",nt(t)?"length":pi),Reflect.ownKeys(t)}}class mc extends Ma{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const bc=new Pa,xc=new mc,yc=new Pa(!0);const er=e=>e,In=e=>Reflect.getPrototypeOf(e);function _c(e,t,i){return function(...n){const s=this.__v_raw,r=yt(s),o=Ii(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...n),h=i?er:t?Hi:me;return!t&&zt(r,"iterate",l?tr:pi),Yt(Object.create(c),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}}})}}function Dn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function vc(e,t){const i={get(s){const r=this.__v_raw,o=yt(r),a=yt(s);e||(Je(s,a)&&zt(o,"get",s),zt(o,"get",a));const{has:l}=In(o),c=t?er:e?Hi:me;if(l.call(o,s))return c(r.get(s));if(l.call(o,a))return c(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!e&&zt(yt(s),"iterate",pi),s.size},has(s){const r=this.__v_raw,o=yt(r),a=yt(s);return e||(Je(s,a)&&zt(o,"has",s),zt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=yt(a),c=t?er:e?Hi:me;return!e&&zt(l,"iterate",pi),a.forEach((h,d)=>s.call(r,c(h),c(d),o))}};return Yt(i,e?{add:Dn("add"),set:Dn("set"),delete:Dn("delete"),clear:Dn("clear")}:{add(s){!t&&!ge(s)&&!He(s)&&(s=yt(s));const r=yt(this);return In(r).has.call(r,s)||(r.add(s),Ie(r,"add",s,s)),this},set(s,r){!t&&!ge(r)&&!He(r)&&(r=yt(r));const o=yt(this),{has:a,get:l}=In(o);let c=a.call(o,s);c||(s=yt(s),c=a.call(o,s));const h=l.call(o,s);return o.set(s,r),c?Je(r,h)&&Ie(o,"set",s,r):Ie(o,"add",s,r),this},delete(s){const r=yt(this),{has:o,get:a}=In(r);let l=o.call(r,s);l||(s=yt(s),l=o.call(r,s)),a&&a.call(r,s);const c=r.delete(s);return l&&Ie(r,"delete",s,void 0),c},clear(){const s=yt(this),r=s.size!==0,o=s.clear();return r&&Ie(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=_c(s,e,t)}),i}function Ir(e,t){const i=vc(e,t);return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(_t(i,s)&&s in n?i:n,s,r)}const wc={get:Ir(!1,!1)},Sc={get:Ir(!1,!0)},Cc={get:Ir(!0,!1)};const Aa=new WeakMap,Ea=new WeakMap,Ra=new WeakMap,kc=new WeakMap;function Tc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Mc(e){return e.__v_skip||!Object.isExtensible(e)?0:Tc(Ql(e))}function Di(e){return He(e)?e:Dr(e,!1,bc,wc,Aa)}function Pc(e){return Dr(e,!1,yc,Sc,Ea)}function ir(e){return Dr(e,!0,xc,Cc,Ra)}function Dr(e,t,i,n,s){if(!Lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Mc(e);if(r===0)return e;const o=s.get(e);if(o)return o;const a=new Proxy(e,r===2?n:i);return s.set(e,a),a}function mi(e){return He(e)?mi(e.__v_raw):!!(e&&e.__v_isReactive)}function He(e){return!!(e&&e.__v_isReadonly)}function ge(e){return!!(e&&e.__v_isShallow)}function Gr(e){return e?!!e.__v_raw:!1}function yt(e){const t=e&&e.__v_raw;return t?yt(t):e}function Ac(e){return!_t(e,"__v_skip")&&Object.isExtensible(e)&&ga(e,"__v_skip",!0),e}const me=e=>Lt(e)?Di(e):e,Hi=e=>Lt(e)?ir(e):e;function Xt(e){return e?e.__v_isRef===!0:!1}function ai(e){return Ec(e,!1)}function Ec(e,t){return Xt(e)?e:new Rc(e,t)}class Rc{constructor(t,i){this.dep=new Lr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:yt(t),this._value=i?t:me(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||ge(t)||He(t);t=n?t:yt(t),Je(t,i)&&(this._rawValue=t,this._value=n?t:me(t),this.dep.trigger())}}function Zt(e){return Xt(e)?e.value:e}const Oc={get:(e,t,i)=>t==="__v_raw"?e:Zt(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Xt(s)&&!Xt(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function Oa(e){return mi(e)?e:new Proxy(e,Oc)}class Lc{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Lr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Rt!==this)return _a(this,!0),!0}get value(){const t=this.dep.track();return Sa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Ic(e,t,i=!1){let n,s;return ot(e)?n=e:(n=e.get,s=e.set),new Lc(n,s,i)}const Gn={},ns=new WeakMap;let di;function Dc(e,t=!1,i=di){if(i){let n=ns.get(i);n||ns.set(i,n=[]),n.push(e)}}function Gc(e,t,i=Tt){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=i,c=C=>s?C:ge(C)||s===!1||s===0?De(C,1):De(C);let h,d,f,g,p=!1,_=!1;if(Xt(e)?(d=()=>e.value,p=ge(e)):mi(e)?(d=()=>c(e),p=!0):nt(e)?(_=!0,p=e.some(C=>mi(C)||ge(C)),d=()=>e.map(C=>{if(Xt(C))return C.value;if(mi(C))return c(C);if(ot(C))return l?l(C,2):C()})):ot(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){Ne();try{f()}finally{Be()}}const C=di;di=h;try{return l?l(e,3,[g]):e(g)}finally{di=C}}:d=Te,t&&s){const C=d,L=s===!0?1/0:s;d=()=>De(C(),L)}const k=cc(),v=()=>{h.stop(),k&&k.active&&Mr(k.effects,h)};if(r&&t){const C=t;t=(...L)=>{C(...L),v()}}let S=_?new Array(e.length).fill(Gn):Gn;const T=C=>{if(!(!(h.flags&1)||!h.dirty&&!C))if(t){const L=h.run();if(s||p||(_?L.some((E,z)=>Je(E,S[z])):Je(L,S))){f&&f();const E=di;di=h;try{const z=[L,S===Gn?void 0:_&&S[0]===Gn?[]:S,g];S=L,l?l(t,3,z):t(...z)}finally{di=E}}}else h.run()};return a&&a(T),h=new xa(d),h.scheduler=o?()=>o(T,!1):T,g=C=>Dc(C,!1,h),f=h.onStop=()=>{const C=ns.get(h);if(C){if(l)l(C,4);else for(const L of C)L();ns.delete(h)}},t?n?T(!0):S=h.run():o?o(T.bind(null,!0),!0):h.run(),v.pause=h.pause.bind(h),v.resume=h.resume.bind(h),v.stop=v,v}function De(e,t=1/0,i){if(t<=0||!Lt(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=t))return e;if(i.set(e,t),t--,Xt(e))De(e.value,t,i);else if(nt(e))for(let n=0;n<e.length;n++)De(e[n],t,i);else if(gs(e)||Ii(e))e.forEach(n=>{De(n,t,i)});else if(fa(e)){for(const n in e)De(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&De(e[n],t,i)}return e}function En(e,t,i,n){try{return n?e(...n):e()}catch(s){_s(s,t,i)}}function Ae(e,t,i,n){if(ot(e)){const s=En(e,t,i,n);return s&&ha(s)&&s.catch(r=>{_s(r,t,i)}),s}if(nt(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Ae(e[r],t,i,n));return s}}function _s(e,t,i,n=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Tt;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const h=a.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,l,c)===!1)return}a=a.parent}if(r){Ne(),En(r,null,10,[e,l,c]),Be();return}}Fc(e,i,s,n,o)}function Fc(e,t,i,n=!0,s=!1){if(s)throw e;console.error(e)}const Vt=[];let we=-1;const Gi=[];let $e=null,Ri=0;const La=Promise.resolve();let ss=null;function rs(e){const t=ss||La;return e?t.then(this?e.bind(this):e):t}function Nc(e){let t=we+1,i=Vt.length;for(;t<i;){const n=t+i>>>1,s=Vt[n],r=Sn(s);r<e||r===e&&s.flags&2?t=n+1:i=n}return t}function Fr(e){if(!(e.flags&1)){const t=Sn(e),i=Vt[Vt.length-1];!i||!(e.flags&2)&&t>=Sn(i)?Vt.push(e):Vt.splice(Nc(t),0,e),e.flags|=1,Ia()}}function Ia(){ss||(ss=La.then(Ga))}function Bc(e){nt(e)?Gi.push(...e):$e&&e.id===-1?$e.splice(Ri+1,0,e):e.flags&1||(Gi.push(e),e.flags|=1),Ia()}function so(e,t,i=we+1){for(;i<Vt.length;i++){const n=Vt[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;Vt.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function Da(e){if(Gi.length){const t=[...new Set(Gi)].sort((i,n)=>Sn(i)-Sn(n));if(Gi.length=0,$e){$e.push(...t);return}for($e=t,Ri=0;Ri<$e.length;Ri++){const i=$e[Ri];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}$e=null,Ri=0}}const Sn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ga(e){try{for(we=0;we<Vt.length;we++){const t=Vt[we];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),En(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;we<Vt.length;we++){const t=Vt[we];t&&(t.flags&=-2)}we=-1,Vt.length=0,Da(),ss=null,(Vt.length||Gi.length)&&Ga()}}let ue=null,Fa=null;function os(e){const t=ue;return ue=e,Fa=e&&e.type.__scopeId||null,t}function Hc(e,t=ue,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&po(-1);const r=os(t);let o;try{o=e(...s)}finally{os(r),n._d&&po(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function Wt(e,t){if(ue===null)return e;const i=Cs(ue),n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[r,o,a,l=Tt]=t[s];r&&(ot(r)&&(r={mounted:r,updated:r}),r.deep&&De(o),n.push({dir:r,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function li(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Ne(),Ae(l,i,8,[e.el,a,e,t]),Be())}}function Wc(e,t){if($t){let i=$t.provides;const n=$t.parent&&$t.parent.provides;n===i&&(i=$t.provides=Object.create(n)),i[e]=t}}function $n(e,t,i=!1){const n=Hh();if(n||Fi){let s=Fi?Fi._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&ot(t)?t.call(n&&n.proxy):t}}const jc=Symbol.for("v-scx"),zc=()=>$n(jc);function qn(e,t,i){return Na(e,t,i)}function Na(e,t,i=Tt){const{immediate:n,deep:s,flush:r,once:o}=i,a=Yt({},i),l=t&&n||!t&&r!=="post";let c;if(kn){if(r==="sync"){const g=zc();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=Te,g.resume=Te,g.pause=Te,g}}const h=$t;a.call=(g,p,_)=>Ae(g,h,p,_);let d=!1;r==="post"?a.scheduler=g=>{ne(g,h&&h.suspense)}:r!=="sync"&&(d=!0,a.scheduler=(g,p)=>{p?g():Fr(g)}),a.augmentJob=g=>{t&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const f=Gc(e,t,a);return kn&&(c?c.push(f):l&&f()),f}function Uc(e,t,i){const n=this.proxy,s=Ft(e)?e.includes(".")?Ba(n,e):()=>n[e]:e.bind(n,n);let r;ot(t)?r=t:(r=t.handler,i=t);const o=Rn(this),a=Na(s,r.bind(n),i);return o(),a}function Ba(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const Xc=Symbol("_vte"),Yc=e=>e.__isTeleport,Kc=Symbol("_leaveCb");function Nr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Nr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ha(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const as=new WeakMap;function fn(e,t,i,n,s=!1){if(nt(e)){e.forEach((p,_)=>fn(p,t&&(nt(t)?t[_]:t),i,n,s));return}if(un(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&fn(e,t,i,n.component.subTree);return}const r=n.shapeFlag&4?Cs(n.component):n.el,o=s?null:r,{i:a,r:l}=e,c=t&&t.r,h=a.refs===Tt?a.refs={}:a.refs,d=a.setupState,f=yt(d),g=d===Tt?ca:p=>_t(f,p);if(c!=null&&c!==l){if(ro(t),Ft(c))h[c]=null,g(c)&&(d[c]=null);else if(Xt(c)){c.value=null;const p=t;p.k&&(h[p.k]=null)}}if(ot(l))En(l,a,12,[o,h]);else{const p=Ft(l),_=Xt(l);if(p||_){const k=()=>{if(e.f){const v=p?g(l)?d[l]:h[l]:l.value;if(s)nt(v)&&Mr(v,r);else if(nt(v))v.includes(r)||v.push(r);else if(p)h[l]=[r],g(l)&&(d[l]=h[l]);else{const S=[r];l.value=S,e.k&&(h[e.k]=S)}}else p?(h[l]=o,g(l)&&(d[l]=o)):_&&(l.value=o,e.k&&(h[e.k]=o))};if(o){const v=()=>{k(),as.delete(e)};v.id=-1,as.set(e,v),ne(v,i)}else ro(e),k()}}}function ro(e){const t=as.get(e);t&&(t.flags|=8,as.delete(e))}bs().requestIdleCallback;bs().cancelIdleCallback;const un=e=>!!e.type.__asyncLoader,Wa=e=>e.type.__isKeepAlive;function Vc(e,t){ja(e,"a",t)}function $c(e,t){ja(e,"da",t)}function ja(e,t,i=$t){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(vs(t,n,i),i){let s=i.parent;for(;s&&s.parent;)Wa(s.parent.vnode)&&qc(n,t,i,s),s=s.parent}}function qc(e,t,i,n){const s=vs(t,e,n,!0);Xa(()=>{Mr(n[t],s)},i)}function vs(e,t,i=$t,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Ne();const a=Rn(i),l=Ae(t,i,e,o);return a(),Be(),l});return n?s.unshift(r):s.push(r),r}}const We=e=>(t,i=$t)=>{(!kn||e==="sp")&&vs(e,(...n)=>t(...n),i)},Qc=We("bm"),za=We("m"),Jc=We("bu"),Zc=We("u"),Ua=We("bum"),Xa=We("um"),th=We("sp"),eh=We("rtg"),ih=We("rtc");function nh(e,t=$t){vs("ec",e,t)}const sh=Symbol.for("v-ndc");function Nt(e,t,i,n){let s;const r=i,o=nt(e);if(o||Ft(e)){const a=o&&mi(e);let l=!1,c=!1;a&&(l=!ge(e),c=He(e),e=ys(e)),s=new Array(e.length);for(let h=0,d=e.length;h<d;h++)s[h]=t(l?c?Hi(me(e[h])):me(e[h]):e[h],h,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,r)}else if(Lt(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];s[l]=t(e[h],h,l,r)}}else s=[];return s}const nr=e=>e?dl(e)?Cs(e):nr(e.parent):null,gn=Yt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nr(e.parent),$root:e=>nr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ka(e),$forceUpdate:e=>e.f||(e.f=()=>{Fr(e.update)}),$nextTick:e=>e.n||(e.n=rs.bind(e.proxy)),$watch:e=>Uc.bind(e)}),Gs=(e,t)=>e!==Tt&&!e.__isScriptSetup&&_t(e,t),rh={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=e;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(Gs(n,t))return o[t]=1,n[t];if(s!==Tt&&_t(s,t))return o[t]=2,s[t];if(_t(r,t))return o[t]=3,r[t];if(i!==Tt&&_t(i,t))return o[t]=4,i[t];sr&&(o[t]=0)}}const c=gn[t];let h,d;if(c)return t==="$attrs"&&zt(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(i!==Tt&&_t(i,t))return o[t]=4,i[t];if(d=l.config.globalProperties,_t(d,t))return d[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return Gs(s,t)?(s[t]=i,!0):n!==Tt&&_t(n,t)?(n[t]=i,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,props:r,type:o}},a){let l;return!!(i[a]||e!==Tt&&a[0]!=="$"&&_t(e,a)||Gs(t,a)||_t(r,a)||_t(n,a)||_t(gn,a)||_t(s.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:_t(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function oo(e){return nt(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let sr=!0;function oh(e){const t=Ka(e),i=e.proxy,n=e.ctx;sr=!1,t.beforeCreate&&ao(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:d,mounted:f,beforeUpdate:g,updated:p,activated:_,deactivated:k,beforeDestroy:v,beforeUnmount:S,destroyed:T,unmounted:C,render:L,renderTracked:E,renderTriggered:z,errorCaptured:N,serverPrefetch:X,expose:q,inheritAttrs:at,components:V,directives:lt,filters:rt}=t;if(c&&ah(c,n,null),o)for(const tt in o){const H=o[tt];ot(H)&&(n[tt]=H.bind(i))}if(s){const tt=s.call(i,i);Lt(tt)&&(e.data=Di(tt))}if(sr=!0,r)for(const tt in r){const H=r[tt],ct=ot(H)?H.bind(i,i):ot(H.get)?H.get.bind(i,i):Te,gt=!ot(H)&&ot(H.set)?H.set.bind(i):Te,it=fi({get:ct,set:gt});Object.defineProperty(n,tt,{enumerable:!0,configurable:!0,get:()=>it.value,set:dt=>it.value=dt})}if(a)for(const tt in a)Ya(a[tt],n,i,tt);if(l){const tt=ot(l)?l.call(i):l;Reflect.ownKeys(tt).forEach(H=>{Wc(H,tt[H])})}h&&ao(h,e,"c");function B(tt,H){nt(H)?H.forEach(ct=>tt(ct.bind(i))):H&&tt(H.bind(i))}if(B(Qc,d),B(za,f),B(Jc,g),B(Zc,p),B(Vc,_),B($c,k),B(nh,N),B(ih,E),B(eh,z),B(Ua,S),B(Xa,C),B(th,X),nt(q))if(q.length){const tt=e.exposed||(e.exposed={});q.forEach(H=>{Object.defineProperty(tt,H,{get:()=>i[H],set:ct=>i[H]=ct,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===Te&&(e.render=L),at!=null&&(e.inheritAttrs=at),V&&(e.components=V),lt&&(e.directives=lt),X&&Ha(e)}function ah(e,t,i=Te){nt(e)&&(e=rr(e));for(const n in e){const s=e[n];let r;Lt(s)?"default"in s?r=$n(s.from||n,s.default,!0):r=$n(s.from||n):r=$n(s),Xt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function ao(e,t,i){Ae(nt(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function Ya(e,t,i,n){let s=n.includes(".")?Ba(i,n):()=>i[n];if(Ft(e)){const r=t[e];ot(r)&&qn(s,r)}else if(ot(e))qn(s,e.bind(i));else if(Lt(e))if(nt(e))e.forEach(r=>Ya(r,t,i,n));else{const r=ot(e.handler)?e.handler.bind(i):t[e.handler];ot(r)&&qn(s,r,e)}}function Ka(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(c=>ls(l,c,o,!0)),ls(l,t,o)),Lt(t)&&r.set(t,l),l}function ls(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&ls(e,r,i,!0),s&&s.forEach(o=>ls(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=lh[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const lh={data:lo,props:co,emits:co,methods:en,computed:en,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:en,directives:en,watch:hh,provide:lo,inject:ch};function lo(e,t){return t?e?function(){return Yt(ot(e)?e.call(this,this):e,ot(t)?t.call(this,this):t)}:t:e}function ch(e,t){return en(rr(e),rr(t))}function rr(e){if(nt(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Kt(e,t){return e?[...new Set([].concat(e,t))]:t}function en(e,t){return e?Yt(Object.create(null),e,t):t}function co(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:Yt(Object.create(null),oo(e),oo(t??{})):t}function hh(e,t){if(!e)return t;if(!t)return e;const i=Yt(Object.create(null),e);for(const n in t)i[n]=Kt(e[n],t[n]);return i}function Va(){return{app:null,config:{isNativeTag:ca,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let dh=0;function fh(e,t){return function(n,s=null){ot(n)||(n=Yt({},n)),s!=null&&!Lt(s)&&(s=null);const r=Va(),o=new WeakSet,a=[];let l=!1;const c=r.app={_uid:dh++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:Yh,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&ot(h.install)?(o.add(h),h.install(c,...d)):ot(h)&&(o.add(h),h(c,...d))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,d){return d?(r.components[h]=d,c):r.components[h]},directive(h,d){return d?(r.directives[h]=d,c):r.directives[h]},mount(h,d,f){if(!l){const g=c._ceVNode||Me(n,s);return g.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(g,h,f),l=!0,c._container=h,h.__vue_app__=c,Cs(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Ae(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(h,d){return r.provides[h]=d,c},runWithContext(h){const d=Fi;Fi=c;try{return h()}finally{Fi=d}}};return c}}let Fi=null;const uh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ze(t)}Modifiers`]||e[`${yi(t)}Modifiers`];function gh(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||Tt;let s=i;const r=t.startsWith("update:"),o=r&&uh(n,t.slice(7));o&&(o.trim&&(s=i.map(h=>Ft(h)?h.trim():h)),o.number&&(s=i.map(ms)));let a,l=n[a=Rs(t)]||n[a=Rs(Ze(t))];!l&&r&&(l=n[a=Rs(yi(t))]),l&&Ae(l,e,6,s);const c=n[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ae(c,e,6,s)}}const ph=new WeakMap;function $a(e,t,i=!1){const n=i?ph:t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!ot(e)){const l=c=>{const h=$a(c,t,!0);h&&(a=!0,Yt(o,h))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Lt(e)&&n.set(e,null),null):(nt(r)?r.forEach(l=>o[l]=null):Yt(o,r),Lt(e)&&n.set(e,o),o)}function ws(e,t){return!e||!us(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,yi(t))||_t(e,t))}function ho(e){const{type:t,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:d,data:f,setupState:g,ctx:p,inheritAttrs:_}=e,k=os(e);let v,S;try{if(i.shapeFlag&4){const C=s||n,L=C;v=Se(c.call(L,C,h,d,g,f,p)),S=a}else{const C=t;v=Se(C.length>1?C(d,{attrs:a,slots:o,emit:l}):C(d,null)),S=t.props?a:mh(a)}}catch(C){pn.length=0,_s(C,e,1),v=Me(ti)}let T=v;if(S&&_!==!1){const C=Object.keys(S),{shapeFlag:L}=T;C.length&&L&7&&(r&&C.some(Tr)&&(S=bh(S,r)),T=Wi(T,S,!1,!0))}return i.dirs&&(T=Wi(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(i.dirs):i.dirs),i.transition&&Nr(T,i.transition),v=T,os(k),v}const mh=e=>{let t;for(const i in e)(i==="class"||i==="style"||us(i))&&((t||(t={}))[i]=e[i]);return t},bh=(e,t)=>{const i={};for(const n in e)(!Tr(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function xh(e,t,i){const{props:n,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?fo(n,o,c):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==n[f]&&!ws(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?fo(n,o,c):!0:!!o;return!1}function fo(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!ws(i,r))return!0}return!1}function yh({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const qa={},Qa=()=>Object.create(qa),Ja=e=>Object.getPrototypeOf(e)===qa;function _h(e,t,i,n=!1){const s={},r=Qa();e.propsDefaults=Object.create(null),Za(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=n?s:Pc(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function vh(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=yt(s),[l]=e.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];if(ws(e.emitsOptions,f))continue;const g=t[f];if(l)if(_t(r,f))g!==r[f]&&(r[f]=g,c=!0);else{const p=Ze(f);s[p]=or(l,a,p,g,e,!1)}else g!==r[f]&&(r[f]=g,c=!0)}}}else{Za(e,t,s,r)&&(c=!0);let h;for(const d in a)(!t||!_t(t,d)&&((h=yi(d))===d||!_t(t,h)))&&(l?i&&(i[d]!==void 0||i[h]!==void 0)&&(s[d]=or(l,a,d,void 0,e,!0)):delete s[d]);if(r!==a)for(const d in r)(!t||!_t(t,d))&&(delete r[d],c=!0)}c&&Ie(e.attrs,"set","")}function Za(e,t,i,n){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(cn(l))continue;const c=t[l];let h;s&&_t(s,h=Ze(l))?!r||!r.includes(h)?i[h]=c:(a||(a={}))[h]=c:ws(e.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=yt(i),c=a||Tt;for(let h=0;h<r.length;h++){const d=r[h];i[d]=or(s,l,d,c[d],e,!_t(c,d))}}return o}function or(e,t,i,n,s,r){const o=e[i];if(o!=null){const a=_t(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ot(l)){const{propsDefaults:c}=s;if(i in c)n=c[i];else{const h=Rn(s);n=c[i]=l.call(null,t),h()}}else n=l;s.ce&&s.ce._setProp(i,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===yi(i))&&(n=!0))}return n}const wh=new WeakMap;function tl(e,t,i=!1){const n=i?wh:t.propsCache,s=n.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!ot(e)){const h=d=>{l=!0;const[f,g]=tl(d,t,!0);Yt(o,f),g&&a.push(...g)};!i&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!r&&!l)return Lt(e)&&n.set(e,Li),Li;if(nt(r))for(let h=0;h<r.length;h++){const d=Ze(r[h]);uo(d)&&(o[d]=Tt)}else if(r)for(const h in r){const d=Ze(h);if(uo(d)){const f=r[h],g=o[d]=nt(f)||ot(f)?{type:f}:Yt({},f),p=g.type;let _=!1,k=!0;if(nt(p))for(let v=0;v<p.length;++v){const S=p[v],T=ot(S)&&S.name;if(T==="Boolean"){_=!0;break}else T==="String"&&(k=!1)}else _=ot(p)&&p.name==="Boolean";g[0]=_,g[1]=k,(_||_t(g,"default"))&&a.push(d)}}const c=[o,a];return Lt(e)&&n.set(e,c),c}function uo(e){return e[0]!=="$"&&!cn(e)}const Br=e=>e==="_"||e==="_ctx"||e==="$stable",Hr=e=>nt(e)?e.map(Se):[Se(e)],Sh=(e,t,i)=>{if(t._n)return t;const n=Hc((...s)=>Hr(t(...s)),i);return n._c=!1,n},el=(e,t,i)=>{const n=e._ctx;for(const s in e){if(Br(s))continue;const r=e[s];if(ot(r))t[s]=Sh(s,r,n);else if(r!=null){const o=Hr(r);t[s]=()=>o}}},il=(e,t)=>{const i=Hr(t);e.slots.default=()=>i},nl=(e,t,i)=>{for(const n in t)(i||!Br(n))&&(e[n]=t[n])},Ch=(e,t,i)=>{const n=e.slots=Qa();if(e.vnode.shapeFlag&32){const s=t._;s?(nl(n,t,i),i&&ga(n,"_",s,!0)):el(t,n)}else t&&il(e,t)},kh=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,o=Tt;if(n.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:nl(s,t,i):(r=!t.$stable,el(t,s)),o=t}else t&&(il(e,t),o={default:1});if(r)for(const a in s)!Br(a)&&o[a]==null&&delete s[a]},ne=Eh;function Th(e){return Mh(e)}function Mh(e,t){const i=bs();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:d,nextSibling:f,setScopeId:g=Te,insertStaticContent:p}=e,_=(m,u,b,M=null,A=null,R=null,j=void 0,W=null,G=!!u.dynamicChildren)=>{if(m===u)return;m&&!Vi(m,u)&&(M=ki(m),dt(m,A,R,!0),m=null),u.patchFlag===-2&&(G=!1,u.dynamicChildren=null);const{type:P,ref:Y,shapeFlag:U}=u;switch(P){case Ss:k(m,u,b,M);break;case ti:v(m,u,b,M);break;case Qn:m==null&&S(u,b,M,j);break;case wt:V(m,u,b,M,A,R,j,W,G);break;default:U&1?L(m,u,b,M,A,R,j,W,G):U&6?lt(m,u,b,M,A,R,j,W,G):(U&64||U&128)&&P.process(m,u,b,M,A,R,j,W,G,oi)}Y!=null&&A?fn(Y,m&&m.ref,R,u||m,!u):Y==null&&m&&m.ref!=null&&fn(m.ref,null,R,m,!0)},k=(m,u,b,M)=>{if(m==null)n(u.el=a(u.children),b,M);else{const A=u.el=m.el;u.children!==m.children&&c(A,u.children)}},v=(m,u,b,M)=>{m==null?n(u.el=l(u.children||""),b,M):u.el=m.el},S=(m,u,b,M)=>{[m.el,m.anchor]=p(m.children,u,b,M,m.el,m.anchor)},T=({el:m,anchor:u},b,M)=>{let A;for(;m&&m!==u;)A=f(m),n(m,b,M),m=A;n(u,b,M)},C=({el:m,anchor:u})=>{let b;for(;m&&m!==u;)b=f(m),s(m),m=b;s(u)},L=(m,u,b,M,A,R,j,W,G)=>{if(u.type==="svg"?j="svg":u.type==="math"&&(j="mathml"),m==null)E(u,b,M,A,R,j,W,G);else{const P=m.el&&m.el._isVueCE?m.el:null;try{P&&P._beginPatch(),X(m,u,A,R,j,W,G)}finally{P&&P._endPatch()}}},E=(m,u,b,M,A,R,j,W)=>{let G,P;const{props:Y,shapeFlag:U,transition:Z,dirs:st}=m;if(G=m.el=o(m.type,R,Y&&Y.is,Y),U&8?h(G,m.children):U&16&&N(m.children,G,null,M,A,Fs(m,R),j,W),st&&li(m,null,M,"created"),z(G,m,m.scopeId,j,M),Y){for(const Pt in Y)Pt!=="value"&&!cn(Pt)&&r(G,Pt,null,Y[Pt],R,M);"value"in Y&&r(G,"value",null,Y.value,R),(P=Y.onVnodeBeforeMount)&&ve(P,M,m)}st&&li(m,null,M,"beforeMount");const ft=Ph(A,Z);ft&&Z.beforeEnter(G),n(G,u,b),((P=Y&&Y.onVnodeMounted)||ft||st)&&ne(()=>{P&&ve(P,M,m),ft&&Z.enter(G),st&&li(m,null,M,"mounted")},A)},z=(m,u,b,M,A)=>{if(b&&g(m,b),M)for(let R=0;R<M.length;R++)g(m,M[R]);if(A){let R=A.subTree;if(u===R||al(R.type)&&(R.ssContent===u||R.ssFallback===u)){const j=A.vnode;z(m,j,j.scopeId,j.slotScopeIds,A.parent)}}},N=(m,u,b,M,A,R,j,W,G=0)=>{for(let P=G;P<m.length;P++){const Y=m[P]=W?qe(m[P]):Se(m[P]);_(null,Y,u,b,M,A,R,j,W)}},X=(m,u,b,M,A,R,j)=>{const W=u.el=m.el;let{patchFlag:G,dynamicChildren:P,dirs:Y}=u;G|=m.patchFlag&16;const U=m.props||Tt,Z=u.props||Tt;let st;if(b&&ci(b,!1),(st=Z.onVnodeBeforeUpdate)&&ve(st,b,u,m),Y&&li(u,m,b,"beforeUpdate"),b&&ci(b,!0),(U.innerHTML&&Z.innerHTML==null||U.textContent&&Z.textContent==null)&&h(W,""),P?q(m.dynamicChildren,P,W,b,M,Fs(u,A),R):j||H(m,u,W,null,b,M,Fs(u,A),R,!1),G>0){if(G&16)at(W,U,Z,b,A);else if(G&2&&U.class!==Z.class&&r(W,"class",null,Z.class,A),G&4&&r(W,"style",U.style,Z.style,A),G&8){const ft=u.dynamicProps;for(let Pt=0;Pt<ft.length;Pt++){const vt=ft[Pt],qt=U[vt],Qt=Z[vt];(Qt!==qt||vt==="value")&&r(W,vt,qt,Qt,A,b)}}G&1&&m.children!==u.children&&h(W,u.children)}else!j&&P==null&&at(W,U,Z,b,A);((st=Z.onVnodeUpdated)||Y)&&ne(()=>{st&&ve(st,b,u,m),Y&&li(u,m,b,"updated")},M)},q=(m,u,b,M,A,R,j)=>{for(let W=0;W<u.length;W++){const G=m[W],P=u[W],Y=G.el&&(G.type===wt||!Vi(G,P)||G.shapeFlag&198)?d(G.el):b;_(G,P,Y,null,M,A,R,j,!0)}},at=(m,u,b,M,A)=>{if(u!==b){if(u!==Tt)for(const R in u)!cn(R)&&!(R in b)&&r(m,R,u[R],null,A,M);for(const R in b){if(cn(R))continue;const j=b[R],W=u[R];j!==W&&R!=="value"&&r(m,R,W,j,A,M)}"value"in b&&r(m,"value",u.value,b.value,A)}},V=(m,u,b,M,A,R,j,W,G)=>{const P=u.el=m?m.el:a(""),Y=u.anchor=m?m.anchor:a("");let{patchFlag:U,dynamicChildren:Z,slotScopeIds:st}=u;st&&(W=W?W.concat(st):st),m==null?(n(P,b,M),n(Y,b,M),N(u.children||[],b,Y,A,R,j,W,G)):U>0&&U&64&&Z&&m.dynamicChildren&&m.dynamicChildren.length===Z.length?(q(m.dynamicChildren,Z,b,A,R,j,W),(u.key!=null||A&&u===A.subTree)&&sl(m,u,!0)):H(m,u,b,Y,A,R,j,W,G)},lt=(m,u,b,M,A,R,j,W,G)=>{u.slotScopeIds=W,m==null?u.shapeFlag&512?A.ctx.activate(u,b,M,j,G):rt(u,b,M,A,R,j,G):Q(m,u,G)},rt=(m,u,b,M,A,R,j)=>{const W=m.component=Bh(m,M,A);if(Wa(m)&&(W.ctx.renderer=oi),Wh(W,!1,j),W.asyncDep){if(A&&A.registerDep(W,B,j),!m.el){const G=W.subTree=Me(ti);v(null,G,u,b),m.placeholder=G.el}}else B(W,m,u,b,A,R,j)},Q=(m,u,b)=>{const M=u.component=m.component;if(xh(m,u,b))if(M.asyncDep&&!M.asyncResolved){tt(M,u,b);return}else M.next=u,M.update();else u.el=m.el,M.vnode=u},B=(m,u,b,M,A,R,j)=>{const W=()=>{if(m.isMounted){let{next:U,bu:Z,u:st,parent:ft,vnode:Pt}=m;{const ye=rl(m);if(ye){U&&(U.el=Pt.el,tt(m,U,j)),ye.asyncDep.then(()=>{m.isUnmounted||W()});return}}let vt=U,qt;ci(m,!1),U?(U.el=Pt.el,tt(m,U,j)):U=Pt,Z&&Vn(Z),(qt=U.props&&U.props.onVnodeBeforeUpdate)&&ve(qt,ft,U,Pt),ci(m,!0);const Qt=ho(m),xe=m.subTree;m.subTree=Qt,_(xe,Qt,d(xe.el),ki(xe),m,A,R),U.el=Qt.el,vt===null&&yh(m,Qt.el),st&&ne(st,A),(qt=U.props&&U.props.onVnodeUpdated)&&ne(()=>ve(qt,ft,U,Pt),A)}else{let U;const{el:Z,props:st}=u,{bm:ft,m:Pt,parent:vt,root:qt,type:Qt}=m,xe=un(u);ci(m,!1),ft&&Vn(ft),!xe&&(U=st&&st.onVnodeBeforeMount)&&ve(U,vt,u),ci(m,!0);{qt.ce&&qt.ce._def.shadowRoot!==!1&&qt.ce._injectChildStyle(Qt);const ye=m.subTree=ho(m);_(null,ye,b,M,m,A,R),u.el=ye.el}if(Pt&&ne(Pt,A),!xe&&(U=st&&st.onVnodeMounted)){const ye=u;ne(()=>ve(U,vt,ye),A)}(u.shapeFlag&256||vt&&un(vt.vnode)&&vt.vnode.shapeFlag&256)&&m.a&&ne(m.a,A),m.isMounted=!0,u=b=M=null}};m.scope.on();const G=m.effect=new xa(W);m.scope.off();const P=m.update=G.run.bind(G),Y=m.job=G.runIfDirty.bind(G);Y.i=m,Y.id=m.uid,G.scheduler=()=>Fr(Y),ci(m,!0),P()},tt=(m,u,b)=>{u.component=m;const M=m.vnode.props;m.vnode=u,m.next=null,vh(m,u.props,M,b),kh(m,u.children,b),Ne(),so(m),Be()},H=(m,u,b,M,A,R,j,W,G=!1)=>{const P=m&&m.children,Y=m?m.shapeFlag:0,U=u.children,{patchFlag:Z,shapeFlag:st}=u;if(Z>0){if(Z&128){gt(P,U,b,M,A,R,j,W,G);return}else if(Z&256){ct(P,U,b,M,A,R,j,W,G);return}}st&8?(Y&16&&Xe(P,A,R),U!==P&&h(b,U)):Y&16?st&16?gt(P,U,b,M,A,R,j,W,G):Xe(P,A,R,!0):(Y&8&&h(b,""),st&16&&N(U,b,M,A,R,j,W,G))},ct=(m,u,b,M,A,R,j,W,G)=>{m=m||Li,u=u||Li;const P=m.length,Y=u.length,U=Math.min(P,Y);let Z;for(Z=0;Z<U;Z++){const st=u[Z]=G?qe(u[Z]):Se(u[Z]);_(m[Z],st,b,null,A,R,j,W,G)}P>Y?Xe(m,A,R,!0,!1,U):N(u,b,M,A,R,j,W,G,U)},gt=(m,u,b,M,A,R,j,W,G)=>{let P=0;const Y=u.length;let U=m.length-1,Z=Y-1;for(;P<=U&&P<=Z;){const st=m[P],ft=u[P]=G?qe(u[P]):Se(u[P]);if(Vi(st,ft))_(st,ft,b,null,A,R,j,W,G);else break;P++}for(;P<=U&&P<=Z;){const st=m[U],ft=u[Z]=G?qe(u[Z]):Se(u[Z]);if(Vi(st,ft))_(st,ft,b,null,A,R,j,W,G);else break;U--,Z--}if(P>U){if(P<=Z){const st=Z+1,ft=st<Y?u[st].el:M;for(;P<=Z;)_(null,u[P]=G?qe(u[P]):Se(u[P]),b,ft,A,R,j,W,G),P++}}else if(P>Z)for(;P<=U;)dt(m[P],A,R,!0),P++;else{const st=P,ft=P,Pt=new Map;for(P=ft;P<=Z;P++){const ie=u[P]=G?qe(u[P]):Se(u[P]);ie.key!=null&&Pt.set(ie.key,P)}let vt,qt=0;const Qt=Z-ft+1;let xe=!1,ye=0;const Yi=new Array(Qt);for(P=0;P<Qt;P++)Yi[P]=0;for(P=st;P<=U;P++){const ie=m[P];if(qt>=Qt){dt(ie,A,R,!0);continue}let _e;if(ie.key!=null)_e=Pt.get(ie.key);else for(vt=ft;vt<=Z;vt++)if(Yi[vt-ft]===0&&Vi(ie,u[vt])){_e=vt;break}_e===void 0?dt(ie,A,R,!0):(Yi[_e-ft]=P+1,_e>=ye?ye=_e:xe=!0,_(ie,u[_e],b,null,A,R,j,W,G),qt++)}const Qr=xe?Ah(Yi):Li;for(vt=Qr.length-1,P=Qt-1;P>=0;P--){const ie=ft+P,_e=u[ie],Jr=u[ie+1],Zr=ie+1<Y?Jr.el||ol(Jr):M;Yi[P]===0?_(null,_e,b,Zr,A,R,j,W,G):xe&&(vt<0||P!==Qr[vt]?it(_e,b,Zr,2):vt--)}}},it=(m,u,b,M,A=null)=>{const{el:R,type:j,transition:W,children:G,shapeFlag:P}=m;if(P&6){it(m.component.subTree,u,b,M);return}if(P&128){m.suspense.move(u,b,M);return}if(P&64){j.move(m,u,b,oi);return}if(j===wt){n(R,u,b);for(let U=0;U<G.length;U++)it(G[U],u,b,M);n(m.anchor,u,b);return}if(j===Qn){T(m,u,b);return}if(M!==2&&P&1&&W)if(M===0)W.beforeEnter(R),n(R,u,b),ne(()=>W.enter(R),A);else{const{leave:U,delayLeave:Z,afterLeave:st}=W,ft=()=>{m.ctx.isUnmounted?s(R):n(R,u,b)},Pt=()=>{R._isLeaving&&R[Kc](!0),U(R,()=>{ft(),st&&st()})};Z?Z(R,ft,Pt):Pt()}else n(R,u,b)},dt=(m,u,b,M=!1,A=!1)=>{const{type:R,props:j,ref:W,children:G,dynamicChildren:P,shapeFlag:Y,patchFlag:U,dirs:Z,cacheIndex:st}=m;if(U===-2&&(A=!1),W!=null&&(Ne(),fn(W,null,b,m,!0),Be()),st!=null&&(u.renderCache[st]=void 0),Y&256){u.ctx.deactivate(m);return}const ft=Y&1&&Z,Pt=!un(m);let vt;if(Pt&&(vt=j&&j.onVnodeBeforeUnmount)&&ve(vt,u,m),Y&6)As(m.component,b,M);else{if(Y&128){m.suspense.unmount(b,M);return}ft&&li(m,null,u,"beforeUnmount"),Y&64?m.type.remove(m,u,b,oi,M):P&&!P.hasOnce&&(R!==wt||U>0&&U&64)?Xe(P,u,b,!1,!0):(R===wt&&U&384||!A&&Y&16)&&Xe(G,u,b),M&&Ht(m)}(Pt&&(vt=j&&j.onVnodeUnmounted)||ft)&&ne(()=>{vt&&ve(vt,u,m),ft&&li(m,null,u,"unmounted")},b)},Ht=m=>{const{type:u,el:b,anchor:M,transition:A}=m;if(u===wt){Ps(b,M);return}if(u===Qn){C(m);return}const R=()=>{s(b),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(m.shapeFlag&1&&A&&!A.persisted){const{leave:j,delayLeave:W}=A,G=()=>j(b,R);W?W(m.el,R,G):G()}else R()},Ps=(m,u)=>{let b;for(;m!==u;)b=f(m),s(m),m=b;s(u)},As=(m,u,b)=>{const{bum:M,scope:A,job:R,subTree:j,um:W,m:G,a:P}=m;go(G),go(P),M&&Vn(M),A.stop(),R&&(R.flags|=8,dt(j,m,u,b)),W&&ne(W,u),ne(()=>{m.isUnmounted=!0},u)},Xe=(m,u,b,M=!1,A=!1,R=0)=>{for(let j=R;j<m.length;j++)dt(m[j],u,b,M,A)},ki=m=>{if(m.shapeFlag&6)return ki(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const u=f(m.anchor||m.el),b=u&&u[Xc];return b?f(b):u};let Xi=!1;const Ln=(m,u,b)=>{let M;m==null?u._vnode&&(dt(u._vnode,null,null,!0),M=u._vnode.component):_(u._vnode||null,m,u,null,null,null,b),u._vnode=m,Xi||(Xi=!0,so(M),Da(),Xi=!1)},oi={p:_,um:dt,m:it,r:Ht,mt:rt,mc:N,pc:H,pbc:q,n:ki,o:e};return{render:Ln,hydrate:void 0,createApp:fh(Ln)}}function Fs({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function ci({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ph(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function sl(e,t,i=!1){const n=e.children,s=t.children;if(nt(n)&&nt(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=qe(s[r]),a.el=o.el),!i&&a.patchFlag!==-2&&sl(o,a)),a.type===Ss&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(e.type===wt?1:0)),a.type===ti&&!a.el&&(a.el=o.el)}}function Ah(e){const t=e.slice(),i=[0];let n,s,r,o,a;const l=e.length;for(n=0;n<l;n++){const c=e[n];if(c!==0){if(s=i[i.length-1],e[s]<c){t[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<c?r=a+1:o=a;c<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function rl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:rl(t)}function go(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function ol(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?ol(t.subTree):null}const al=e=>e.__isSuspense;function Eh(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):Bc(e)}const wt=Symbol.for("v-fgt"),Ss=Symbol.for("v-txt"),ti=Symbol.for("v-cmt"),Qn=Symbol.for("v-stc"),pn=[];let oe=null;function K(e=!1){pn.push(oe=e?null:[])}function Rh(){pn.pop(),oe=pn[pn.length-1]||null}let Cn=1;function po(e,t=!1){Cn+=e,e<0&&oe&&t&&(oe.hasOnce=!0)}function ll(e){return e.dynamicChildren=Cn>0?oe||Li:null,Rh(),Cn>0&&oe&&oe.push(e),e}function $(e,t,i,n,s,r){return ll(y(e,t,i,n,s,r,!0))}function Oh(e,t,i,n,s){return ll(Me(e,t,i,n,s,!0))}function cl(e){return e?e.__v_isVNode===!0:!1}function Vi(e,t){return e.type===t.type&&e.key===t.key}const hl=({key:e})=>e??null,Jn=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Ft(e)||Xt(e)||ot(e)?{i:ue,r:e,k:t,f:!!i}:e:null);function y(e,t=null,i=null,n=0,s=null,r=e===wt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&hl(t),ref:t&&Jn(t),scopeId:Fa,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:ue};return a?(Wr(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=Ft(i)?8:16),Cn>0&&!o&&oe&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&oe.push(l),l}const Me=Lh;function Lh(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===sh)&&(e=ti),cl(e)){const a=Wi(e,t,!0);return i&&Wr(a,i),Cn>0&&!r&&oe&&(a.shapeFlag&6?oe[oe.indexOf(e)]=a:oe.push(a)),a.patchFlag=-2,a}if(Xh(e)&&(e=e.__vccOpts),t){t=Ih(t);let{class:a,style:l}=t;a&&!Ft(a)&&(t.class=jt(a)),Lt(l)&&(Gr(l)&&!nt(l)&&(l=Yt({},l)),t.style=Ar(l))}const o=Ft(e)?1:al(e)?128:Yc(e)?64:Lt(e)?4:ot(e)?2:0;return y(e,t,i,n,s,o,r,!0)}function Ih(e){return e?Gr(e)||Ja(e)?Yt({},e):e:null}function Wi(e,t,i=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=e,c=t?Gh(s||{},t):s,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&hl(c),ref:t&&t.ref?i&&r?nt(r)?r.concat(Jn(t)):[r,Jn(t)]:Jn(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==wt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wi(e.ssContent),ssFallback:e.ssFallback&&Wi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Nr(h,l.clone(h)),h}function ar(e=" ",t=0){return Me(Ss,null,e,t)}function Dh(e,t){const i=Me(Qn,null,e);return i.staticCount=t,i}function Jt(e="",t=!1){return t?(K(),Oh(ti,null,e)):Me(ti,null,e)}function Se(e){return e==null||typeof e=="boolean"?Me(ti):nt(e)?Me(wt,null,e.slice()):cl(e)?qe(e):Me(Ss,null,String(e))}function qe(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Wi(e)}function Wr(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(nt(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),Wr(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!Ja(t)?t._ctx=ue:s===3&&ue&&(ue.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ot(t)?(t={default:t,_ctx:ue},i=32):(t=String(t),n&64?(i=16,t=[ar(t)]):i=8);e.children=t,e.shapeFlag|=i}function Gh(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=jt([t.class,n.class]));else if(s==="style")t.style=Ar([t.style,n.style]);else if(us(s)){const r=t[s],o=n[s];o&&r!==o&&!(nt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=n[s])}return t}function ve(e,t,i,n=null){Ae(e,t,7,[i,n])}const Fh=Va();let Nh=0;function Bh(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||Fh,r={uid:Nh++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new lc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tl(n,s),emitsOptions:$a(n,s),emit:null,emitted:null,propsDefaults:Tt,inheritAttrs:n.inheritAttrs,ctx:Tt,data:Tt,props:Tt,attrs:Tt,slots:Tt,refs:Tt,setupState:Tt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=gh.bind(null,r),e.ce&&e.ce(r),r}let $t=null;const Hh=()=>$t||ue;let cs,lr;{const e=bs(),t=(i,n)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};cs=t("__VUE_INSTANCE_SETTERS__",i=>$t=i),lr=t("__VUE_SSR_SETTERS__",i=>kn=i)}const Rn=e=>{const t=$t;return cs(e),e.scope.on(),()=>{e.scope.off(),cs(t)}},mo=()=>{$t&&$t.scope.off(),cs(null)};function dl(e){return e.vnode.shapeFlag&4}let kn=!1;function Wh(e,t=!1,i=!1){t&&lr(t);const{props:n,children:s}=e.vnode,r=dl(e);_h(e,n,r,t),Ch(e,s,i||t);const o=r?jh(e,t):void 0;return t&&lr(!1),o}function jh(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,rh);const{setup:n}=i;if(n){Ne();const s=e.setupContext=n.length>1?Uh(e):null,r=Rn(e),o=En(n,e,0,[e.props,s]),a=ha(o);if(Be(),r(),(a||e.sp)&&!un(e)&&Ha(e),a){if(o.then(mo,mo),t)return o.then(l=>{bo(e,l)}).catch(l=>{_s(l,e,0)});e.asyncDep=o}else bo(e,o)}else fl(e)}function bo(e,t,i){ot(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Lt(t)&&(e.setupState=Oa(t)),fl(e)}function fl(e,t,i){const n=e.type;e.render||(e.render=n.render||Te);{const s=Rn(e);Ne();try{oh(e)}finally{Be(),s()}}}const zh={get(e,t){return zt(e,"get",""),e[t]}};function Uh(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,zh),slots:e.slots,emit:e.emit,expose:t}}function Cs(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Oa(Ac(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in gn)return gn[i](e)},has(t,i){return i in t||i in gn}})):e.proxy}function Xh(e){return ot(e)&&"__vccOpts"in e}const fi=(e,t)=>Ic(e,t,kn),Yh="3.5.27";let cr;const xo=typeof window<"u"&&window.trustedTypes;if(xo)try{cr=xo.createPolicy("vue",{createHTML:e=>e})}catch{}const ul=cr?e=>cr.createHTML(e):e=>e,Kh="http://www.w3.org/2000/svg",Vh="http://www.w3.org/1998/Math/MathML",Le=typeof document<"u"?document:null,yo=Le&&Le.createElement("template"),$h={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t==="svg"?Le.createElementNS(Kh,e):t==="mathml"?Le.createElementNS(Vh,e):i?Le.createElement(e,{is:i}):Le.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>Le.createTextNode(e),createComment:e=>Le.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Le.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const o=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{yo.innerHTML=ul(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=yo.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},qh=Symbol("_vtc");function Qh(e,t,i){const n=e[qh];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const _o=Symbol("_vod"),Jh=Symbol("_vsh"),Zh=Symbol(""),td=/(?:^|;)\s*display\s*:/;function ed(e,t,i){const n=e.style,s=Ft(i);let r=!1;if(i&&!s){if(t)if(Ft(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Zn(n,a,"")}else for(const o in t)i[o]==null&&Zn(n,o,"");for(const o in i)o==="display"&&(r=!0),Zn(n,o,i[o])}else if(s){if(t!==i){const o=n[Zh];o&&(i+=";"+o),n.cssText=i,r=td.test(i)}}else t&&e.removeAttribute("style");_o in e&&(e[_o]=r?n.display:"",e[Jh]&&(n.display="none"))}const vo=/\s*!important$/;function Zn(e,t,i){if(nt(i))i.forEach(n=>Zn(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=id(e,t);vo.test(i)?e.setProperty(yi(n),i.replace(vo,""),"important"):e[n]=i}}const wo=["Webkit","Moz","ms"],Ns={};function id(e,t){const i=Ns[t];if(i)return i;let n=Ze(t);if(n!=="filter"&&n in e)return Ns[t]=n;n=ua(n);for(let s=0;s<wo.length;s++){const r=wo[s]+n;if(r in e)return Ns[t]=r}return t}const So="http://www.w3.org/1999/xlink";function Co(e,t,i,n,s,r=rc(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(So,t.slice(6,t.length)):e.setAttributeNS(So,t,i):i==null||r&&!pa(i)?e.removeAttribute(t):e.setAttribute(t,r?"":Pe(i)?String(i):i)}function ko(e,t,i,n,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?ul(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=pa(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(s||t)}function ui(e,t,i,n){e.addEventListener(t,i,n)}function nd(e,t,i,n){e.removeEventListener(t,i,n)}const To=Symbol("_vei");function sd(e,t,i,n,s=null){const r=e[To]||(e[To]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=rd(t);if(n){const c=r[t]=ld(n,s);ui(e,a,c,l)}else o&&(nd(e,a,o,l),r[t]=void 0)}}const Mo=/(?:Once|Passive|Capture)$/;function rd(e){let t;if(Mo.test(e)){t={};let n;for(;n=e.match(Mo);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):yi(e.slice(2)),t]}let Bs=0;const od=Promise.resolve(),ad=()=>Bs||(od.then(()=>Bs=0),Bs=Date.now());function ld(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Ae(cd(n,i.value),t,5,[n])};return i.value=e,i.attached=ad(),i}function cd(e,t){if(nt(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const Po=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,hd=(e,t,i,n,s,r)=>{const o=s==="svg";t==="class"?Qh(e,n,o):t==="style"?ed(e,i,n):us(t)?Tr(t)||sd(e,t,i,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):dd(e,t,n,o))?(ko(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Co(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ft(n))?ko(e,Ze(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Co(e,t,n,o))};function dd(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Po(t)&&ot(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Po(t)&&Ft(i)?!1:t in e}const hs=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?i=>Vn(t,i):t};function fd(e){e.target.composing=!0}function Ao(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ni=Symbol("_assign");function Eo(e,t,i){return t&&(e=e.trim()),i&&(e=ms(e)),e}const Mi={created(e,{modifiers:{lazy:t,trim:i,number:n}},s){e[Ni]=hs(s);const r=n||s.props&&s.props.type==="number";ui(e,t?"change":"input",o=>{o.target.composing||e[Ni](Eo(e.value,i,r))}),(i||r)&&ui(e,"change",()=>{e.value=Eo(e.value,i,r)}),t||(ui(e,"compositionstart",fd),ui(e,"compositionend",Ao),ui(e,"change",Ao))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:n,trim:s,number:r}},o){if(e[Ni]=hs(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?ms(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===i||s&&e.value.trim()===l)||(e.value=l))}},he={deep:!0,created(e,{value:t,modifiers:{number:i}},n){const s=gs(t);ui(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>i?ms(ds(o)):ds(o));e[Ni](e.multiple?s?new Set(r):r:r[0]),e._assigning=!0,rs(()=>{e._assigning=!1})}),e[Ni]=hs(n)},mounted(e,{value:t}){Ro(e,t)},beforeUpdate(e,t,i){e[Ni]=hs(i)},updated(e,{value:t}){e._assigning||Ro(e,t)}};function Ro(e,t){const i=e.multiple,n=nt(t);if(!(i&&!n&&!gs(t))){for(let s=0,r=e.options.length;s<r;s++){const o=e.options[s],a=ds(o);if(i)if(n){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(c=>String(c)===String(a)):o.selected=ac(t,a)>-1}else o.selected=t.has(a);else if(xs(ds(o),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ds(e){return"_value"in e?e._value:e.value}const ud=["ctrl","shift","alt","meta"],gd={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ud.some(i=>e[`${i}Key`]&&!t.includes(i))},pd=(e,t)=>{const i=e._withMods||(e._withMods={}),n=t.join(".");return i[n]||(i[n]=((s,...r)=>{for(let o=0;o<t.length;o++){const a=gd[t[o]];if(a&&a(s,t))return}return e(s,...r)}))},md=Yt({patchProp:hd},$h);let Oo;function bd(){return Oo||(Oo=Th(md))}const xd=((...e)=>{const t=bd().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=_d(n);if(!s)return;const r=t._component;!ot(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,yd(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t});function yd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function _d(e){return Ft(e)?document.querySelector(e):e}const vd="/DentMetric/assets/logo-BNlpBL9Q.png",wd=Math.PI/180;function Sd(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const gi=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},F={_global:gi,version:"10.2.0",isBrowser:Sd(),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle(e){return F.angleDeg?e*wd:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return F.DD.isDragging},isTransforming(){var e,t;return(t=(e=F.Transformer)===null||e===void 0?void 0:e.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!F.DD.node},releaseCanvasOnDestroy:!0,document:gi.document,_injectGlobal(e){typeof gi.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),gi.Konva=e}},Gt=e=>{F[e.prototype.getClassName()]=e};F._injectGlobal(F);const Cd=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,Lo=()=>{if(typeof document>"u")throw new Error(Cd)};class re{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new re(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const i=this.m;return{x:i[0]*t.x+i[2]*t.y+i[4],y:i[1]*t.x+i[3]*t.y+i[5]}}translate(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this}scale(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this}rotate(t){const i=Math.cos(t),n=Math.sin(t),s=this.m[0]*i+this.m[2]*n,r=this.m[1]*i+this.m[3]*n,o=this.m[0]*-n+this.m[2]*i,a=this.m[1]*-n+this.m[3]*i;return this.m[0]=s,this.m[1]=r,this.m[2]=o,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,i){const n=this.m[0]+this.m[2]*i,s=this.m[1]+this.m[3]*i,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=n,this.m[1]=s,this.m[2]=r,this.m[3]=o,this}multiply(t){const i=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],s=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this.m[4]=o,this.m[5]=a,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,n=-this.m[1]*t,s=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=r,this.m[4]=o,this.m[5]=a,this}getMatrix(){return this.m}decompose(){const t=this.m[0],i=this.m[1],n=this.m[2],s=this.m[3],r=this.m[4],o=this.m[5],a=t*s-i*n,l={x:r,y:o,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||i!=0){const c=Math.sqrt(t*t+i*i);l.rotation=i>0?Math.acos(t/c):-Math.acos(t/c),l.scaleX=c,l.scaleY=a/c,l.skewX=(t*n+i*s)/a,l.skewY=0}else if(n!=0||s!=0){const c=Math.sqrt(n*n+s*s);l.rotation=Math.PI/2-(s>0?Math.acos(-n/c):-Math.acos(n/c)),l.scaleX=a/c,l.scaleY=c,l.skewX=0,l.skewY=(t*n+i*s)/a}return l.rotation=w._getRotation(l.rotation),l}}const kd="[object Array]",Td="[object Number]",Md="[object String]",Pd="[object Boolean]",Ad=Math.PI/180,Ed=180/Math.PI,$i="#",Rd="",Od="0",Ld="Konva warning: ",Io="Konva error: ",Id="rgb(",Hs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Dd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Fn=[],qi=null;const Gd=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,16)},w={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===kd},_isNumber(e){return Object.prototype.toString.call(e)===Td&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===Md},_isBoolean(e){return Object.prototype.toString.call(e)===Pd},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;const t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){Fn.push(e),Fn.length===1&&Gd(function(){const t=Fn;Fn=[],t.forEach(function(i){i()})})},createCanvasElement(){Lo();const e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return Lo(),document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){const i=w.createImageElement();i.onload=function(){t(i)},i.src=e},_rgbToHex(e,t,i){return((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},_hexToRgb(e){e=e.replace($i,Rd);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let e=(Math.random()*16777215<<0).toString(16);for(;e.length<6;)e=Od+e;return $i+e},isCanvasFarblingActive(){if(qi!==null)return qi;if(typeof document>"u")return qi=!1,!1;const e=this.createCanvasElement();e.width=10,e.height=10;const t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const i=t.getImageData(0,0,10,10).data;let n=!1;for(let s=0;s<100;s++)if(i[s*4]!==40||i[s*4+1]!==40||i[s*4+2]!==40||i[s*4+3]!==255){n=!0;break}return qi=n,this.releaseCanvas(e),qi},getHitColor(){const e=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(e):e},getHitColorKey(e,t,i){return this.isCanvasFarblingActive()&&(e=Math.round(e/5)*5,t=Math.round(t/5)*5,i=Math.round(i/5)*5),$i+this._rgbToHex(e,t,i)},getSnappedHexColor(e){const t=this._hexToRgb(e);return $i+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(e){let t;return e in Hs?(t=Hs[e],{r:t[0],g:t[1],b:t[2]}):e[0]===$i?this._hexToRgb(e.substring(1)):e.substr(0,4)===Id?(t=Dd.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",w._namedColorToRBA(e)||w._hex3ColorToRGBA(e)||w._hex4ColorToRGBA(e)||w._hex6ColorToRGBA(e)||w._hex8ColorToRGBA(e)||w._rgbColorToRGBA(e)||w._rgbaColorToRGBA(e)||w._hslColorToRGBA(e)},_namedColorToRBA(e){const t=Hs[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];const t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];const t=e.split(/ *, */).map((i,n)=>i.slice(-1)==="%"?n===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if(e[0]==="#"&&e.length===9)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if(e[0]==="#"&&e.length===5)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),n=Number(i[0])/360,s=Number(i[1])/100,r=Number(i[2])/100;let o,a,l;if(s===0)return l=r*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};r<.5?o=r*(1+s):o=r+s-r*s;const c=2*r-o,h=[0,0,0];for(let d=0;d<3;d++)a=n+1/3*-(d-1),a<0&&a++,a>1&&a--,6*a<1?l=c+(o-c)*6*a:2*a<1?l=o:3*a<2?l=c+(o-c)*(2/3-a)*6:l=c,h[d]=l*255;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){const t={};for(const i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*Ad},radToDeg(e){return e*Ed},_degToRad(e){return w.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),w.degToRad(e)},_radToDeg(e){return w.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),w.radToDeg(e)},_getRotation(e){return F.angleDeg?w.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(Io+e)},error(e){console.error(Io+e)},warn(e){F.showWarnings&&console.warn(Ld+e)},each(e,t){for(const i in e)t(i,e[i])},_inRange(e,t,i){return t<=e&&e<i},_getProjectionToSegment(e,t,i,n,s,r){let o,a,l;const c=(e-i)*(e-i)+(t-n)*(t-n);if(c==0)o=e,a=t,l=(s-i)*(s-i)+(r-n)*(r-n);else{const h=((s-e)*(i-e)+(r-t)*(n-t))/c;h<0?(o=e,a=t,l=(e-s)*(e-s)+(t-r)*(t-r)):h>1?(o=i,a=n,l=(i-s)*(i-s)+(n-r)*(n-r)):(o=e+h*(i-e),a=t+h*(n-t),l=(o-s)*(o-s)+(a-r)*(a-r))}return[o,a,l]},_getProjectionToLine(e,t,i){const n=w.cloneObject(e);let s=Number.MAX_VALUE;return t.forEach(function(r,o){if(!i&&o===t.length-1)return;const a=t[(o+1)%t.length],l=w._getProjectionToSegment(r.x,r.y,a.x,a.y,e.x,e.y),c=l[0],h=l[1],d=l[2];d<s&&(n.x=c,n.y=h,s=d)}),n},_prepareArrayForTween(e,t,i){const n=[],s=[];if(e.length>t.length){const o=t;t=e,e=o}for(let o=0;o<e.length;o+=2)n.push({x:e[o],y:e[o+1]});for(let o=0;o<t.length;o+=2)s.push({x:t[o],y:t[o+1]});const r=[];return s.forEach(function(o){const a=w._getProjectionToLine(o,n,i);r.push(a.x),r.push(a.y)}),r},_prepareToStringify(e){let t;e.visitedByCircularReferenceRemoval=!0;for(const i in e)if(e.hasOwnProperty(i)&&e[i]&&typeof e[i]=="object"){if(t=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||w._isElement(e[i]))if(t.configurable)delete e[i];else return null;else if(w._prepareToStringify(e[i])===null)if(t.configurable)delete e[i];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const i in t)e[i]=t[i];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){F.releaseCanvasOnDestroy&&e.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(e,t,i,n){let s=t<0?t:0,r=i<0?i:0;t=Math.abs(t),i=Math.abs(i);let o=0,a=0,l=0,c=0;typeof n=="number"?o=a=l=c=Math.min(n,t/2,i/2):(o=Math.min(n[0]||0,t/2,i/2),a=Math.min(n[1]||0,t/2,i/2),c=Math.min(n[2]||0,t/2,i/2),l=Math.min(n[3]||0,t/2,i/2)),e.moveTo(s+o,r),e.lineTo(s+t-a,r),e.arc(s+t-a,r+a,a,Math.PI*3/2,0,!1),e.lineTo(s+t,r+i-c),e.arc(s+t-c,r+i-c,c,0,Math.PI/2,!1),e.lineTo(s+l,r+i),e.arc(s+l,r+i-l,l,Math.PI/2,Math.PI,!1),e.lineTo(s,r+o),e.arc(s+o,r+o,o,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(e,t,i,n,s){n=Math.abs(n);for(let r=0;r<i;r++){const o=t[(r-1+i)%i],a=t[r],l=t[(r+1)%i],c={x:a.x-o.x,y:a.y-o.y},h={x:l.x-a.x,y:l.y-a.y},d=Math.hypot(c.x,c.y),f=Math.hypot(h.x,h.y);let g;typeof s=="number"?g=s:g=r<s.length?s[r]:0,g=n*Math.cos(Math.PI/i)*Math.min(1,g/n*2);const _={x:c.x/d,y:c.y/d},k={x:h.x/f,y:h.y/f},v={x:a.x-_.x*g,y:a.y-_.y*g},S={x:a.x+k.x*g,y:a.y+k.y*g};r===0?e.moveTo(v.x,v.y):e.lineTo(v.x,v.y),e.arcTo(a.x,a.y,S.x,S.y,g)}}};function Fd(e){const t=[],i=e.length,n=w;for(let s=0;s<i;s++){let r=e[s];n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),t.push(r)}return t}const Do=",",Nd="(",Bd=")",Hd="([",Wd="])",jd=";",zd="()",Ud="=",Go=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Xd=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],Yd=100;let Nn=null;function Fo(){if(Nn!==null)return Nn;try{const t=w.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(Nn=!1,!1)}catch{return Nn=!1,!1}}class ks{constructor(t){this.canvas=t,F.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){let n=this.traceArr,s=n.length,r="",o,a,l,c;for(o=0;o<s;o++)a=n[o],l=a.method,l?(c=a.args,r+=l,t?r+=zd:w._isArray(c[0])?r+=Hd+c.join(Do)+Wd:(i&&(c=c.map(h=>typeof h=="number"?Math.floor(h):h)),r+=Nd+c.join(Do)+Bd)):(r+=a.property,t||(r+=Ud+a.val)),r+=jd;return r}clearTrace(){this.traceArr=[]}_trace(t){let i=this.traceArr,n;i.push(t),n=i.length,n>=Yd&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){const i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}_applyMiterLimit(t){const i=t.attrs.miterLimit;i!=null&&this.setAttr("miterLimit",i)}setAttr(t,i){this._context[t]=i}arc(t,i,n,s,r,o){this._context.arc(t,i,n,s,r,o)}arcTo(t,i,n,s,r){this._context.arcTo(t,i,n,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,n,s,r,o){this._context.bezierCurveTo(t,i,n,s,r,o)}clearRect(t,i,n,s){this._context.clearRect(t,i,n,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){const n=arguments;if(n.length===2)return this._context.createImageData(t,i);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,n,s){return this._context.createLinearGradient(t,i,n,s)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,n,s,r,o){return this._context.createRadialGradient(t,i,n,s,r,o)}drawImage(t,i,n,s,r,o,a,l,c){const h=arguments,d=this._context;h.length===3?d.drawImage(t,i,n):h.length===5?d.drawImage(t,i,n,s,r):h.length===9&&d.drawImage(t,i,n,s,r,o,a,l,c)}ellipse(t,i,n,s,r,o,a,l){this._context.ellipse(t,i,n,s,r,o,a,l)}isPointInPath(t,i,n,s){return n?this._context.isPointInPath(n,t,i,s):this._context.isPointInPath(t,i,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,n,s){this._context.fillRect(t,i,n,s)}strokeRect(t,i,n,s){this._context.strokeRect(t,i,n,s)}fillText(t,i,n,s){s?this._context.fillText(t,i,n,s):this._context.fillText(t,i,n)}measureText(t){return this._context.measureText(t)}getImageData(t,i,n,s){return this._context.getImageData(t,i,n,s)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,n,s){this._context.rect(t,i,n,s)}roundRect(t,i,n,s,r){this._context.roundRect(t,i,n,s,r)}putImageData(t,i,n){this._context.putImageData(t,i,n)}quadraticCurveTo(t,i,n,s){this._context.quadraticCurveTo(t,i,n,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,n,s,r,o){this._context.setTransform(t,i,n,s,r,o)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,n,s){this._context.strokeText(t,i,n,s)}transform(t,i,n,s,r,o){this._context.transform(t,i,n,s,r,o)}translate(t,i){this._context.translate(t,i)}_enableTrace(){let t=this,i=Go.length,n=this.setAttr,s,r;const o=function(a){let l=t[a],c;t[a]=function(){return r=Fd(Array.prototype.slice.call(arguments,0)),c=l.apply(t,arguments),t._trace({method:a,args:r}),c}};for(s=0;s<i;s++)o(Go[s]);t.setAttr=function(){n.apply(t,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:a,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}}Xd.forEach(function(e){Object.defineProperty(ks.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Kd extends ks{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){const i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),n=t.getFillPriority();if(i&&n==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(t);return}const o=t.getFillRadialGradientColorStops();if(o&&n==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):s?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(let o=0;o<s.length;o+=2)r.addColorStop(s[o],s[o+1]);this.setAttr("strokeStyle",r)}}_stroke(t){const i=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var i,n,s;const r=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",o=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,a=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=t.getAbsoluteScale(),c=this.canvas.getPixelRatio(),h=l.x*c,d=l.y*c;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",o*Math.min(Math.abs(h),Math.abs(d))),this.setAttr("shadowOffsetX",a.x*h),this.setAttr("shadowOffsetY",a.y*d)}}class Vd extends ks{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const i=t.getStrokeScaleEnabled();if(!i){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);const n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}let Bn;function $d(){if(Bn)return Bn;const e=w.createCanvasElement(),t=e.getContext("2d");return Bn=(function(){const i=F._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n})(),w.releaseCanvas(e),Bn}class jr{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(t||{}).pixelRatio||F.pixelRatio||$d();this.pixelRatio=n,this._canvas=w.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(s){return w.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Qe extends jr{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Kd(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class zr extends jr{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Vd(this),this.setSize(t.width,t.height)}}const bt={get isDragging(){let e=!1;return bt._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return bt._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];bt._dragElements.forEach((i,n)=>{const{node:s}=i,r=s.getStage();r.setPointersPositions(e),i.pointerId===void 0&&(i.pointerId=w._getFirstPointerId(e));const o=r._changedPointerPositions.find(a=>a.id===i.pointerId);if(o){if(i.dragStatus!=="dragging"){const a=s.dragDistance();if(Math.max(Math.abs(o.x-i.startPointerPos.x),Math.abs(o.y-i.startPointerPos.y))<a||(s.startDrag({evt:e}),!s.isDragging()))return}s._setDragPosition(e,i),t.push(s)}}),t.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:e},!0)})},_endDragBefore(e){const t=[];bt._dragElements.forEach(i=>{const{node:n}=i,s=n.getStage();if(e&&s.setPointersPositions(e),!s._changedPointerPositions.find(a=>a.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(bt.justDragged=!0,F._mouseListenClick=!1,F._touchListenClick=!1,F._pointerListenClick=!1,i.dragStatus="stopped");const o=i.node.getLayer()||i.node instanceof F.Stage&&i.node;o&&t.indexOf(o)===-1&&t.push(o)}),t.forEach(i=>{i.draw()})},_endDragAfter(e){bt._dragElements.forEach((t,i)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&bt._dragElements.delete(i)})}};F.isBrowser&&(window.addEventListener("mouseup",bt._endDragBefore,!0),window.addEventListener("touchend",bt._endDragBefore,!0),window.addEventListener("touchcancel",bt._endDragBefore,!0),window.addEventListener("mousemove",bt._drag),window.addEventListener("touchmove",bt._drag),window.addEventListener("mouseup",bt._endDragAfter,!1),window.addEventListener("touchend",bt._endDragAfter,!1),window.addEventListener("touchcancel",bt._endDragAfter,!1));function ii(e){return w._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||w._isBoolean(e)?e:Object.prototype.toString.call(e)}function gl(e){return e>255?255:e<0?0:Math.round(e)}function D(){if(F.isUnminified)return function(e,t){return w._isNumber(e)||w.warn(ii(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function Ts(e){if(F.isUnminified)return function(t,i){let n=w._isNumber(t),s=w._isArray(t)&&t.length==e;return!n&&!s&&w.warn(ii(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function Ur(){if(F.isUnminified)return function(e,t){return w._isNumber(e)||e==="auto"||w.warn(ii(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function _i(){if(F.isUnminified)return function(e,t){return w._isString(e)||w.warn(ii(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function pl(){if(F.isUnminified)return function(e,t){const i=w._isString(e),n=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||n||w.warn(ii(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function qd(){if(F.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(w._isArray(e)?e.forEach(function(n){w._isNumber(n)||w.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):w.warn(ii(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function be(){if(F.isUnminified)return function(e,t){return e===!0||e===!1||w.warn(ii(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function Qd(e){if(F.isUnminified)return function(t,i){return t==null||w.isObject(t)||w.warn(ii(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}const Qi="get",Ji="set",x={addGetterSetter(e,t,i,n,s){x.addGetter(e,t,i),x.addSetter(e,t,n,s),x.addOverloadedGetterSetter(e,t)},addGetter(e,t,i){const n=Qi+w._capitalize(t);e.prototype[n]=e.prototype[n]||function(){const s=this.attrs[t];return s===void 0?i:s}},addSetter(e,t,i,n){const s=Ji+w._capitalize(t);e.prototype[s]||x.overWriteSetter(e,t,i,n)},overWriteSetter(e,t,i,n){const s=Ji+w._capitalize(t);e.prototype[s]=function(r){return i&&r!==void 0&&r!==null&&(r=i.call(this,r,t)),this._setAttr(t,r),n&&n.call(this),this}},addComponentsGetterSetter(e,t,i,n,s){const r=i.length,o=w._capitalize,a=Qi+o(t),l=Ji+o(t);e.prototype[a]=function(){const h={};for(let d=0;d<r;d++){const f=i[d];h[f]=this.getAttr(t+o(f))}return h};const c=Qd(i);e.prototype[l]=function(h){const d=this.attrs[t];n&&(h=n.call(this,h,t)),c&&c.call(this,h,t);for(const f in h)h.hasOwnProperty(f)&&this._setAttr(t+o(f),h[f]);return h||i.forEach(f=>{this._setAttr(t+o(f),void 0)}),this._fireChangeEvent(t,d,h),s&&s.call(this),this},x.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){const i=w._capitalize(t),n=Ji+i,s=Qi+i;e.prototype[t]=function(){return arguments.length?(this[n](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(e,t,i,n){w.error("Adding deprecated "+t);const s=Qi+w._capitalize(t),r=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[s]=function(){w.error(r);const o=this.attrs[t];return o===void 0?i:o},x.addSetter(e,t,n,function(){w.error(r)}),x.addOverloadedGetterSetter(e,t)},backCompat(e,t){w.each(t,function(i,n){const s=e.prototype[n],r=Qi+w._capitalize(i),o=Ji+w._capitalize(i);function a(){s.apply(this,arguments),w.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}e.prototype[i]=a,e.prototype[r]=a,e.prototype[o]=a})},afterSetFilter(){this._filterUpToDate=!1}};function Jd(e){const t=/(\w+)\(([^)]+)\)/g;let i;for(;(i=t.exec(e))!==null;){const[,n,s]=i;switch(n){case"blur":{const r=parseFloat(s.replace("px",""));return function(o){this.blurRadius(r*.5);const a=F.Filters;a&&a.Blur&&a.Blur.call(this,o)}}case"brightness":{const r=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(o){this.brightness(r);const a=F.Filters;a&&a.Brightness&&a.Brightness.call(this,o)}}case"contrast":{const r=parseFloat(s);return function(o){const a=100*(Math.sqrt(r)-1);this.contrast(a);const l=F.Filters;l&&l.Contrast&&l.Contrast.call(this,o)}}case"grayscale":return function(r){const o=F.Filters;o&&o.Grayscale&&o.Grayscale.call(this,r)};case"sepia":return function(r){const o=F.Filters;o&&o.Sepia&&o.Sepia.call(this,r)};case"invert":return function(r){const o=F.Filters;o&&o.Invert&&o.Invert.call(this,r)};default:w.warn(`CSS filter "${n}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const ts="absoluteOpacity",No="allEventListeners",Oe="absoluteTransform",Bo="absoluteScale",hi="canvas",Zd="Change",t0="children",e0="konva",hr="listening",i0="mouseenter",n0="mouseleave",s0="pointerenter",r0="pointerleave",o0="touchenter",a0="touchleave",Ho="set",Wo="Shape",es=" ",jo="stage",Ye="transform",l0="Stage",dr="visible",c0=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(es);let h0=1;class I{constructor(t){this._id=h0++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Ye||t===Oe)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){let n=this._cache.get(t);return(n===void 0||(t===Ye||t===Oe)&&n.dirty===!0)&&(n=i.call(this),this._cache.set(t,n)),n}_calculate(t,i,n){if(!this._attachedDepsListeners.get(t)){const s=i.map(r=>r+"Change.konva").join(es);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(hi)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Oe&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(hi)){const{scene:t,filter:i,hit:n}=this._cache.get(hi);w.releaseCanvas(t._canvas,i._canvas,n._canvas),this._cache.delete(hi)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const i=t||{};let n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(i.width||n.width),r=Math.ceil(i.height||n.height),o=i.pixelRatio,a=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,c=i.offset||0,h=i.drawBorder||!1,d=i.hitCanvasPixelRatio||1;if(!s||!r){w.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const f=Math.abs(Math.round(n.x)-a)>.5?1:0,g=Math.abs(Math.round(n.y)-l)>.5?1:0;s+=c*2+f,r+=c*2+g,a-=c,l-=c;const p=new Qe({pixelRatio:o,width:s,height:r}),_=new Qe({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),k=new zr({pixelRatio:d,width:s,height:r}),v=p.getContext(),S=k.getContext(),T=new Qe({width:p.width/p.pixelRatio+Math.abs(a),height:p.height/p.pixelRatio+Math.abs(l),pixelRatio:p.pixelRatio}),C=T.getContext();return k.isCache=!0,p.isCache=!0,this._cache.delete(hi),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(p.getContext()._context.imageSmoothingEnabled=!1,_.getContext()._context.imageSmoothingEnabled=!1),v.save(),S.save(),C.save(),v.translate(-a,-l),S.translate(-a,-l),C.translate(-a,-l),T.x=a,T.y=l,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ts),this._clearSelfAndDescendantCache(Bo),this.drawScene(p,this,T),this.drawHit(k,this),this._isUnderCache=!1,v.restore(),S.restore(),h&&(v.save(),v.beginPath(),v.rect(0,0,s,r),v.closePath(),v.setAttr("strokeStyle","red"),v.setAttr("lineWidth",5),v.stroke(),v.restore()),w.releaseCanvas(T._canvas),this._cache.set(hi,{scene:p,filter:_,hit:k,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(hi)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){const n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,r=1/0,o=-1/0,a=-1/0;const l=this.getAbsoluteTransform(i);return n.forEach(function(c){const h=l.point(c);s===void 0&&(s=o=h.x,r=a=h.y),s=Math.min(s,h.x),r=Math.min(r,h.y),o=Math.max(o,h.x),a=Math.max(a,h.y)}),{x:s,y:r,width:o-s,height:a-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);const n=this._getCachedSceneCanvas(),s=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/s,n.height/s),t.restore()}_drawCachedHitCanvas(t){const i=this._getCanvasCache(),n=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,r=s.getContext(),o,a,l,c;if(!t||t.length===0)return n;if(this._filterUpToDate)return s;let h=!0;for(let f=0;f<t.length;f++)if(typeof t[f]=="string"&&Fo(),typeof t[f]!="string"||!Fo()){h=!1;break}const d=n.pixelRatio;if(s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio),h){const f=t.join(" ");return r.save(),r.setAttr("filter",f),r.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),r.restore(),this._filterUpToDate=!0,s}try{for(o=t.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/d,n.getHeight()/d),a=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<o;l++)c=t[l],typeof c=="string"&&(c=Jd(c)),c.call(this,a),r.putImageData(a,0,0)}catch(f){w.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(t,i){if(this._cache&&this._cache.delete(No),arguments.length===3)return this._delegate.apply(this,arguments);const n=t.split(es);for(let s=0;s<n.length;s++){const o=n[s].split("."),a=o[0],l=o[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:i})}return this}off(t,i){let n=(t||"").split(es),s=n.length,r,o,a,l,c,h;if(this._cache&&this._cache.delete(No),!t)for(o in this.eventListeners)this._off(o);for(r=0;r<s;r++)if(a=n[r],l=a.split("."),c=l[0],h=l[1],c)this.eventListeners[c]&&this._off(c,h,i);else for(o in this.eventListeners)this._off(o,h,i);return this}dispatchEvent(t){const i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(n){i.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,n){const s=this;this.on(t,function(r){const o=r.target.findAncestors(i,!0,s);for(let a=0;a<o.length;a++)r=w.cloneObject(r),r.currentTarget=o[a],n.call(o[a],r)})}remove(){return this.isDragging()&&this.stopDrag(),bt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Oe),this._clearSelfAndDescendantCache(ts),this._clearSelfAndDescendantCache(Bo),this._clearSelfAndDescendantCache(jo),this._clearSelfAndDescendantCache(dr),this._clearSelfAndDescendantCache(hr)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const i="get"+w._capitalize(t);return w._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){let t=this.getParent(),i=[];for(;t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let i,n;if(!t)return this;for(i in t)i!==t0&&(n=Ho+w._capitalize(i),w._isFunction(this[n])?this[n](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(hr,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(dr,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);const n=this.getLayer();let s=!1;bt._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===n)&&(s=!0)});const r=!i&&!F.hitOnDragEnabled&&(s||F.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),i=this,n=0,s,r,o,a;function l(h){for(s=[],r=h.length,o=0;o<r;o++)a=h[o],n++,a.nodeType!==Wo&&(s=s.concat(a.getChildren().slice())),a._id===i._id&&(o=r);s.length>0&&s[0].getDepth()<=t&&l(s)}const c=this.getStage();return i.nodeType!==l0&&c&&l(c.getChildren()),n}getDepth(){let t=0,i=this.parent;for(;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ye),this._clearSelfAndDescendantCache(Oe)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const i=t.getPointerPosition();if(!i)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(i)}getAbsolutePosition(t){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),r=new re,o=this.offset();return r.m=s.slice(),r.translate(o.x,o.y),r.getTranslation()}setAbsolutePosition(t){const{x:i,y:n,...s}=this._clearTransform();this.attrs.x=i,this.attrs.y=n,this._clearCache(Ye);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(Ye),this._clearSelfAndDescendantCache(Oe),this}_setTransform(t){let i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let i=t.x,n=t.y,s=this.x(),r=this.y();return i!==void 0&&(s+=i),n!==void 0&&(r+=n),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(t,i){let n=[],s=this.getParent(),r,o;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(r=n.length,o=0;o<r;o++)t(n[o])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return w.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return w.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return w.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return w.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return w.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&w.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ts,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),i,n,s,r,o;const a={attrs:{},className:this.getClassName()};for(i in t)n=t[i],o=w.isObject(n)&&!w._isPlainObject(n)&&!w._isArray(n),!o&&(s=typeof this[i]=="function"&&this[i],delete t[i],r=s?s.call(this):null,t[i]=n,r!==n&&(a.attrs[i]=n));return w._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,n){const s=[];i&&this._isMatch(t)&&s.push(this);let r=this.parent;for(;r;){if(r===n)return s;r._isMatch(t)&&s.push(r),r=r.parent}return s}isAncestorOf(t){return!1}findAncestor(t,i,n){return this.findAncestors(t,i,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let i=t.replace(/ /g,"").split(","),n=i.length,s,r;for(s=0;s<n;s++)if(r=i[s],w.isValidSelector(r)||(w.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),w.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),w.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(jo,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,i={},n){return i.target=i.target||this,n?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Oe,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let i;if(t)return i=new re,this._eachAncestorReverse(function(n){const s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;{i=this._cache.get(Oe)||new re,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();const n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;i.translate(s-o,r-a)}return i.dirty=!1,i}}getAbsoluteScale(t){let i=this;for(;i;)i._isUnderCache&&(t=i),i=i.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ye,this._getTransform)}_getTransform(){var t,i;const n=this._cache.get(Ye)||new re;n.reset();const s=this.x(),r=this.y(),o=F.getAngle(this.rotation()),a=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,c=this.attrs.skewX||0,h=this.attrs.skewY||0,d=this.attrs.offsetX||0,f=this.attrs.offsetY||0;return(s!==0||r!==0)&&n.translate(s,r),o!==0&&n.rotate(o),(c!==0||h!==0)&&n.skew(c,h),(a!==1||l!==1)&&n.scale(a,l),(d!==0||f!==0)&&n.translate(-1*d,-1*f),n.dirty=!1,n}clone(t){let i=w.cloneObject(this.attrs),n,s,r,o,a;for(n in t)i[n]=t[n];const l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],r=s.length,o=0;o<r;o++)a=s[o],a.name.indexOf(e0)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(a));return l}_toKonvaCanvas(t){t=t||{};const i=this.getClientRect(),n=this.getStage(),s=t.x!==void 0?t.x:Math.floor(i.x),r=t.y!==void 0?t.y:Math.floor(i.y),o=t.pixelRatio||1,a=new Qe({width:t.width||Math.ceil(i.width)||(n?n.width():0),height:t.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:o}),l=a.getContext(),c=new Qe({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(r),pixelRatio:a.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(a,void 0,c),l.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const i=t.mimeType||null,n=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(i,n);return t.callback&&t.callback(s),s}toImage(t){return new Promise((i,n)=>{try{const s=t?.callback;s&&delete t.callback,w._urlToImage(this.toDataURL(t),function(r){i(r),s?.(r)})}catch(s){n(s)}})}toBlob(t){return new Promise((i,n)=>{try{const s=t?.callback;s&&delete t.callback,this.toCanvas(t).toBlob(r=>{i(r),s?.(r)},t?.mimeType,t?.quality)}catch(s){n(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():F.dragDistance}_off(t,i,n){let s=this.eventListeners[t],r,o,a;for(r=0;r<s.length;r++)if(o=s[r].name,a=s[r].handler,(o!=="konva"||i==="konva")&&(!i||o===i)&&(!n||n===a)){if(s.splice(r,1),s.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,i,n){this._fire(t+Zd,{oldVal:i,newVal:n})}addName(t){if(!this.hasName(t)){const i=this.name(),n=i?i+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const i=this.name();return i?(i||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const i=(this.name()||"").split(/\s/g),n=i.indexOf(t);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(t,i){const n=this[Ho+w._capitalize(t)];return w._isFunction(n)?n.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(F.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,i){const n=this.attrs[t];n===i&&!w.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,i),this._requestDraw())}_setComponentAttr(t,i,n){let s;n!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=n,this._fireChangeEvent(t,s,n))}_fireAndBubble(t,i,n){i&&this.nodeType===Wo&&(i.target=this);const s=[i0,n0,s0,r0,o0,a0];if(!(s.indexOf(t)!==-1&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(t,i);const o=s.indexOf(t)!==-1&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!o&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,i,n):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,n;const{nodeType:s}=this,r=I.protoListenerMap.get(s)||{};let o=r?.[t];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(n=(i=a.eventListeners)===null||i===void 0?void 0:i[t])!==null&&n!==void 0?n:[];o.push(...l),a=Object.getPrototypeOf(a)}r[t]=o,I.protoListenerMap.set(s,r)}return o}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const n=this._getProtoListeners(t);if(n)for(let r=0;r<n.length;r++)n[r].handler.call(this,i);const s=this.eventListeners[t];if(s)for(let r=0;r<s.length;r++)s[r].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const i=t?t.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition();if(!n)return;const r=n._getPointerById(i)||n._changedPointerPositions[0]||s;bt._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){bt._dragElements.has(this._id)||this._createDragElement(t);const n=bt._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const n=this.getStage()._getPointerById(i.pointerId);if(!n)return;let s={x:n.x-i.offset.x,y:n.y-i.offset.y};const r=this.dragBoundFunc();if(r!==void 0){const o=r.call(this,s,t);o?s=o:w.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const i=bt._dragElements.get(this._id);i&&(i.dragStatus="stopped"),bt._endDragBefore(t),bt._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=bt._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||F.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;bt._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const i=bt._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&bt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return w.haveIntersection(n,this.getClientRect())}static create(t,i){return w._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){let n=I.prototype.getClassName.call(t),s=t.children,r,o,a;i&&(t.attrs.container=i),F[n]||(w.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=F[n];if(r=new l(t.attrs),s)for(o=s.length,a=0;a<o;a++)r.add(I._createNode(s[a]));return r}}I.protoListenerMap=new Map;I.prototype.nodeType="Node";I.prototype._attrsAffectingSize=[];I.prototype.eventListeners={};I.prototype.on.call(I.prototype,c0,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ye),this._clearSelfAndDescendantCache(Oe)});I.prototype.on.call(I.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(dr)});I.prototype.on.call(I.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(hr)});I.prototype.on.call(I.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ts)});const Mt=x.addGetterSetter;Mt(I,"zIndex");Mt(I,"absolutePosition");Mt(I,"position");Mt(I,"x",0,D());Mt(I,"y",0,D());Mt(I,"globalCompositeOperation","source-over",_i());Mt(I,"opacity",1,D());Mt(I,"name","",_i());Mt(I,"id","",_i());Mt(I,"rotation",0,D());x.addComponentsGetterSetter(I,"scale",["x","y"]);Mt(I,"scaleX",1,D());Mt(I,"scaleY",1,D());x.addComponentsGetterSetter(I,"skew",["x","y"]);Mt(I,"skewX",0,D());Mt(I,"skewY",0,D());x.addComponentsGetterSetter(I,"offset",["x","y"]);Mt(I,"offsetX",0,D());Mt(I,"offsetY",0,D());Mt(I,"dragDistance",void 0,D());Mt(I,"width",0,D());Mt(I,"height",0,D());Mt(I,"listening",!0,be());Mt(I,"preventDefault",!0,be());Mt(I,"filters",void 0,function(e){return this._filterUpToDate=!1,e});Mt(I,"visible",!0,be());Mt(I,"transformsEnabled","all",_i());Mt(I,"size");Mt(I,"dragBoundFunc");Mt(I,"draggable",!1,be());x.backCompat(I,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class ae extends I{constructor(){super(...arguments),this.children=[]}getChildren(t){const i=this.children||[];return t?i.filter(t):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let n=0;n<t.length;n++)this.add(t[n]);return this}const i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){const n=[];return this._descendants(s=>{const r=s._isMatch(t);return r&&n.push(s),!!(r&&i)}),n}_descendants(t){let i=!1;const n=this.getChildren();for(const s of n){if(i=t(s),i)return!0;if(s.hasChildren()&&(i=s._descendants(t),i))return!0}return!1}toObject(){const t=I.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){let i=t.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){const i=I.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(t){const i=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(t)&&i.push(n)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(t,i,n){const s=this.getLayer(),r=t||s&&s.getCanvas(),o=r&&r.getContext(),a=this._getCanvasCache(),l=a&&a.scene,c=r&&r.isCache;if(!this.isVisible()&&!c)return this;if(l){o.save();const h=this.getAbsoluteTransform(i).getMatrix();o.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",r,i,n);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;const n=this.getLayer(),s=t||n&&n.hitCanvas,r=s&&s.getContext(),o=this._getCanvasCache();if(o&&o.hit){r.save();const l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(t,i,n,s){var r;const o=i&&i.getContext(),a=this.clipWidth(),l=this.clipHeight(),c=this.clipFunc(),h=typeof a=="number"&&typeof l=="number"||c,d=n===this;if(h){o.save();const g=this.getAbsoluteTransform(n);let p=g.getMatrix();o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),o.beginPath();let _;if(c)_=c.call(this,o,this);else{const k=this.clipX(),v=this.clipY();o.rect(k||0,v||0,a,l)}o.clip.apply(o,_),p=g.copy().invert().getMatrix(),o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}const f=!d&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";f&&(o.save(),o._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(g){g[t](i,n,s)}),f&&o.restore(),h&&o.restore()}getClientRect(t={}){var i;const n=t.skipTransform,s=t.relativeTo;let r,o,a,l,c={x:1/0,y:1/0,width:0,height:0};const h=this;(i=this.children)===null||i===void 0||i.forEach(function(g){if(!g.visible())return;const p=g.getClientRect({relativeTo:h,skipShadow:t.skipShadow,skipStroke:t.skipStroke});p.width===0&&p.height===0||(r===void 0?(r=p.x,o=p.y,a=p.x+p.width,l=p.y+p.height):(r=Math.min(r,p.x),o=Math.min(o,p.y),a=Math.max(a,p.x+p.width),l=Math.max(l,p.y+p.height)))});const d=this.find("Shape");let f=!1;for(let g=0;g<d.length;g++)if(d[g]._isVisible(this)){f=!0;break}return f&&r!==void 0?c={x:r,y:o,width:a-r,height:l-o}:c={x:0,y:0,width:0,height:0},n?c:this._transformedRect(c,s)}}x.addComponentsGetterSetter(ae,"clip",["x","y","width","height"]);x.addGetterSetter(ae,"clipX",void 0,D());x.addGetterSetter(ae,"clipY",void 0,D());x.addGetterSetter(ae,"clipWidth",void 0,D());x.addGetterSetter(ae,"clipHeight",void 0,D());x.addGetterSetter(ae,"clipFunc");const Tn=new Map,ml=F._global.PointerEvent!==void 0;function Ws(e){return Tn.get(e)}function Xr(e){return{evt:e,pointerId:e.pointerId}}function bl(e,t){return Tn.get(e)===t}function xl(e,t){mn(e),t.getStage()&&(Tn.set(e,t),ml&&t._fire("gotpointercapture",Xr(new PointerEvent("gotpointercapture"))))}function mn(e,t){const i=Tn.get(e);if(!i)return;const n=i.getStage();n&&n.content,Tn.delete(e),ml&&i._fire("lostpointercapture",Xr(new PointerEvent("lostpointercapture")))}const d0="Stage",f0="string",zo="px",u0="mouseout",yl="mouseleave",_l="mouseover",vl="mouseenter",wl="mousemove",Sl="mousedown",Cl="mouseup",nn="pointermove",sn="pointerdown",Oi="pointerup",rn="pointercancel",g0="lostpointercapture",Hn="pointerout",on="pointerleave",Wn="pointerover",jn="pointerenter",fr="contextmenu",kl="touchstart",Tl="touchend",Ml="touchmove",Pl="touchcancel",ur="wheel",p0=5,m0=[[vl,"_pointerenter"],[Sl,"_pointerdown"],[wl,"_pointermove"],[Cl,"_pointerup"],[yl,"_pointerleave"],[kl,"_pointerdown"],[Ml,"_pointermove"],[Tl,"_pointerup"],[Pl,"_pointercancel"],[_l,"_pointerover"],[ur,"_wheel"],[fr,"_contextmenu"],[sn,"_pointerdown"],[nn,"_pointermove"],[Oi,"_pointerup"],[rn,"_pointercancel"],[on,"_pointerleave"],[g0,"_lostpointercapture"]],js={mouse:{[Hn]:u0,[on]:yl,[Wn]:_l,[jn]:vl,[nn]:wl,[sn]:Sl,[Oi]:Cl,[rn]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Hn]:"touchout",[on]:"touchleave",[Wn]:"touchover",[jn]:"touchenter",[nn]:Ml,[sn]:kl,[Oi]:Tl,[rn]:Pl,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Hn]:Hn,[on]:on,[Wn]:Wn,[jn]:jn,[nn]:nn,[sn]:sn,[Oi]:Oi,[rn]:rn,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},an=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",Pi=e=>{const t=an(e);if(t==="pointer")return F.pointerEventsEnabled&&js.pointer;if(t==="touch")return js.touch;if(t==="mouse")return js.mouse};function Uo(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&w.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const b0="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",bn=[];class Ms extends ae{constructor(t){super(Uo(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),bn.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Uo(this.attrs)}),this._checkVisibility()}_validateAdd(t){const i=t.getType()==="Layer",n=t.getType()==="FastLayer";i||n||w.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===f0){let i;if(t.charAt(0)==="."){const n=t.slice(1);t=document.getElementsByClassName(n)[0]}else t.charAt(0)!=="#"?i=t:i=t.slice(1),t=document.getElementById(i);if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,i=t.length;for(let n=0;n<i;n++)t[n].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),ae.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&w._isInDocument(t)&&this.container().removeChild(t);const i=bn.indexOf(this);return i>-1&&bn.splice(i,1),w.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(w.warn(b0),null)}_getPointerById(t){return this._pointerPositions.find(i=>i.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const i=new Qe({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=i.getContext()._context,s=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),s.forEach(function(r){if(!r.isVisible())return;const o=r._toKonvaCanvas(t);n.drawImage(o._canvas,t.x,t.y,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}),i}getIntersection(t){if(!t)return null;const i=this.children,n=i.length,s=n-1;for(let r=s;r>=0;r--){const o=i[r].getIntersection(t);if(o)return o}return null}_resizeDOM(){const t=this.width(),i=this.height();this.content&&(this.content.style.width=t+zo,this.content.style.height=i+zo),this.bufferCanvas.setSize(t,i),this.bufferHitCanvas.setSize(t,i),this.children.forEach(n=>{n.setSize({width:t,height:i}),n.draw()})}add(t,...i){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(t);const n=this.children.length;return n>p0&&w.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),F.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return bl(t,this)}setPointerCapture(t){xl(t,this)}releaseCapture(t){mn(t)}getLayers(){return this.children}_bindContentEvents(){F.isBrowser&&m0.forEach(([t,i])=>{this.content.addEventListener(t,n=>{this[i](n)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const i=Pi(t.type);i&&this._fire(i.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const i=Pi(t.type);i&&this._fire(i.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let i=this[t+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(t){const i=Pi(t.type),n=an(t.type);if(!i)return;this.setPointersPositions(t);const s=this._getTargetShape(n),r=!(F.isDragging()||F.isTransforming())||F.hitOnDragEnabled;s&&r?(s._fireAndBubble(i.pointerout,{evt:t}),s._fireAndBubble(i.pointerleave,{evt:t}),this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const i=Pi(t.type),n=an(t.type);if(!i)return;this.setPointersPositions(t);let s=!1;this._changedPointerPositions.forEach(r=>{const o=this.getIntersection(r);if(bt.justDragged=!1,F["_"+n+"ListenClick"]=!0,!o||!o.isListening()){this[n+"ClickStartShape"]=void 0;return}F.capturePointerEventsEnabled&&o.setPointerCapture(r.id),this[n+"ClickStartShape"]=o,o._fireAndBubble(i.pointerdown,{evt:t,pointerId:r.id}),s=!0;const a=t.type.indexOf("touch")>=0;o.preventDefault()&&t.cancelable&&a&&t.preventDefault()}),s||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const i=Pi(t.type),n=an(t.type);if(!i)return;const s=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(F.isDragging()&&bt.node.preventDefault()&&t.cancelable&&s&&t.preventDefault(),this.setPointersPositions(t),!(!(F.isDragging()||F.isTransforming())||F.hitOnDragEnabled))return;const o={};let a=!1;const l=this._getTargetShape(n);this._changedPointerPositions.forEach(c=>{const h=Ws(c.id)||this.getIntersection(c),d=c.id,f={evt:t,pointerId:d},g=l!==h;if(g&&l&&(l._fireAndBubble(i.pointerout,{...f},h),l._fireAndBubble(i.pointerleave,{...f},h)),h){if(o[h._id])return;o[h._id]=!0}h&&h.isListening()?(a=!0,g&&(h._fireAndBubble(i.pointerover,{...f},l),h._fireAndBubble(i.pointerenter,{...f},l),this[n+"targetShape"]=h),h._fireAndBubble(i.pointermove,{...f})):l&&(this._fire(i.pointerover,{evt:t,target:this,currentTarget:this,pointerId:d}),this[n+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const i=Pi(t.type),n=an(t.type);if(!i)return;this.setPointersPositions(t);const s=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"],o={};let a=!1;this._changedPointerPositions.forEach(l=>{const c=Ws(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),o[c._id])return;o[c._id]=!0}const h=l.id,d={evt:t,pointerId:h};let f=!1;F["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):bt.justDragged||(F["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){F["_"+n+"InDblClickWindow"]=!1},F.dblClickWindow),c&&c.isListening()?(a=!0,this[n+"ClickEndShape"]=c,c._fireAndBubble(i.pointerup,{...d}),F["_"+n+"ListenClick"]&&s&&s===c&&(c._fireAndBubble(i.pointerclick,{...d}),f&&r&&r===c&&c._fireAndBubble(i.pointerdblclick,{...d}))):(this[n+"ClickEndShape"]=null,a||(this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a=!0),F["_"+n+"ListenClick"]&&this._fire(i.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:h}),f&&this._fire(i.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:h}))}),a||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),F["_"+n+"ListenClick"]=!1,t.cancelable&&n!=="touch"&&n!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(fr,{evt:t}):this._fire(fr,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(ur,{evt:t}):this._fire(ur,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const i=Ws(t.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(Oi,Xr(t)),mn(t.pointerId)}_lostpointercapture(t){mn(t.pointerId)}setPointersPositions(t){const i=this._getContentPosition();let n=null,s=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,r=>{this._pointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,r=>{this._changedPointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})})):(n=(t.clientX-i.left)/i.scaleX,s=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:n,y:s},this._pointerPositions=[{x:n,y:s,id:w._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:s,id:w._getFirstPointerId(t)}])}_setPointerPosition(t){w.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Qe({width:this.width(),height:this.height()}),this.bufferHitCanvas=new zr({pixelRatio:1,width:this.width(),height:this.height()}),!F.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return w.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Ms.prototype.nodeType=d0;Gt(Ms);x.addGetterSetter(Ms,"container");F.isBrowser&&document.addEventListener("visibilitychange",()=>{bn.forEach(e=>{e.batchDraw()})});const Al="hasShadow",El="shadowRGBA",Rl="patternImage",Ol="linearGradient",Ll="radialGradient";let zn;function zs(){return zn||(zn=w.createCanvasElement().getContext("2d"),zn)}const xn={};function x0(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function y0(e){e.stroke()}function _0(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function v0(e){e.stroke()}function w0(){this._clearCache(Al)}function S0(){this._clearCache(El)}function C0(){this._clearCache(Rl)}function k0(){this._clearCache(Ol)}function T0(){this._clearCache(Ll)}class O extends I{constructor(t){super(t);let i,n=0;for(;i=w.getHitColor(),!(i&&!(i in xn));)if(n++,n>=1e4){w.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),i=w.getRandomColor();break}this.colorKey=i,xn[i]=this}getContext(){return w.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return w.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Al,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Rl,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const i=zs().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const n=new re;n.translate(this.fillPatternX(),this.fillPatternY()),n.rotate(F.getAngle(this.fillPatternRotation())),n.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),n.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=n.getMatrix(),r=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);i.setTransform(r)}return i}}_getLinearGradient(){return this._getCache(Ol,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const i=zs(),n=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),r=i.createLinearGradient(n.x,n.y,s.x,s.y);for(let o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}}_getRadialGradient(){return this._getCache(Ll,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const i=zs(),n=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),r=i.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}}getShadowRGBA(){return this._getCache(El,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=w.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const i=this.getStage();if(!i)return!1;const n=i.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return I.prototype.destroy.call(this),delete xn[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var i;if(!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const s=t||this.hasFill(),r=this.hasStroke(),o=this.getAbsoluteOpacity()!==1;if(s&&r&&o)return!0;const a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(s&&r&&a&&l)}setStrokeHitEnabled(t){w.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let i=!1,n=this.getParent();for(;n;){if(n.isCached()){i=!0;break}n=n.getParent()}const s=t.skipTransform,r=t.relativeTo||i&&this.getStage()||void 0,o=this.getSelfRect(),l=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,c=o.width+l,h=o.height+l,d=!t.skipShadow&&this.hasShadow(),f=d?this.shadowOffsetX():0,g=d?this.shadowOffsetY():0,p=c+Math.abs(f),_=h+Math.abs(g),k=d&&this.shadowBlur()||0,v=p+k*2,S=_+k*2,T={width:v,height:S,x:-(l/2+k)+Math.min(f,0)+o.x,y:-(l/2+k)+Math.min(g,0)+o.y};return s?T:this._transformedRect(T,r)}drawScene(t,i,n){const s=this.getLayer(),r=t||s.getCanvas(),o=r.getContext(),a=this._getCanvasCache(),l=this.getSceneFunc(),c=this.hasShadow();let h;const d=i===this;if(!this.isVisible()&&!d)return this;if(a){o.save();const f=this.getAbsoluteTransform(i).getMatrix();return o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!l)return this;if(o.save(),this._useBufferCanvas()){h=this.getStage();const f=n||h.bufferCanvas,g=f.getContext();n?(g.save(),g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,f.width,f.height),g.restore()):g.clear(),g.save(),g._applyLineJoin(this),g._applyMiterLimit(this);const p=this.getAbsoluteTransform(i).getMatrix();g.transform(p[0],p[1],p[2],p[3],p[4],p[5]),l.call(this,g,this),g.restore();const _=f.pixelRatio;c&&o._applyShadow(this),d||(o._applyOpacity(this),o._applyGlobalCompositeOperation(this)),o.drawImage(f._canvas,f.x||0,f.y||0,f.width/_,f.height/_)}else{if(o._applyLineJoin(this),o._applyMiterLimit(this),!d){const f=this.getAbsoluteTransform(i).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}c&&o._applyShadow(this),l.call(this,o,this)}return o.restore(),this}drawHit(t,i,n=!1){if(!this.shouldDrawHit(i,n))return this;const s=this.getLayer(),r=t||s.hitCanvas,o=r&&r.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||w.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){o.save();const d=this.getAbsoluteTransform(i).getMatrix();return o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),o._applyMiterLimit(this),!(this===i)){const d=this.getAbsoluteTransform(i).getMatrix();o.transform(d[0],d[1],d[2],d[3],d[4],d[5])}return a.call(this,o,this),o.restore(),this}drawHitFromCache(t=0){const i=this._getCanvasCache(),n=this._getCachedSceneCanvas(),s=i.hit,r=s.getContext(),o=s.getWidth(),a=s.getHeight();r.clear(),r.drawImage(n._canvas,0,0,o,a);try{const l=r.getImageData(0,0,o,a),c=l.data,h=c.length,d=w._hexToRgb(this.colorKey);for(let f=0;f<h;f+=4)c[f+3]>t?(c[f]=d.r,c[f+1]=d.g,c[f+2]=d.b,c[f+3]=255):c[f+3]=0;r.putImageData(l,0,0)}catch(l){w.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(t){return bl(t,this)}setPointerCapture(t){xl(t,this)}releaseCapture(t){mn(t)}}O.prototype._fillFunc=x0;O.prototype._strokeFunc=y0;O.prototype._fillFuncHit=_0;O.prototype._strokeFuncHit=v0;O.prototype._centroid=!1;O.prototype.nodeType="Shape";Gt(O);O.prototype.eventListeners={};O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",w0);O.prototype.on.call(O.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S0);O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",C0);O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",k0);O.prototype.on.call(O.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",T0);x.addGetterSetter(O,"stroke",void 0,pl());x.addGetterSetter(O,"strokeWidth",2,D());x.addGetterSetter(O,"fillAfterStrokeEnabled",!1);x.addGetterSetter(O,"hitStrokeWidth","auto",Ur());x.addGetterSetter(O,"strokeHitEnabled",!0,be());x.addGetterSetter(O,"perfectDrawEnabled",!0,be());x.addGetterSetter(O,"shadowForStrokeEnabled",!0,be());x.addGetterSetter(O,"lineJoin");x.addGetterSetter(O,"lineCap");x.addGetterSetter(O,"miterLimit");x.addGetterSetter(O,"sceneFunc");x.addGetterSetter(O,"hitFunc");x.addGetterSetter(O,"dash");x.addGetterSetter(O,"dashOffset",0,D());x.addGetterSetter(O,"shadowColor",void 0,_i());x.addGetterSetter(O,"shadowBlur",0,D());x.addGetterSetter(O,"shadowOpacity",1,D());x.addComponentsGetterSetter(O,"shadowOffset",["x","y"]);x.addGetterSetter(O,"shadowOffsetX",0,D());x.addGetterSetter(O,"shadowOffsetY",0,D());x.addGetterSetter(O,"fillPatternImage");x.addGetterSetter(O,"fill",void 0,pl());x.addGetterSetter(O,"fillPatternX",0,D());x.addGetterSetter(O,"fillPatternY",0,D());x.addGetterSetter(O,"fillLinearGradientColorStops");x.addGetterSetter(O,"strokeLinearGradientColorStops");x.addGetterSetter(O,"fillRadialGradientStartRadius",0);x.addGetterSetter(O,"fillRadialGradientEndRadius",0);x.addGetterSetter(O,"fillRadialGradientColorStops");x.addGetterSetter(O,"fillPatternRepeat","repeat");x.addGetterSetter(O,"fillEnabled",!0);x.addGetterSetter(O,"strokeEnabled",!0);x.addGetterSetter(O,"shadowEnabled",!0);x.addGetterSetter(O,"dashEnabled",!0);x.addGetterSetter(O,"strokeScaleEnabled",!0);x.addGetterSetter(O,"fillPriority","color");x.addComponentsGetterSetter(O,"fillPatternOffset",["x","y"]);x.addGetterSetter(O,"fillPatternOffsetX",0,D());x.addGetterSetter(O,"fillPatternOffsetY",0,D());x.addComponentsGetterSetter(O,"fillPatternScale",["x","y"]);x.addGetterSetter(O,"fillPatternScaleX",1,D());x.addGetterSetter(O,"fillPatternScaleY",1,D());x.addComponentsGetterSetter(O,"fillLinearGradientStartPoint",["x","y"]);x.addComponentsGetterSetter(O,"strokeLinearGradientStartPoint",["x","y"]);x.addGetterSetter(O,"fillLinearGradientStartPointX",0);x.addGetterSetter(O,"strokeLinearGradientStartPointX",0);x.addGetterSetter(O,"fillLinearGradientStartPointY",0);x.addGetterSetter(O,"strokeLinearGradientStartPointY",0);x.addComponentsGetterSetter(O,"fillLinearGradientEndPoint",["x","y"]);x.addComponentsGetterSetter(O,"strokeLinearGradientEndPoint",["x","y"]);x.addGetterSetter(O,"fillLinearGradientEndPointX",0);x.addGetterSetter(O,"strokeLinearGradientEndPointX",0);x.addGetterSetter(O,"fillLinearGradientEndPointY",0);x.addGetterSetter(O,"strokeLinearGradientEndPointY",0);x.addComponentsGetterSetter(O,"fillRadialGradientStartPoint",["x","y"]);x.addGetterSetter(O,"fillRadialGradientStartPointX",0);x.addGetterSetter(O,"fillRadialGradientStartPointY",0);x.addComponentsGetterSetter(O,"fillRadialGradientEndPoint",["x","y"]);x.addGetterSetter(O,"fillRadialGradientEndPointX",0);x.addGetterSetter(O,"fillRadialGradientEndPointY",0);x.addGetterSetter(O,"fillPatternRotation",0);x.addGetterSetter(O,"fillRule",void 0,_i());x.backCompat(O,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const M0="beforeDraw",P0="draw",Il=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],A0=Il.length;class vi extends ae{constructor(t){super(t),this.canvas=new Qe,this.hitCanvas=new zr({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){I.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!I.prototype.moveUp.call(this))return!1;const i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(I.prototype.moveDown.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(I.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return I.prototype.remove.call(this),t&&t.parentNode&&w._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&w.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),I.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){w.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){w.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,w.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let i=1,n=!1;for(;;){for(let s=0;s<A0;s++){const r=Il[s],o=this._getIntersection({x:t.x+r.x*i,y:t.y+r.y*i}),a=o.shape;if(a)return a;if(n=!!o.antialiased,!o.antialiased)break}if(n)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,s=n[3];if(s===255){const r=w.getHitColorKey(n[0],n[1],n[2]),o=xn[r];return o?{shape:o}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,i,n){const s=this.getLayer(),r=t||s&&s.getCanvas();return this._fire(M0,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),ae.prototype.drawScene.call(this,r,i,n),this._fire(P0,{node:this}),this}drawHit(t,i){const n=this.getLayer(),s=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),ae.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){w.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return w.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return w.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}vi.prototype.nodeType="Layer";Gt(vi);x.addGetterSetter(vi,"imageSmoothingEnabled",!0);x.addGetterSetter(vi,"clearBeforeDraw",!0);x.addGetterSetter(vi,"hitGraphEnabled",!0,be());class Yr extends vi{constructor(t){super(t),this.listening(!1),w.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Yr.prototype.nodeType="FastLayer";Gt(Yr);class ji extends ae{_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&w.throw("You may only add groups and shapes to groups.")}}ji.prototype.nodeType="Group";Gt(ji);const Us=(function(){return gi.performance&&gi.performance.now?function(){return gi.performance.now()}:function(){return new Date().getTime()}})();class de{constructor(t,i){this.id=de.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Us(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){let i=[];return t&&(i=Array.isArray(t)?t:[t]),this.layers=i,this}getLayers(){return this.layers}addLayer(t){const i=this.layers,n=i.length;for(let s=0;s<n;s++)if(i[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const i=de.animations,n=i.length;for(let s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Us(),de._addAnimation(this),this}stop(){return de._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const i=t.id,n=this.animations,s=n.length;for(let r=0;r<s;r++)if(n[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){const t={},i=this.animations;for(let n=0;n<i.length;n++){const s=i[n],r=s.layers,o=s.func;s._updateFrameObject(Us());const a=r.length;let l;if(o?l=o.call(s,s.frame)!==!1:l=!0,!!l)for(let c=0;c<a;c++){const h=r[c];h._id!==void 0&&(t[h._id]=h)}}for(const n in t)t.hasOwnProperty(n)&&t[n].batchDraw()}static _animationLoop(){const t=de;t.animations.length?(t._runFrames(),w.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,w.requestAnimFrame(this._animationLoop))}}de.animations=[];de.animIdCounter=0;de.animRunning=!1;const E0={node:1,duration:1,easing:1,onFinish:1,yoyo:1},R0=1,Xo=2,Yo=3,Ko=["fill","stroke","shadowColor"];let O0=0;class L0{constructor(t,i,n,s,r,o,a){this.prop=t,this.propFunc=i,this.begin=s,this._pos=s,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}fire(t){const i=this[t];i&&i()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=Xo,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Yo,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===Xo?this.setTime(t):this.state===Yo&&this.setTime(this.duration-t)}pause(){this.state=R0,this.fire("onPause")}getTimer(){return new Date().getTime()}}class At{constructor(t){const i=this,n=t.node,s=n._id,r=t.easing||yn.Linear,o=!!t.yoyo;let a,l;typeof t.duration>"u"?a=.3:t.duration===0?a=.001:a=t.duration,this.node=n,this._id=O0++;const c=n.getLayer()||(n instanceof F.Stage?n.getLayers():null);c||w.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new de(function(){i.tween.onEnterFrame()},c),this.tween=new L0(l,function(h){i._tweenFunc(h)},r,0,1,a*1e3,o),this._addListeners(),At.attrs[s]||(At.attrs[s]={}),At.attrs[s][this._id]||(At.attrs[s][this._id]={}),At.tweens[s]||(At.tweens[s]={});for(l in t)E0[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,i){const n=this.node,s=n._id;let r,o,a,l,c;const h=At.tweens[s][t];h&&delete At.attrs[s][h][t];let d=n.getAttr(t);if(w._isArray(i))if(r=[],o=Math.max(i.length,d.length),t==="points"&&i.length!==d.length&&(i.length>d.length?(l=d,d=w._prepareArrayForTween(d,i,n.closed())):(a=i,i=w._prepareArrayForTween(i,d,n.closed()))),t.indexOf("fill")===0)for(let f=0;f<o;f++)if(f%2===0)r.push(i[f]-d[f]);else{const g=w.colorToRGBA(d[f]);c=w.colorToRGBA(i[f]),d[f]=g,r.push({r:c.r-g.r,g:c.g-g.g,b:c.b-g.b,a:c.a-g.a})}else for(let f=0;f<o;f++)r.push(i[f]-d[f]);else Ko.indexOf(t)!==-1?(d=w.colorToRGBA(d),c=w.colorToRGBA(i),r={r:c.r-d.r,g:c.g-d.g,b:c.b-d.b,a:c.a-d.a}):r=i-d;At.attrs[s][this._id][t]={start:d,diff:r,end:i,trueEnd:a,trueStart:l},At.tweens[s][t]=this._id}_tweenFunc(t){const i=this.node,n=At.attrs[i._id][this._id];let s,r,o,a,l,c,h,d;for(s in n){if(r=n[s],o=r.start,a=r.diff,d=r.end,w._isArray(o))if(l=[],h=Math.max(o.length,d.length),s.indexOf("fill")===0)for(c=0;c<h;c++)c%2===0?l.push((o[c]||0)+a[c]*t):l.push("rgba("+Math.round(o[c].r+a[c].r*t)+","+Math.round(o[c].g+a[c].g*t)+","+Math.round(o[c].b+a[c].b*t)+","+(o[c].a+a[c].a*t)+")");else for(c=0;c<h;c++)l.push((o[c]||0)+a[c]*t);else Ko.indexOf(s)!==-1?l="rgba("+Math.round(o.r+a.r*t)+","+Math.round(o.g+a.g*t)+","+Math.round(o.b+a.b*t)+","+(o.a+a.a*t)+")":l=o+a*t;i.setAttr(s,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,i=At.attrs[t._id][this._id];i.points&&i.points.trueEnd&&t.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,i=At.attrs[t._id][this._id];i.points&&i.points.trueStart&&t.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,i=this._id,n=At.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const s in n)delete At.tweens[t][s];delete At.attrs[t][i],At.tweens[t]&&(Object.keys(At.tweens[t]).length===0&&delete At.tweens[t],Object.keys(At.attrs[t]).length===0&&delete At.attrs[t])}}At.attrs={};At.tweens={};I.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new At(e).play()};const yn={BackEaseIn(e,t,i,n){return i*(e/=n)*e*((1.70158+1)*e-1.70158)+t},BackEaseOut(e,t,i,n){return i*((e=e/n-1)*e*((1.70158+1)*e+1.70158)+1)+t},BackEaseInOut(e,t,i,n){let s=1.70158;return(e/=n/2)<1?i/2*(e*e*(((s*=1.525)+1)*e-s))+t:i/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+t},ElasticEaseIn(e,t,i,n,s,r){let o=0;return e===0?t:(e/=n)===1?t+i:(r||(r=n*.3),!s||s<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/r))+t)},ElasticEaseOut(e,t,i,n,s,r){let o=0;return e===0?t:(e/=n)===1?t+i:(r||(r=n*.3),!s||s<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*e)*Math.sin((e*n-o)*(2*Math.PI)/r)+i+t)},ElasticEaseInOut(e,t,i,n,s,r){let o=0;return e===0?t:(e/=n/2)===2?t+i:(r||(r=n*(.3*1.5)),!s||s<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),e<1?-.5*(s*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/r))+t:s*Math.pow(2,-10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/r)*.5+i+t)},BounceEaseOut(e,t,i,n){return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,i,n){return i-yn.BounceEaseOut(n-e,0,i,n)+t},BounceEaseInOut(e,t,i,n){return e<n/2?yn.BounceEaseIn(e*2,0,i,n)*.5+t:yn.BounceEaseOut(e*2-n,0,i,n)*.5+i*.5+t},EaseIn(e,t,i,n){return i*(e/=n)*e+t},EaseOut(e,t,i,n){return-i*(e/=n)*(e-2)+t},EaseInOut(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,i,n){return i*(e/=n)*e*e*e*e+t},StrongEaseOut(e,t,i,n){return i*((e=e/n-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,i,n){return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,i,n){return i*e/n+t}},Vo=w._assign(F,{Util:w,Transform:re,Node:I,Container:ae,Stage:Ms,stages:bn,Layer:vi,FastLayer:Yr,Group:ji,DD:bt,Shape:O,shapes:xn,Animation:de,Tween:At,Easings:yn,Context:ks,Canvas:jr});class je extends O{_sceneFunc(t){const i=F.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,n),t.arc(0,0,this.innerRadius(),i,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),n=this.clockwise(),s=F.getAngle(n?360-this.angle():this.angle()),r=Math.cos(Math.min(s,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),l=Math.sin(Math.min(s,Math.PI/2)),c=r*(r>0?t:i),h=o*i,d=a*(a>0?t:i),f=l*(l>0?i:t);return{x:c,y:n?-1*f:d,width:h-c,height:f-d}}}je.prototype._centroid=!0;je.prototype.className="Arc";je.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Gt(je);x.addGetterSetter(je,"innerRadius",0,D());x.addGetterSetter(je,"outerRadius",0,D());x.addGetterSetter(je,"angle",0,D());x.addGetterSetter(je,"clockwise",!1,be());function gr(e,t,i,n,s,r,o){const a=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),c=o*a/(a+l),h=o*l/(a+l),d=i-c*(s-e),f=n-c*(r-t),g=i+h*(s-e),p=n+h*(r-t);return[d,f,g,p]}function $o(e,t){const i=e.length,n=[];for(let s=2;s<i-2;s+=2){const r=gr(e[s-2],e[s-1],e[s],e[s+1],e[s+2],e[s+3],t);isNaN(r[0])||(n.push(r[0]),n.push(r[1]),n.push(e[s]),n.push(e[s+1]),n.push(r[2]),n.push(r[3]))}return n}function I0(e){const t=[[e[0],e[2],e[4],e[6]],[e[1],e[3],e[5],e[7]]],i=[];for(const n of t){const s=-3*n[0]+9*n[1]-9*n[2]+3*n[3];if(s!==0){const r=6*n[0]-12*n[1]+6*n[2],o=-3*n[0]+3*n[1],a=r*r-4*s*o;if(a>=0){const l=Math.sqrt(a);i.push((-r+l)/(2*s)),i.push((-r-l)/(2*s))}}}return i.filter(n=>n>0&&n<1).flatMap(n=>t.map(s=>{const r=1-n;return r*r*r*s[0]+3*r*r*n*s[1]+3*r*n*n*s[2]+n*n*n*s[3]}))}class ze extends O{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const i=this.points(),n=i.length,s=this.tension(),r=this.closed(),o=this.bezier();if(!n)return;let a=0;if(t.beginPath(),t.moveTo(i[0],i[1]),s!==0&&n>4){const l=this.getTensionPoints(),c=l.length;for(a=r?0:4,r||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);a<c-2;)t.bezierCurveTo(l[a++],l[a++],l[a++],l[a++],l[a++],l[a++]);r||t.quadraticCurveTo(l[c-2],l[c-1],i[n-2],i[n-1])}else if(o)for(a=2;a<n;)t.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);else for(a=2;a<n;a+=2)t.lineTo(i[a],i[a+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():$o(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),i=t.length,n=this.tension(),s=gr(t[i-2],t[i-1],t[0],t[1],t[2],t[3],n),r=gr(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],n),o=$o(t,n);return[s[2],s[3]].concat(o).concat([r[0],r[1],t[i-2],t[i-1],r[2],r[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...I0(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let i=t[0],n=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],i=Math.min(i,o),n=Math.max(n,o),s=Math.min(s,a),r=Math.max(r,a);return{x:i,y:s,width:n-i,height:r-s}}}ze.prototype.className="Line";ze.prototype._attrsAffectingSize=["points","bezier","tension"];Gt(ze);x.addGetterSetter(ze,"closed",!1);x.addGetterSetter(ze,"bezier",!1);x.addGetterSetter(ze,"tension",0,D());x.addGetterSetter(ze,"points",[],qd());const D0=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],G0=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],F0=[[1],[1,1],[1,2,1],[1,3,3,1]],qo=(e,t,i)=>{let n,s;const o=i/2;n=0;for(let a=0;a<20;a++)s=o*D0[20][a]+o,n+=G0[20][a]*N0(e,t,s);return o*n},Qo=(e,t,i)=>{i===void 0&&(i=1);const n=e[0]-2*e[1]+e[2],s=t[0]-2*t[1]+t[2],r=2*e[1]-2*e[0],o=2*t[1]-2*t[0],a=4*(n*n+s*s),l=4*(n*r+s*o),c=r*r+o*o;if(a===0)return i*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const h=l/(2*a),d=c/a,f=i+h,g=d-h*h,p=f*f+g>0?Math.sqrt(f*f+g):0,_=h*h+g>0?Math.sqrt(h*h+g):0,k=h+Math.sqrt(h*h+g)!==0?g*Math.log(Math.abs((f+p)/(h+_))):0;return Math.sqrt(a)/2*(f*p-h*_+k)};function N0(e,t,i){const n=pr(1,i,e),s=pr(1,i,t),r=n*n+s*s;return Math.sqrt(r)}const pr=(e,t,i)=>{const n=i.length-1;let s,r;if(n===0)return 0;if(e===0){r=0;for(let o=0;o<=n;o++)r+=F0[n][o]*Math.pow(1-t,n-o)*Math.pow(t,o)*i[o];return r}else{s=new Array(n);for(let o=0;o<n;o++)s[o]=n*(i[o+1]-i[o]);return pr(e-1,t,s)}},Jo=(e,t,i)=>{let n=1,s=e/t,r=(e-i(s))/t,o=0;for(;n>.001;){const a=i(s+r),l=Math.abs(e-a)/t;if(l<n)n=l,s+=r;else{const c=i(s-r),h=Math.abs(e-c)/t;h<n?(n=h,s-=r):r/=2}if(o++,o>500)break}return s};class Ot extends O{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ot.parsePathData(this.data()),this.pathLength=Ot.getPathLength(this.dataArray)}_sceneFunc(t){const i=this.dataArray;t.beginPath();let n=!1;for(let s=0;s<i.length;s++){const r=i[s].command,o=i[s].points;switch(r){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const a=o[0],l=o[1],c=o[2],h=o[3],d=o[4],f=o[5],g=o[6],p=o[7],_=c>h?c:h,k=c>h?1:c/h,v=c>h?h/c:1;t.translate(a,l),t.rotate(g),t.scale(k,v),t.arc(0,0,_,d,d+f,1-p),t.scale(1/k,1/v),t.rotate(-g),t.translate(-a,-l);break;case"z":n=!0,t.closePath();break}}!n&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(l){if(l.command==="A"){const c=l.points[4],h=l.points[5],d=l.points[4]+h;let f=Math.PI/180;if(Math.abs(c-d)<f&&(f=Math.abs(c-d)),h<0)for(let g=c-f;g>d;g-=f){const p=Ot.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],g,0);t.push(p.x,p.y)}else for(let g=c+f;g<d;g+=f){const p=Ot.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],g,0);t.push(p.x,p.y)}}else if(l.command==="C")for(let c=0;c<=1;c+=.01){const h=Ot.getPointOnCubicBezier(c,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);t.push(h.x,h.y)}else t=t.concat(l.points)});let i=t[0],n=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],isNaN(o)||(i=Math.min(i,o),n=Math.max(n,o)),isNaN(a)||(s=Math.min(s,a),r=Math.max(r,a));return{x:i,y:s,width:n-i,height:r-s}}getLength(){return this.pathLength}getPointAtLength(t){return Ot.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,i,n,s){return Math.sqrt((n-t)*(n-t)+(s-i)*(s-i))}static getPathLength(t){let i=0;for(let n=0;n<t.length;++n)i+=t[n].pathLength;return i}static getPointAtLengthOfDataArray(t,i){let n,s=0,r=i.length;if(!r)return null;for(;s<r&&t>i[s].pathLength;)t-=i[s].pathLength,++s;if(s===r)return n=i[s-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return i[s].command==="M"?(n=i[s].points.slice(0,2),{x:n[0],y:n[1]}):{x:i[s].start.x,y:i[s].start.y};const o=i[s],a=o.points;switch(o.command){case"L":return Ot.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return Ot.getPointOnCubicBezier(Jo(t,Ot.getPathLength(i),_=>qo([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],_)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Ot.getPointOnQuadraticBezier(Jo(t,Ot.getPathLength(i),_=>Qo([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],_)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const l=a[0],c=a[1],h=a[2],d=a[3],f=a[5],g=a[6];let p=a[4];return p+=f*t/o.pathLength,Ot.getPointOnEllipticalArc(l,c,h,d,p,g)}return null}static getPointOnLine(t,i,n,s,r,o,a){o=o??i,a=a??n;const l=this.getLineLength(i,n,s,r);if(l<1e-10)return{x:i,y:n};if(s===i)return{x:o,y:a+(r>n?t:-t)};const c=(r-n)/(s-i),h=Math.sqrt(t*t/(1+c*c))*(s<i?-1:1),d=c*h;if(Math.abs(a-n-c*(o-i))<1e-10)return{x:o+h,y:a+d};const f=((o-i)*(s-i)+(a-n)*(r-n))/(l*l),g=i+f*(s-i),p=n+f*(r-n),_=this.getLineLength(o,a,g,p),k=Math.sqrt(t*t-_*_),v=Math.sqrt(k*k/(1+c*c))*(s<i?-1:1),S=c*v;return{x:g+v,y:p+S}}static getPointOnCubicBezier(t,i,n,s,r,o,a,l,c){function h(k){return k*k*k}function d(k){return 3*k*k*(1-k)}function f(k){return 3*k*(1-k)*(1-k)}function g(k){return(1-k)*(1-k)*(1-k)}const p=l*h(t)+o*d(t)+s*f(t)+i*g(t),_=c*h(t)+a*d(t)+r*f(t)+n*g(t);return{x:p,y:_}}static getPointOnQuadraticBezier(t,i,n,s,r,o,a){function l(g){return g*g}function c(g){return 2*g*(1-g)}function h(g){return(1-g)*(1-g)}const d=o*l(t)+s*c(t)+i*h(t),f=a*l(t)+r*c(t)+n*h(t);return{x:d,y:f}}static getPointOnEllipticalArc(t,i,n,s,r,o){const a=Math.cos(o),l=Math.sin(o),c={x:n*Math.cos(r),y:s*Math.sin(r)};return{x:t+(c.x*a-c.y*l),y:i+(c.x*l+c.y*a)}}static parsePathData(t){if(!t)return[];let i=t;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(let d=0;d<n.length;d++)i=i.replace(new RegExp(n[d],"g"),"|"+n[d]);const s=i.split("|"),r=[],o=[];let a=0,l=0;const c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let h;for(let d=1;d<s.length;d++){let f=s[d],g=f.charAt(0);for(f=f.slice(1),o.length=0;h=c.exec(f);)o.push(h[0]);let p=[],_=g==="A"||g==="a"?0:-1;for(let k=0,v=o.length;k<v;k++){const S=o[k];if(S==="00"){p.push(0,0),_>=0&&(_+=2,_>=7&&(_-=7));continue}if(_>=0){if(_===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(S)){p.push(parseInt(S[0],10)),p.push(parseInt(S[1],10)),p.push(parseFloat(S.slice(2))),_+=3,_>=7&&(_-=7);continue}if(S==="11"||S==="10"||S==="01"){p.push(parseInt(S[0],10)),p.push(parseInt(S[1],10)),_+=2,_>=7&&(_-=7);continue}if(S==="0"||S==="1"){p.push(parseInt(S,10)),_+=1,_>=7&&(_-=7);continue}}else if(_===4){if(/^[01]\d+(?:\.\d+)?$/.test(S)){p.push(parseInt(S[0],10)),p.push(parseFloat(S.slice(1))),_+=2,_>=7&&(_-=7);continue}if(S==="0"||S==="1"){p.push(parseInt(S,10)),_+=1,_>=7&&(_-=7);continue}}const T=parseFloat(S);isNaN(T)?p.push(0):p.push(T),_+=1,_>=7&&(_-=7)}else{const T=parseFloat(S);isNaN(T)?p.push(0):p.push(T)}}for(;p.length>0&&!isNaN(p[0]);){let k="",v=[];const S=a,T=l;let C,L,E,z,N,X,q,at,V,lt;switch(g){case"l":a+=p.shift(),l+=p.shift(),k="L",v.push(a,l);break;case"L":a=p.shift(),l=p.shift(),v.push(a,l);break;case"m":const rt=p.shift(),Q=p.shift();if(a+=rt,l+=Q,k="M",r.length>2&&r[r.length-1].command==="z"){for(let B=r.length-2;B>=0;B--)if(r[B].command==="M"){a=r[B].points[0]+rt,l=r[B].points[1]+Q;break}}v.push(a,l),g="l";break;case"M":a=p.shift(),l=p.shift(),k="M",v.push(a,l),g="L";break;case"h":a+=p.shift(),k="L",v.push(a,l);break;case"H":a=p.shift(),k="L",v.push(a,l);break;case"v":l+=p.shift(),k="L",v.push(a,l);break;case"V":l=p.shift(),k="L",v.push(a,l);break;case"C":v.push(p.shift(),p.shift(),p.shift(),p.shift()),a=p.shift(),l=p.shift(),v.push(a,l);break;case"c":v.push(a+p.shift(),l+p.shift(),a+p.shift(),l+p.shift()),a+=p.shift(),l+=p.shift(),k="C",v.push(a,l);break;case"S":L=a,E=l,C=r[r.length-1],C.command==="C"&&(L=a+(a-C.points[2]),E=l+(l-C.points[3])),v.push(L,E,p.shift(),p.shift()),a=p.shift(),l=p.shift(),k="C",v.push(a,l);break;case"s":L=a,E=l,C=r[r.length-1],C.command==="C"&&(L=a+(a-C.points[2]),E=l+(l-C.points[3])),v.push(L,E,a+p.shift(),l+p.shift()),a+=p.shift(),l+=p.shift(),k="C",v.push(a,l);break;case"Q":v.push(p.shift(),p.shift()),a=p.shift(),l=p.shift(),v.push(a,l);break;case"q":v.push(a+p.shift(),l+p.shift()),a+=p.shift(),l+=p.shift(),k="Q",v.push(a,l);break;case"T":L=a,E=l,C=r[r.length-1],C.command==="Q"&&(L=a+(a-C.points[0]),E=l+(l-C.points[1])),a=p.shift(),l=p.shift(),k="Q",v.push(L,E,a,l);break;case"t":L=a,E=l,C=r[r.length-1],C.command==="Q"&&(L=a+(a-C.points[0]),E=l+(l-C.points[1])),a+=p.shift(),l+=p.shift(),k="Q",v.push(L,E,a,l);break;case"A":z=p.shift(),N=p.shift(),X=p.shift(),q=p.shift(),at=p.shift(),V=a,lt=l,a=p.shift(),l=p.shift(),k="A",v=this.convertEndpointToCenterParameterization(V,lt,a,l,q,at,z,N,X);break;case"a":z=p.shift(),N=p.shift(),X=p.shift(),q=p.shift(),at=p.shift(),V=a,lt=l,a+=p.shift(),l+=p.shift(),k="A",v=this.convertEndpointToCenterParameterization(V,lt,a,l,q,at,z,N,X);break}r.push({command:k||g,points:v,start:{x:S,y:T},pathLength:this.calcLength(S,T,k||g,v)})}(g==="z"||g==="Z")&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(t,i,n,s){let r,o,a,l;const c=Ot;switch(n){case"L":return c.getLineLength(t,i,s[0],s[1]);case"C":return qo([t,s[0],s[2],s[4]],[i,s[1],s[3],s[5]],1);case"Q":return Qo([t,s[0],s[2]],[i,s[1],s[3]],1);case"A":r=0;const h=s[4],d=s[5],f=s[4]+d;let g=Math.PI/180;if(Math.abs(h-f)<g&&(g=Math.abs(h-f)),o=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),d<0)for(l=h-g;l>f;l-=g)a=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=h+g;l<f;l+=g)a=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],f,0),r+=c.getLineLength(o.x,o.y,a.x,a.y),r}return 0}static convertEndpointToCenterParameterization(t,i,n,s,r,o,a,l,c){const h=c*(Math.PI/180),d=Math.cos(h)*(t-n)/2+Math.sin(h)*(i-s)/2,f=-1*Math.sin(h)*(t-n)/2+Math.cos(h)*(i-s)/2,g=d*d/(a*a)+f*f/(l*l);g>1&&(a*=Math.sqrt(g),l*=Math.sqrt(g));let p=Math.sqrt((a*a*(l*l)-a*a*(f*f)-l*l*(d*d))/(a*a*(f*f)+l*l*(d*d)));r===o&&(p*=-1),isNaN(p)&&(p=0);const _=p*a*f/l,k=p*-l*d/a,v=(t+n)/2+Math.cos(h)*_-Math.sin(h)*k,S=(i+s)/2+Math.sin(h)*_+Math.cos(h)*k,T=function(q){return Math.sqrt(q[0]*q[0]+q[1]*q[1])},C=function(q,at){return(q[0]*at[0]+q[1]*at[1])/(T(q)*T(at))},L=function(q,at){return(q[0]*at[1]<q[1]*at[0]?-1:1)*Math.acos(C(q,at))},E=L([1,0],[(d-_)/a,(f-k)/l]),z=[(d-_)/a,(f-k)/l],N=[(-1*d-_)/a,(-1*f-k)/l];let X=L(z,N);return C(z,N)<=-1&&(X=Math.PI),C(z,N)>=1&&(X=0),o===0&&X>0&&(X=X-2*Math.PI),o===1&&X<0&&(X=X+2*Math.PI),[v,S,a,l,E,X,h,o]}}Ot.prototype.className="Path";Ot.prototype._attrsAffectingSize=["data"];Gt(Ot);x.addGetterSetter(Ot,"data");class wi extends ze{_sceneFunc(t){super._sceneFunc(t);const i=Math.PI*2,n=this.points();let s=n;const r=this.tension()!==0&&n.length>4;r&&(s=this.getTensionPoints());const o=this.pointerLength(),a=n.length;let l,c;if(r){const f=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],n[a-2],n[a-1]],g=Ot.calcLength(s[s.length-4],s[s.length-3],"C",f),p=Ot.getPointOnQuadraticBezier(Math.min(1,1-o/g),f[0],f[1],f[2],f[3],f[4],f[5]);l=n[a-2]-p.x,c=n[a-1]-p.y}else l=n[a-2]-n[a-4],c=n[a-1]-n[a-3];const h=(Math.atan2(c,l)+i)%i,d=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[a-2],n[a-1]),t.rotate(h),t.moveTo(0,0),t.lineTo(-o,d/2),t.lineTo(-o,-d/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),r?(l=(s[0]+s[2])/2-n[0],c=(s[1]+s[3])/2-n[1]):(l=n[2]-n[0],c=n[3]-n[1]),t.rotate((Math.atan2(-c,-l)+i)%i),t.moveTo(0,0),t.lineTo(-o,d/2),t.lineTo(-o,-d/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x,y:t.y-i,width:t.width,height:t.height+i*2}}}wi.prototype.className="Arrow";Gt(wi);x.addGetterSetter(wi,"pointerLength",10,D());x.addGetterSetter(wi,"pointerWidth",10,D());x.addGetterSetter(wi,"pointerAtBeginning",!1);x.addGetterSetter(wi,"pointerAtEnding",!0);class Ui extends O{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Ui.prototype._centroid=!0;Ui.prototype.className="Circle";Ui.prototype._attrsAffectingSize=["radius"];Gt(Ui);x.addGetterSetter(Ui,"radius",0,D());class ni extends O{_sceneFunc(t){const i=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),i!==n&&t.scale(1,n/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}ni.prototype.className="Ellipse";ni.prototype._centroid=!0;ni.prototype._attrsAffectingSize=["radiusX","radiusY"];Gt(ni);x.addComponentsGetterSetter(ni,"radius",["x","y"]);x.addGetterSetter(ni,"radiusX",0,D());x.addGetterSetter(ni,"radiusY",0,D());class ce extends O{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",i=>{this._removeImageLoad(i.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),i=this.hasShadow();return t&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),n=this.getHeight(),s=this.cornerRadius(),r=this.attrs.image;let o;if(r){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[r,this.cropX(),this.cropY(),a,l,0,0,i,n]:o=[r,0,0,i,n]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?w.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)),r&&(s&&t.clip(),t.drawImage.apply(t,o))}_hitFunc(t){const i=this.width(),n=this.height(),s=this.cornerRadius();t.beginPath(),s?w.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i,n;return(n=(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width)!==null&&n!==void 0?n:0}getHeight(){var t,i,n;return(n=(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height)!==null&&n!==void 0?n:0}static fromURL(t,i,n=null){const s=w.createImageElement();s.onload=function(){const r=new ce({image:s});i(r)},s.onerror=n,s.crossOrigin="Anonymous",s.src=t}}ce.prototype.className="Image";ce.prototype._attrsAffectingSize=["image"];Gt(ce);x.addGetterSetter(ce,"cornerRadius",0,Ts(4));x.addGetterSetter(ce,"image");x.addComponentsGetterSetter(ce,"crop",["x","y","width","height"]);x.addGetterSetter(ce,"cropX",0,D());x.addGetterSetter(ce,"cropY",0,D());x.addGetterSetter(ce,"cropWidth",0,D());x.addGetterSetter(ce,"cropHeight",0,D());const Dl=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],B0="Change.konva",H0="none",mr="up",br="right",xr="down",yr="left",W0=Dl.length;class Kr extends ji{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let i=this,n;const s=function(){i._sync()};for(n=0;n<W0;n++)t.on(Dl[n]+B0,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),i=this.getTag(),n,s,r,o,a,l,c;if(t&&i){switch(n=t.width(),s=t.height(),r=i.pointerDirection(),o=i.pointerWidth(),c=i.pointerHeight(),a=0,l=0,r){case mr:a=n/2,l=-1*c;break;case br:a=n+o,l=s/2;break;case xr:a=n/2,l=s+c;break;case yr:a=-1*o,l=s/2;break}i.setAttrs({x:-1*a,y:-1*l,width:n,height:s}),t.setAttrs({x:-1*a,y:-1*l})}}}Kr.prototype.className="Label";Gt(Kr);class Si extends O{_sceneFunc(t){const i=this.width(),n=this.height(),s=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,c=0,h=0,d=0;typeof a=="number"?l=c=h=d=Math.min(a,i/2,n/2):(l=Math.min(a[0]||0,i/2,n/2),c=Math.min(a[1]||0,i/2,n/2),d=Math.min(a[2]||0,i/2,n/2),h=Math.min(a[3]||0,i/2,n/2)),t.beginPath(),t.moveTo(l,0),s===mr&&(t.lineTo((i-r)/2,0),t.lineTo(i/2,-1*o),t.lineTo((i+r)/2,0)),t.lineTo(i-c,0),t.arc(i-c,c,c,Math.PI*3/2,0,!1),s===br&&(t.lineTo(i,(n-o)/2),t.lineTo(i+r,n/2),t.lineTo(i,(n+o)/2)),t.lineTo(i,n-d),t.arc(i-d,n-d,d,0,Math.PI/2,!1),s===xr&&(t.lineTo((i+r)/2,n),t.lineTo(i/2,n+o),t.lineTo((i-r)/2,n)),t.lineTo(h,n),t.arc(h,n-h,h,Math.PI/2,Math.PI,!1),s===yr&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-o)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,i=0,n=this.pointerWidth(),s=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),a=this.height();return r===mr?(i-=s,a+=s):r===xr?a+=s:r===yr?(t-=n*1.5,o+=n):r===br&&(o+=n*1.5),{x:t,y:i,width:o,height:a}}}Si.prototype.className="Tag";Gt(Si);x.addGetterSetter(Si,"pointerDirection",H0);x.addGetterSetter(Si,"pointerWidth",0,D());x.addGetterSetter(Si,"pointerHeight",0,D());x.addGetterSetter(Si,"cornerRadius",0,Ts(4));class On extends O{_sceneFunc(t){const i=this.cornerRadius(),n=this.width(),s=this.height();t.beginPath(),i?w.drawRoundedRectPath(t,n,s,i):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}}On.prototype.className="Rect";Gt(On);x.addGetterSetter(On,"cornerRadius",0,Ts(4));class si extends O{_sceneFunc(t){const i=this._getPoints(),n=this.radius(),s=this.sides(),r=this.cornerRadius();if(t.beginPath(),r)w.drawRoundedPolygonPath(t,i,s,n,r);else{t.moveTo(i[0].x,i[0].y);for(let o=1;o<i.length;o++)t.lineTo(i[o].x,i[o].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,n=[];for(let s=0;s<t;s++)n.push({x:i*Math.sin(s*2*Math.PI/t),y:-1*i*Math.cos(s*2*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();let i=t[0].x,n=t[0].x,s=t[0].y,r=t[0].y;return t.forEach(o=>{i=Math.min(i,o.x),n=Math.max(n,o.x),s=Math.min(s,o.y),r=Math.max(r,o.y)}),{x:i,y:s,width:n-i,height:r-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}si.prototype.className="RegularPolygon";si.prototype._centroid=!0;si.prototype._attrsAffectingSize=["radius"];Gt(si);x.addGetterSetter(si,"radius",0,D());x.addGetterSetter(si,"sides",0,D());x.addGetterSetter(si,"cornerRadius",0,Ts(4));const Zo=Math.PI*2;class Ci extends O{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Zo,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Zo,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Ci.prototype.className="Ring";Ci.prototype._centroid=!0;Ci.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Gt(Ci);x.addGetterSetter(Ci,"innerRadius",0,D());x.addGetterSetter(Ci,"outerRadius",0,D());class Ee extends O{constructor(t){super(t),this._updated=!0,this.anim=new de(()=>{const i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,r=this.animations()[i],o=this.frameOffsets(),a=r[s+0],l=r[s+1],c=r[s+2],h=r[s+3],d=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,c,h),t.closePath(),t.fillStrokeShape(this)),d)if(o){const f=o[i],g=n*2;t.drawImage(d,a,l,c,h,f[g+0],f[g+1],c,h)}else t.drawImage(d,a,l,c,h,0,0,c,h)}_hitFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,r=this.animations()[i],o=this.frameOffsets(),a=r[s+2],l=r[s+3];if(t.beginPath(),o){const c=o[i],h=n*2;t.rect(c[h+0],c[h+1],a,l)}else t.rect(0,0,a,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),i=this.animation(),n=this.animations(),s=n[i],r=s.length/4;t<r-1?this.frameIndex(t+1):this.frameIndex(0)}}Ee.prototype.className="Sprite";Gt(Ee);x.addGetterSetter(Ee,"animation");x.addGetterSetter(Ee,"animations");x.addGetterSetter(Ee,"frameOffsets");x.addGetterSetter(Ee,"image");x.addGetterSetter(Ee,"frameIndex",0,D());x.addGetterSetter(Ee,"frameRate",17,D());x.backCompat(Ee,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class ri extends O{_sceneFunc(t){const i=this.innerRadius(),n=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(let r=1;r<s*2;r++){const o=r%2===0?n:i,a=o*Math.sin(r*Math.PI/s),l=-1*o*Math.cos(r*Math.PI/s);t.lineTo(a,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ri.prototype.className="Star";ri.prototype._centroid=!0;ri.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Gt(ri);x.addGetterSetter(ri,"numPoints",5,D());x.addGetterSetter(ri,"innerRadius",0,D());x.addGetterSetter(ri,"outerRadius",0,D());function Ke(e){return[...e].reduce((t,i,n,s)=>{if(new RegExp("\\p{Emoji}","u").test(i)){const r=s[n+1];r&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(r)?(t.push(i+r),s[n+1]=""):t.push(i)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(s[n+1]||""))?t.push(i+s[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?t[t.length-1]+=i:i&&t.push(i);return t},[])}const Ai="auto",j0="center",Gl="inherit",Zi="justify",z0="Change.konva",U0="2d",ta="-",Fl="left",X0="text",Y0="Text",K0="top",V0="bottom",ea="middle",Nl="normal",$0="px ",Un=" ",q0="right",ia="rtl",Q0="word",J0="char",na="none",Xs="",Bl=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Z0=Bl.length;function tf(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!n&&(t=`"${t}"`),t}).join(", ")}let Xn;function Ys(){return Xn||(Xn=w.createCanvasElement().getContext(U0),Xn)}function ef(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function nf(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function sf(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class It extends O{constructor(t){super(sf(t)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<Z0;i++)this.on(Bl[i]+z0,this._setTextData);this._setTextData()}_sceneFunc(t){var i,n;const s=this.textArr,r=s.length;if(!this.text())return;let o=this.padding(),a=this.fontSize(),l=this.lineHeight()*a,c=this.verticalAlign(),h=this.direction(),d=0,f=this.align(),g=this.getWidth(),p=this.letterSpacing(),_=this.charRenderFunc(),k=this.fill(),v=this.textDecoration(),S=this.underlineOffset(),T=v.indexOf("underline")!==-1,C=v.indexOf("line-through")!==-1,L;h=h===Gl?t.direction:h;let E=l/2,z=ea;if(!F.legacyTextRendering){const N=this.measureSize("M");z="alphabetic";const X=(i=N.fontBoundingBoxAscent)!==null&&i!==void 0?i:N.actualBoundingBoxAscent,q=(n=N.fontBoundingBoxDescent)!==null&&n!==void 0?n:N.actualBoundingBoxDescent;E=(X-q)/2+l/2}for(h===ia&&t.setAttr("direction",h),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",z),t.setAttr("textAlign",Fl),c===ea?d=(this.getHeight()-r*l-o*2)/2:c===V0&&(d=this.getHeight()-r*l-o*2),t.translate(o,d+o),L=0;L<r;L++){let N=0,X=0;const q=s[L],at=q.text,V=q.width,lt=q.lastInParagraph;if(t.save(),f===q0?N+=g-V-o*2:f===j0&&(N+=(g-V-o*2)/2),T){t.save(),t.beginPath();const Q=S??(F.legacyTextRendering?Math.round(a/2):Math.round(a/4)),B=N,tt=E+X+Q;t.moveTo(B,tt);const H=f===Zi&&!lt?g-o*2:V;t.lineTo(B+Math.round(H),tt),t.lineWidth=a/15;const ct=this._getLinearGradient();t.strokeStyle=ct||k,t.stroke(),t.restore()}const rt=N;if(h!==ia&&(p!==0||f===Zi||_)){const Q=at.split(" ").length-1,B=Ke(at);for(let tt=0;tt<B.length;tt++){const H=B[tt];if(H===" "&&!lt&&f===Zi&&(N+=(g-o*2-V)/Q),this._partialTextX=N,this._partialTextY=E+X,this._partialText=H,_){t.save();const gt=s.slice(0,L).reduce((dt,Ht)=>dt+Ke(Ht.text).length,0),it=tt+gt;_({char:H,index:it,x:N,y:E+X,lineIndex:L,column:tt,isLastInLine:lt,width:this.measureSize(H).width,context:t})}t.fillStrokeShape(this),_&&t.restore(),N+=this.measureSize(H).width+p}}else p!==0&&t.setAttr("letterSpacing",`${p}px`),this._partialTextX=N,this._partialTextY=E+X,this._partialText=at,t.fillStrokeShape(this);if(C){t.save(),t.beginPath();const Q=F.legacyTextRendering?0:-Math.round(a/4),B=rt;t.moveTo(B,E+X+Q);const tt=f===Zi&&!lt?g-o*2:V;t.lineTo(B+Math.round(tt),E+X+Q),t.lineWidth=a/15;const H=this._getLinearGradient();t.strokeStyle=H||k,t.stroke(),t.restore()}t.restore(),r>1&&(E+=l)}}_hitFunc(t){const i=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}setText(t){const i=w._isString(t)?t:t==null?"":t+"";return this._setAttr(X0,i),this}getWidth(){return this.attrs.width===Ai||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Ai||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return w.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i,n,s,r,o,a,l,c,h,d,f;let g=Ys(),p=this.fontSize(),_;g.save(),g.font=this._getContextFont(),_=g.measureText(t),g.restore();const k=p/100;return{actualBoundingBoxAscent:(i=_.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*k,actualBoundingBoxDescent:(n=_.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(s=_.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*k,actualBoundingBoxRight:(r=_.actualBoundingBoxRight)!==null&&r!==void 0?r:75.732421875*k,alphabeticBaseline:(o=_.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=_.emHeightAscent)!==null&&a!==void 0?a:100*k,emHeightDescent:(l=_.emHeightDescent)!==null&&l!==void 0?l:-20*k,fontBoundingBoxAscent:(c=_.fontBoundingBoxAscent)!==null&&c!==void 0?c:91*k,fontBoundingBoxDescent:(h=_.fontBoundingBoxDescent)!==null&&h!==void 0?h:21*k,hangingBaseline:(d=_.hangingBaseline)!==null&&d!==void 0?d:72.80000305175781*k,ideographicBaseline:(f=_.ideographicBaseline)!==null&&f!==void 0?f:-21*k,width:_.width,height:p}}_getContextFont(){return this.fontStyle()+Un+this.fontVariant()+Un+(this.fontSize()+$0)+tf(this.fontFamily())}_addTextLine(t){this.align()===Zi&&(t=t.trim());const n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){const i=this.letterSpacing(),n=t.length;return Ys().measureText(t).width+i*n}_setTextData(){let t=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,r=this.attrs.width,o=this.attrs.height,a=r!==Ai&&r!==void 0,l=o!==Ai&&o!==void 0,c=this.padding(),h=r-c*2,d=o-c*2,f=0,g=this.wrap(),p=g!==na,_=g!==J0&&p,k=this.ellipsis();this.textArr=[],Ys().font=this._getContextFont();const v=k?this._getTextWidth(Xs):0;for(let S=0,T=t.length;S<T;++S){let C=t[S],L=this._getTextWidth(C);if(a&&L>h)for(;C.length>0;){let E=0,z=Ke(C).length,N="",X=0;for(;E<z;){const q=E+z>>>1,at=Ke(C),V=at.slice(0,q+1).join(""),lt=this._getTextWidth(V);(k&&l&&f+s>d?lt+v:lt)<=h?(E=q+1,N=V,X=lt):z=q}if(N){if(_){const V=Ke(C),lt=Ke(N),rt=V[lt.length],Q=rt===Un||rt===ta;let B;if(Q&&X<=h)B=lt.length;else{const tt=lt.lastIndexOf(Un),H=lt.lastIndexOf(ta);B=Math.max(tt,H)+1}B>0&&(E=B,N=V.slice(0,E).join(""),X=this._getTextWidth(N))}if(N=N.trimRight(),this._addTextLine(N),n=Math.max(n,X),f+=s,this._shouldHandleEllipsis(f)){this._tryToAddEllipsisToLastLine();break}if(C=Ke(C).slice(E).join("").trimLeft(),C.length>0&&(L=this._getTextWidth(C),L<=h)){this._addTextLine(C),f+=s,n=Math.max(n,L);break}}else break}else this._addTextLine(C),f+=s,n=Math.max(n,L),this._shouldHandleEllipsis(f)&&S<T-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&f+s>d)break}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(t){const i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,r=s!==Ai&&s!==void 0,o=this.padding(),a=s-o*2;return!(this.wrap()!==na)||r&&t+n>a}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,i=t!==Ai&&t!==void 0,n=this.padding(),s=t-n*2,r=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!r||(i&&(this._getTextWidth(o.text+Xs)<s||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+Xs))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return t&&i?!0:super._useBufferCanvas()}}It.prototype._fillFunc=ef;It.prototype._strokeFunc=nf;It.prototype.className=Y0;It.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Gt(It);x.overWriteSetter(It,"width",Ur());x.overWriteSetter(It,"height",Ur());x.addGetterSetter(It,"direction",Gl);x.addGetterSetter(It,"fontFamily","Arial");x.addGetterSetter(It,"fontSize",12,D());x.addGetterSetter(It,"fontStyle",Nl);x.addGetterSetter(It,"fontVariant",Nl);x.addGetterSetter(It,"padding",0,D());x.addGetterSetter(It,"align",Fl);x.addGetterSetter(It,"verticalAlign",K0);x.addGetterSetter(It,"lineHeight",1,D());x.addGetterSetter(It,"wrap",Q0);x.addGetterSetter(It,"ellipsis",!1,be());x.addGetterSetter(It,"letterSpacing",0,D());x.addGetterSetter(It,"text","",_i());x.addGetterSetter(It,"textDecoration","");x.addGetterSetter(It,"underlineOffset",void 0,D());x.addGetterSetter(It,"charRenderFunc",void 0);const rf="",Hl="normal";function Wl(e){e.fillText(this.partialText,0,0)}function jl(e){e.strokeText(this.partialText,0,0)}class Bt extends O{constructor(t){super(t),this.dummyCanvas=w.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Ot.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const i=this.pathLength;return t>i?null:Ot.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Ot.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const i=this.textDecoration(),n=this.fill(),s=this.fontSize(),r=this.glyphInfo,o=i.indexOf("underline")!==-1,a=i.indexOf("line-through")!==-1;o&&t.beginPath();for(let l=0;l<r.length;l++){t.save();const c=r[l].p0;t.translate(c.x,c.y),t.rotate(r[l].rotation),this.partialText=r[l].text,t.fillStrokeShape(this),o&&(l===0&&t.moveTo(0,s/2+1),t.lineTo(r[l].width,s/2+1)),t.restore()}if(o&&(t.strokeStyle=n,t.lineWidth=s/20,t.stroke()),a){t.beginPath();for(let l=0;l<r.length;l++){t.save();const c=r[l].p0;t.translate(c.x,c.y),t.rotate(r[l].rotation),l===0&&t.moveTo(0,0),t.lineTo(r[l].width,0),t.restore()}t.strokeStyle=n,t.lineWidth=s/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const i=this.glyphInfo;if(i.length>=1){const n=i[0].p0;t.moveTo(n.x,n.y)}for(let n=0;n<i.length;n++){const s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return w.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return It.prototype.setText.call(this,t)}_getContextFont(){return It.prototype._getContextFont.call(this)}_getTextSize(t){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const s=n.measureText(t);return n.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=Ke(this.text()),i=[];let n=0;for(let d=0;d<t.length;d++)i.push({char:t[d],width:this._getTextSize(t[d]).width}),n+=i[d].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=n,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),o=this.align(),a=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let c=0;o==="center"&&(c=Math.max(0,this.pathLength/2-l/2)),o==="right"&&(c=Math.max(0,this.pathLength-l));let h=c;for(let d=0;d<i.length;d++){const f=this._getPointAtLength(h);if(!f)return;const g=i[d].char;let p=i[d].width+r;if(g===" "&&o==="justify"){const C=this.text().split(" ").length-1;p+=(this.pathLength-l)/C}const _=this._getPointAtLength(h+p);if(!_)return;const k=Ot.getLineLength(f.x,f.y,_.x,_.y);let v=0;if(a)try{v=a(i[d-1].char,g)*this.fontSize()}catch{v=0}f.x+=v,_.x+=v,this.textWidth+=v;const S=Ot.getPointOnLine(v+k/2,f.x,f.y,_.x,_.y),T=Math.atan2(_.y-f.y,_.x-f.x);this.glyphInfo.push({transposeX:S.x,transposeY:S.y,text:t[d],rotation:T,p0:f,p1:_,width:k}),h+=p}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});let i=t[0]||0,n=t[0]||0,s=t[1]||0,r=t[1]||0,o,a;for(let c=0;c<t.length/2;c++)o=t[c*2],a=t[c*2+1],i=Math.min(i,o),n=Math.max(n,o),s=Math.min(s,a),r=Math.max(r,a);const l=this.fontSize();return{x:i-l/2,y:s-l/2,width:n-i+l,height:r-s+l}}destroy(){return w.releaseCanvas(this.dummyCanvas),super.destroy()}}Bt.prototype._fillFunc=Wl;Bt.prototype._strokeFunc=jl;Bt.prototype._fillFuncHit=Wl;Bt.prototype._strokeFuncHit=jl;Bt.prototype.className="TextPath";Bt.prototype._attrsAffectingSize=["text","fontSize","data"];Gt(Bt);x.addGetterSetter(Bt,"data");x.addGetterSetter(Bt,"fontFamily","Arial");x.addGetterSetter(Bt,"fontSize",12,D());x.addGetterSetter(Bt,"fontStyle",Hl);x.addGetterSetter(Bt,"align","left");x.addGetterSetter(Bt,"letterSpacing",0,D());x.addGetterSetter(Bt,"textBaseline","middle");x.addGetterSetter(Bt,"fontVariant",Hl);x.addGetterSetter(Bt,"text",rf);x.addGetterSetter(Bt,"textDecoration","");x.addGetterSetter(Bt,"kerningFunc",void 0);const zl="tr-konva",of=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${zl}`).join(" "),sa="nodesRect",af=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],lf={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},cf="ontouchstart"in F._global;function hf(e,t,i){if(e==="rotater")return i;t+=w.degToRad(lf[e]||0);const n=(w.radToDeg(t)%360+360)%360;return w._inRange(n,315+22.5,360)||w._inRange(n,0,22.5)?"ns-resize":w._inRange(n,45-22.5,45+22.5)?"nesw-resize":w._inRange(n,90-22.5,90+22.5)?"ew-resize":w._inRange(n,135-22.5,135+22.5)?"nwse-resize":w._inRange(n,180-22.5,180+22.5)?"ns-resize":w._inRange(n,225-22.5,225+22.5)?"nesw-resize":w._inRange(n,270-22.5,270+22.5)?"ew-resize":w._inRange(n,315-22.5,315+22.5)?"nwse-resize":(w.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const fs=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function df(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function Ul(e,t,i){const n=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),s=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:n,y:s}}function ff(e,t){const i=df(e);return Ul(e,t,i)}function uf(e,t,i){let n=t;for(let s=0;s<e.length;s++){const r=F.getAngle(e[s]),o=Math.abs(r-t)%(Math.PI*2);Math.min(o,Math.PI*2-o)<i&&(n=r)}return n}let _r=0;class ht extends ji{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(of,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return w.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return zl+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(s=>s.isAncestorOf(this)?(w.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const o=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(o,r)}s.on(af.map(o=>o+`.${this._getEventNamespace()}`).join(" "),r),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(s)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,n=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!i)return;const s=t.getAbsolutePosition(),r=s.x-i.x,o=s.y-i.y;this.nodes().forEach(a=>{if(a===t||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+r,y:l.y+o}),a.startDrag(n)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(sa),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(sa,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),n){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),a=s.x*r.x-t.offsetX()*r.x,l=s.y*r.y-t.offsetY()*r.y,c=(F.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),h={x:o.x+a*Math.cos(c)+l*Math.sin(-c),y:o.y+l*Math.cos(c)+a*Math.sin(c),width:s.width*r.x,height:s.height*r.y,rotation:c};return Ul(h,-F.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const i=[];this.nodes().map(c=>{const h=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),d=[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}],f=c.getAbsoluteTransform();d.forEach(function(g){const p=f.point(g);i.push(p)})});const n=new re;n.rotate(-F.getAngle(this.rotation()));let s=1/0,r=1/0,o=-1/0,a=-1/0;i.forEach(function(c){const h=n.point(c);s===void 0&&(s=o=h.x,r=a=h.y),s=Math.min(s,h.x),r=Math.min(r,h.y),o=Math.max(o,h.x),a=Math.max(a,h.y)}),n.invert();const l=n.point({x:s,y:r});return{x:l.x,y:l.y,width:o-s,height:a-r,rotation:F.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),fs.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const i=new On({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:cf?10:"auto"}),n=this;i.on("mousedown touchstart",function(s){n._handleMouseDown(s)}),i.on("dragstart",s=>{i.stopDrag(),s.cancelBubble=!0}),i.on("dragend",s=>{s.cancelBubble=!0}),i.on("mouseenter",()=>{const s=F.getAngle(this.rotation()),r=this.rotateAnchorCursor(),o=hf(t,s,r);i.getStage().content&&(i.getStage().content.style.cursor=o),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){const t=new O({name:"back",width:0,height:0,sceneFunc(i,n){const s=n.getParent(),r=s.padding(),o=n.width(),a=n.height();if(i.beginPath(),i.rect(-r,-r,o+r*2,a+r*2),s.rotateEnabled()&&s.rotateLineVisible()){const l=s.rotateAnchorAngle(),c=s.rotateAnchorOffset(),h=w.degToRad(l),d=Math.sin(h),f=-Math.cos(h),g=o/2,p=a/2;let _=1/0;f<0?_=Math.min(_,-p/f):f>0&&(_=Math.min(_,(a-p)/f)),d<0?_=Math.min(_,-g/d):d>0&&(_=Math.min(_,(o-g)/d));const k=g+d*_,v=p+f*_,S=w._sign(a),T=k+d*c*S,C=v+f*c*S;i.moveTo(k,v),i.lineTo(T,C)}i.fillStrokeShape(n)},hitFunc:(i,n)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();i.beginPath(),i.rect(-s,-s,n.width()+s*2,n.height()+s*2),i.fillStrokeShape(n)}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const i=this._getNodeRect(),n=i.width,s=i.height,r=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));this.sin=Math.abs(s/r),this.cos=Math.abs(n/r),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},_r++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){let i,n,s;const r=this.findOne("."+this._movingAnchorName),o=r.getStage();o.setPointersPositions(t);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(c,l,t)),r.setAbsolutePosition(l);const h=r.getAbsolutePosition();if(c.x===h.x&&c.y===h.y)return;if(this._movingAnchorName==="rotater"){const S=this._getNodeRect();i=r.x()-S.width/2,n=-r.y()+S.height/2;const T=F.getAngle(this.rotateAnchorAngle());let C=Math.atan2(-n,i)+Math.PI/2-T;S.height<0&&(C-=Math.PI);const E=F.getAngle(this.rotation())+C,z=F.getAngle(this.rotationSnapTolerance()),X=uf(this.rotationSnaps(),E,z)-S.rotation,q=ff(S,X);this._fitNodesInto(q,t);return}const d=this.shiftBehavior();let f;d==="inverted"?f=this.keepRatio()&&!t.shiftKey:d==="none"?f=this.keepRatio():f=this.keepRatio()||t.shiftKey;let g=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(f){const S=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(S.x-r.x(),2)+Math.pow(S.y-r.y(),2));const T=this.findOne(".top-left").x()>S.x?-1:1,C=this.findOne(".top-left").y()>S.y?-1:1;i=s*this.cos*T,n=s*this.sin*C,this.findOne(".top-left").x(S.x-i),this.findOne(".top-left").y(S.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(r.y());else if(this._movingAnchorName==="top-right"){if(f){const S=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(r.x()-S.x,2)+Math.pow(S.y-r.y(),2));const T=this.findOne(".top-right").x()<S.x?-1:1,C=this.findOne(".top-right").y()>S.y?-1:1;i=s*this.cos*T,n=s*this.sin*C,this.findOne(".top-right").x(S.x+i),this.findOne(".top-right").y(S.y-n)}var p=r.position();this.findOne(".top-left").y(p.y),this.findOne(".bottom-right").x(p.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(r.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(r.x());else if(this._movingAnchorName==="bottom-left"){if(f){const S=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(S.x-r.x(),2)+Math.pow(r.y()-S.y,2));const T=S.x<r.x()?-1:1,C=r.y()<S.y?-1:1;i=s*this.cos*T,n=s*this.sin*C,r.x(S.x-i),r.y(S.y+n)}p=r.position(),this.findOne(".top-left").x(p.x),this.findOne(".bottom-right").y(p.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(r.y());else if(this._movingAnchorName==="bottom-right"){if(f){const S=g?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(r.x()-S.x,2)+Math.pow(r.y()-S.y,2));const T=this.findOne(".bottom-right").x()<S.x?-1:1,C=this.findOne(".bottom-right").y()<S.y?-1:1;i=s*this.cos*T,n=s*this.sin*C,this.findOne(".bottom-right").x(S.x+i),this.findOne(".bottom-right").y(S.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(g=this.centeredScaling()||t.altKey,g){const S=this.findOne(".top-left"),T=this.findOne(".bottom-right"),C=S.x(),L=S.y(),E=this.getWidth()-T.x(),z=this.getHeight()-T.y();T.move({x:-C,y:-L}),S.move({x:E,y:z})}const _=this.findOne(".top-left").getAbsolutePosition();i=_.x,n=_.y;const k=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),v=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:n,width:k,height:v,rotation:F.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();_r--,this._fire("transformend",{evt:t,target:n}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),n&&this._nodes.forEach(s=>{var r;s._fire("transformend",{evt:t,target:s}),(r=s.getLayer())===null||r===void 0||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,i){const n=this._getNodeRect(),s=1;if(w._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(w._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const r=new re;if(r.rotate(F.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=r.point({x:-this.padding()*2,y:0});t.x+=f.x,t.y+=f.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=r.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=r.point({x:0,y:-this.padding()*2});t.x+=f.x,t.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=r.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(n,t);f?t=f:w.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new re;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/o,n.height/o);const l=new re,c=t.width/o,h=t.height/o;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(c),Math.abs(h))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(c,h));const d=l.multiply(a.invert());this._nodes.forEach(f=>{var g;if(!f.getStage())return;const p=f.getParent().getAbsoluteTransform(),_=f.getTransform().copy();_.translate(f.offsetX(),f.offsetY());const k=new re;k.multiply(p.copy().invert()).multiply(d).multiply(p).multiply(_);const v=k.decompose();f.setAttrs(v),(g=f.getLayer())===null||g===void 0||g.batchDraw()}),this.rotation(w._getRotation(t.rotation)),this._nodes.forEach(f=>{this._fire("transform",{evt:i,target:f}),f._fire("transform",{evt:i,target:f})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t;const i=this._getNodeRect();this.rotation(w._getRotation(i.rotation));const n=i.width,s=i.height,r=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),c=this.find("._anchor");c.forEach(E=>{E.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:l/2+a,visible:o&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+a,visible:o&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:s/2,offsetX:l/2-a,visible:o&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:s,offsetY:l/2-a,visible:o&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:s,offsetX:l/2-a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-right")>=0});const h=this.rotateAnchorAngle(),d=this.rotateAnchorOffset(),f=w.degToRad(h),g=Math.sin(f),p=-Math.cos(f),_=n/2,k=s/2;let v=1/0;p<0?v=Math.min(v,-k/p):p>0&&(v=Math.min(v,(s-k)/p)),g<0?v=Math.min(v,-_/g):g>0&&(v=Math.min(v,(n-_)/g));const S=_+g*v,T=k+p*v,C=w._sign(s);this._batchChangeChild(".rotater",{x:S+g*d*C,y:T+p*d*C-a*p,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(E=>E.draggable()),x:0,y:0});const L=this.anchorStyleFunc();L&&c.forEach(E=>{L(E)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ji.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return I.prototype.toObject.call(this)}clone(t){return I.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ht.isTransforming=()=>_r>0;function gf(e){return e instanceof Array||w.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){fs.indexOf(t)===-1&&w.warn("Unknown anchor name: "+t+". Available names are: "+fs.join(", "))}),e||[]}ht.prototype.className="Transformer";Gt(ht);x.addGetterSetter(ht,"enabledAnchors",fs,gf);x.addGetterSetter(ht,"flipEnabled",!0,be());x.addGetterSetter(ht,"resizeEnabled",!0);x.addGetterSetter(ht,"anchorSize",10,D());x.addGetterSetter(ht,"rotateEnabled",!0);x.addGetterSetter(ht,"rotateLineVisible",!0);x.addGetterSetter(ht,"rotationSnaps",[]);x.addGetterSetter(ht,"rotateAnchorOffset",50,D());x.addGetterSetter(ht,"rotateAnchorAngle",0,D());x.addGetterSetter(ht,"rotateAnchorCursor","crosshair");x.addGetterSetter(ht,"rotationSnapTolerance",5,D());x.addGetterSetter(ht,"borderEnabled",!0);x.addGetterSetter(ht,"anchorStroke","rgb(0, 161, 255)");x.addGetterSetter(ht,"anchorStrokeWidth",1,D());x.addGetterSetter(ht,"anchorFill","white");x.addGetterSetter(ht,"anchorCornerRadius",0,D());x.addGetterSetter(ht,"borderStroke","rgb(0, 161, 255)");x.addGetterSetter(ht,"borderStrokeWidth",1,D());x.addGetterSetter(ht,"borderDash");x.addGetterSetter(ht,"keepRatio",!0);x.addGetterSetter(ht,"shiftBehavior","default");x.addGetterSetter(ht,"centeredScaling",!1);x.addGetterSetter(ht,"ignoreStroke",!1);x.addGetterSetter(ht,"padding",0,D());x.addGetterSetter(ht,"nodes");x.addGetterSetter(ht,"node");x.addGetterSetter(ht,"boundBoxFunc");x.addGetterSetter(ht,"anchorDragBoundFunc");x.addGetterSetter(ht,"anchorStyleFunc");x.addGetterSetter(ht,"shouldOverdrawWholeArea",!1);x.addGetterSetter(ht,"useSingleNodeRotation",!0);x.backCompat(ht,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Ue extends O{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,F.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Ue.prototype.className="Wedge";Ue.prototype._centroid=!0;Ue.prototype._attrsAffectingSize=["radius"];Gt(Ue);x.addGetterSetter(Ue,"radius",0,D());x.addGetterSetter(Ue,"angle",0,D());x.addGetterSetter(Ue,"clockwise",!1);x.backCompat(Ue,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function ra(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const pf=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],mf=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function bf(e,t){const i=e.data,n=e.width,s=e.height;let r,o,a,l,c,h,d,f,g,p,_,k,v,S,T,C,L,E,z,N;const X=t+t+1,q=n-1,at=s-1,V=t+1,lt=V*(V+1)/2,rt=new ra,Q=pf[t],B=mf[t];let tt=null,H=rt,ct=null,gt=null;for(let it=1;it<X;it++)H=H.next=new ra,it===V&&(tt=H);H.next=rt,a=o=0;for(let it=0;it<s;it++){k=v=S=T=l=c=h=d=0,f=V*(C=i[o]),g=V*(L=i[o+1]),p=V*(E=i[o+2]),_=V*(z=i[o+3]),l+=lt*C,c+=lt*L,h+=lt*E,d+=lt*z,H=rt;for(let dt=0;dt<V;dt++)H.r=C,H.g=L,H.b=E,H.a=z,H=H.next;for(let dt=1;dt<V;dt++)r=o+((q<dt?q:dt)<<2),l+=(H.r=C=i[r])*(N=V-dt),c+=(H.g=L=i[r+1])*N,h+=(H.b=E=i[r+2])*N,d+=(H.a=z=i[r+3])*N,k+=C,v+=L,S+=E,T+=z,H=H.next;ct=rt,gt=tt;for(let dt=0;dt<n;dt++)i[o+3]=z=d*Q>>B,z!==0?(z=255/z,i[o]=(l*Q>>B)*z,i[o+1]=(c*Q>>B)*z,i[o+2]=(h*Q>>B)*z):i[o]=i[o+1]=i[o+2]=0,l-=f,c-=g,h-=p,d-=_,f-=ct.r,g-=ct.g,p-=ct.b,_-=ct.a,r=a+((r=dt+t+1)<q?r:q)<<2,k+=ct.r=i[r],v+=ct.g=i[r+1],S+=ct.b=i[r+2],T+=ct.a=i[r+3],l+=k,c+=v,h+=S,d+=T,ct=ct.next,f+=C=gt.r,g+=L=gt.g,p+=E=gt.b,_+=z=gt.a,k-=C,v-=L,S-=E,T-=z,gt=gt.next,o+=4;a+=n}for(let it=0;it<n;it++){v=S=T=k=c=h=d=l=0,o=it<<2,f=V*(C=i[o]),g=V*(L=i[o+1]),p=V*(E=i[o+2]),_=V*(z=i[o+3]),l+=lt*C,c+=lt*L,h+=lt*E,d+=lt*z,H=rt;for(let Ht=0;Ht<V;Ht++)H.r=C,H.g=L,H.b=E,H.a=z,H=H.next;let dt=n;for(let Ht=1;Ht<=t;Ht++)o=dt+it<<2,l+=(H.r=C=i[o])*(N=V-Ht),c+=(H.g=L=i[o+1])*N,h+=(H.b=E=i[o+2])*N,d+=(H.a=z=i[o+3])*N,k+=C,v+=L,S+=E,T+=z,H=H.next,Ht<at&&(dt+=n);o=it,ct=rt,gt=tt;for(let Ht=0;Ht<s;Ht++)r=o<<2,i[r+3]=z=d*Q>>B,z>0?(z=255/z,i[r]=(l*Q>>B)*z,i[r+1]=(c*Q>>B)*z,i[r+2]=(h*Q>>B)*z):i[r]=i[r+1]=i[r+2]=0,l-=f,c-=g,h-=p,d-=_,f-=ct.r,g-=ct.g,p-=ct.b,_-=ct.a,r=it+((r=Ht+V)<at?r:at)*n<<2,l+=k+=ct.r=i[r],c+=v+=ct.g=i[r+1],h+=S+=ct.b=i[r+2],d+=T+=ct.a=i[r+3],ct=ct.next,f+=C=gt.r,g+=L=gt.g,p+=E=gt.b,_+=z=gt.a,k-=C,v-=L,S-=E,T-=z,gt=gt.next,o+=n}}const xf=function(t){const i=Math.round(this.blurRadius());i>0&&bf(t,i)};x.addGetterSetter(I,"blurRadius",0,D(),x.afterSetFilter);const yf=function(e){const t=this.brightness()*255,i=e.data,n=i.length;for(let s=0;s<n;s+=4)i[s]+=t,i[s+1]+=t,i[s+2]+=t};x.addGetterSetter(I,"brightness",0,D(),x.afterSetFilter);const _f=function(e){const t=this.brightness(),i=e.data,n=i.length;for(let s=0;s<n;s+=4)i[s]=Math.min(255,i[s]*t),i[s+1]=Math.min(255,i[s+1]*t),i[s+2]=Math.min(255,i[s+2]*t)},vf=function(e){const t=Math.pow((this.contrast()+100)/100,2),i=e.data,n=i.length;let s=150,r=150,o=150;for(let a=0;a<n;a+=4)s=i[a],r=i[a+1],o=i[a+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,s=s<0?0:s>255?255:s,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,i[a]=s,i[a+1]=r,i[a+2]=o};x.addGetterSetter(I,"contrast",0,D(),x.afterSetFilter);const wf=function(e){var t,i,n,s,r,o,a,l,c;const h=e.data,d=e.width,f=e.height,g=Math.min(1,Math.max(0,(i=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&i!==void 0?i:.5)),p=Math.min(1,Math.max(0,(s=(n=this.embossWhiteLevel)===null||n===void 0?void 0:n.call(this))!==null&&s!==void 0?s:.5)),k=(a={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(o=(r=this.embossDirection)===null||r===void 0?void 0:r.call(this))!==null&&o!==void 0?o:"top-left"])!==null&&a!==void 0?a:315,v=!!((c=(l=this.embossBlend)===null||l===void 0?void 0:l.call(this))!==null&&c!==void 0&&c),S=g*10,T=p*255,C=k*Math.PI/180,L=Math.cos(C),E=Math.sin(C),z=128/1020*S,N=new Uint8ClampedArray(h),X=new Float32Array(d*f);for(let rt=0,Q=0;Q<h.length;Q+=4,rt++)X[rt]=.2126*N[Q]+.7152*N[Q+1]+.0722*N[Q+2];const q=[-1,0,1,-2,0,2,-1,0,1],at=[-1,-2,-1,0,0,0,1,2,1],V=[-d-1,-d,-d+1,-1,0,1,d-1,d,d+1],lt=rt=>rt<0?0:rt>255?255:rt;for(let rt=1;rt<f-1;rt++)for(let Q=1;Q<d-1;Q++){const B=rt*d+Q;let tt=0,H=0;tt+=X[B+V[0]]*q[0],H+=X[B+V[0]]*at[0],tt+=X[B+V[1]]*q[1],H+=X[B+V[1]]*at[1],tt+=X[B+V[2]]*q[2],H+=X[B+V[2]]*at[2],tt+=X[B+V[3]]*q[3],H+=X[B+V[3]]*at[3],tt+=X[B+V[5]]*q[5],H+=X[B+V[5]]*at[5],tt+=X[B+V[6]]*q[6],H+=X[B+V[6]]*at[6],tt+=X[B+V[7]]*q[7],H+=X[B+V[7]]*at[7],tt+=X[B+V[8]]*q[8],H+=X[B+V[8]]*at[8];const ct=L*tt+E*H,gt=lt(T+ct*z),it=B*4;if(v){const dt=gt-T;h[it]=lt(N[it]+dt),h[it+1]=lt(N[it+1]+dt),h[it+2]=lt(N[it+2]+dt),h[it+3]=N[it+3]}else h[it]=h[it+1]=h[it+2]=gt,h[it+3]=N[it+3]}for(let rt=0;rt<d;rt++){let Q=rt*4,B=((f-1)*d+rt)*4;h[Q]=N[Q],h[Q+1]=N[Q+1],h[Q+2]=N[Q+2],h[Q+3]=N[Q+3],h[B]=N[B],h[B+1]=N[B+1],h[B+2]=N[B+2],h[B+3]=N[B+3]}for(let rt=1;rt<f-1;rt++){let Q=rt*d*4,B=(rt*d+(d-1))*4;h[Q]=N[Q],h[Q+1]=N[Q+1],h[Q+2]=N[Q+2],h[Q+3]=N[Q+3],h[B]=N[B],h[B+1]=N[B+1],h[B+2]=N[B+2],h[B+3]=N[B+3]}return e};x.addGetterSetter(I,"embossStrength",.5,D(),x.afterSetFilter);x.addGetterSetter(I,"embossWhiteLevel",.5,D(),x.afterSetFilter);x.addGetterSetter(I,"embossDirection","top-left",void 0,x.afterSetFilter);x.addGetterSetter(I,"embossBlend",!1,void 0,x.afterSetFilter);function Ks(e,t,i,n,s){const r=i-t,o=s-n;if(r===0)return n+o/2;if(o===0)return n;let a=(e-t)/r;return a=o*a+n,a}const Sf=function(e){const t=e.data,i=t.length;let n=t[0],s=n,r,o=t[1],a=o,l,c=t[2],h=c,d;const f=this.enhance();if(f===0)return;for(let T=0;T<i;T+=4)r=t[T+0],r<n?n=r:r>s&&(s=r),l=t[T+1],l<o?o=l:l>a&&(a=l),d=t[T+2],d<c?c=d:d>h&&(h=d);s===n&&(s=255,n=0),a===o&&(a=255,o=0),h===c&&(h=255,c=0);let g,p,_,k,v,S;if(f>0)g=s+f*(255-s),p=n-f*(n-0),_=a+f*(255-a),k=o-f*(o-0),v=h+f*(255-h),S=c-f*(c-0);else{const T=(s+n)*.5;g=s+f*(s-T),p=n+f*(n-T);const C=(a+o)*.5;_=a+f*(a-C),k=o+f*(o-C);const L=(h+c)*.5;v=h+f*(h-L),S=c+f*(c-L)}for(let T=0;T<i;T+=4)t[T+0]=Ks(t[T+0],n,s,p,g),t[T+1]=Ks(t[T+1],o,a,k,_),t[T+2]=Ks(t[T+2],c,h,S,v)};x.addGetterSetter(I,"enhance",0,D(),x.afterSetFilter);const Cf=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4){const s=.34*t[n]+.5*t[n+1]+.16*t[n+2];t[n]=s,t[n+1]=s,t[n+2]=s}};x.addGetterSetter(I,"hue",0,D(),x.afterSetFilter);x.addGetterSetter(I,"saturation",0,D(),x.afterSetFilter);x.addGetterSetter(I,"luminance",0,D(),x.afterSetFilter);const kf=function(e){const t=e.data,i=t.length,n=1,s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=n*s*Math.cos(r*Math.PI/180),l=n*s*Math.sin(r*Math.PI/180),c=.299*n+.701*a+.167*l,h=.587*n-.587*a+.33*l,d=.114*n-.114*a-.497*l,f=.299*n-.299*a-.328*l,g=.587*n+.413*a+.035*l,p=.114*n-.114*a+.293*l,_=.299*n-.3*a+1.25*l,k=.587*n-.586*a-1.05*l,v=.114*n+.886*a-.2*l;let S,T,C,L;for(let E=0;E<i;E+=4)S=t[E+0],T=t[E+1],C=t[E+2],L=t[E+3],t[E+0]=c*S+h*T+d*C+o,t[E+1]=f*S+g*T+p*C+o,t[E+2]=_*S+k*T+v*C+o,t[E+3]=L},Tf=function(e){const t=e.data,i=t.length,n=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=n*s*Math.cos(r*Math.PI/180),a=n*s*Math.sin(r*Math.PI/180),l=.299*n+.701*o+.167*a,c=.587*n-.587*o+.33*a,h=.114*n-.114*o-.497*a,d=.299*n-.299*o-.328*a,f=.587*n+.413*o+.035*a,g=.114*n-.114*o+.293*a,p=.299*n-.3*o+1.25*a,_=.587*n-.586*o-1.05*a,k=.114*n+.886*o-.2*a;for(let v=0;v<i;v+=4){const S=t[v+0],T=t[v+1],C=t[v+2],L=t[v+3];t[v+0]=l*S+c*T+h*C,t[v+1]=d*S+f*T+g*C,t[v+2]=p*S+_*T+k*C,t[v+3]=L}};x.addGetterSetter(I,"hue",0,D(),x.afterSetFilter);x.addGetterSetter(I,"saturation",0,D(),x.afterSetFilter);x.addGetterSetter(I,"value",0,D(),x.afterSetFilter);const Mf=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]},Pf=function(e,t,i){const n=e.data,s=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2;let c=Math.sqrt(a*a+l*l),h=r-a,d=o-l;const f=Math.sqrt(h*h+d*d);c=f>c?f:c;const g=o,p=r,_=360/p*Math.PI/180;for(let k=0;k<p;k+=1){const v=Math.sin(k*_),S=Math.cos(k*_);for(let T=0;T<g;T+=1){h=Math.floor(a+c*T/g*S),d=Math.floor(l+c*T/g*v);let C=(d*r+h)*4;const L=n[C+0],E=n[C+1],z=n[C+2],N=n[C+3];C=(k+T*r)*4,s[C+0]=L,s[C+1]=E,s[C+2]=z,s[C+3]=N}}},Af=function(e,t,i){const n=e.data,s=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2;let c=Math.sqrt(a*a+l*l),h=r-a,d=o-l;const f=Math.sqrt(h*h+d*d);c=f>c?f:c;const g=o,p=r,_=0;let k,v;for(h=0;h<r;h+=1)for(d=0;d<o;d+=1){const S=h-a,T=d-l,C=Math.sqrt(S*S+T*T)*g/c;let L=(Math.atan2(T,S)*180/Math.PI+360+_)%360;L=L*p/360,k=Math.floor(L),v=Math.floor(C);let E=(v*r+k)*4;const z=n[E+0],N=n[E+1],X=n[E+2],q=n[E+3];E=(d*r+h)*4,s[E+0]=z,s[E+1]=N,s[E+2]=X,s[E+3]=q}},Ef=function(e){const t=e.width,i=e.height;let n,s,r,o,a,l,c,h,d,f,g=Math.round(this.kaleidoscopePower());const p=Math.round(this.kaleidoscopeAngle()),_=Math.floor(t*(p%360)/360);if(g<1)return;const k=w.createCanvasElement();k.width=t,k.height=i;const v=k.getContext("2d").getImageData(0,0,t,i);w.releaseCanvas(k),Pf(e,v,{polarCenterX:t/2,polarCenterY:i/2});let S=t/Math.pow(2,g);for(;S<=8;)S=S*2,g-=1;S=Math.ceil(S);let T=S,C=0,L=T,E=1;for(_+S>t&&(C=T,L=0,E=-1),s=0;s<i;s+=1)for(n=C;n!==L;n+=E)r=Math.round(n+_)%t,d=(t*s+r)*4,a=v.data[d+0],l=v.data[d+1],c=v.data[d+2],h=v.data[d+3],f=(t*s+n)*4,v.data[f+0]=a,v.data[f+1]=l,v.data[f+2]=c,v.data[f+3]=h;for(s=0;s<i;s+=1)for(T=Math.floor(S),o=0;o<g;o+=1){for(n=0;n<T+1;n+=1)d=(t*s+n)*4,a=v.data[d+0],l=v.data[d+1],c=v.data[d+2],h=v.data[d+3],f=(t*s+T*2-n-1)*4,v.data[f+0]=a,v.data[f+1]=l,v.data[f+2]=c,v.data[f+3]=h;T*=2}Af(v,e,{})};x.addGetterSetter(I,"kaleidoscopePower",2,D(),x.afterSetFilter);x.addGetterSetter(I,"kaleidoscopeAngle",0,D(),x.afterSetFilter);function Yn(e,t,i){let n=(i*e.width+t)*4;const s=[];return s.push(e.data[n++],e.data[n++],e.data[n++],e.data[n++]),s}function tn(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function Rf(e){const t=[0,0,0];for(let i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function Of(e,t){const i=Yn(e,0,0),n=Yn(e,e.width-1,0),s=Yn(e,0,e.height-1),r=Yn(e,e.width-1,e.height-1),o=t||10;if(tn(i,n)<o&&tn(n,r)<o&&tn(r,s)<o&&tn(s,i)<o){const a=Rf([n,i,r,s]),l=[];for(let c=0;c<e.width*e.height;c++){const h=tn(a,[e.data[c*4],e.data[c*4+1],e.data[c*4+2]]);l[c]=h<o?0:255}return l}}function Lf(e,t){for(let i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function If(e,t,i){const n=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const c=a*t+l;let h=0;for(let d=0;d<s;d++)for(let f=0;f<s;f++){const g=a+d-r,p=l+f-r;if(g>=0&&g<i&&p>=0&&p<t){const _=g*t+p,k=n[d*s+f];h+=e[_]*k}}o[c]=h===2040?255:0}return o}function Df(e,t,i){const n=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const c=a*t+l;let h=0;for(let d=0;d<s;d++)for(let f=0;f<s;f++){const g=a+d-r,p=l+f-r;if(g>=0&&g<i&&p>=0&&p<t){const _=g*t+p,k=n[d*s+f];h+=e[_]*k}}o[c]=h>=1020?255:0}return o}function Gf(e,t,i){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const c=a*t+l;let h=0;for(let d=0;d<s;d++)for(let f=0;f<s;f++){const g=a+d-r,p=l+f-r;if(g>=0&&g<i&&p>=0&&p<t){const _=g*t+p,k=n[d*s+f];h+=e[_]*k}}o[c]=h}return o}const Ff=function(e){const t=this.threshold();let i=Of(e,t);return i&&(i=If(i,e.width,e.height),i=Df(i,e.width,e.height),i=Gf(i,e.width,e.height),Lf(e,i)),e};x.addGetterSetter(I,"threshold",0,D(),x.afterSetFilter);const Nf=function(e){const t=this.noise()*255,i=e.data,n=i.length,s=t/2;for(let r=0;r<n;r+=4)i[r+0]+=s-2*s*Math.random(),i[r+1]+=s-2*s*Math.random(),i[r+2]+=s-2*s*Math.random()};x.addGetterSetter(I,"noise",.2,D(),x.afterSetFilter);const Bf=function(e){let t=Math.ceil(this.pixelSize()),i=e.width,n=e.height,s=Math.ceil(i/t),r=Math.ceil(n/t),o=e.data;if(t<=0){w.error("pixelSize value can not be <= 0");return}for(let a=0;a<s;a+=1)for(let l=0;l<r;l+=1){let c=0,h=0,d=0,f=0;const g=a*t,p=g+t,_=l*t,k=_+t;let v=0;for(let S=g;S<p;S+=1)if(!(S>=i))for(let T=_;T<k;T+=1){if(T>=n)continue;const C=(i*T+S)*4;c+=o[C+0],h+=o[C+1],d+=o[C+2],f+=o[C+3],v+=1}c=c/v,h=h/v,d=d/v,f=f/v;for(let S=g;S<p;S+=1)if(!(S>=i))for(let T=_;T<k;T+=1){if(T>=n)continue;const C=(i*T+S)*4;o[C+0]=c,o[C+1]=h,o[C+2]=d,o[C+3]=f}}};x.addGetterSetter(I,"pixelSize",8,D(),x.afterSetFilter);const Hf=function(e){const t=Math.round(this.levels()*254)+1,i=e.data,n=i.length,s=255/t;for(let r=0;r<n;r+=1)i[r]=Math.floor(i[r]/s)*s};x.addGetterSetter(I,"levels",.5,D(),x.afterSetFilter);const Wf=function(e){const t=e.data,i=t.length,n=this.red(),s=this.green(),r=this.blue();for(let o=0;o<i;o+=4){const a=(.34*t[o]+.5*t[o+1]+.16*t[o+2])/255;t[o]=a*n,t[o+1]=a*s,t[o+2]=a*r,t[o+3]=t[o+3]}};x.addGetterSetter(I,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(I,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(I,"blue",0,gl,x.afterSetFilter);const jf=function(e){const t=e.data,i=t.length,n=this.red(),s=this.green(),r=this.blue(),o=this.alpha();for(let a=0;a<i;a+=4){const l=1-o;t[a]=n*o+t[a]*l,t[a+1]=s*o+t[a+1]*l,t[a+2]=r*o+t[a+2]*l}};x.addGetterSetter(I,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(I,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(I,"blue",0,gl,x.afterSetFilter);x.addGetterSetter(I,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const zf=function(e){const t=e.data,i=t.length;for(let n=0;n<i;n+=4){const s=t[n+0],r=t[n+1],o=t[n+2];t[n+0]=Math.min(255,s*.393+r*.769+o*.189),t[n+1]=Math.min(255,s*.349+r*.686+o*.168),t[n+2]=Math.min(255,s*.272+r*.534+o*.131)}},Uf=function(e){const i=e.data;for(let n=0;n<i.length;n+=4){const s=i[n],r=i[n+1],o=i[n+2];.2126*s+.7152*r+.0722*o>=128&&(i[n]=255-s,i[n+1]=255-r,i[n+2]=255-o)}return e},Xf=function(e){const t=this.threshold()*255,i=e.data,n=i.length;for(let s=0;s<n;s+=1)i[s]=i[s]<t?0:255};x.addGetterSetter(I,"threshold",.5,D(),x.afterSetFilter);const xt=Vo.Util._assign(Vo,{Arc:je,Arrow:wi,Circle:Ui,Ellipse:ni,Image:ce,Label:Kr,Tag:Si,Line:ze,Path:Ot,Rect:On,RegularPolygon:si,Ring:Ci,Sprite:Ee,Star:ri,Text:It,TextPath:Bt,Transformer:ht,Wedge:Ue,Filters:{Blur:xf,Brightness:_f,Brighten:yf,Contrast:vf,Emboss:wf,Enhance:Sf,Grayscale:Cf,HSL:kf,HSV:Tf,Invert:Mf,Kaleidoscope:Ef,Mask:Ff,Noise:Nf,Pixelate:Bf,Posterize:Hf,RGB:Wf,RGBA:jf,Sepia:zf,Solarize:Uf,Threshold:Xf}}),Yf=1.3,vr=30,Kf=.5,Vf=3,$f=12,qf=6,Qf=12,Jf=.35,Zf=.8,tu=1.4,eu=.6,iu=2,nu=!0,su=245,ru=18,ou=40,au=.35,lu=18,Kn="#88E523",cu="rgba(136,229,35,0.18)",hu="rgba(136,229,35,0.85)",du="rgba(136,229,35,0.35)";let ut=null,ee=null,Ce=null,et=null,kt=null,ke=null,fe={},ei=null,zi=new Map,St=null,Mn=null,Vr="",Ut=null,Et=null,le=null,Ct=!1,se=1,J=null,Ge=0,Fe=0,bi=null,Dt=null,xi=null,ln={x:0,y:0};function $r(){if(!kt)return null;const e=kt.nodes();return e&&e.length>0?e[0]:null}function Vs(e){if(!kt||!et)return;kt.nodes([e]),e&&e.moveToTop&&e.moveToTop(),kt.getParent()===et&&kt.moveToTop(),Ct&&(xi=e&&e.getAttr?.("name")==="dent"?e:null,Dt&&(xi?(Dt.visible(!0),_n(xi)):Dt.visible(!1)));const t=et.getLayer?et.getLayer():et;t&&t.batchDraw()}function Xl(){if(Dt)return;Dt=new xt.Group({name:"dent-handle",visible:!1,listening:!0});const e=new xt.Line({name:"stem-line",points:[0,0,0,0],stroke:Kn,strokeWidth:1,listening:!1}),t=new xt.Group({name:"handle-plus",draggable:!0,listening:!0}),i=new xt.Group({listening:!1}),n=new xt.Circle({radius:10,x:0,y:0,fill:cu,stroke:hu,strokeWidth:1.5,shadowColor:Kn,shadowBlur:10,shadowOpacity:.55,listening:!1}),s=new xt.Line({points:[-6,0,6,0],stroke:Kn,strokeWidth:2,lineCap:"round",listening:!1}),r=new xt.Line({points:[0,-6,0,6],stroke:Kn,strokeWidth:2,lineCap:"round",listening:!1}),o=new xt.Circle({radius:12,x:0,y:0,stroke:du,strokeWidth:1,listening:!1});i.add(n),i.add(s),i.add(r),i.add(o);const a=new xt.Circle({radius:lu,x:0,y:0,fill:"rgba(0,0,0,0)",listening:!0});t.add(i),t.add(a),Dt.add(e),Dt.add(t),t.on("click tap dragstart",l=>{l.cancelBubble=!0}),t.on("dragstart",l=>{l&&l.cancelBubble!==void 0&&(l.cancelBubble=!0),J&&J.draggable(!1),ln=t.position()}),t.on("dragmove",()=>{const l=xi||$r();if(!l||l.getAttr?.("name")!=="dent")return;const c=t.position(),h=c.x-ln.x,d=c.y-ln.y;l.x(l.x()+h),l.y(l.y()+d),Ct&&le&&is(l),_n(l),kt&&(kt.nodes([l]),kt.forceUpdate&&kt.forceUpdate()),ln=t.position();const f=l._dentMeta;f&&qr(l,f.type,f.id,f.sizes);const g=et.getLayer?et.getLayer():et;g&&g.batchDraw()}),t.on("dragend",()=>{Pn()})}function Yl(){if(!Dt||!J)return;const e=J.scaleX(),t=Dt.getChildren?.()?.[1];t&&t.scale({x:1/e,y:1/e})}function _n(e){if(!Dt||!e)return;const t=e.getParent(),i=e.getClientRect({relativeTo:t}),n=i.x+i.width/2,s=i.y+i.height,r=Math.max(ru,Math.min(ou,i.height*au)),o=n,a=s+r,l=Dt.getChildren?Dt.getChildren():[],c=l[0];c&&c.points([n,s,o,a]);const h=l[1];h&&(h.position({x:o,y:a}),ln={x:o,y:a},Yl())}function wr(e,t){return!e||!t?!0:e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height}function $s(e){if(!e)return!0;const t=St?wr(e,St):!0,i=Mn?wr(e,Mn):!0;return t&&i}function fu(e){return new Promise((t,i)=>{const n=e.naturalWidth||e.width,s=e.naturalHeight||e.height;if(!n||!s){t(e);return}const r=document.createElement("canvas");r.width=n,r.height=s;const o=r.getContext("2d");if(!o){t(e);return}o.drawImage(e,0,0);const a=o.getImageData(0,0,n,s),l=a.data,c=su;for(let f=0;f<l.length;f+=4)l[f]>c&&l[f+1]>c&&l[f+2]>c&&(l[f+3]=0);o.putImageData(a,0,0);const h=r.toDataURL("image/png"),d=new window.Image;d.crossOrigin="anonymous",d.onload=()=>t(d),d.onerror=()=>i(new Error("removeWhiteBackground: failed to load result image")),d.src=h})}function uu(e){const t=(e||"").replace(/^\/+/,""),i=(Vr||"/DentMetric/").replace(/\/$/,"")||"",n=t?i?`${window.location.origin}${i}/${t}`:`/${t}`:"";return new Promise((s,r)=>{const o=new window.Image;o.crossOrigin="anonymous",o.onload=()=>{!o.naturalWidth||!o.naturalHeight?r(new Error("Image invalid size")):s(o)},o.onerror=()=>r(new Error("Image load failed: "+n)),o.src=n})}async function gu(e,t,i,n,s=""){if(!e||!t)return;Vr=s||"",ke=t,fe=i||{},ei=n,Ct=!!(t.realSizeMm&&t.asset&&t.asset.type==="image"),Ut=null,Et=null;const r=e.offsetWidth,o=e.offsetHeight;if(Mn={x:0,y:0,width:r,height:o},ut&&ut.destroy(),ut=new xt.Stage({container:e,width:r,height:o}),Ct){se=1;const l=new xt.Layer;ut.add(l),bi=new xt.Rect({x:0,y:0,width:r,height:o,fill:"#0b0f14",listening:!1}),l.add(bi),J=new xt.Group,J.listening(!0),J.draggable(!1),l.add(J),ee=new xt.Group,ee.listening(!1),ee.setAttr("isBackground",!0),Ce=new xt.Group,Ce.listening(!1),Ce.setAttr("isBackground",!0),et=new xt.Group,J.add(ee),J.add(Ce),J.add(et),await yu(r,o),Ge=Et?Et.width:0,Fe=Et?Et.height:0,J.offset({x:0,y:0}),J.scale({x:1,y:1}),J.position({x:r/2-Ge/2,y:o/2-Fe/2}),J.dragBoundFunc(c=>$l(c)),J.on("dragmove",Bi),J.on("dragend",Bi),Pn(),Bi()}else bi=null,J=null,Ge=0,Fe=0,ee=new xt.Layer,ut.add(ee),xu(r,o),et=new xt.Layer,ut.add(et);kt=new xt.Transformer({anchorStroke:"#88E523",anchorFill:"#0B121E",anchorSize:15,borderStroke:"#88E523",borderDash:[4,4],centeredScaling:!0,rotateEnabled:!0}),et.add(kt),Ct&&Xl(),Ct&&Dt&&et.add(Dt),ut.on("click tap",l=>{const c=l.target,h=c===ut,d=c?.getAttr&&c.getAttr("isBackground")===!0,f=c===kt||c?.getParent&&c.getParent()===kt||kt&&typeof kt.isAncestorOf=="function"&&kt.isAncestorOf(c),g=c?.name?.()==="dent-handle"||c?.name?.()==="handle-plus"||c?.getParent?.()?.name?.()==="dent-handle"||c?.getParent?.()?.name?.()==="handle-plus";if(f||g)return;const p=J&&c===J,_=c?.getType&&c.getType()==="Layer";if(h||d||p||_||et&&c===et){kt.nodes([]),Ct&&(xi=null,Dt&&Dt.visible(!1));const v=et?.getLayer?et.getLayer():et;v&&v.batchDraw()}});const a=et.getLayer?et.getLayer():et;a&&a.batchDraw()}function Bi(){if(!J||!ut||!le)return;const e=le.getClientRect({relativeTo:ut}),t=ut.width(),i=ut.height();let n=0,s=0;e.width<=t?n=t/2-(e.x+e.width/2):(e.x>0&&(n=-e.x),e.x+e.width<t&&(n=t-(e.x+e.width))),e.height<=i?s=i/2-(e.y+e.height/2):(e.y>0&&(s=-e.y),e.y+e.height<i&&(s=i-(e.y+e.height))),(n!==0||s!==0)&&(J.x(J.x()+n),J.y(J.y()+s)),J.getLayer().batchDraw()}function is(e,t={}){if(!ut||!le||!J)return;const i=t.marginPx??$f,n=le.getClientRect({relativeTo:ut}),s={left:n.x-i,top:n.y-i,right:n.x+n.width+i,bottom:n.y+n.height+i},r=e.getClientRect({relativeTo:ut}),o=r.x,a=r.y,l=r.x+r.width,c=r.y+r.height;let h=0,d=0;if(o<s.left?h=s.left-o:l>s.right&&(h=s.right-l),a<s.top?d=s.top-a:c>s.bottom&&(d=s.bottom-c),h===0&&d===0)return;const f=e.getParent();if(!f)return;const g=f.getAbsoluteTransform().copy().invert(),p=g.point({x:0,y:0}),_=g.point({x:h,y:d}),k=_.x-p.x,v=_.y-p.y;e.x(e.x()+k),e.y(e.y()+v)}function Kl(e){if(!e)return 20;const t=Math.max(.01,e.scaleX()),i=Math.max(.01,e.scaleY());let n;if(e.className==="Ellipse"){const s=e.radiusX()*t*2,r=e.radiusY()*i*2;n=Math.min(s,r)}else n=Math.min(e.width()*t,e.height()*i);return n}function Sr(e){if(!e||!J)return;const t=J.scaleX(),n=Kl(e)*t,s=Math.max(qf,Math.min(Qf,n*Jf)),r=Math.max(2,s/t);e.hitStrokeWidth(r)}function Cr(e){if(!e||!J)return;const t=J.scaleX(),s=Kl(e)*t<40?Zf:tu,r=Math.max(eu,Math.min(iu,s/t));e.strokeWidth(r)}function Vl(e){if(!e||!J)return;const t=J.scaleX();e.strokeWidth(Math.max(.6,1.2/t))}function pu(){J&&J.draggable(se>1.01)}function Pn(){pu()}function $l(e){if(!J||!ut||Ge<=0||Fe<=0)return e;const t=ut.width(),i=ut.height(),n=Ge*se,s=Fe*se;let r=e.x,o=e.y;return n>=t?r=Math.max(0,Math.min(t-n,r)):r=(t-n)/2,s>=i?o=Math.max(0,Math.min(i-s,o)):o=(i-s)/2,{x:r,y:o}}function mu(){if(!J||!ut||Ge<=0||Fe<=0)return;const e=$l(J.position());J.position(e),le?Bi():J.getLayer().batchDraw()}function qs(e){if(se=Math.max(Kf,Math.min(Vf,Math.round(Number(e)*10)/10)),!J||!ut||Ge<=0||Fe<=0)return se;const i=ut.width(),n=ut.height(),s={x:i/2,y:n/2},r=J.scaleX(),o={x:(s.x-J.x())/r,y:(s.y-J.y())/r};return J.scale({x:se,y:se}),J.position({x:s.x-o.x*se,y:s.y-o.y*se}),Bi(),Pn(),et&&(et.getChildren?et.getChildren():[]).forEach(l=>{l!==kt&&l.getAttr?.("name")==="dent"&&(Cr(l),Sr(l),Vl(l))}),Yl(),se}function Ei(){return J?se:1}function bu(e,t){!ut||e<=0||t<=0||(ut.width(e),ut.height(t),Mn={x:0,y:0,width:e,height:t},bi&&(bi.width(e),bi.height(t)),J&&le?Bi():J&&Ge>0&&Fe>0&&mu())}function xu(e,t){const i=e/320,n=t/420,s=Math.min(i,n),r=new xt.Path({data:ke.path,fill:"#151F2E",stroke:"#334155",strokeWidth:3/s,shadowColor:"black",shadowBlur:20,shadowOpacity:.5,scaleX:s,scaleY:s,x:(e-300*s)/2,y:(t-400*s)/2,name:"partPath"});ee.add(r),St=r.getClientRect(),ke.ribs&&ke.ribs.length&&ke.ribs.forEach(o=>{const a=new xt.Rect({x:o.x*s+r.x(),y:o.y*s+r.y(),width:o.w*s,height:o.h*s,fill:"rgba(255, 50, 50, 0.25)",stroke:"rgba(255, 50, 50, 0.5)",strokeWidth:1,name:"rib",listening:!1});ee.add(a)})}async function yu(e,t){const i=ke.realSizeMm.w,n=ke.realSizeMm.h,s=ke.asset.src;let r=null,o=0,a=0;try{let c=await uu(s);if(nu)try{c=await fu(c)}catch{}const h=Math.max(1,c.naturalWidth),d=Math.max(1,c.naturalHeight),f=Math.min(e/h,t/d)||1;o=h*f,a=d*f,Ut=Math.min(o/i,a/n)||.1;const g=new xt.Rect({x:0,y:0,width:o,height:a,fill:"rgba(255,255,255,0.03)",listening:!1});ee.add(g),r=new xt.Image({image:c,x:0,y:0,width:o,height:a,shadowColor:"black",shadowBlur:18,shadowOpacity:.45,name:"partImage",listening:!1}),r.setAttr("isBackground",!0),ee.add(r),le=r}catch{o=Math.min(300,e),a=Math.min(400,t),Ut=Math.min(o/i,a/n)||.1,r=new xt.Rect({x:0,y:0,width:o,height:a,fill:"#2a2a2a",stroke:"#444",strokeWidth:2,name:"partPlaceholder",listening:!1}),r.setAttr("isBackground",!0),ee.add(r);const h=new xt.Text({text:ke.name||"",fontSize:16,fill:"#888",width:280,padding:10,align:"center",listening:!1});h.position({x:10,y:(a-h.height())/2}),ee.add(h),le=r}Et={x:0,y:0,width:o,height:a},St=Et,_u(0,0,o,a);const l=ee.getLayer();l&&l.batchDraw()}function _u(e,t,i,n){if(!Ce||Ut==null||i<=0||n<=0)return;Ce.destroyChildren();const s=vr*Ut,r=Math.ceil(i/s),o=Math.ceil(n/s);for(let l=0;l<=r;l++){const c=new xt.Line({points:[e+l*s,t,e+l*s,t+n],stroke:"rgba(255,255,255,0.06)",strokeWidth:1,strokeScaleEnabled:!1,listening:!1});c.setAttr("isBackground",!0),Ce.add(c)}for(let l=0;l<=o;l++){const c=new xt.Line({points:[e,t+l*s,e+i,t+l*s],stroke:"rgba(255,255,255,0.06)",strokeWidth:1,strokeScaleEnabled:!1,listening:!1});c.setAttr("isBackground",!0),Ce.add(c)}const a=Ce.getLayer();a&&a.batchDraw()}function vu(e,t,i){if(!i||i.length===0)return 0;const n=[...i].sort((s,r)=>s.areaMm2-r.areaMm2);if(e<=n[0].areaMm2)return fe[n[0].code]??0;if(e>=n[n.length-1].areaMm2)return fe[n[n.length-1].code]??0;for(let s=0;s<n.length-1;s++){const r=n[s],o=n[s+1];if(e>=r.areaMm2&&e<=o.areaMm2){const a=fe[r.code]??0,l=fe[o.code]??0,c=(e-r.areaMm2)/(o.areaMm2-r.areaMm2);return a+(l-a)*c}}return fe[n[0].code]??0}function wu(e,t,i){if(!i||i.length===0)return 0;const n=[...i].sort((r,o)=>(r.area||0)-(o.area||0));if(n[0].area!=null&&e<=n[0].area)return fe[n[0].code]??n[0].basePrice??0;const s=n[n.length-1];if(s.area!=null&&e>=s.area)return fe[s.code]??s.basePrice??0;for(let r=0;r<n.length-1;r++){const o=n[r],a=n[r+1],l=o.area??0,c=a.area??0;if(c>l&&e>=l&&e<=c){const h=fe[o.code]??o.basePrice??0,d=fe[a.code]??a.basePrice??0,f=(e-l)/(c-l);return h+(d-h)*f}}return fe[n[0].code]??n[0].basePrice??0}function Qs(e){const t=e.scaleX(),i=e.scaleY();if(e.className==="Ellipse"){const a=e.radiusX()*t,l=e.radiusY()*i;return{x:e.x()-a,y:e.y()-l,width:a*2,height:l*2}}const n=e.width()*t,s=e.height()*i,r=e.offsetX?e.offsetX():0,o=e.offsetY?e.offsetY():0;return{x:e.x()-(r*t||n/2),y:e.y()-(o*i||s/2),width:n,height:s}}function qr(e,t,i,n){if(!e||!ut)return;const s=e.scaleX(),r=e.scaleY();let o=0;e.className==="Ellipse"?o=Math.PI*(e.radiusX()*s)*(e.radiusY()*r):o=e.width()*s*e.height()*r;let a=null,l=null;Ct&&Ut!=null&&Ut>0&&(a=o/(Ut*Ut),l=a/(vr*vr));let c=!1,h=1;if(!Ct){const g=e.getClientRect(),p=ut.find(".rib");for(let _ of p)if(xt.Util.haveIntersection(_.getClientRect(),g)){c=!0,h=Yf;break}}let d;Ct&&a!=null&&n&&n[0]&&n[0].areaMm2!=null?d=vu(a,t,n):d=wu(o,t,n),c&&(d*=h),c?(e.stroke("#FF4444"),e.fill("rgba(255, 68, 68, 0.3)")):(e.stroke(t==="circle"?"#88E523":"#A0AEC0"),e.fill(t==="circle"?"rgba(136, 229, 35, 0.3)":"rgba(200, 200, 200, 0.3)"));const f={id:i,type:t,areaPx:o,areaMm2:a??void 0,cellsCount:l!=null?Math.round(l*100)/100:void 0,isComplex:c,price:d};zi.set(i,f),ei&&ei(Array.from(zi.values()))}function Su(e,t,i){if(!ut||!et||!kt)return;const n=i.find(g=>g.code===t);if(!n)return;const s=Date.now();let r,o;Ct&&Et?(r=Et.x+Et.width/2,o=Et.y+Et.height/2):St?(r=St.x+St.width/2,o=St.y+St.height/2):(r=ut.width()/2,o=ut.height()/2);let a;if(e==="circle"){let g,p;if(Ct&&Ut!=null&&n.mm)g=n.mm.w/2*Ut,p=n.mm.h/2*Ut;else{const _=n.radius??20;g=_,p=_}a=new xt.Ellipse({x:r,y:o,radiusX:g||15,radiusY:p||15,fill:"rgba(136, 229, 35, 0.3)",stroke:"#88E523",strokeWidth:1,draggable:!0,listening:!0,name:"dent",id:String(s)}),a.setAttr("type","circle")}else{let g,p;Ct&&Ut!=null&&n.mm?(g=(n.mm.w||n.w)*Ut,p=(n.mm.h||n.h)*Ut):(g=n.w??40,p=n.h??20),a=new xt.Rect({x:r,y:o,width:g,height:p,offsetX:g/2,offsetY:p/2,cornerRadius:5,fill:"rgba(200, 200, 200, 0.3)",stroke:"#A0AEC0",strokeWidth:1,draggable:!0,listening:!0,name:"dent",id:String(s)}),a.setAttr("type","strip")}if(a._dentMeta={id:s,type:e,sizes:i},Ct&&Et){const g=Qs(a);let p=0,_=0;g.x<Et.x?p=Et.x-g.x:g.x+g.width>Et.x+Et.width&&(p=Et.x+Et.width-(g.x+g.width)),g.y<Et.y?_=Et.y-g.y:g.y+g.height>Et.y+Et.height&&(_=Et.y+Et.height-(g.y+g.height)),(p!==0||_!==0)&&a.position({x:a.x()+p,y:a.y()+_})}a.dragBoundFunc(g=>{if(Ct)return g;const p=a.position(),_=a.getClientRect(),k=g.x-p.x,v=g.y-p.y,S={x:_.x+k,y:_.y+v,width:_.width,height:_.height};return $s(S)?g:p});const l=.1,c=()=>{const g=Math.max(l,a.scaleX()),p=Math.max(l,a.scaleY());a._lastGoodTransform={x:a.x(),y:a.y(),scaleX:g,scaleY:p,rotation:a.rotation()}};c();const h=(g,p)=>{const _=g.x(),k=g.y();return _>=p.x&&_<=p.x+p.width&&k>=p.y&&k<=p.y+p.height},d=()=>{if(qr(a,e,s,i),Ct&&St){const g=Qs(a);(wr(g,St)||h(a,St))&&c()}else $s(a.getClientRect())&&c()};a.on("dragstart",g=>{g.cancelBubble=!0,Vs(a),J&&J.draggable(!1)}),a.on("dragmove",()=>{Ct&&le&&is(a),Ct&&Dt&&_n(a),kt&&(kt.nodes([a]),kt.forceUpdate&&kt.forceUpdate()),d();const g=et.getLayer?et.getLayer():et;g&&g.batchDraw()}),a.on("dragend",()=>{Ct&&le&&is(a),Ct&&Dt&&_n(a),Pn(),d();const g=et.getLayer?et.getLayer():et;g&&g.batchDraw()}),a.on("transform",d),a.on("transformstart",()=>{J&&J.draggable(!1)}),a.on("transformend",()=>{if(Pn(),Ct&&St){const g=Qs(a);let p=0,_=0;g.x<St.x?p=St.x-g.x:g.x+g.width>St.x+St.width&&(p=St.x+St.width-(g.x+g.width)),g.y<St.y?_=St.y-g.y:g.y+g.height>St.y+St.height&&(_=St.y+St.height-(g.y+g.height)),(p!==0||_!==0)&&a.position({x:a.x()+p,y:a.y()+_})}if(a.className==="Rect"){const g=Math.max(2,a.width()*a.scaleX()),p=Math.max(2,a.height()*a.scaleY());a.width(g),a.height(p),a.scaleX(1),a.scaleY(1),a.offsetX(g/2),a.offsetY(p/2)}if(Ct&&le&&is(a),Cr(a),Sr(a),Ct&&St&&a._lastGoodTransform)if(!h(a,St))a.setAttrs(a._lastGoodTransform);else{const g=Math.max(l,a.scaleX()),p=Math.max(l,a.scaleY());a.scaleX(g),a.scaleY(p),c()}else!Ct&&!$s(a.getClientRect())&&a._lastGoodTransform&&a.setAttrs(a._lastGoodTransform);d(),Ct&&Dt&&_n(a)}),a.on("click tap",g=>{g.cancelBubble=!0,Ct&&(xi=a),Vs(a)}),et.add(a),Dt&&Dt.moveToTop(),Cr(a),Sr(a),Vl(a),Vs(a),d();const f=et.getLayer?et.getLayer():et;f&&f.batchDraw()}function oa(e){const t=$r();if(!t)return;t.rotation(t.rotation()+e);const i=t._dentMeta;i&&qr(t,i.type,i.id,i.sizes),t.getLayer()&&t.getLayer().batchDraw()}function aa(){const e=$r();if(!e||!e._dentMeta)return;zi.delete(e._dentMeta.id),kt.nodes([]),e.destroy();const t=et?et.getLayer():null;t&&t.batchDraw(),ei&&ei(Array.from(zi.values()))}function la(){if(et){if(et.destroyChildren(),zi.clear(),ut&&et){kt=new xt.Transformer({anchorStroke:"#88E523",anchorFill:"#0B121E",anchorSize:15,borderStroke:"#88E523",borderDash:[4,4],centeredScaling:!0,rotateEnabled:!0}),et.add(kt),Ct&&(Dt=null,Xl(),Dt&&et.add(Dt));const e=et.getLayer?et.getLayer():et;e&&e.batchDraw()}ei&&ei([])}}function Cu(){ut&&(ut.destroy(),ut=null),ee=null,Ce=null,et=null,kt=null,ke=null,fe={},ei=null,zi.clear(),St=null,Mn=null,Ut=null,Et=null,le=null,Ct=!1,Vr="",se=1,J=null,Ge=0,Fe=0,bi=null,Dt=null,xi=null}const pt={repairTypes:[{code:"R1",name:" ",mult:1},{code:"R2",name:" ",mult:.85}],materials:[{code:"M1",name:"",mult:1},{code:"M2",name:"",mult:1.3}],carClasses:[{code:"CLASS_STD",name:"",mult:1},{code:"CLASS_PREM",name:" / ",mult:1.2}],risks:[{code:"RK1",name:"",matrixKey:"K1"},{code:"RK2",name:"",matrixKey:"K2"},{code:"RK3",name:"",matrixKey:"K3"},{code:"RK4",name:"",matrixKey:"K4"}],disassembly:[{code:"Z0",name:" ",price:0},{code:"Z1",name:"",price:1e3},{code:"Z2",name:"",price:2e3},{code:"Z3",name:"",price:4e3},{code:"Z4",name:"+",price:3e3}],defaultMasters:[{name:"",rate:5e3},{name:"",rate:2500}],circleSizes:[{code:"S2",name:" ",basePrice:2e3,radius:15,area:706},{code:"S4",name:"  ",basePrice:3e3,radius:25,area:1963},{code:"S6",name:" ",basePrice:5e3,radius:35,area:3848},{code:"S8",name:" ",basePrice:7e3,radius:45,area:6361},{code:"S10",name:"  ",basePrice:12e3,radius:60,area:11309},{code:"S11",name:" ",basePrice:15e3,radius:75,area:17671}],stripSizes:[{code:"LS1",name:" . ",basePrice:4e3,w:40,h:20,area:800},{code:"LS2",name:" ",basePrice:6e3,w:80,h:10,area:800},{code:"LS3",name:" ",basePrice:9e3,w:120,h:10,area:1200},{code:"LS4",name:" ",basePrice:13e3,w:150,h:50,area:7500},{code:"LS5",name:" ",basePrice:16e3,w:200,h:100,area:2e4},{code:"LS6",name:" ",basePrice:22e3,w:250,h:150,area:37500},{code:"LS7",name:" ",basePrice:3e4,w:280,h:200,area:56e3},{code:"LS8",name:" ",basePrice:42e3,w:300,h:300,area:9e4}],complexityMatrix:{S2:{K1:1,K2:1.15,K3:2.3,K4:4},S4:{K1:1,K2:1.6,K3:2.3,K4:4},S6:{K1:1,K2:1.4,K3:2,K4:3},S8:{K1:1,K2:1.4,K3:1.8,K4:3},S10:{K1:1,K2:1.3,K3:1.6,K4:2.2},S11:{K1:1,K2:1.2,K3:1.9,K4:2.7},STRIP_DEFAULT:{K1:.95,K2:1,K3:1.15,K4:1.3}}},ku={door:{id:"door",name:"",icon:"door",path:"M20,20 L280,20 Q300,20 300,50 L300,350 Q300,380 280,380 L20,380 Q0,380 0,350 L0,50 Q0,20 20,20 Z",ribs:[{x:0,y:150,w:300,h:20},{x:0,y:320,w:300,h:30}]},hood:{id:"hood",name:"",icon:"hood",path:"M50,20 L250,20 Q280,20 290,100 L300,350 Q300,380 150,390 Q0,380 0,350 L10,100 Q20,20 50,20 Z",ribs:[{x:140,y:20,w:20,h:370},{x:50,y:100,w:200,h:20}]},fender:{id:"fender",name:"",icon:"fender",path:"M20,20 L250,20 Q280,20 280,100 L280,350 Q150,250 20,350 L20,20 Z",ribs:[{x:20,y:180,w:260,h:40}]},trunk:{id:"trunk",name:"",icon:"trunk",path:"M20,20 L280,20 L280,350 L20,350 Z",ribs:[{x:0,y:200,w:300,h:30}]}},Tu=[{id:"hood",name:"",icon:"hood",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/hood.jpg"},realSizeMm:{w:1570,h:1315}},{id:"door_front_left",name:"  ",icon:"door",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/door_front_left.jpg"},realSizeMm:{w:1112,h:950}},{id:"door_rear_left",name:"  ",icon:"door",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/door_rear_left.jpg"},realSizeMm:{w:1170,h:790}},{id:"fender_rear_right",name:"  ",icon:"fender",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/fender_rear_left.jpg"},realSizeMm:{w:585,h:390}}];function Mu(e){return Tu.filter(t=>t.classIds.includes(e))}const Pu=[{code:"S2",name:"",mm:{w:25,h:25}},{code:"S4",name:"",mm:{w:45,h:60}},{code:"S6",name:"",mm:{w:90,h:90}},{code:"S8",name:"",mm:{w:85,h:180}},{code:"S10",name:" ",mm:{w:220,h:220}},{code:"S11",name:" ",mm:{w:440,h:440}}];function Au(e,t){return Math.PI*(e/2)*(t/2)}const Eu=Pu.map(e=>({...e,areaMm2:Au(e.mm.w,e.mm.h)})),Ru=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},Ou={class:"max-w-md mx-auto relative h-screen flex flex-col bg-black text-white pb-[env(safe-area-inset-bottom)]"},Lu={key:0,class:"flex flex-col h-full"},Iu={class:"p-4 space-y-4 shrink-0 z-20 bg-black"},Du={class:"card-metallic rounded-2xl p-4 relative overflow-hidden text-center"},Gu={key:0,class:"text-2xl align-top"},Fu={class:"flex space-x-1 bg-[#151515] p-1 rounded-xl border border-[#333]"},Nu={class:"flex-1 overflow-y-auto p-4 pt-0 pb-24"},Bu={key:0,class:"space-y-4"},Hu={class:"card-metallic rounded-2xl p-5"},Wu={class:"mb-5"},ju={class:"flex space-x-3"},zu={class:"mb-2"},Uu={class:"relative group"},Xu=["value"],Yu={class:"card-metallic rounded-2xl p-5"},Ku={class:"relative"},Vu=["value"],$u={class:"card-metallic rounded-2xl p-5 space-y-4"},qu={class:"relative"},Qu=["value"],Ju={class:"relative"},Zu=["value"],t1={class:"relative"},e1=["value"],i1={class:"card-metallic rounded-2xl p-5"},n1={class:"relative"},s1=["value"],r1={key:1,class:"space-y-4"},o1={class:"card-metallic rounded-2xl p-5"},a1={class:"flex gap-3"},l1={class:"relative flex-1"},c1=["value"],h1={class:"flex items-center bg-[#151515] border border-[#333] rounded-xl px-4 min-w-[100px] justify-center shadow-inner"},d1={class:"card-metallic rounded-2xl p-5"},f1={class:"relative"},u1=["value"],g1={class:"card-metallic rounded-2xl p-5"},p1={class:"card-metallic rounded-2xl p-5 space-y-4"},m1={class:"relative"},b1=["value"],x1={class:"relative"},y1=["value"],_1={class:"relative"},v1=["value"],w1={class:"card-metallic rounded-2xl p-5"},S1={class:"relative"},C1=["value"],k1={key:2,class:"h-full flex flex-col"},T1={key:0,class:"space-y-4 animate-fade-in pt-4"},M1=["onClick"],P1={class:"text-4xl"},A1={class:"font-bold text-lg tracking-wide"},E1={key:1,class:"animate-fade-in h-full flex flex-col pt-4 p-4"},R1={class:"flex items-center justify-between mb-4"},O1={class:"grid grid-cols-2 gap-3"},L1=["onClick"],I1={class:"text-metric-green text-opacity-80 font-black text-2xl"},D1={key:0},G1={key:1},F1={key:2},N1={key:3},B1={key:4},H1={key:5},W1={class:"font-medium text-sm"},j1={key:2,class:"flex flex-col h-full animate-fade-in pt-2 p-4"},z1={class:"flex justify-between items-center mb-2"},U1={class:"text-xs text-metric-green font-bold uppercase tracking-widest"},X1={id:"canvas-wrapper",class:"canvas-editor-wrap flex-1 relative w-full min-h-[300px] overflow-hidden rounded-xl border border-white/10 shadow-2xl",style:{"background-color":"#0b0f14"}},Y1={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none opacity-50"},K1={class:"mt-2 flex items-center gap-2"},V1={class:"text-xs font-mono text-metric-green w-12 shrink-0 text-right"},$1={class:"mt-3 grid grid-cols-2 gap-3"},q1={key:1,class:"fixed top-4 left-1/2 transform -translate-x-1/2 z-40 card-metallic rounded-2xl p-4 relative overflow-hidden text-center max-w-[90%]"},Q1={key:0,class:"text-2xl align-top"},J1={class:"bg-[#151F2E] w-full rounded-t-2xl p-5 border-t border-white/10 shadow-2xl space-y-4 pb-8"},Z1={class:"flex justify-between items-center border-b border-white/5 pb-3"},t2={class:"text-white font-bold text-lg pl-1"},e2={class:"grid grid-cols-2 gap-3 max-h-[50vh] overflow-y-auto"},i2=["onClick"],n2={class:"text-metric-green font-bold text-base"},s2={class:"text-gray-400 text-xs text-center leading-tight"},r2={key:3,class:"p-4 space-y-4 overflow-y-auto pb-24"},o2={class:"card-metallic rounded-2xl p-5 space-y-3"},a2={class:"space-y-3"},l2=["onUpdate:modelValue"],c2=["onUpdate:modelValue"],h2=["onClick"],d2={class:"card-metallic rounded-2xl p-5"},f2={class:"flex flex-col"},u2={class:"font-bold text-sm text-gray-300"},g2={class:"text-xs text-gray-500"},p2=["onUpdate:modelValue"],m2={class:"card-metallic rounded-2xl p-5"},b2={class:"flex flex-col"},x2={class:"font-bold text-sm text-gray-300"},y2={class:"text-xs text-gray-500"},_2=["onUpdate:modelValue"],v2={key:4,class:"p-4 space-y-3 overflow-y-auto pb-24"},w2={class:"fixed bottom-0 left-0 w-full bg-[#050505] border-t border-[#222] flex justify-around items-center pb-[env(safe-area-inset-bottom)] z-50 shadow-[0_-5px_20px_rgba(0,0,0,0.8)]"},S2=["onClick"],C2={class:"text-2xl mb-1 filter drop-shadow-[0_0_5px_currentColor]"},k2={class:"text-[9px] font-bold uppercase tracking-widest"},T2={__name:"App",setup(e){const t=ai("calc"),i=ai("standard"),n=ai(1),s=[{id:"calc",label:"",icon:""},{id:"settings",label:"",icon:""},{id:"info",label:"",icon:""}],r=Di({shape:"circle",sizeCode:null,repairCode:null,riskCode:null,materialCode:null,carClassCode:null,disassemblyCode:null,hours:null,masterIndex:null}),o=()=>{const m={};return pt.circleSizes.forEach(u=>{m[u.code]=u.basePrice}),pt.stripSizes.forEach(u=>{m[u.code]=u.basePrice}),m},a=Di({prices:o(),masters:JSON.parse(JSON.stringify(pt.defaultMasters)),hourlyRate:0}),l=localStorage.getItem("dentRepairSettings_v5");if(l)try{const m=JSON.parse(l);m.prices&&Object.assign(a.prices,m.prices),m.masters&&(a.masters=m.masters)}catch(m){console.error("Failed to load settings",m)}const c=Di({selectedClass:null,selectedPart:null,dents:[]}),h={carClasses:[{id:"sedan",name:"",icon:""},{id:"crossover",name:"",icon:""},{id:"suv",name:"",icon:""}],get partsList(){return c.selectedClass?.id==="crossover"?Mu("crossover"):Object.values(ku)}},d=ai(!1),f=ai(null),g=ai(null),p=ai(1),_=fi(()=>r.shape==="circle"?pt.circleSizes:pt.stripSizes),k=fi(()=>{const m=c.selectedPart;return m?.realSizeMm&&m?.asset?.type==="image"?Eu:pt.circleSizes}),v=fi(()=>{if(!r.sizeCode||!r.repairCode||!r.riskCode||!r.materialCode||!r.carClassCode||!r.disassemblyCode)return 0;const m=a.prices[r.sizeCode]||0,u=pt.risks.find(Y=>Y.code===r.riskCode),b=u?u.matrixKey:"K2",A=(pt.complexityMatrix[r.sizeCode]||pt.complexityMatrix.STRIP_DEFAULT)[b]||1,R=pt.repairTypes.find(Y=>Y.code===r.repairCode)?.mult||1,j=pt.materials.find(Y=>Y.code===r.materialCode)?.mult||1,W=pt.carClasses.find(Y=>Y.code===r.carClassCode)?.mult||1,G=pt.disassembly.find(Y=>Y.code===r.disassemblyCode)?.price||0,P=m*R*j*A*W+G;return Math.round(P/500)*500}),S=fi(()=>{if(!r.hours||!r.repairCode||!r.riskCode||!r.materialCode||!r.carClassCode||!r.disassemblyCode)return 0;const m=pt.risks.find(P=>P.code===r.riskCode),u=m?m.matrixKey:"K2",b=pt.complexityMatrix.STRIP_DEFAULT[u]||1,M=pt.repairTypes.find(P=>P.code===r.repairCode)?.mult||1,A=pt.materials.find(P=>P.code===r.materialCode)?.mult||1,R=pt.carClasses.find(P=>P.code===r.carClassCode)?.mult||1,j=pt.disassembly.find(P=>P.code===r.disassemblyCode)?.price||0,G=r.hours*a.hourlyRate*M*A*b*R+j;return Math.round(G/100)*100}),T=fi(()=>{if(c.dents.length===0)return 0;const m=[...c.dents].sort((b,M)=>M.price-b.price);let u=m[0].price;for(let b=1;b<m.length;b++)u+=m[b].price*.5;return Math.round(u/100)*100}),C=fi(()=>t.value!=="calc"?0:i.value==="standard"?v.value:i.value==="time"?S.value:i.value==="graphics"?T.value:0),L=m=>new Intl.NumberFormat("ru-RU").format(m),E=m=>{const u=window.Telegram?.WebApp;u?.HapticFeedback&&u.isVersionAtLeast&&u.isVersionAtLeast("6.1")&&(m==="selection"&&u.HapticFeedback.selectionChanged(),m==="success"&&u.HapticFeedback.notificationOccurred("success"))},z=m=>{i.value=m,E("selection"),m==="graphics"&&n.value===3&&rs(()=>setTimeout(dt,100))},N=m=>{t.value=m,E("selection")},X=m=>{r.shape=m,r.sizeCode=null,E("selection")},q=()=>{r.sizeCode=null,r.repairCode=null,r.riskCode=null,r.materialCode=null,r.carClassCode=null,r.disassemblyCode=null,r.hours=null,r.masterIndex=null,E("selection")},at=()=>{r.masterIndex!==null&&(a.hourlyRate=a.masters[r.masterIndex].rate)},V=()=>a.masters.push({name:"",rate:0}),lt=m=>a.masters.splice(m,1),rt=()=>{const m={prices:a.prices,masters:a.masters};localStorage.setItem("dentRepairSettings_v5",JSON.stringify(m));const u=window.Telegram?.WebApp;u?.showPopup&&u?.isVersionAtLeast&&u.isVersionAtLeast("6.2")?u.showPopup({title:"",message:" ",buttons:[{type:"ok"}]}):alert(" "),E("success")},Q=()=>{confirm("   ?")&&(Object.assign(a.prices,o()),rt())},B=m=>{c.selectedClass=m,n.value=2,E("selection")},tt=m=>{c.selectedPart=m,n.value=3,E("selection"),rs(()=>setTimeout(dt,100))},H=()=>{n.value=2,c.dents=[],la(),E("selection")},ct=()=>{la(),c.dents=[],E("selection")};let gt=null,it=null;const dt=async()=>{if(!g.value||!c.selectedPart)return;gt&&it&&(gt.unobserve(it),gt=null,it=null);const m=typeof import.meta<"u"&&"/DentMetric/"||"";await gu(g.value,c.selectedPart,a.prices,u=>{c.dents=u},m),p.value=Ei(),it=g.value,gt=new ResizeObserver(()=>{g.value&&bu(g.value.offsetWidth,g.value.offsetHeight)}),gt.observe(it)},Ht=()=>{qs(p.value),p.value=Ei()},Ps=()=>{qs(Ei()+.1),p.value=Ei()},As=()=>{qs(Ei()-.1),p.value=Ei()},Xe=m=>{E("selection"),f.value=m,d.value=!0},ki=m=>{if(!c.selectedPart)return;E("selection"),d.value=!1;const u=f.value,b=u==="circle"?k.value:pt.stripSizes;Su(u,m,b)},Xi=()=>oa(-15),Ln=()=>oa(15),oi=()=>aa();qn(C,m=>{const u=window.Telegram?.WebApp?.MainButton;u&&(m>0?(u.setText(`: ${L(m)} `),u.show()):u.hide())});const Es=m=>{i.value!=="graphics"||n.value!==3||(m.key==="Delete"||m.key==="Backspace")&&(m.preventDefault(),aa())};return za(()=>{window.Telegram?.WebApp&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),window.Telegram.WebApp.MainButton.setParams({color:"#88E523",text_color:"#000000"})),window.addEventListener("keydown",Es)}),Ua(()=>{window.removeEventListener("keydown",Es),gt&&it&&(gt.unobserve(it),gt=null,it=null),Cu()}),(m,u)=>(K(),$("div",Ou,[t.value==="calc"?(K(),$("div",Lu,[y("div",Iu,[u[26]||(u[26]=y("div",{class:"flex justify-center pt-2 pb-2"},[y("img",{src:vd,alt:"DentMetric",class:"w-full max-w-[320px] h-auto object-contain drop-shadow-2xl",onerror:"this.style.display='none'"})],-1)),y("div",Du,[u[24]||(u[24]=y("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"},null,-1)),u[25]||(u[25]=y("div",{class:"text-[11px] uppercase font-bold text-gray-400 tracking-widest mb-1"}," ",-1)),y("div",{class:jt(["text-5xl font-black transition-all duration-300",C.value>0?"text-metric-green drop-shadow-[0_0_15px_rgba(136,229,35,0.3)]":"text-gray-600"])},[ar(mt(C.value>0?L(C.value):"---")+" ",1),C.value>0?(K(),$("span",Gu,"")):Jt("",!0)],2),y("div",{class:jt(["absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1/2 h-4 blur-xl transition-all duration-300",C.value>0?"bg-metric-green/10":"bg-transparent"])},null,2)]),y("div",Fu,[y("button",{onClick:u[0]||(u[0]=b=>z("standard")),class:jt(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="standard"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2),y("button",{onClick:u[1]||(u[1]=b=>z("time")),class:jt(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="time"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2),y("button",{onClick:u[2]||(u[2]=b=>z("graphics")),class:jt(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="graphics"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2)])]),y("div",Nu,[i.value==="standard"?(K(),$("div",Bu,[y("div",Hu,[y("div",Wu,[u[30]||(u[30]=y("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-3 tracking-widest"}," ",-1)),y("div",ju,[y("div",{onClick:u[3]||(u[3]=b=>X("circle")),class:jt(["flex-1 relative rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 border",r.shape==="circle"?"bg-[#222] border-metric-green shadow-neon":"bg-[#151515] border-white/5 hover:border-white/10"])},[y("div",{class:jt(["w-4 h-4 rounded-full border-2 mb-2 shadow-[0_0_5px_currentColor]",r.shape==="circle"?"border-metric-green bg-metric-green":"border-gray-500"])},null,2),y("span",{class:jt(["text-xs font-bold uppercase",r.shape==="circle"?"text-white":"text-gray-400"])},"/",2)],2),y("div",{onClick:u[4]||(u[4]=b=>X("strip")),class:jt(["flex-1 relative rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 border",r.shape==="strip"?"bg-[#222] border-metric-green shadow-neon":"bg-[#151515] border-white/5 hover:border-white/10"])},[y("div",{class:jt(["w-6 h-2 rounded-sm mb-3 shadow-[0_0_5px_currentColor]",r.shape==="strip"?"bg-metric-green":"bg-gray-500"])},null,2),y("span",{class:jt(["text-xs font-bold uppercase",r.shape==="strip"?"text-white":"text-gray-400"])},"",2)],2)]),u[31]||(u[31]=y("br",null,null,-1)),y("div",zu,[u[29]||(u[29]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),y("div",Uu,[Wt(y("select",{"onUpdate:modelValue":u[5]||(u[5]=b=>r.sizeCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[27]||(u[27]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(_.value,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,Xu))),128))],512),[[he,r.sizeCode]]),u[28]||(u[28]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])])]),y("div",Yu,[u[34]||(u[34]=y("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),y("div",Ku,[Wt(y("select",{"onUpdate:modelValue":u[6]||(u[6]=b=>r.repairCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[32]||(u[32]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).repairTypes,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,Vu))),128))],512),[[he,r.repairCode]]),u[33]||(u[33]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("div",$u,[u[44]||(u[44]=y("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),y("div",null,[u[37]||(u[37]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),y("div",qu,[Wt(y("select",{"onUpdate:modelValue":u[7]||(u[7]=b=>r.riskCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[35]||(u[35]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).risks,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,Qu))),128))],512),[[he,r.riskCode]]),u[36]||(u[36]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("div",null,[u[40]||(u[40]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),y("div",Ju,[Wt(y("select",{"onUpdate:modelValue":u[8]||(u[8]=b=>r.materialCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[38]||(u[38]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).materials,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,Zu))),128))],512),[[he,r.materialCode]]),u[39]||(u[39]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("div",null,[u[43]||(u[43]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),y("div",t1,[Wt(y("select",{"onUpdate:modelValue":u[9]||(u[9]=b=>r.carClassCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[41]||(u[41]=y("option",{value:null,disabled:"",selected:""},"  ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).carClasses,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,e1))),128))],512),[[he,r.carClassCode]]),u[42]||(u[42]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),y("div",i1,[u[47]||(u[47]=y("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),u[48]||(u[48]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),y("div",n1,[Wt(y("select",{"onUpdate:modelValue":u[10]||(u[10]=b=>r.disassemblyCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[45]||(u[45]=y("option",{value:null,disabled:"",selected:""},"  ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).disassembly,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,s1))),128))],512),[[he,r.disassemblyCode]]),u[46]||(u[46]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("button",{onClick:q,class:"w-full py-4 text-xs font-bold uppercase tracking-widest text-red-400 hover:text-red-300 hover:bg-red-900/10 border border-transparent hover:border-red-900/20 rounded-xl transition-all flex items-center justify-center space-x-2 opacity-80 hover:opacity-100"},[...u[49]||(u[49]=[y("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),y("span",null," ",-1)])])])):Jt("",!0),i.value==="time"?(K(),$("div",r1,[y("div",o1,[u[52]||(u[52]=y("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),y("div",a1,[y("div",l1,[Wt(y("select",{"onUpdate:modelValue":u[11]||(u[11]=b=>r.masterIndex=b),required:"",onChange:at,class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[50]||(u[50]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(a.masters,(b,M)=>(K(),$("option",{key:M,value:M},mt(b.name),9,c1))),128))],544),[[he,r.masterIndex]]),u[51]||(u[51]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))]),y("div",h1,[y("span",{class:jt(["text-sm font-bold",a.hourlyRate>0?"text-metric-green":"text-gray-600"])},mt(a.hourlyRate>0?L(a.hourlyRate):"---"),3)])])]),y("div",d1,[u[55]||(u[55]=y("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),y("div",f1,[Wt(y("select",{"onUpdate:modelValue":u[12]||(u[12]=b=>r.repairCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[53]||(u[53]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).repairTypes,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,u1))),128))],512),[[he,r.repairCode]]),u[54]||(u[54]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("div",g1,[u[56]||(u[56]=y("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"}," ()",-1)),Wt(y("input",{type:"number","onUpdate:modelValue":u[13]||(u[13]=b=>r.hours=b),min:"0",step:"0.5",placeholder:" ",inputmode:"decimal",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-xl font-bold shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none transition-colors placeholder-gray-600"},null,512),[[Mi,r.hours,void 0,{number:!0}]])]),y("div",p1,[u[66]||(u[66]=y("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),y("div",null,[u[59]||(u[59]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),y("div",m1,[Wt(y("select",{"onUpdate:modelValue":u[14]||(u[14]=b=>r.riskCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[57]||(u[57]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).risks,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,b1))),128))],512),[[he,r.riskCode]]),u[58]||(u[58]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("div",null,[u[62]||(u[62]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),y("div",x1,[Wt(y("select",{"onUpdate:modelValue":u[15]||(u[15]=b=>r.materialCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[60]||(u[60]=y("option",{value:null,disabled:"",selected:""}," ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).materials,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,y1))),128))],512),[[he,r.materialCode]]),u[61]||(u[61]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("div",null,[u[65]||(u[65]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),y("div",_1,[Wt(y("select",{"onUpdate:modelValue":u[16]||(u[16]=b=>r.carClassCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[63]||(u[63]=y("option",{value:null,disabled:"",selected:""},"  ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).carClasses,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,v1))),128))],512),[[he,r.carClassCode]]),u[64]||(u[64]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),y("div",w1,[u[69]||(u[69]=y("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),u[70]||(u[70]=y("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),y("div",S1,[Wt(y("select",{"onUpdate:modelValue":u[17]||(u[17]=b=>r.disassemblyCode=b),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[u[67]||(u[67]=y("option",{value:null,disabled:"",selected:""},"  ",-1)),(K(!0),$(wt,null,Nt(Zt(pt).disassembly,b=>(K(),$("option",{key:b.code,value:b.code},mt(b.name),9,C1))),128))],512),[[he,r.disassemblyCode]]),u[68]||(u[68]=y("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[y("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),y("button",{onClick:q,class:"w-full py-4 text-xs font-bold uppercase tracking-widest text-red-400 hover:text-red-300 hover:bg-red-900/10 border border-transparent hover:border-red-900/20 rounded-xl transition-all flex items-center justify-center space-x-2 opacity-80 hover:opacity-100"},[...u[71]||(u[71]=[y("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),y("span",null," ",-1)])])])):Jt("",!0),i.value==="graphics"?(K(),$("div",k1,[n.value===1?(K(),$("div",T1,[u[72]||(u[72]=y("h2",{class:"text-xl font-bold text-center mb-4 text-white"}," ",-1)),(K(!0),$(wt,null,Nt(h.carClasses,b=>(K(),$("button",{key:b.id,onClick:M=>B(b),class:"w-full card-metallic p-6 rounded-2xl flex flex-col items-center gap-3 active:scale-95 transition-transform border border-white/5 hover:border-metric-green/50"},[y("span",P1,mt(b.icon),1),y("span",A1,mt(b.name),1)],8,M1))),128))])):Jt("",!0),n.value===2?(K(),$("div",E1,[y("div",R1,[y("button",{onClick:u[18]||(u[18]=b=>n.value=1),class:"text-sm text-metric-silver hover:text-white px-2"}," "),u[73]||(u[73]=y("h2",{class:"text-xl font-bold text-white"}," ",-1)),u[74]||(u[74]=y("div",{class:"w-8"},null,-1))]),y("div",O1,[(K(!0),$(wt,null,Nt(h.partsList,b=>(K(),$("button",{key:b.id,onClick:M=>tt(b),class:"aspect-square card-metallic border border-white/5 rounded-2xl flex flex-col items-center justify-center gap-2 active:scale-95 transition-all hover:bg-white/5 hover:border-metric-green/30"},[y("div",I1,[b.icon==="door"?(K(),$("span",D1,"")):b.icon==="hood"?(K(),$("span",G1,"")):b.icon==="fender"?(K(),$("span",F1,"")):b.icon==="trunk"?(K(),$("span",N1,"")):b.icon==="roof"?(K(),$("span",B1,"")):(K(),$("span",H1,""))]),y("span",W1,mt(b.name),1)],8,L1))),128))])])):Jt("",!0),n.value===3?(K(),$("div",j1,[y("div",z1,[y("button",{onClick:H,class:"text-xs text-metric-silver px-2 py-1 rounded border border-white/10 hover:text-white"}," "),y("span",U1,mt(c.selectedPart?.name)+"  "+mt(c.selectedClass?.name),1),y("button",{onClick:ct,class:"text-xs text-red-400 px-2 py-1 hover:text-red-300"},"")]),y("div",X1,[y("div",{ref_key:"konvaContainer",ref:g,id:"konva-container",class:"absolute inset-0 w-full h-full",style:{"background-color":"#0b0f14"}},null,512),c.dents.length===0?(K(),$("div",Y1,[...u[75]||(u[75]=[y("div",{class:"text-center"},[y("div",{class:"text-2xl mb-1"},""),y("span",{class:"text-xs uppercase font-bold tracking-widest"}," ")],-1)])])):Jt("",!0)]),y("div",K1,[u[76]||(u[76]=y("span",{class:"text-[10px] text-gray-500 uppercase w-12 shrink-0"},"",-1)),y("button",{type:"button",class:"shrink-0 w-9 h-9 rounded-lg border border-white/10 bg-black/50 flex items-center justify-center text-metric-green font-bold text-lg hover:bg-white/5 active:scale-95",onClick:As,"aria-label":""},""),Wt(y("input",{type:"range",min:"0.5",max:"3",step:"0.05","onUpdate:modelValue":u[19]||(u[19]=b=>p.value=b),class:"flex-1 h-2 rounded-full appearance-none bg-white/10 accent-metric-green",onInput:Ht},null,544),[[Mi,p.value,void 0,{number:!0}]]),y("button",{type:"button",class:"shrink-0 w-9 h-9 rounded-lg border border-white/10 bg-black/50 flex items-center justify-center text-metric-green font-bold text-lg hover:bg-white/5 active:scale-95",onClick:Ps,"aria-label":""},"+"),y("span",V1,mt(Math.round(p.value*100))+"%",1)]),y("div",{class:"mt-3 grid grid-cols-3 gap-2 text-[11px]"},[y("button",{type:"button",class:"card-metallic px-2 py-2 rounded-xl flex flex-col items-center justify-center gap-1 active:scale-95 hover:border-metric-green/30 transition-all",onClick:Xi},[...u[77]||(u[77]=[y("span",{class:"text-base"}," -15",-1),y("span",{class:"text-[9px] text-gray-500"},"",-1)])]),y("button",{type:"button",class:"card-metallic px-2 py-2 rounded-xl flex flex-col items-center justify-center gap-1 active:scale-95 hover:border-metric-green/30 transition-all",onClick:Ln},[...u[78]||(u[78]=[y("span",{class:"text-base"}," +15",-1),y("span",{class:"text-[9px] text-gray-500"},"",-1)])]),y("button",{type:"button",class:"card-metallic px-2 py-2 rounded-xl flex flex-col items-center justify-center gap-1 active:scale-95 hover:border-red-400/60 transition-all",onClick:oi},[...u[79]||(u[79]=[y("span",{class:"text-base text-red-400"},"",-1),y("span",{class:"text-[9px] text-gray-500"},"",-1)])])]),y("div",$1,[y("button",{onClick:u[20]||(u[20]=b=>Xe("circle")),class:"card-metallic p-3 rounded-xl flex items-center gap-3 active:scale-95 hover:border-metric-green/30 transition-all"},[...u[80]||(u[80]=[y("div",{class:"w-6 h-6 rounded-full border-2 border-metric-green bg-metric-green/20"},null,-1),y("div",{class:"text-left"},[y("div",{class:"font-bold text-xs text-white"},""),y("div",{class:"text-[9px] text-gray-500"},"/")],-1)])]),y("button",{onClick:u[21]||(u[21]=b=>Xe("strip")),class:"card-metallic p-3 rounded-xl flex items-center gap-3 active:scale-95 hover:border-metric-green/30 transition-all"},[...u[81]||(u[81]=[y("div",{class:"w-6 h-2 bg-metric-silver rotate-45 rounded-sm"},null,-1),y("div",{class:"text-left"},[y("div",{class:"font-bold text-xs text-white"},""),y("div",{class:"text-[9px] text-gray-500"},"")],-1)])])])])):Jt("",!0)])):Jt("",!0)])])):Jt("",!0),t.value==="calc"&&i.value==="graphics"&&n.value===3?(K(),$("div",q1,[u[82]||(u[82]=y("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"},null,-1)),u[83]||(u[83]=y("div",{class:"text-[11px] uppercase font-bold text-gray-400 tracking-widest mb-1"}," ",-1)),y("div",{class:jt(["text-5xl font-black transition-all duration-300",C.value>0?"text-metric-green drop-shadow-[0_0_15px_rgba(136,229,35,0.3)]":"text-gray-600"])},[ar(mt(C.value>0?L(C.value):"---")+" ",1),C.value>0?(K(),$("span",Q1,"")):Jt("",!0)],2),y("div",{class:jt(["absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1/2 h-4 blur-xl transition-all duration-300",C.value>0?"bg-metric-green/10":"bg-transparent"])},null,2)])):Jt("",!0),d.value?(K(),$("div",{key:2,class:"absolute inset-0 z-50 flex items-end justify-center bg-black/80 backdrop-blur-sm animate-fade-in",onClick:u[23]||(u[23]=pd(b=>d.value=!1,["self"]))},[y("div",J1,[y("div",Z1,[y("h3",t2,"   ("+mt(f.value==="circle"?"/":"")+") ",1),y("button",{onClick:u[22]||(u[22]=b=>d.value=!1),class:"text-gray-400 p-2 text-xl"},"")]),y("div",e2,[(K(!0),$(wt,null,Nt(f.value==="circle"?k.value:Zt(pt).stripSizes,b=>(K(),$("button",{key:b.code,onClick:M=>ki(b.code),class:"card-metallic p-3 rounded-xl flex flex-col items-center justify-center gap-1 active:scale-95 transition-all hover:border-metric-green/50"},[y("span",n2,mt(b.code),1),y("span",s2,mt(b.name),1)],8,i2))),128))])])])):Jt("",!0),t.value==="settings"?(K(),$("div",r2,[u[88]||(u[88]=y("div",{class:"card-metallic rounded-2xl p-5"},[y("h2",{class:"text-xl font-bold mb-1 text-white"},"")],-1)),y("div",o2,[y("div",{class:"flex justify-between items-center mb-4"},[u[84]||(u[84]=y("div",{class:"text-[10px] font-bold text-metric-green uppercase tracking-widest"},"",-1)),y("button",{onClick:V,class:"text-xs text-metric-green border border-metric-green px-2 py-1 rounded hover:bg-metric-green hover:text-black transition-colors"},"+ ")]),y("div",a2,[(K(!0),$(wt,null,Nt(a.masters,(b,M)=>(K(),$("div",{key:M,class:"flex gap-2 items-center"},[Wt(y("input",{"onUpdate:modelValue":A=>b.name=A,placeholder:"",class:"flex-1 bg-[#151515] border border-[#333] rounded-lg p-2 text-sm text-white focus:border-metric-green outline-none"},null,8,l2),[[Mi,b.name]]),Wt(y("input",{type:"number","onUpdate:modelValue":A=>b.rate=A,placeholder:"/",class:"w-20 bg-[#151515] border border-[#333] rounded-lg p-2 text-sm text-right text-white focus:border-metric-green outline-none"},null,8,c2),[[Mi,b.rate,void 0,{number:!0}]]),y("button",{onClick:A=>lt(M),class:"text-red-500 p-2 hover:bg-red-900/20 rounded"},[...u[85]||(u[85]=[y("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[y("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,h2)]))),128))])]),y("div",d2,[u[86]||(u[86]=y("div",{class:"text-[10px] font-bold text-metric-green uppercase mb-4 tracking-widest"},"/ ()",-1)),(K(!0),$(wt,null,Nt(Zt(pt).circleSizes,b=>(K(),$("div",{key:b.code,class:"flex items-center justify-between mb-3 last:mb-0 border-b border-white/5 pb-2 last:border-0 last:pb-0"},[y("div",f2,[y("span",u2,mt(b.code),1),y("span",g2,mt(b.name),1)]),Wt(y("input",{type:"number","onUpdate:modelValue":M=>a.prices[b.code]=M,inputmode:"numeric",class:"w-28 bg-[#151515] border border-[#333] rounded-lg p-2 text-right font-medium text-white shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none"},null,8,p2),[[Mi,a.prices[b.code],void 0,{number:!0}]])]))),128))]),y("div",m2,[u[87]||(u[87]=y("div",{class:"text-[10px] font-bold text-metric-green uppercase mb-4 tracking-widest"}," ()",-1)),(K(!0),$(wt,null,Nt(Zt(pt).stripSizes,b=>(K(),$("div",{key:b.code,class:"flex items-center justify-between mb-3 last:mb-0 border-b border-white/5 pb-2 last:border-0 last:pb-0"},[y("div",b2,[y("span",x2,mt(b.code),1),y("span",y2,mt(b.name),1)]),Wt(y("input",{type:"number","onUpdate:modelValue":M=>a.prices[b.code]=M,inputmode:"numeric",class:"w-28 bg-[#151515] border border-[#333] rounded-lg p-2 text-right font-medium text-white shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none"},null,8,_2),[[Mi,a.prices[b.code],void 0,{number:!0}]])]))),128))]),y("div",{class:"flex flex-col space-y-3 pt-4"},[y("button",{onClick:rt,class:"w-full bg-metric-green text-black font-bold py-3.5 rounded-xl active:opacity-90 transition-opacity shadow-[0_0_15px_rgba(136,229,35,0.4)]"}," "),y("button",{onClick:Q,class:"w-full text-gray-400 text-sm font-medium py-3 hover:text-white transition-colors"},"  ")])])):Jt("",!0),t.value==="info"?(K(),$("div",v2,[...u[89]||(u[89]=[Dh('<div class="flex items-center justify-center pb-4" data-v-baf25bc5><div class="px-5 py-1.5 rounded-full border border-white/10 bg-[#1a1a1a] shadow-lg" data-v-baf25bc5><span class="text-[10px] font-bold uppercase text-metric-green tracking-widest" data-v-baf25bc5> &amp; FAQ</span></div></div><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-baf25bc5><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-baf25bc5><div class="flex items-center space-x-3" data-v-baf25bc5><span class="text-lg opacity-80" data-v-baf25bc5></span><span class="font-bold text-sm text-white" data-v-baf25bc5> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-baf25bc5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-baf25bc5></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-baf25bc5><ul class="space-y-2 list-disc pl-4 marker:text-metric-green" data-v-baf25bc5><li data-v-baf25bc5>     .</li><li data-v-baf25bc5>  : <span class="text-white font-bold" data-v-baf25bc5></span>, <span class="text-white font-bold" data-v-baf25bc5> </span>  <span class="text-white font-bold" data-v-baf25bc5></span>.</li><li data-v-baf25bc5>   =  .    .</li></ul></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-baf25bc5><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-baf25bc5><div class="flex items-center space-x-3" data-v-baf25bc5><span class="text-lg opacity-80" data-v-baf25bc5></span><span class="font-bold text-sm text-white" data-v-baf25bc5> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-baf25bc5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-baf25bc5></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-baf25bc5><ol class="space-y-3 list-decimal pl-4 marker:text-metric-green marker:font-bold" data-v-baf25bc5><li data-v-baf25bc5>   ().</li><li data-v-baf25bc5>   (/  ).</li><li data-v-baf25bc5>  (S2-S11  LS1-LS8).   .</li><li data-v-baf25bc5>  (, , , ).</li><li data-v-baf25bc5>   .</li></ol></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-baf25bc5><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-baf25bc5><div class="flex items-center space-x-3" data-v-baf25bc5><span class="text-lg opacity-80" data-v-baf25bc5></span><span class="font-bold text-sm text-white" data-v-baf25bc5> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-baf25bc5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-baf25bc5></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4 space-y-5" data-v-baf25bc5><div data-v-baf25bc5><div class="font-bold text-metric-green text-[10px] uppercase mb-1 tracking-widest" data-v-baf25bc5></div><div class="text-gray-400 leading-snug" data-v-baf25bc5>S ()  LS ().    .</div></div><div data-v-baf25bc5><div class="font-bold text-metric-green text-[10px] uppercase mb-2 tracking-widest" data-v-baf25bc5> (K)</div><div class="space-y-1.5" data-v-baf25bc5><div class="flex space-x-2" data-v-baf25bc5><span class="text-white font-bold w-6" data-v-baf25bc5>K1:</span><span data-v-baf25bc5></span></div><div class="flex space-x-2" data-v-baf25bc5><span class="text-white font-bold w-6" data-v-baf25bc5>K2:</span><span data-v-baf25bc5></span></div><div class="flex space-x-2" data-v-baf25bc5><span class="text-white font-bold w-6" data-v-baf25bc5>K3:</span><span data-v-baf25bc5>  ,  .</span></div><div class="flex space-x-2" data-v-baf25bc5><span class="text-white font-bold w-6" data-v-baf25bc5>K4:</span><span data-v-baf25bc5>   , .</span></div></div></div><div data-v-baf25bc5><div class="font-bold text-metric-green text-[10px] uppercase mb-1 tracking-widest" data-v-baf25bc5> </div><div class="text-gray-400 leading-snug" data-v-baf25bc5> (x1.0), / (x1.2).</div></div></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-baf25bc5><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-baf25bc5><div class="flex items-center space-x-3" data-v-baf25bc5><span class="text-lg opacity-80" data-v-baf25bc5></span><span class="font-bold text-sm text-white" data-v-baf25bc5>  </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-baf25bc5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-baf25bc5></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-baf25bc5><p class="mb-4 leading-snug" data-v-baf25bc5>      .</p><div class="bg-[#151515] border border-white/10 rounded-lg p-3 font-mono text-xs text-metric-green flex items-center justify-center" data-v-baf25bc5>  = (  )   </div></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-baf25bc5><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-baf25bc5><div class="flex items-center space-x-3" data-v-baf25bc5><span class="text-lg opacity-80" data-v-baf25bc5></span><span class="font-bold text-sm text-white" data-v-baf25bc5> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-baf25bc5><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-baf25bc5></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-baf25bc5><p class="mb-2" data-v-baf25bc5>      .</p><ol class="space-y-2 list-decimal pl-4 marker:text-metric-green marker:font-bold" data-v-baf25bc5><li data-v-baf25bc5>    .</li><li data-v-baf25bc5>  ()  .</li><li data-v-baf25bc5>    .</li><li data-v-baf25bc5><b class="text-white" data-v-baf25bc5> :</b>      (),   .</li></ol></div></details><div class="border border-red-500/30 bg-red-900/10 rounded-2xl p-4 flex gap-4 items-start mt-4" data-v-baf25bc5><div class="text-2xl pt-1" data-v-baf25bc5></div><div data-v-baf25bc5><div class="text-red-400 font-bold uppercase tracking-widest text-xs mb-1" data-v-baf25bc5></div><div class="text-sm text-gray-300 leading-relaxed" data-v-baf25bc5>   .          . </div></div></div>',7)])])):Jt("",!0),y("div",w2,[(K(),$(wt,null,Nt(s,b=>y("button",{key:b.id,onClick:M=>N(b.id),class:jt(["flex-1 py-4 flex flex-col items-center justify-center transition-all duration-300",t.value===b.id?"text-metric-green scale-105":"text-gray-600 hover:text-gray-400"])},[y("span",C2,mt(b.icon),1),y("span",k2,mt(b.label),1)],10,S2)),64))])]))}},M2=Ru(T2,[["__scopeId","data-v-baf25bc5"]]);xd(M2).mount("#app");
