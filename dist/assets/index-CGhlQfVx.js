(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function zr(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const At={},Gi=[],Ae=()=>{},Fa=()=>!1,Rn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),jr=e=>e.startsWith("onUpdate:"),Vt=Object.assign,Ur=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Ec=Object.prototype.hasOwnProperty,kt=(e,t)=>Ec.call(e,t),at=Array.isArray,Fi=e=>Ws(e)==="[object Map]",On=e=>Ws(e)==="[object Set]",Co=e=>Ws(e)==="[object Date]",ft=e=>typeof e=="function",Ht=e=>typeof e=="string",Re=e=>typeof e=="symbol",Dt=e=>e!==null&&typeof e=="object",Na=e=>(Dt(e)||ft(e))&&ft(e.then)&&ft(e.catch),Ba=Object.prototype.toString,Ws=e=>Ba.call(e),Rc=e=>Ws(e).slice(8,-1),Ha=e=>Ws(e)==="[object Object]",Xr=e=>Ht(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ps=zr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ln=e=>{const t=Object.create(null);return(i=>t[i]||(t[i]=e(i)))},Oc=/-\w/g,si=Ln(e=>e.replace(Oc,t=>t.slice(1).toUpperCase())),Lc=/\B([A-Z])/g,Ci=Ln(e=>e.replace(Lc,"-$1").toLowerCase()),Wa=Ln(e=>e.charAt(0).toUpperCase()+e.slice(1)),Kn=Ln(e=>e?`on${Wa(e)}`:""),ei=(e,t)=>!Object.is(e,t),cn=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},$a=(e,t,i,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:i})},In=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ko;const Dn=()=>ko||(ko=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Gn(e){if(at(e)){const t={};for(let i=0;i<e.length;i++){const s=e[i],n=Ht(s)?Fc(s):Gn(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(Ht(e)||Dt(e))return e}const Ic=/;(?![^(]*\))/g,Dc=/:([^]+)/,Gc=/\/\*[^]*?\*\//g;function Fc(e){const t={};return e.replace(Gc,"").split(Ic).forEach(i=>{if(i){const s=i.split(Dc);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ft(e){let t="";if(Ht(e))t=e;else if(at(e))for(let i=0;i<e.length;i++){const s=Ft(e[i]);s&&(t+=s+" ")}else if(Dt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Nc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Bc=zr(Nc);function za(e){return!!e||e===""}function Hc(e,t){if(e.length!==t.length)return!1;let i=!0;for(let s=0;i&&s<e.length;s++)i=Fn(e[s],t[s]);return i}function Fn(e,t){if(e===t)return!0;let i=Co(e),s=Co(t);if(i||s)return i&&s?e.getTime()===t.getTime():!1;if(i=Re(e),s=Re(t),i||s)return e===t;if(i=at(e),s=at(t),i||s)return i&&s?Hc(e,t):!1;if(i=Dt(e),s=Dt(t),i||s){if(!i||!s)return!1;const n=Object.keys(e).length,r=Object.keys(t).length;if(n!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Fn(e[o],t[o]))return!1}}return String(e)===String(t)}function Wc(e,t){return e.findIndex(i=>Fn(i,t))}const ja=e=>!!(e&&e.__v_isRef===!0),ot=e=>Ht(e)?e:e==null?"":at(e)||Dt(e)&&(e.toString===Ba||!ft(e.toString))?ja(e)?ot(e.value):JSON.stringify(e,Ua,2):String(e),Ua=(e,t)=>ja(t)?Ua(e,t.value):Fi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[s,n],r)=>(i[qn(s,r)+" =>"]=n,i),{})}:On(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>qn(i))}:Re(t)?qn(t):Dt(t)&&!at(t)&&!Ha(t)?String(t):t,qn=(e,t="")=>{var i;return Re(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};let ie;class $c{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ie,!t&&ie&&(this.index=(ie.scopes||(ie.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=ie;try{return ie=this,t()}finally{ie=i}}}on(){++this._on===1&&(this.prevScope=ie,ie=this)}off(){this._on>0&&--this._on===0&&(ie=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,s;for(i=0,s=this.effects.length;i<s;i++)this.effects[i].stop();for(this.effects.length=0,i=0,s=this.cleanups.length;i<s;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,s=this.scopes.length;i<s;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function zc(){return ie}let Lt;const Qn=new WeakSet;class Xa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ie&&ie.active&&ie.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qn.has(this)&&(Qn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Va(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Mo(this),Ka(this);const t=Lt,i=xe;Lt=this,xe=!0;try{return this.fn()}finally{qa(this),Lt=t,xe=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Kr(t);this.deps=this.depsTail=void 0,Mo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){pr(this)&&this.run()}get dirty(){return pr(this)}}let Ya=0,ms,bs;function Va(e,t=!1){if(e.flags|=8,t){e.next=bs,bs=e;return}e.next=ms,ms=e}function Yr(){Ya++}function Vr(){if(--Ya>0)return;if(bs){let t=bs;for(bs=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;ms;){let t=ms;for(ms=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=i}}if(e)throw e}function Ka(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function qa(e){let t,i=e.depsTail,s=i;for(;s;){const n=s.prevDep;s.version===-1?(s===i&&(i=n),Kr(s),jc(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}e.deps=t,e.depsTail=i}function pr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Os)||(e.globalVersion=Os,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!pr(e))))return;e.flags|=2;const t=e.dep,i=Lt,s=xe;Lt=e,xe=!0;try{Ka(e);const n=e.fn(e._value);(t.version===0||ei(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Lt=i,xe=s,qa(e),e.flags&=-3}}function Kr(e,t=!1){const{dep:i,prevSub:s,nextSub:n}=e;if(s&&(s.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=s,e.nextSub=void 0),i.subs===e&&(i.subs=s,!s&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)Kr(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function jc(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let xe=!0;const Ja=[];function Be(){Ja.push(xe),xe=!1}function He(){const e=Ja.pop();xe=e===void 0?!0:e}function Mo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Lt;Lt=void 0;try{t()}finally{Lt=i}}}let Os=0;class Uc{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qr{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Lt||!xe||Lt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Lt)i=this.activeLink=new Uc(Lt,this),Lt.deps?(i.prevDep=Lt.depsTail,Lt.depsTail.nextDep=i,Lt.depsTail=i):Lt.deps=Lt.depsTail=i,Za(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const s=i.nextDep;s.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=s),i.prevDep=Lt.depsTail,i.nextDep=void 0,Lt.depsTail.nextDep=i,Lt.depsTail=i,Lt.deps===i&&(Lt.deps=s)}return i}trigger(t){this.version++,Os++,this.notify(t)}notify(t){Yr();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{Vr()}}}function Za(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Za(s)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const mr=new WeakMap,vi=Symbol(""),br=Symbol(""),Ls=Symbol("");function Xt(e,t,i){if(xe&&Lt){let s=mr.get(e);s||mr.set(e,s=new Map);let n=s.get(i);n||(s.set(i,n=new qr),n.map=s,n.key=i),n.track()}}function Fe(e,t,i,s,n,r){const o=mr.get(e);if(!o){Os++;return}const a=l=>{l&&l.trigger()};if(Yr(),t==="clear")o.forEach(a);else{const l=at(e),d=l&&Xr(i);if(l&&i==="length"){const c=Number(s);o.forEach((h,u)=>{(u==="length"||u===Ls||!Re(u)&&u>=c)&&a(h)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),d&&a(o.get(Ls)),t){case"add":l?d&&a(o.get("length")):(a(o.get(vi)),Fi(e)&&a(o.get(br)));break;case"delete":l||(a(o.get(vi)),Fi(e)&&a(o.get(br)));break;case"set":Fi(e)&&a(o.get(vi));break}}Vr()}function Ei(e){const t=Ct(e);return t===e?t:(Xt(t,"iterate",Ls),me(e)?t:t.map(ye))}function Nn(e){return Xt(e=Ct(e),"iterate",Ls),e}function Ve(e,t){return We(e)?zi(_i(e)?ye(t):t):ye(t)}const Xc={__proto__:null,[Symbol.iterator](){return Jn(this,Symbol.iterator,e=>Ve(this,e))},concat(...e){return Ei(this).concat(...e.map(t=>at(t)?Ei(t):t))},entries(){return Jn(this,"entries",e=>(e[1]=Ve(this,e[1]),e))},every(e,t){return Ie(this,"every",e,t,void 0,arguments)},filter(e,t){return Ie(this,"filter",e,t,i=>i.map(s=>Ve(this,s)),arguments)},find(e,t){return Ie(this,"find",e,t,i=>Ve(this,i),arguments)},findIndex(e,t){return Ie(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ie(this,"findLast",e,t,i=>Ve(this,i),arguments)},findLastIndex(e,t){return Ie(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ie(this,"forEach",e,t,void 0,arguments)},includes(...e){return Zn(this,"includes",e)},indexOf(...e){return Zn(this,"indexOf",e)},join(e){return Ei(this).join(e)},lastIndexOf(...e){return Zn(this,"lastIndexOf",e)},map(e,t){return Ie(this,"map",e,t,void 0,arguments)},pop(){return Ji(this,"pop")},push(...e){return Ji(this,"push",e)},reduce(e,...t){return To(this,"reduce",e,t)},reduceRight(e,...t){return To(this,"reduceRight",e,t)},shift(){return Ji(this,"shift")},some(e,t){return Ie(this,"some",e,t,void 0,arguments)},splice(...e){return Ji(this,"splice",e)},toReversed(){return Ei(this).toReversed()},toSorted(e){return Ei(this).toSorted(e)},toSpliced(...e){return Ei(this).toSpliced(...e)},unshift(...e){return Ji(this,"unshift",e)},values(){return Jn(this,"values",e=>Ve(this,e))}};function Jn(e,t,i){const s=Nn(e),n=s[t]();return s!==e&&!me(e)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.done||(r.value=i(r.value)),r}),n}const Yc=Array.prototype;function Ie(e,t,i,s,n,r){const o=Nn(e),a=o!==e&&!me(e),l=o[t];if(l!==Yc[t]){const h=l.apply(e,r);return a?ye(h):h}let d=i;o!==e&&(a?d=function(h,u){return i.call(this,Ve(e,h),u,e)}:i.length>2&&(d=function(h,u){return i.call(this,h,u,e)}));const c=l.call(o,d,s);return a&&n?n(c):c}function To(e,t,i,s){const n=Nn(e);let r=i;return n!==e&&(me(e)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,e)}):r=function(o,a,l){return i.call(this,o,Ve(e,a),l,e)}),n[t](r,...s)}function Zn(e,t,i){const s=Ct(e);Xt(s,"iterate",Ls);const n=s[t](...i);return(n===-1||n===!1)&&Zr(i[0])?(i[0]=Ct(i[0]),s[t](...i)):n}function Ji(e,t,i=[]){Be(),Yr();const s=Ct(e)[t].apply(e,i);return Vr(),He(),s}const Vc=zr("__proto__,__v_isRef,__isVue"),tl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Re));function Kc(e){Re(e)||(e=String(e));const t=Ct(this);return Xt(t,"has",e),t.hasOwnProperty(e)}class el{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,s){if(i==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return r;if(i==="__v_raw")return s===(n?r?rd:rl:r?nl:sl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=at(t);if(!n){let l;if(o&&(l=Xc[i]))return l;if(i==="hasOwnProperty")return Kc}const a=Reflect.get(t,i,Yt(t)?t:s);if((Re(i)?tl.has(i):Vc(i))||(n||Xt(t,"get",i),r))return a;if(Yt(a)){const l=o&&Xr(i)?a:a.value;return n&&Dt(l)?yr(l):l}return Dt(a)?n?yr(a):Ni(a):a}}class il extends el{constructor(t=!1){super(!1,t)}set(t,i,s,n){let r=t[i];const o=at(t)&&Xr(i);if(!this._isShallow){const d=We(r);if(!me(s)&&!We(s)&&(r=Ct(r),s=Ct(s)),!o&&Yt(r)&&!Yt(s))return d||(r.value=s),!0}const a=o?Number(i)<t.length:kt(t,i),l=Reflect.set(t,i,s,Yt(t)?t:n);return t===Ct(n)&&(a?ei(s,r)&&Fe(t,"set",i,s):Fe(t,"add",i,s)),l}deleteProperty(t,i){const s=kt(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&s&&Fe(t,"delete",i,void 0),n}has(t,i){const s=Reflect.has(t,i);return(!Re(i)||!tl.has(i))&&Xt(t,"has",i),s}ownKeys(t){return Xt(t,"iterate",at(t)?"length":vi),Reflect.ownKeys(t)}}class qc extends el{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Qc=new il,Jc=new qc,Zc=new il(!0);const xr=e=>e,Xs=e=>Reflect.getPrototypeOf(e);function td(e,t,i){return function(...s){const n=this.__v_raw,r=Ct(n),o=Fi(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,d=n[e](...s),c=i?xr:t?zi:ye;return!t&&Xt(r,"iterate",l?br:vi),Vt(Object.create(d),{next(){const{value:h,done:u}=d.next();return u?{value:h,done:u}:{value:a?[c(h[0]),c(h[1])]:c(h),done:u}}})}}function Ys(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ed(e,t){const i={get(n){const r=this.__v_raw,o=Ct(r),a=Ct(n);e||(ei(n,a)&&Xt(o,"get",n),Xt(o,"get",a));const{has:l}=Xs(o),d=t?xr:e?zi:ye;if(l.call(o,n))return d(r.get(n));if(l.call(o,a))return d(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!e&&Xt(Ct(n),"iterate",vi),n.size},has(n){const r=this.__v_raw,o=Ct(r),a=Ct(n);return e||(ei(n,a)&&Xt(o,"has",n),Xt(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,l=Ct(a),d=t?xr:e?zi:ye;return!e&&Xt(l,"iterate",vi),a.forEach((c,h)=>n.call(r,d(c),d(h),o))}};return Vt(i,e?{add:Ys("add"),set:Ys("set"),delete:Ys("delete"),clear:Ys("clear")}:{add(n){!t&&!me(n)&&!We(n)&&(n=Ct(n));const r=Ct(this);return Xs(r).has.call(r,n)||(r.add(n),Fe(r,"add",n,n)),this},set(n,r){!t&&!me(r)&&!We(r)&&(r=Ct(r));const o=Ct(this),{has:a,get:l}=Xs(o);let d=a.call(o,n);d||(n=Ct(n),d=a.call(o,n));const c=l.call(o,n);return o.set(n,r),d?ei(r,c)&&Fe(o,"set",n,r):Fe(o,"add",n,r),this},delete(n){const r=Ct(this),{has:o,get:a}=Xs(r);let l=o.call(r,n);l||(n=Ct(n),l=o.call(r,n)),a&&a.call(r,n);const d=r.delete(n);return l&&Fe(r,"delete",n,void 0),d},clear(){const n=Ct(this),r=n.size!==0,o=n.clear();return r&&Fe(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=td(n,e,t)}),i}function Qr(e,t){const i=ed(e,t);return(s,n,r)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?s:Reflect.get(kt(i,n)&&n in s?i:s,n,r)}const id={get:Qr(!1,!1)},sd={get:Qr(!1,!0)},nd={get:Qr(!0,!1)};const sl=new WeakMap,nl=new WeakMap,rl=new WeakMap,rd=new WeakMap;function od(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ad(e){return e.__v_skip||!Object.isExtensible(e)?0:od(Rc(e))}function Ni(e){return We(e)?e:Jr(e,!1,Qc,id,sl)}function ld(e){return Jr(e,!1,Zc,sd,nl)}function yr(e){return Jr(e,!0,Jc,nd,rl)}function Jr(e,t,i,s,n){if(!Dt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=ad(e);if(r===0)return e;const o=n.get(e);if(o)return o;const a=new Proxy(e,r===2?s:i);return n.set(e,a),a}function _i(e){return We(e)?_i(e.__v_raw):!!(e&&e.__v_isReactive)}function We(e){return!!(e&&e.__v_isReadonly)}function me(e){return!!(e&&e.__v_isShallow)}function Zr(e){return e?!!e.__v_raw:!1}function Ct(e){const t=e&&e.__v_raw;return t?Ct(t):e}function cd(e){return!kt(e,"__v_skip")&&Object.isExtensible(e)&&$a(e,"__v_skip",!0),e}const ye=e=>Dt(e)?Ni(e):e,zi=e=>Dt(e)?yr(e):e;function Yt(e){return e?e.__v_isRef===!0:!1}function Ut(e){return dd(e,!1)}function dd(e,t){return Yt(e)?e:new hd(e,t)}class hd{constructor(t,i){this.dep=new qr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:Ct(t),this._value=i?t:ye(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,s=this.__v_isShallow||me(t)||We(t);t=s?t:Ct(t),ei(t,i)&&(this._rawValue=t,this._value=s?t:ye(t),this.dep.trigger())}}function Wt(e){return Yt(e)?e.value:e}const ud={get:(e,t,i)=>t==="__v_raw"?e:Wt(Reflect.get(e,t,i)),set:(e,t,i,s)=>{const n=e[t];return Yt(n)&&!Yt(i)?(n.value=i,!0):Reflect.set(e,t,i,s)}};function ol(e){return _i(e)?e:new Proxy(e,ud)}class fd{constructor(t,i,s){this.fn=t,this.setter=i,this._value=void 0,this.dep=new qr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Os-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Lt!==this)return Va(this,!0),!0}get value(){const t=this.dep.track();return Qa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gd(e,t,i=!1){let s,n;return ft(e)?s=e:(s=e.get,n=e.set),new fd(s,n,i)}const Vs={},yn=new WeakMap;let fi;function pd(e,t=!1,i=fi){if(i){let s=yn.get(i);s||yn.set(i,s=[]),s.push(e)}}function md(e,t,i=At){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:a,call:l}=i,d=k=>n?k:me(k)||n===!1||n===0?Ne(k,1):Ne(k);let c,h,u,f,g=!1,b=!1;if(Yt(e)?(h=()=>e.value,g=me(e)):_i(e)?(h=()=>d(e),g=!0):at(e)?(b=!0,g=e.some(k=>_i(k)||me(k)),h=()=>e.map(k=>{if(Yt(k))return k.value;if(_i(k))return d(k);if(ft(k))return l?l(k,2):k()})):ft(e)?t?h=l?()=>l(e,2):e:h=()=>{if(u){Be();try{u()}finally{He()}}const k=fi;fi=c;try{return l?l(e,3,[f]):e(f)}finally{fi=k}}:h=Ae,t&&n){const k=h,E=n===!0?1/0:n;h=()=>Ne(k(),E)}const v=zc(),_=()=>{c.stop(),v&&v.active&&Ur(v.effects,c)};if(r&&t){const k=t;t=(...E)=>{k(...E),_()}}let w=b?new Array(e.length).fill(Vs):Vs;const M=k=>{if(!(!(c.flags&1)||!c.dirty&&!k))if(t){const E=c.run();if(n||g||(b?E.some((A,V)=>ei(A,w[V])):ei(E,w))){u&&u();const A=fi;fi=c;try{const V=[E,w===Vs?void 0:b&&w[0]===Vs?[]:w,f];w=E,l?l(t,3,V):t(...V)}finally{fi=A}}}else c.run()};return a&&a(M),c=new Xa(h),c.scheduler=o?()=>o(M,!1):M,f=k=>pd(k,!1,c),u=c.onStop=()=>{const k=yn.get(c);if(k){if(l)l(k,4);else for(const E of k)E();yn.delete(c)}},t?s?M(!0):w=c.run():o?o(M.bind(null,!0),!0):c.run(),_.pause=c.pause.bind(c),_.resume=c.resume.bind(c),_.stop=_,_}function Ne(e,t=1/0,i){if(t<=0||!Dt(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=t))return e;if(i.set(e,t),t--,Yt(e))Ne(e.value,t,i);else if(at(e))for(let s=0;s<e.length;s++)Ne(e[s],t,i);else if(On(e)||Fi(e))e.forEach(s=>{Ne(s,t,i)});else if(Ha(e)){for(const s in e)Ne(e[s],t,i);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ne(e[s],t,i)}return e}function $s(e,t,i,s){try{return s?e(...s):e()}catch(n){Bn(n,t,i)}}function Oe(e,t,i,s){if(ft(e)){const n=$s(e,t,i,s);return n&&Na(n)&&n.catch(r=>{Bn(r,t,i)}),n}if(at(e)){const n=[];for(let r=0;r<e.length;r++)n.push(Oe(e[r],t,i,s));return n}}function Bn(e,t,i,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||At;if(t){let a=t.parent;const l=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,l,d)===!1)return}a=a.parent}if(r){Be(),$s(r,null,10,[e,l,d]),He();return}}bd(e,i,n,s,o)}function bd(e,t,i,s=!0,n=!1){if(n)throw e;console.error(e)}const Jt=[];let ke=-1;const Bi=[];let Ke=null,Li=0;const al=Promise.resolve();let vn=null;function gi(e){const t=vn||al;return e?t.then(this?e.bind(this):e):t}function xd(e){let t=ke+1,i=Jt.length;for(;t<i;){const s=t+i>>>1,n=Jt[s],r=Is(n);r<e||r===e&&n.flags&2?t=s+1:i=s}return t}function to(e){if(!(e.flags&1)){const t=Is(e),i=Jt[Jt.length-1];!i||!(e.flags&2)&&t>=Is(i)?Jt.push(e):Jt.splice(xd(t),0,e),e.flags|=1,ll()}}function ll(){vn||(vn=al.then(dl))}function yd(e){at(e)?Bi.push(...e):Ke&&e.id===-1?Ke.splice(Li+1,0,e):e.flags&1||(Bi.push(e),e.flags|=1),ll()}function Po(e,t,i=ke+1){for(;i<Jt.length;i++){const s=Jt[i];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Jt.splice(i,1),i--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function cl(e){if(Bi.length){const t=[...new Set(Bi)].sort((i,s)=>Is(i)-Is(s));if(Bi.length=0,Ke){Ke.push(...t);return}for(Ke=t,Li=0;Li<Ke.length;Li++){const i=Ke[Li];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Ke=null,Li=0}}const Is=e=>e.id==null?e.flags&2?-1:1/0:e.id;function dl(e){try{for(ke=0;ke<Jt.length;ke++){const t=Jt[ke];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),$s(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ke<Jt.length;ke++){const t=Jt[ke];t&&(t.flags&=-2)}ke=-1,Jt.length=0,cl(),vn=null,(Jt.length||Bi.length)&&dl()}}let pe=null,hl=null;function _n(e){const t=pe;return pe=e,hl=e&&e.type.__scopeId||null,t}function vd(e,t=pe,i){if(!t||e._n)return e;const s=(...n)=>{s._d&&Wo(-1);const r=_n(t);let o;try{o=e(...n)}finally{_n(r),s._d&&Wo(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function jt(e,t){if(pe===null)return e;const i=zn(pe),s=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,a,l=At]=t[n];r&&(ft(r)&&(r={mounted:r,updated:r}),r.deep&&Ne(o),s.push({dir:r,instance:i,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function di(e,t,i,s){const n=e.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let l=a.dir[s];l&&(Be(),Oe(l,i,8,[e.el,a,e,t]),He())}}function _d(e,t){if(Zt){let i=Zt.provides;const s=Zt.parent&&Zt.parent.provides;s===i&&(i=Zt.provides=Object.create(s)),i[e]=t}}function dn(e,t,i=!1){const s=yh();if(s||Hi){let n=Hi?Hi._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&ft(t)?t.call(s&&s.proxy):t}}const wd=Symbol.for("v-scx"),Sd=()=>dn(wd);function ue(e,t,i){return ul(e,t,i)}function ul(e,t,i=At){const{immediate:s,deep:n,flush:r,once:o}=i,a=Vt({},i),l=t&&s||!t&&r!=="post";let d;if(Gs){if(r==="sync"){const f=Sd();d=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Ae,f.resume=Ae,f.pause=Ae,f}}const c=Zt;a.call=(f,g,b)=>Oe(f,c,g,b);let h=!1;r==="post"?a.scheduler=f=>{qt(f,c&&c.suspense)}:r!=="sync"&&(h=!0,a.scheduler=(f,g)=>{g?f():to(f)}),a.augmentJob=f=>{t&&(f.flags|=4),h&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const u=md(e,t,a);return Gs&&(d?d.push(u):l&&u()),u}function Cd(e,t,i){const s=this.proxy,n=Ht(e)?e.includes(".")?fl(s,e):()=>s[e]:e.bind(s,s);let r;ft(t)?r=t:(r=t.handler,i=t);const o=zs(this),a=ul(n,r.bind(s),i);return o(),a}function fl(e,t){const i=t.split(".");return()=>{let s=e;for(let n=0;n<i.length&&s;n++)s=s[i[n]];return s}}const gl=Symbol("_vte"),kd=e=>e.__isTeleport,xs=e=>e&&(e.disabled||e.disabled===""),Ao=e=>e&&(e.defer||e.defer===""),Eo=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ro=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,vr=(e,t)=>{const i=e&&e.to;return Ht(i)?t?t(i):null:i},pl={name:"Teleport",__isTeleport:!0,process(e,t,i,s,n,r,o,a,l,d){const{mc:c,pc:h,pbc:u,o:{insert:f,querySelector:g,createText:b,createComment:v}}=d,_=xs(t.props);let{shapeFlag:w,children:M,dynamicChildren:k}=t;if(e==null){const E=t.el=b(""),A=t.anchor=b("");f(E,i,s),f(A,i,s);const V=(K,J)=>{w&16&&c(M,K,J,n,r,o,a,l)},O=()=>{const K=t.target=vr(t.props,g),J=ml(K,t,b,f);K&&(o!=="svg"&&Eo(K)?o="svg":o!=="mathml"&&Ro(K)&&(o="mathml"),n&&n.isCE&&(n.ce._teleportTargets||(n.ce._teleportTargets=new Set)).add(K),_||(V(K,J),hn(t,!1)))};_&&(V(i,A),hn(t,!0)),Ao(t.props)?(t.el.__isMounted=!1,qt(()=>{O(),delete t.el.__isMounted},r)):O()}else{if(Ao(t.props)&&e.el.__isMounted===!1){qt(()=>{pl.process(e,t,i,s,n,r,o,a,l,d)},r);return}t.el=e.el,t.targetStart=e.targetStart;const E=t.anchor=e.anchor,A=t.target=e.target,V=t.targetAnchor=e.targetAnchor,O=xs(e.props),K=O?i:A,J=O?E:V;if(o==="svg"||Eo(A)?o="svg":(o==="mathml"||Ro(A))&&(o="mathml"),k?(u(e.dynamicChildren,k,K,n,r,o,a),oo(e,t,!0)):l||h(e,t,K,J,n,r,o,a,!1),_)O?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ks(t,i,E,d,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const lt=t.target=vr(t.props,g);lt&&Ks(t,lt,null,d,0)}else O&&Ks(t,A,V,d,1);hn(t,_)}},remove(e,t,i,{um:s,o:{remove:n}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:d,targetAnchor:c,target:h,props:u}=e;if(h&&(n(d),n(c)),r&&n(l),o&16){const f=r||!xs(u);for(let g=0;g<a.length;g++){const b=a[g];s(b,t,i,f,!!b.dynamicChildren)}}},move:Ks,hydrate:Md};function Ks(e,t,i,{o:{insert:s},m:n},r=2){r===0&&s(e.targetAnchor,t,i);const{el:o,anchor:a,shapeFlag:l,children:d,props:c}=e,h=r===2;if(h&&s(o,t,i),(!h||xs(c))&&l&16)for(let u=0;u<d.length;u++)n(d[u],t,i,2);h&&s(a,t,i)}function Md(e,t,i,s,n,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:d,createText:c}},h){function u(b,v,_,w){v.anchor=h(o(b),v,a(b),i,s,n,r),v.targetStart=_,v.targetAnchor=w}const f=t.target=vr(t.props,l),g=xs(t.props);if(f){const b=f._lpa||f.firstChild;if(t.shapeFlag&16)if(g)u(e,t,b,b&&o(b));else{t.anchor=o(e);let v=b;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")t.targetStart=v;else if(v.data==="teleport anchor"){t.targetAnchor=v,f._lpa=t.targetAnchor&&o(t.targetAnchor);break}}v=o(v)}t.targetAnchor||ml(f,t,c,d),h(b&&o(b),t,f,i,s,n,r)}hn(t,g)}else g&&t.shapeFlag&16&&u(e,t,e,o(e));return t.anchor&&o(t.anchor)}const Td=pl;function hn(e,t){const i=e.ctx;if(i&&i.ut){let s,n;for(t?(s=e.el,n=e.anchor):(s=e.targetStart,n=e.targetAnchor);s&&s!==n;)s.nodeType===1&&s.setAttribute("data-v-owner",i.uid),s=s.nextSibling;i.ut()}}function ml(e,t,i,s){const n=t.targetStart=i(""),r=t.targetAnchor=i("");return n[gl]=r,e&&(s(n,e),s(r,e)),r}const Pd=Symbol("_leaveCb");function eo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,eo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const wn=new WeakMap;function ys(e,t,i,s,n=!1){if(at(e)){e.forEach((g,b)=>ys(g,t&&(at(t)?t[b]:t),i,s,n));return}if(vs(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ys(e,t,i,s.component.subTree);return}const r=s.shapeFlag&4?zn(s.component):s.el,o=n?null:r,{i:a,r:l}=e,d=t&&t.r,c=a.refs===At?a.refs={}:a.refs,h=a.setupState,u=Ct(h),f=h===At?Fa:g=>kt(u,g);if(d!=null&&d!==l){if(Oo(t),Ht(d))c[d]=null,f(d)&&(h[d]=null);else if(Yt(d)){d.value=null;const g=t;g.k&&(c[g.k]=null)}}if(ft(l))$s(l,a,12,[o,c]);else{const g=Ht(l),b=Yt(l);if(g||b){const v=()=>{if(e.f){const _=g?f(l)?h[l]:c[l]:l.value;if(n)at(_)&&Ur(_,r);else if(at(_))_.includes(r)||_.push(r);else if(g)c[l]=[r],f(l)&&(h[l]=c[l]);else{const w=[r];l.value=w,e.k&&(c[e.k]=w)}}else g?(c[l]=o,f(l)&&(h[l]=o)):b&&(l.value=o,e.k&&(c[e.k]=o))};if(o){const _=()=>{v(),wn.delete(e)};_.id=-1,wn.set(e,_),qt(_,i)}else Oo(e),v()}}}function Oo(e){const t=wn.get(e);t&&(t.flags|=8,wn.delete(e))}Dn().requestIdleCallback;Dn().cancelIdleCallback;const vs=e=>!!e.type.__asyncLoader,xl=e=>e.type.__isKeepAlive;function Ad(e,t){yl(e,"a",t)}function Ed(e,t){yl(e,"da",t)}function yl(e,t,i=Zt){const s=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Hn(t,s,i),i){let n=i.parent;for(;n&&n.parent;)xl(n.parent.vnode)&&Rd(s,t,i,n),n=n.parent}}function Rd(e,t,i,s){const n=Hn(t,e,s,!0);vl(()=>{Ur(s[t],n)},i)}function Hn(e,t,i=Zt,s=!1){if(i){const n=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{Be();const a=zs(i),l=Oe(t,i,e,o);return a(),He(),l});return s?n.unshift(r):n.push(r),r}}const $e=e=>(t,i=Zt)=>{(!Gs||e==="sp")&&Hn(e,(...s)=>t(...s),i)},Od=$e("bm"),io=$e("m"),Ld=$e("bu"),Id=$e("u"),so=$e("bum"),vl=$e("um"),Dd=$e("sp"),Gd=$e("rtg"),Fd=$e("rtc");function Nd(e,t=Zt){Hn("ec",e,t)}const Bd=Symbol.for("v-ndc");function wt(e,t,i,s){let n;const r=i,o=at(e);if(o||Ht(e)){const a=o&&_i(e);let l=!1,d=!1;a&&(l=!me(e),d=We(e),e=Nn(e)),n=new Array(e.length);for(let c=0,h=e.length;c<h;c++)n[c]=t(l?d?zi(ye(e[c])):ye(e[c]):e[c],c,void 0,r)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,r)}else if(Dt(e))if(e[Symbol.iterator])n=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);n=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const c=a[l];n[l]=t(e[c],c,l,r)}}else n=[];return n}const _r=e=>e?Wl(e)?zn(e):_r(e.parent):null,_s=Vt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_r(e.parent),$root:e=>_r(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>wl(e),$forceUpdate:e=>e.f||(e.f=()=>{to(e.update)}),$nextTick:e=>e.n||(e.n=gi.bind(e.proxy)),$watch:e=>Cd.bind(e)}),tr=(e,t)=>e!==At&&!e.__isScriptSetup&&kt(e,t),Hd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:l}=e;if(t[0]!=="$"){const u=o[t];if(u!==void 0)switch(u){case 1:return s[t];case 2:return n[t];case 4:return i[t];case 3:return r[t]}else{if(tr(s,t))return o[t]=1,s[t];if(n!==At&&kt(n,t))return o[t]=2,n[t];if(kt(r,t))return o[t]=3,r[t];if(i!==At&&kt(i,t))return o[t]=4,i[t];wr&&(o[t]=0)}}const d=_s[t];let c,h;if(d)return t==="$attrs"&&Xt(e.attrs,"get",""),d(e);if((c=a.__cssModules)&&(c=c[t]))return c;if(i!==At&&kt(i,t))return o[t]=4,i[t];if(h=l.config.globalProperties,kt(h,t))return h[t]},set({_:e},t,i){const{data:s,setupState:n,ctx:r}=e;return tr(n,t)?(n[t]=i,!0):s!==At&&kt(s,t)?(s[t]=i,!0):kt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:s,appContext:n,props:r,type:o}},a){let l;return!!(i[a]||e!==At&&a[0]!=="$"&&kt(e,a)||tr(t,a)||kt(r,a)||kt(s,a)||kt(_s,a)||kt(n.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:kt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function Lo(e){return at(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let wr=!0;function Wd(e){const t=wl(e),i=e.proxy,s=e.ctx;wr=!1,t.beforeCreate&&Io(t.beforeCreate,e,"bc");const{data:n,computed:r,methods:o,watch:a,provide:l,inject:d,created:c,beforeMount:h,mounted:u,beforeUpdate:f,updated:g,activated:b,deactivated:v,beforeDestroy:_,beforeUnmount:w,destroyed:M,unmounted:k,render:E,renderTracked:A,renderTriggered:V,errorCaptured:O,serverPrefetch:K,expose:J,inheritAttrs:lt,components:Z,directives:st,filters:ct}=t;if(d&&$d(d,s,null),o)for(const R in o){const m=o[R];ft(m)&&(s[R]=m.bind(i))}if(n){const R=n.call(i,i);Dt(R)&&(e.data=Ni(R))}if(wr=!0,r)for(const R in r){const m=r[R],T=ft(m)?m.bind(i,i):ft(m.get)?m.get.bind(i,i):Ae,gt=!ft(m)&&ft(m.set)?m.set.bind(i):Ae,F=Qt({get:T,set:gt});Object.defineProperty(s,R,{enumerable:!0,configurable:!0,get:()=>F.value,set:W=>F.value=W})}if(a)for(const R in a)_l(a[R],s,i,R);if(l){const R=ft(l)?l.call(i):l;Reflect.ownKeys(R).forEach(m=>{_d(m,R[m])})}c&&Io(c,e,"c");function j(R,m){at(m)?m.forEach(T=>R(T.bind(i))):m&&R(m.bind(i))}if(j(Od,h),j(io,u),j(Ld,f),j(Id,g),j(Ad,b),j(Ed,v),j(Nd,O),j(Fd,A),j(Gd,V),j(so,w),j(vl,k),j(Dd,K),at(J))if(J.length){const R=e.exposed||(e.exposed={});J.forEach(m=>{Object.defineProperty(R,m,{get:()=>i[m],set:T=>i[m]=T,enumerable:!0})})}else e.exposed||(e.exposed={});E&&e.render===Ae&&(e.render=E),lt!=null&&(e.inheritAttrs=lt),Z&&(e.components=Z),st&&(e.directives=st),K&&bl(e)}function $d(e,t,i=Ae){at(e)&&(e=Sr(e));for(const s in e){const n=e[s];let r;Dt(n)?"default"in n?r=dn(n.from||s,n.default,!0):r=dn(n.from||s):r=dn(n),Yt(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Io(e,t,i){Oe(at(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,i)}function _l(e,t,i,s){let n=s.includes(".")?fl(i,s):()=>i[s];if(Ht(e)){const r=t[e];ft(r)&&ue(n,r)}else if(ft(e))ue(n,e.bind(i));else if(Dt(e))if(at(e))e.forEach(r=>_l(r,t,i,s));else{const r=ft(e.handler)?e.handler.bind(i):t[e.handler];ft(r)&&ue(n,r,e)}}function wl(e){const t=e.type,{mixins:i,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!n.length&&!i&&!s?l=t:(l={},n.length&&n.forEach(d=>Sn(l,d,o,!0)),Sn(l,t,o)),Dt(t)&&r.set(t,l),l}function Sn(e,t,i,s=!1){const{mixins:n,extends:r}=t;r&&Sn(e,r,i,!0),n&&n.forEach(o=>Sn(e,o,i,!0));for(const o in t)if(!(s&&o==="expose")){const a=zd[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const zd={data:Do,props:Go,emits:Go,methods:as,computed:as,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:as,directives:as,watch:Ud,provide:Do,inject:jd};function Do(e,t){return t?e?function(){return Vt(ft(e)?e.call(this,this):e,ft(t)?t.call(this,this):t)}:t:e}function jd(e,t){return as(Sr(e),Sr(t))}function Sr(e){if(at(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function Kt(e,t){return e?[...new Set([].concat(e,t))]:t}function as(e,t){return e?Vt(Object.create(null),e,t):t}function Go(e,t){return e?at(e)&&at(t)?[...new Set([...e,...t])]:Vt(Object.create(null),Lo(e),Lo(t??{})):t}function Ud(e,t){if(!e)return t;if(!t)return e;const i=Vt(Object.create(null),e);for(const s in t)i[s]=Kt(e[s],t[s]);return i}function Sl(){return{app:null,config:{isNativeTag:Fa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xd=0;function Yd(e,t){return function(s,n=null){ft(s)||(s=Vt({},s)),n!=null&&!Dt(n)&&(n=null);const r=Sl(),o=new WeakSet,a=[];let l=!1;const d=r.app={_uid:Xd++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:kh,get config(){return r.config},set config(c){},use(c,...h){return o.has(c)||(c&&ft(c.install)?(o.add(c),c.install(d,...h)):ft(c)&&(o.add(c),c(d,...h))),d},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),d},component(c,h){return h?(r.components[c]=h,d):r.components[c]},directive(c,h){return h?(r.directives[c]=h,d):r.directives[c]},mount(c,h,u){if(!l){const f=d._ceVNode||be(s,n);return f.appContext=r,u===!0?u="svg":u===!1&&(u=void 0),e(f,c,u),l=!0,d._container=c,c.__vue_app__=d,zn(f.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Oe(a,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(c,h){return r.provides[c]=h,d},runWithContext(c){const h=Hi;Hi=d;try{return c()}finally{Hi=h}}};return d}}let Hi=null;const Vd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${si(t)}Modifiers`]||e[`${Ci(t)}Modifiers`];function Kd(e,t,...i){if(e.isUnmounted)return;const s=e.vnode.props||At;let n=i;const r=t.startsWith("update:"),o=r&&Vd(s,t.slice(7));o&&(o.trim&&(n=i.map(c=>Ht(c)?c.trim():c)),o.number&&(n=i.map(In)));let a,l=s[a=Kn(t)]||s[a=Kn(si(t))];!l&&r&&(l=s[a=Kn(Ci(t))]),l&&Oe(l,e,6,n);const d=s[a+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Oe(d,e,6,n)}}const qd=new WeakMap;function Cl(e,t,i=!1){const s=i?qd:t.emitsCache,n=s.get(e);if(n!==void 0)return n;const r=e.emits;let o={},a=!1;if(!ft(e)){const l=d=>{const c=Cl(d,t,!0);c&&(a=!0,Vt(o,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Dt(e)&&s.set(e,null),null):(at(r)?r.forEach(l=>o[l]=null):Vt(o,r),Dt(e)&&s.set(e,o),o)}function Wn(e,t){return!e||!Rn(t)?!1:(t=t.slice(2).replace(/Once$/,""),kt(e,t[0].toLowerCase()+t.slice(1))||kt(e,Ci(t))||kt(e,t))}function Fo(e){const{type:t,vnode:i,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:l,render:d,renderCache:c,props:h,data:u,setupState:f,ctx:g,inheritAttrs:b}=e,v=_n(e);let _,w;try{if(i.shapeFlag&4){const k=n||s,E=k;_=Me(d.call(E,k,c,h,f,u,g)),w=a}else{const k=t;_=Me(k.length>1?k(h,{attrs:a,slots:o,emit:l}):k(h,null)),w=t.props?a:Qd(a)}}catch(k){ws.length=0,Bn(k,e,1),_=be(ni)}let M=_;if(w&&b!==!1){const k=Object.keys(w),{shapeFlag:E}=M;k.length&&E&7&&(r&&k.some(jr)&&(w=Jd(w,r)),M=ji(M,w,!1,!0))}return i.dirs&&(M=ji(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(i.dirs):i.dirs),i.transition&&eo(M,i.transition),_=M,_n(v),_}const Qd=e=>{let t;for(const i in e)(i==="class"||i==="style"||Rn(i))&&((t||(t={}))[i]=e[i]);return t},Jd=(e,t)=>{const i={};for(const s in e)(!jr(s)||!(s.slice(9)in t))&&(i[s]=e[s]);return i};function Zd(e,t,i){const{props:s,children:n,component:r}=e,{props:o,children:a,patchFlag:l}=t,d=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return s?No(s,o,d):!!o;if(l&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const u=c[h];if(o[u]!==s[u]&&!Wn(d,u))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?No(s,o,d):!0:!!o;return!1}function No(e,t,i){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==e[r]&&!Wn(i,r))return!0}return!1}function th({vnode:e,parent:t},i){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=i,t=t.parent;else break}}const kl={},Ml=()=>Object.create(kl),Tl=e=>Object.getPrototypeOf(e)===kl;function eh(e,t,i,s=!1){const n={},r=Ml();e.propsDefaults=Object.create(null),Pl(e,t,n,r);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);i?e.props=s?n:ld(n):e.type.props?e.props=n:e.props=r,e.attrs=r}function ih(e,t,i,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=e,a=Ct(n),[l]=e.propsOptions;let d=!1;if((s||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let h=0;h<c.length;h++){let u=c[h];if(Wn(e.emitsOptions,u))continue;const f=t[u];if(l)if(kt(r,u))f!==r[u]&&(r[u]=f,d=!0);else{const g=si(u);n[g]=Cr(l,a,g,f,e,!1)}else f!==r[u]&&(r[u]=f,d=!0)}}}else{Pl(e,t,n,r)&&(d=!0);let c;for(const h in a)(!t||!kt(t,h)&&((c=Ci(h))===h||!kt(t,c)))&&(l?i&&(i[h]!==void 0||i[c]!==void 0)&&(n[h]=Cr(l,a,h,void 0,e,!0)):delete n[h]);if(r!==a)for(const h in r)(!t||!kt(t,h))&&(delete r[h],d=!0)}d&&Fe(e.attrs,"set","")}function Pl(e,t,i,s){const[n,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(ps(l))continue;const d=t[l];let c;n&&kt(n,c=si(l))?!r||!r.includes(c)?i[c]=d:(a||(a={}))[c]=d:Wn(e.emitsOptions,l)||(!(l in s)||d!==s[l])&&(s[l]=d,o=!0)}if(r){const l=Ct(i),d=a||At;for(let c=0;c<r.length;c++){const h=r[c];i[h]=Cr(n,l,h,d[h],e,!kt(d,h))}}return o}function Cr(e,t,i,s,n,r){const o=e[i];if(o!=null){const a=kt(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ft(l)){const{propsDefaults:d}=n;if(i in d)s=d[i];else{const c=zs(n);s=d[i]=l.call(null,t),c()}}else s=l;n.ce&&n.ce._setProp(i,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Ci(i))&&(s=!0))}return s}const sh=new WeakMap;function Al(e,t,i=!1){const s=i?sh:t.propsCache,n=s.get(e);if(n)return n;const r=e.props,o={},a=[];let l=!1;if(!ft(e)){const c=h=>{l=!0;const[u,f]=Al(h,t,!0);Vt(o,u),f&&a.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return Dt(e)&&s.set(e,Gi),Gi;if(at(r))for(let c=0;c<r.length;c++){const h=si(r[c]);Bo(h)&&(o[h]=At)}else if(r)for(const c in r){const h=si(c);if(Bo(h)){const u=r[c],f=o[h]=at(u)||ft(u)?{type:u}:Vt({},u),g=f.type;let b=!1,v=!0;if(at(g))for(let _=0;_<g.length;++_){const w=g[_],M=ft(w)&&w.name;if(M==="Boolean"){b=!0;break}else M==="String"&&(v=!1)}else b=ft(g)&&g.name==="Boolean";f[0]=b,f[1]=v,(b||kt(f,"default"))&&a.push(h)}}const d=[o,a];return Dt(e)&&s.set(e,d),d}function Bo(e){return e[0]!=="$"&&!ps(e)}const no=e=>e==="_"||e==="_ctx"||e==="$stable",ro=e=>at(e)?e.map(Me):[Me(e)],nh=(e,t,i)=>{if(t._n)return t;const s=vd((...n)=>ro(t(...n)),i);return s._c=!1,s},El=(e,t,i)=>{const s=e._ctx;for(const n in e){if(no(n))continue;const r=e[n];if(ft(r))t[n]=nh(n,r,s);else if(r!=null){const o=ro(r);t[n]=()=>o}}},Rl=(e,t)=>{const i=ro(t);e.slots.default=()=>i},Ol=(e,t,i)=>{for(const s in t)(i||!no(s))&&(e[s]=t[s])},rh=(e,t,i)=>{const s=e.slots=Ml();if(e.vnode.shapeFlag&32){const n=t._;n?(Ol(s,t,i),i&&$a(s,"_",n,!0)):El(t,s)}else t&&Rl(e,t)},oh=(e,t,i)=>{const{vnode:s,slots:n}=e;let r=!0,o=At;if(s.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:Ol(n,t,i):(r=!t.$stable,El(t,n)),o=t}else t&&(Rl(e,t),o={default:1});if(r)for(const a in n)!no(a)&&o[a]==null&&delete n[a]},qt=hh;function ah(e){return lh(e)}function lh(e,t){const i=Dn();i.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:l,setText:d,setElementText:c,parentNode:h,nextSibling:u,setScopeId:f=Ae,insertStaticContent:g}=e,b=(y,S,P,N=null,L=null,I=null,q=void 0,Y=null,X=!!S.dynamicChildren)=>{if(y===S)return;y&&!Zi(y,S)&&(N=Us(y),W(y,L,I,!0),y=null),S.patchFlag===-2&&(X=!1,S.dynamicChildren=null);const{type:G,ref:nt,shapeFlag:Q}=S;switch(G){case $n:v(y,S,P,N);break;case ni:_(y,S,P,N);break;case un:y==null&&w(S,P,N,q);break;case ut:Z(y,S,P,N,L,I,q,Y,X);break;default:Q&1?E(y,S,P,N,L,I,q,Y,X):Q&6?st(y,S,P,N,L,I,q,Y,X):(Q&64||Q&128)&&G.process(y,S,P,N,L,I,q,Y,X,qi)}nt!=null&&L?ys(nt,y&&y.ref,I,S||y,!S):nt==null&&y&&y.ref!=null&&ys(y.ref,null,I,y,!0)},v=(y,S,P,N)=>{if(y==null)s(S.el=a(S.children),P,N);else{const L=S.el=y.el;S.children!==y.children&&d(L,S.children)}},_=(y,S,P,N)=>{y==null?s(S.el=l(S.children||""),P,N):S.el=y.el},w=(y,S,P,N)=>{[y.el,y.anchor]=g(y.children,S,P,N,y.el,y.anchor)},M=({el:y,anchor:S},P,N)=>{let L;for(;y&&y!==S;)L=u(y),s(y,P,N),y=L;s(S,P,N)},k=({el:y,anchor:S})=>{let P;for(;y&&y!==S;)P=u(y),n(y),y=P;n(S)},E=(y,S,P,N,L,I,q,Y,X)=>{if(S.type==="svg"?q="svg":S.type==="math"&&(q="mathml"),y==null)A(S,P,N,L,I,q,Y,X);else{const G=y.el&&y.el._isVueCE?y.el:null;try{G&&G._beginPatch(),K(y,S,L,I,q,Y,X)}finally{G&&G._endPatch()}}},A=(y,S,P,N,L,I,q,Y)=>{let X,G;const{props:nt,shapeFlag:Q,transition:it,dirs:dt}=y;if(X=y.el=o(y.type,I,nt&&nt.is,nt),Q&8?c(X,y.children):Q&16&&O(y.children,X,null,N,L,er(y,I),q,Y),dt&&di(y,null,N,"created"),V(X,y,y.scopeId,q,N),nt){for(const Rt in nt)Rt!=="value"&&!ps(Rt)&&r(X,Rt,null,nt[Rt],I,N);"value"in nt&&r(X,"value",null,nt.value,I),(G=nt.onVnodeBeforeMount)&&Ce(G,N,y)}dt&&di(y,null,N,"beforeMount");const xt=ch(L,it);xt&&it.beforeEnter(X),s(X,S,P),((G=nt&&nt.onVnodeMounted)||xt||dt)&&qt(()=>{G&&Ce(G,N,y),xt&&it.enter(X),dt&&di(y,null,N,"mounted")},L)},V=(y,S,P,N,L)=>{if(P&&f(y,P),N)for(let I=0;I<N.length;I++)f(y,N[I]);if(L){let I=L.subTree;if(S===I||Dl(I.type)&&(I.ssContent===S||I.ssFallback===S)){const q=L.vnode;V(y,q,q.scopeId,q.slotScopeIds,L.parent)}}},O=(y,S,P,N,L,I,q,Y,X=0)=>{for(let G=X;G<y.length;G++){const nt=y[G]=Y?qe(y[G]):Me(y[G]);b(null,nt,S,P,N,L,I,q,Y)}},K=(y,S,P,N,L,I,q)=>{const Y=S.el=y.el;let{patchFlag:X,dynamicChildren:G,dirs:nt}=S;X|=y.patchFlag&16;const Q=y.props||At,it=S.props||At;let dt;if(P&&hi(P,!1),(dt=it.onVnodeBeforeUpdate)&&Ce(dt,P,S,y),nt&&di(S,y,P,"beforeUpdate"),P&&hi(P,!0),(Q.innerHTML&&it.innerHTML==null||Q.textContent&&it.textContent==null)&&c(Y,""),G?J(y.dynamicChildren,G,Y,P,N,er(S,L),I):q||m(y,S,Y,null,P,N,er(S,L),I,!1),X>0){if(X&16)lt(Y,Q,it,P,L);else if(X&2&&Q.class!==it.class&&r(Y,"class",null,it.class,L),X&4&&r(Y,"style",Q.style,it.style,L),X&8){const xt=S.dynamicProps;for(let Rt=0;Rt<xt.length;Rt++){const Mt=xt[Rt],te=Q[Mt],ee=it[Mt];(ee!==te||Mt==="value")&&r(Y,Mt,te,ee,L,P)}}X&1&&y.children!==S.children&&c(Y,S.children)}else!q&&G==null&&lt(Y,Q,it,P,L);((dt=it.onVnodeUpdated)||nt)&&qt(()=>{dt&&Ce(dt,P,S,y),nt&&di(S,y,P,"updated")},N)},J=(y,S,P,N,L,I,q)=>{for(let Y=0;Y<S.length;Y++){const X=y[Y],G=S[Y],nt=X.el&&(X.type===ut||!Zi(X,G)||X.shapeFlag&198)?h(X.el):P;b(X,G,nt,null,N,L,I,q,!0)}},lt=(y,S,P,N,L)=>{if(S!==P){if(S!==At)for(const I in S)!ps(I)&&!(I in P)&&r(y,I,S[I],null,L,N);for(const I in P){if(ps(I))continue;const q=P[I],Y=S[I];q!==Y&&I!=="value"&&r(y,I,Y,q,L,N)}"value"in P&&r(y,"value",S.value,P.value,L)}},Z=(y,S,P,N,L,I,q,Y,X)=>{const G=S.el=y?y.el:a(""),nt=S.anchor=y?y.anchor:a("");let{patchFlag:Q,dynamicChildren:it,slotScopeIds:dt}=S;dt&&(Y=Y?Y.concat(dt):dt),y==null?(s(G,P,N),s(nt,P,N),O(S.children||[],P,nt,L,I,q,Y,X)):Q>0&&Q&64&&it&&y.dynamicChildren&&y.dynamicChildren.length===it.length?(J(y.dynamicChildren,it,P,L,I,q,Y),(S.key!=null||L&&S===L.subTree)&&oo(y,S,!0)):m(y,S,P,nt,L,I,q,Y,X)},st=(y,S,P,N,L,I,q,Y,X)=>{S.slotScopeIds=Y,y==null?S.shapeFlag&512?L.ctx.activate(S,P,N,q,X):ct(S,P,N,L,I,q,X):tt(y,S,X)},ct=(y,S,P,N,L,I,q)=>{const Y=y.component=xh(y,N,L);if(xl(y)&&(Y.ctx.renderer=qi),vh(Y,!1,q),Y.asyncDep){if(L&&L.registerDep(Y,j,q),!y.el){const X=Y.subTree=be(ni);_(null,X,S,P),y.placeholder=X.el}}else j(Y,y,S,P,L,I,q)},tt=(y,S,P)=>{const N=S.component=y.component;if(Zd(y,S,P))if(N.asyncDep&&!N.asyncResolved){R(N,S,P);return}else N.next=S,N.update();else S.el=y.el,N.vnode=S},j=(y,S,P,N,L,I,q)=>{const Y=()=>{if(y.isMounted){let{next:Q,bu:it,u:dt,parent:xt,vnode:Rt}=y;{const we=Ll(y);if(we){Q&&(Q.el=Rt.el,R(y,Q,q)),we.asyncDep.then(()=>{y.isUnmounted||Y()});return}}let Mt=Q,te;hi(y,!1),Q?(Q.el=Rt.el,R(y,Q,q)):Q=Rt,it&&cn(it),(te=Q.props&&Q.props.onVnodeBeforeUpdate)&&Ce(te,xt,Q,Rt),hi(y,!0);const ee=Fo(y),_e=y.subTree;y.subTree=ee,b(_e,ee,h(_e.el),Us(_e),y,L,I),Q.el=ee.el,Mt===null&&th(y,ee.el),dt&&qt(dt,L),(te=Q.props&&Q.props.onVnodeUpdated)&&qt(()=>Ce(te,xt,Q,Rt),L)}else{let Q;const{el:it,props:dt}=S,{bm:xt,m:Rt,parent:Mt,root:te,type:ee}=y,_e=vs(S);hi(y,!1),xt&&cn(xt),!_e&&(Q=dt&&dt.onVnodeBeforeMount)&&Ce(Q,Mt,S),hi(y,!0);{te.ce&&te.ce._def.shadowRoot!==!1&&te.ce._injectChildStyle(ee);const we=y.subTree=Fo(y);b(null,we,P,N,y,L,I),S.el=we.el}if(Rt&&qt(Rt,L),!_e&&(Q=dt&&dt.onVnodeMounted)){const we=S;qt(()=>Ce(Q,Mt,we),L)}(S.shapeFlag&256||Mt&&vs(Mt.vnode)&&Mt.vnode.shapeFlag&256)&&y.a&&qt(y.a,L),y.isMounted=!0,S=P=N=null}};y.scope.on();const X=y.effect=new Xa(Y);y.scope.off();const G=y.update=X.run.bind(X),nt=y.job=X.runIfDirty.bind(X);nt.i=y,nt.id=y.uid,X.scheduler=()=>to(nt),hi(y,!0),G()},R=(y,S,P)=>{S.component=y;const N=y.vnode.props;y.vnode=S,y.next=null,ih(y,S.props,N,P),oh(y,S.children,P),Be(),Po(y),He()},m=(y,S,P,N,L,I,q,Y,X=!1)=>{const G=y&&y.children,nt=y?y.shapeFlag:0,Q=S.children,{patchFlag:it,shapeFlag:dt}=S;if(it>0){if(it&128){gt(G,Q,P,N,L,I,q,Y,X);return}else if(it&256){T(G,Q,P,N,L,I,q,Y,X);return}}dt&8?(nt&16&&Ki(G,L,I),Q!==G&&c(P,Q)):nt&16?dt&16?gt(G,Q,P,N,L,I,q,Y,X):Ki(G,L,I,!0):(nt&8&&c(P,""),dt&16&&O(Q,P,N,L,I,q,Y,X))},T=(y,S,P,N,L,I,q,Y,X)=>{y=y||Gi,S=S||Gi;const G=y.length,nt=S.length,Q=Math.min(G,nt);let it;for(it=0;it<Q;it++){const dt=S[it]=X?qe(S[it]):Me(S[it]);b(y[it],dt,P,null,L,I,q,Y,X)}G>nt?Ki(y,L,I,!0,!1,Q):O(S,P,N,L,I,q,Y,X,Q)},gt=(y,S,P,N,L,I,q,Y,X)=>{let G=0;const nt=S.length;let Q=y.length-1,it=nt-1;for(;G<=Q&&G<=it;){const dt=y[G],xt=S[G]=X?qe(S[G]):Me(S[G]);if(Zi(dt,xt))b(dt,xt,P,null,L,I,q,Y,X);else break;G++}for(;G<=Q&&G<=it;){const dt=y[Q],xt=S[it]=X?qe(S[it]):Me(S[it]);if(Zi(dt,xt))b(dt,xt,P,null,L,I,q,Y,X);else break;Q--,it--}if(G>Q){if(G<=it){const dt=it+1,xt=dt<nt?S[dt].el:N;for(;G<=it;)b(null,S[G]=X?qe(S[G]):Me(S[G]),P,xt,L,I,q,Y,X),G++}}else if(G>it)for(;G<=Q;)W(y[G],L,I,!0),G++;else{const dt=G,xt=G,Rt=new Map;for(G=xt;G<=it;G++){const oe=S[G]=X?qe(S[G]):Me(S[G]);oe.key!=null&&Rt.set(oe.key,G)}let Mt,te=0;const ee=it-xt+1;let _e=!1,we=0;const Qi=new Array(ee);for(G=0;G<ee;G++)Qi[G]=0;for(G=dt;G<=Q;G++){const oe=y[G];if(te>=ee){W(oe,L,I,!0);continue}let Se;if(oe.key!=null)Se=Rt.get(oe.key);else for(Mt=xt;Mt<=it;Mt++)if(Qi[Mt-xt]===0&&Zi(oe,S[Mt])){Se=Mt;break}Se===void 0?W(oe,L,I,!0):(Qi[Se-xt]=G+1,Se>=we?we=Se:_e=!0,b(oe,S[Se],P,null,L,I,q,Y,X),te++)}const _o=_e?dh(Qi):Gi;for(Mt=_o.length-1,G=ee-1;G>=0;G--){const oe=xt+G,Se=S[oe],wo=S[oe+1],So=oe+1<nt?wo.el||Il(wo):N;Qi[G]===0?b(null,Se,P,So,L,I,q,Y,X):_e&&(Mt<0||G!==_o[Mt]?F(Se,P,So,2):Mt--)}}},F=(y,S,P,N,L=null)=>{const{el:I,type:q,transition:Y,children:X,shapeFlag:G}=y;if(G&6){F(y.component.subTree,S,P,N);return}if(G&128){y.suspense.move(S,P,N);return}if(G&64){q.move(y,S,P,qi);return}if(q===ut){s(I,S,P);for(let Q=0;Q<X.length;Q++)F(X[Q],S,P,N);s(y.anchor,S,P);return}if(q===un){M(y,S,P);return}if(N!==2&&G&1&&Y)if(N===0)Y.beforeEnter(I),s(I,S,P),qt(()=>Y.enter(I),L);else{const{leave:Q,delayLeave:it,afterLeave:dt}=Y,xt=()=>{y.ctx.isUnmounted?n(I):s(I,S,P)},Rt=()=>{I._isLeaving&&I[Pd](!0),Q(I,()=>{xt(),dt&&dt()})};it?it(I,xt,Rt):Rt()}else s(I,S,P)},W=(y,S,P,N=!1,L=!1)=>{const{type:I,props:q,ref:Y,children:X,dynamicChildren:G,shapeFlag:nt,patchFlag:Q,dirs:it,cacheIndex:dt}=y;if(Q===-2&&(L=!1),Y!=null&&(Be(),ys(Y,null,P,y,!0),He()),dt!=null&&(S.renderCache[dt]=void 0),nt&256){S.ctx.deactivate(y);return}const xt=nt&1&&it,Rt=!vs(y);let Mt;if(Rt&&(Mt=q&&q.onVnodeBeforeUnmount)&&Ce(Mt,S,y),nt&6)Ac(y.component,P,N);else{if(nt&128){y.suspense.unmount(P,N);return}xt&&di(y,null,S,"beforeUnmount"),nt&64?y.type.remove(y,S,P,qi,N):G&&!G.hasOnce&&(I!==ut||Q>0&&Q&64)?Ki(G,S,P,!1,!0):(I===ut&&Q&384||!L&&nt&16)&&Ki(X,S,P),N&&pt(y)}(Rt&&(Mt=q&&q.onVnodeUnmounted)||xt)&&qt(()=>{Mt&&Ce(Mt,S,y),xt&&di(y,null,S,"unmounted")},P)},pt=y=>{const{type:S,el:P,anchor:N,transition:L}=y;if(S===ut){yo(P,N);return}if(S===un){k(y);return}const I=()=>{n(P),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(y.shapeFlag&1&&L&&!L.persisted){const{leave:q,delayLeave:Y}=L,X=()=>q(P,I);Y?Y(y.el,I,X):X()}else I()},yo=(y,S)=>{let P;for(;y!==S;)P=u(y),n(y),y=P;n(S)},Ac=(y,S,P)=>{const{bum:N,scope:L,job:I,subTree:q,um:Y,m:X,a:G}=y;Ho(X),Ho(G),N&&cn(N),L.stop(),I&&(I.flags|=8,W(q,y,S,P)),Y&&qt(Y,S),qt(()=>{y.isUnmounted=!0},S)},Ki=(y,S,P,N=!1,L=!1,I=0)=>{for(let q=I;q<y.length;q++)W(y[q],S,P,N,L)},Us=y=>{if(y.shapeFlag&6)return Us(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const S=u(y.anchor||y.el),P=S&&S[gl];return P?u(P):S};let Vn=!1;const vo=(y,S,P)=>{let N;y==null?S._vnode&&(W(S._vnode,null,null,!0),N=S._vnode.component):b(S._vnode||null,y,S,null,null,null,P),S._vnode=y,Vn||(Vn=!0,Po(N),cl(),Vn=!1)},qi={p:b,um:W,m:F,r:pt,mt:ct,mc:O,pc:m,pbc:J,n:Us,o:e};return{render:vo,hydrate:void 0,createApp:Yd(vo)}}function er({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function hi({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ch(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function oo(e,t,i=!1){const s=e.children,n=t.children;if(at(s)&&at(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=qe(n[r]),a.el=o.el),!i&&a.patchFlag!==-2&&oo(o,a)),a.type===$n&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=r+(e.type===ut?1:0)),a.type===ni&&!a.el&&(a.el=o.el)}}function dh(e){const t=e.slice(),i=[0];let s,n,r,o,a;const l=e.length;for(s=0;s<l;s++){const d=e[s];if(d!==0){if(n=i[i.length-1],e[n]<d){t[s]=n,i.push(s);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<d?r=a+1:o=a;d<e[i[r]]&&(r>0&&(t[s]=i[r-1]),i[r]=s)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function Ll(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ll(t)}function Ho(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Il(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Il(t.subTree):null}const Dl=e=>e.__isSuspense;function hh(e,t){t&&t.pendingBranch?at(e)?t.effects.push(...e):t.effects.push(e):yd(e)}const ut=Symbol.for("v-fgt"),$n=Symbol.for("v-txt"),ni=Symbol.for("v-cmt"),un=Symbol.for("v-stc"),ws=[];let le=null;function B(e=!1){ws.push(le=e?null:[])}function uh(){ws.pop(),le=ws[ws.length-1]||null}let Ds=1;function Wo(e,t=!1){Ds+=e,e<0&&le&&t&&(le.hasOnce=!0)}function Gl(e){return e.dynamicChildren=Ds>0?le||Gi:null,uh(),Ds>0&&le&&le.push(e),e}function z(e,t,i,s,n,r){return Gl(p(e,t,i,s,n,r,!0))}function pi(e,t,i,s,n){return Gl(be(e,t,i,s,n,!0))}function Fl(e){return e?e.__v_isVNode===!0:!1}function Zi(e,t){return e.type===t.type&&e.key===t.key}const Nl=({key:e})=>e??null,fn=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Ht(e)||Yt(e)||ft(e)?{i:pe,r:e,k:t,f:!!i}:e:null);function p(e,t=null,i=null,s=0,n=null,r=e===ut?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Nl(t),ref:t&&fn(t),scopeId:hl,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:pe};return a?(ao(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=Ht(i)?8:16),Ds>0&&!o&&le&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&le.push(l),l}const be=fh;function fh(e,t=null,i=null,s=0,n=null,r=!1){if((!e||e===Bd)&&(e=ni),Fl(e)){const a=ji(e,t,!0);return i&&ao(a,i),Ds>0&&!r&&le&&(a.shapeFlag&6?le[le.indexOf(e)]=a:le.push(a)),a.patchFlag=-2,a}if(Ch(e)&&(e=e.__vccOpts),t){t=gh(t);let{class:a,style:l}=t;a&&!Ht(a)&&(t.class=Ft(a)),Dt(l)&&(Zr(l)&&!at(l)&&(l=Vt({},l)),t.style=Gn(l))}const o=Ht(e)?1:Dl(e)?128:kd(e)?64:Dt(e)?4:ft(e)?2:0;return p(e,t,i,s,n,o,r,!0)}function gh(e){return e?Zr(e)||Tl(e)?Vt({},e):e:null}function ji(e,t,i=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:l}=e,d=t?ph(n||{},t):n,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&Nl(d),ref:t&&t.ref?i&&r?at(r)?r.concat(fn(t)):[r,fn(t)]:fn(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ut?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ji(e.ssContent),ssFallback:e.ssFallback&&ji(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&s&&eo(c,l.clone(c)),c}function Bl(e=" ",t=0){return be($n,null,e,t)}function Hl(e,t){const i=be(un,null,e);return i.staticCount=t,i}function zt(e="",t=!1){return t?(B(),pi(ni,null,e)):be(ni,null,e)}function Me(e){return e==null||typeof e=="boolean"?be(ni):at(e)?be(ut,null,e.slice()):Fl(e)?qe(e):be($n,null,String(e))}function qe(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ji(e)}function ao(e,t){let i=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(at(t))i=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),ao(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!Tl(t)?t._ctx=pe:n===3&&pe&&(pe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:pe},i=32):(t=String(t),s&64?(i=16,t=[Bl(t)]):i=8);e.children=t,e.shapeFlag|=i}function ph(...e){const t={};for(let i=0;i<e.length;i++){const s=e[i];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Ft([t.class,s.class]));else if(n==="style")t.style=Gn([t.style,s.style]);else if(Rn(n)){const r=t[n],o=s[n];o&&r!==o&&!(at(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function Ce(e,t,i,s=null){Oe(e,t,7,[i,s])}const mh=Sl();let bh=0;function xh(e,t,i){const s=e.type,n=(t?t.appContext:e.appContext)||mh,r={uid:bh++,vnode:e,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $c(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Al(s,n),emitsOptions:Cl(s,n),emit:null,emitted:null,propsDefaults:At,inheritAttrs:s.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Kd.bind(null,r),e.ce&&e.ce(r),r}let Zt=null;const yh=()=>Zt||pe;let Cn,kr;{const e=Dn(),t=(i,s)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Cn=t("__VUE_INSTANCE_SETTERS__",i=>Zt=i),kr=t("__VUE_SSR_SETTERS__",i=>Gs=i)}const zs=e=>{const t=Zt;return Cn(e),e.scope.on(),()=>{e.scope.off(),Cn(t)}},$o=()=>{Zt&&Zt.scope.off(),Cn(null)};function Wl(e){return e.vnode.shapeFlag&4}let Gs=!1;function vh(e,t=!1,i=!1){t&&kr(t);const{props:s,children:n}=e.vnode,r=Wl(e);eh(e,s,r,t),rh(e,n,i||t);const o=r?_h(e,t):void 0;return t&&kr(!1),o}function _h(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Hd);const{setup:s}=i;if(s){Be();const n=e.setupContext=s.length>1?Sh(e):null,r=zs(e),o=$s(s,e,0,[e.props,n]),a=Na(o);if(He(),r(),(a||e.sp)&&!vs(e)&&bl(e),a){if(o.then($o,$o),t)return o.then(l=>{zo(e,l)}).catch(l=>{Bn(l,e,0)});e.asyncDep=o}else zo(e,o)}else $l(e)}function zo(e,t,i){ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Dt(t)&&(e.setupState=ol(t)),$l(e)}function $l(e,t,i){const s=e.type;e.render||(e.render=s.render||Ae);{const n=zs(e);Be();try{Wd(e)}finally{He(),n()}}}const wh={get(e,t){return Xt(e,"get",""),e[t]}};function Sh(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,wh),slots:e.slots,emit:e.emit,expose:t}}function zn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ol(cd(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in _s)return _s[i](e)},has(t,i){return i in t||i in _s}})):e.proxy}function Ch(e){return ft(e)&&"__vccOpts"in e}const Qt=(e,t)=>gd(e,t,Gs),kh="3.5.27";let Mr;const jo=typeof window<"u"&&window.trustedTypes;if(jo)try{Mr=jo.createPolicy("vue",{createHTML:e=>e})}catch{}const zl=Mr?e=>Mr.createHTML(e):e=>e,Mh="http://www.w3.org/2000/svg",Th="http://www.w3.org/1998/Math/MathML",Ge=typeof document<"u"?document:null,Uo=Ge&&Ge.createElement("template"),Ph={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,s)=>{const n=t==="svg"?Ge.createElementNS(Mh,e):t==="mathml"?Ge.createElementNS(Th,e):i?Ge.createElement(e,{is:i}):Ge.createElement(e);return e==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:e=>Ge.createTextNode(e),createComment:e=>Ge.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ge.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,s,n,r){const o=i?i.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===r||!(n=n.nextSibling)););else{Uo.innerHTML=zl(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const a=Uo.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Ah=Symbol("_vtc");function Eh(e,t,i){const s=e[Ah];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Xo=Symbol("_vod"),Rh=Symbol("_vsh"),Oh=Symbol(""),Lh=/(?:^|;)\s*display\s*:/;function Ih(e,t,i){const s=e.style,n=Ht(i);let r=!1;if(i&&!n){if(t)if(Ht(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&gn(s,a,"")}else for(const o in t)i[o]==null&&gn(s,o,"");for(const o in i)o==="display"&&(r=!0),gn(s,o,i[o])}else if(n){if(t!==i){const o=s[Oh];o&&(i+=";"+o),s.cssText=i,r=Lh.test(i)}}else t&&e.removeAttribute("style");Xo in e&&(e[Xo]=r?s.display:"",e[Rh]&&(s.display="none"))}const Yo=/\s*!important$/;function gn(e,t,i){if(at(i))i.forEach(s=>gn(e,t,s));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const s=Dh(e,t);Yo.test(i)?e.setProperty(Ci(s),i.replace(Yo,""),"important"):e[s]=i}}const Vo=["Webkit","Moz","ms"],ir={};function Dh(e,t){const i=ir[t];if(i)return i;let s=si(t);if(s!=="filter"&&s in e)return ir[t]=s;s=Wa(s);for(let n=0;n<Vo.length;n++){const r=Vo[n]+s;if(r in e)return ir[t]=r}return t}const Ko="http://www.w3.org/1999/xlink";function qo(e,t,i,s,n,r=Bc(t)){s&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Ko,t.slice(6,t.length)):e.setAttributeNS(Ko,t,i):i==null||r&&!za(i)?e.removeAttribute(t):e.setAttribute(t,r?"":Re(i)?String(i):i)}function Qo(e,t,i,s,n){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?zl(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=za(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(n||t)}function mi(e,t,i,s){e.addEventListener(t,i,s)}function Gh(e,t,i,s){e.removeEventListener(t,i,s)}const Jo=Symbol("_vei");function Fh(e,t,i,s,n=null){const r=e[Jo]||(e[Jo]={}),o=r[t];if(s&&o)o.value=s;else{const[a,l]=Nh(t);if(s){const d=r[t]=Wh(s,n);mi(e,a,d,l)}else o&&(Gh(e,a,o,l),r[t]=void 0)}}const Zo=/(?:Once|Passive|Capture)$/;function Nh(e){let t;if(Zo.test(e)){t={};let s;for(;s=e.match(Zo);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ci(e.slice(2)),t]}let sr=0;const Bh=Promise.resolve(),Hh=()=>sr||(Bh.then(()=>sr=0),sr=Date.now());function Wh(e,t){const i=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=i.attached)return;Oe($h(s,i.value),t,5,[s])};return i.value=e,i.attached=Hh(),i}function $h(e,t){if(at(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const ta=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zh=(e,t,i,s,n,r)=>{const o=n==="svg";t==="class"?Eh(e,s,o):t==="style"?Ih(e,i,s):Rn(t)?jr(t)||Fh(e,t,i,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jh(e,t,s,o))?(Qo(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&qo(e,t,s,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ht(s))?Qo(e,si(t),s,r,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),qo(e,t,s,o))};function jh(e,t,i,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&ta(t)&&ft(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return ta(t)&&Ht(i)?!1:t in e}const kn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return at(t)?i=>cn(t,i):t};function Uh(e){e.target.composing=!0}function ea(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Wi=Symbol("_assign");function ia(e,t,i){return t&&(e=e.trim()),i&&(e=In(e)),e}const ts={created(e,{modifiers:{lazy:t,trim:i,number:s}},n){e[Wi]=kn(n);const r=s||n.props&&n.props.type==="number";mi(e,t?"change":"input",o=>{o.target.composing||e[Wi](ia(e.value,i,r))}),(i||r)&&mi(e,"change",()=>{e.value=ia(e.value,i,r)}),t||(mi(e,"compositionstart",Uh),mi(e,"compositionend",ea),mi(e,"change",ea))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:s,trim:n,number:r}},o){if(e[Wi]=kn(o),e.composing)return;const a=(r||e.type==="number")&&!/^0\d/.test(e.value)?In(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(s&&t===i||n&&e.value.trim()===l)||(e.value=l))}},he={deep:!0,created(e,{value:t,modifiers:{number:i}},s){const n=On(t);mi(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>i?In(Mn(o)):Mn(o));e[Wi](e.multiple?n?new Set(r):r:r[0]),e._assigning=!0,gi(()=>{e._assigning=!1})}),e[Wi]=kn(s)},mounted(e,{value:t}){sa(e,t)},beforeUpdate(e,t,i){e[Wi]=kn(i)},updated(e,{value:t}){e._assigning||sa(e,t)}};function sa(e,t){const i=e.multiple,s=at(t);if(!(i&&!s&&!On(t))){for(let n=0,r=e.options.length;n<r;n++){const o=e.options[n],a=Mn(o);if(i)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(d=>String(d)===String(a)):o.selected=Wc(t,a)>-1}else o.selected=t.has(a);else if(Fn(Mn(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Mn(e){return"_value"in e?e._value:e.value}const Xh=["ctrl","shift","alt","meta"],Yh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xh.some(i=>e[`${i}Key`]&&!t.includes(i))},Vh=(e,t)=>{const i=e._withMods||(e._withMods={}),s=t.join(".");return i[s]||(i[s]=((n,...r)=>{for(let o=0;o<t.length;o++){const a=Yh[t[o]];if(a&&a(n,t))return}return e(n,...r)}))},Kh=Vt({patchProp:zh},Ph);let na;function qh(){return na||(na=ah(Kh))}const Qh=((...e)=>{const t=qh().createApp(...e),{mount:i}=t;return t.mount=s=>{const n=Zh(s);if(!n)return;const r=t._component;!ft(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=i(n,!1,Jh(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t});function Jh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Zh(e){return Ht(e)?document.querySelector(e):e}const tu="/DentMetric/assets/logo-BNlpBL9Q.png",eu=Math.PI/180;function iu(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const xi=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},U={_global:xi,version:"10.2.0",isBrowser:iu(),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle(e){return U.angleDeg?e*eu:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return U.DD.isDragging},isTransforming(){var e,t;return(t=(e=U.Transformer)===null||e===void 0?void 0:e.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!U.DD.node},releaseCanvasOnDestroy:!0,document:xi.document,_injectGlobal(e){typeof xi.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),xi.Konva=e}},Bt=e=>{U[e.prototype.getClassName()]=e};U._injectGlobal(U);const su=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ra=()=>{if(typeof document>"u")throw new Error(su)};class ae{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ae(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const i=this.m;return{x:i[0]*t.x+i[2]*t.y+i[4],y:i[1]*t.x+i[3]*t.y+i[5]}}translate(t,i){return this.m[4]+=this.m[0]*t+this.m[2]*i,this.m[5]+=this.m[1]*t+this.m[3]*i,this}scale(t,i){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=i,this.m[3]*=i,this}rotate(t){const i=Math.cos(t),s=Math.sin(t),n=this.m[0]*i+this.m[2]*s,r=this.m[1]*i+this.m[3]*s,o=this.m[0]*-s+this.m[2]*i,a=this.m[1]*-s+this.m[3]*i;return this.m[0]=n,this.m[1]=r,this.m[2]=o,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,i){const s=this.m[0]+this.m[2]*i,n=this.m[1]+this.m[3]*i,r=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=s,this.m[1]=n,this.m[2]=r,this.m[3]=o,this}multiply(t){const i=this.m[0]*t.m[0]+this.m[2]*t.m[1],s=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],r=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],a=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=i,this.m[1]=s,this.m[2]=n,this.m[3]=r,this.m[4]=o,this.m[5]=a,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),i=this.m[3]*t,s=-this.m[1]*t,n=-this.m[2]*t,r=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=i,this.m[1]=s,this.m[2]=n,this.m[3]=r,this.m[4]=o,this.m[5]=a,this}getMatrix(){return this.m}decompose(){const t=this.m[0],i=this.m[1],s=this.m[2],n=this.m[3],r=this.m[4],o=this.m[5],a=t*n-i*s,l={x:r,y:o,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||i!=0){const d=Math.sqrt(t*t+i*i);l.rotation=i>0?Math.acos(t/d):-Math.acos(t/d),l.scaleX=d,l.scaleY=a/d,l.skewX=(t*s+i*n)/a,l.skewY=0}else if(s!=0||n!=0){const d=Math.sqrt(s*s+n*n);l.rotation=Math.PI/2-(n>0?Math.acos(-s/d):-Math.acos(s/d)),l.scaleX=a/d,l.scaleY=d,l.skewX=0,l.skewY=(t*s+i*n)/a}return l.rotation=C._getRotation(l.rotation),l}}const nu="[object Array]",ru="[object Number]",ou="[object String]",au="[object Boolean]",lu=Math.PI/180,cu=180/Math.PI,es="#",du="",hu="0",uu="Konva warning: ",oa="Konva error: ",fu="rgb(",nr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},gu=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let qs=[],is=null;const pu=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,16)},C={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===nu},_isNumber(e){return Object.prototype.toString.call(e)===ru&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===ou},_isBoolean(e){return Object.prototype.toString.call(e)===au},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;const t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){qs.push(e),qs.length===1&&pu(function(){const t=qs;qs=[],t.forEach(function(i){i()})})},createCanvasElement(){ra();const e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return ra(),document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){const i=C.createImageElement();i.onload=function(){t(i)},i.src=e},_rgbToHex(e,t,i){return((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1)},_hexToRgb(e){e=e.replace(es,du);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let e=(Math.random()*16777215<<0).toString(16);for(;e.length<6;)e=hu+e;return es+e},isCanvasFarblingActive(){if(is!==null)return is;if(typeof document>"u")return is=!1,!1;const e=this.createCanvasElement();e.width=10,e.height=10;const t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let n=0;n<100;n++)if(i[n*4]!==40||i[n*4+1]!==40||i[n*4+2]!==40||i[n*4+3]!==255){s=!0;break}return is=s,this.releaseCanvas(e),is},getHitColor(){const e=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(e):e},getHitColorKey(e,t,i){return this.isCanvasFarblingActive()&&(e=Math.round(e/5)*5,t=Math.round(t/5)*5,i=Math.round(i/5)*5),es+this._rgbToHex(e,t,i)},getSnappedHexColor(e){const t=this._hexToRgb(e);return es+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(e){let t;return e in nr?(t=nr[e],{r:t[0],g:t[1],b:t[2]}):e[0]===es?this._hexToRgb(e.substring(1)):e.substr(0,4)===fu?(t=gu.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",C._namedColorToRBA(e)||C._hex3ColorToRGBA(e)||C._hex4ColorToRGBA(e)||C._hex6ColorToRGBA(e)||C._hex8ColorToRGBA(e)||C._rgbColorToRGBA(e)||C._rgbaColorToRGBA(e)||C._hslColorToRGBA(e)},_namedColorToRBA(e){const t=nr[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];const t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];const t=e.split(/ *, */).map((i,s)=>i.slice(-1)==="%"?s===3?parseInt(i)/100:parseInt(i)/100*255:Number(i));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if(e[0]==="#"&&e.length===9)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if(e[0]==="#"&&e.length===5)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...i]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),s=Number(i[0])/360,n=Number(i[1])/100,r=Number(i[2])/100;let o,a,l;if(n===0)return l=r*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};r<.5?o=r*(1+n):o=r+n-r*n;const d=2*r-o,c=[0,0,0];for(let h=0;h<3;h++)a=s+1/3*-(h-1),a<0&&a++,a>1&&a--,6*a<1?l=d+(o-d)*6*a:2*a<1?l=o:3*a<2?l=d+(o-d)*(2/3-a)*6:l=d,c[h]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){const t={};for(const i in e)this._isPlainObject(e[i])?t[i]=this.cloneObject(e[i]):this._isArray(e[i])?t[i]=this.cloneArray(e[i]):t[i]=e[i];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*lu},radToDeg(e){return e*cu},_degToRad(e){return C.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),C.degToRad(e)},_radToDeg(e){return C.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),C.radToDeg(e)},_getRotation(e){return U.angleDeg?C.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(oa+e)},error(e){console.error(oa+e)},warn(e){U.showWarnings&&console.warn(uu+e)},each(e,t){for(const i in e)t(i,e[i])},_inRange(e,t,i){return t<=e&&e<i},_getProjectionToSegment(e,t,i,s,n,r){let o,a,l;const d=(e-i)*(e-i)+(t-s)*(t-s);if(d==0)o=e,a=t,l=(n-i)*(n-i)+(r-s)*(r-s);else{const c=((n-e)*(i-e)+(r-t)*(s-t))/d;c<0?(o=e,a=t,l=(e-n)*(e-n)+(t-r)*(t-r)):c>1?(o=i,a=s,l=(i-n)*(i-n)+(s-r)*(s-r)):(o=e+c*(i-e),a=t+c*(s-t),l=(o-n)*(o-n)+(a-r)*(a-r))}return[o,a,l]},_getProjectionToLine(e,t,i){const s=C.cloneObject(e);let n=Number.MAX_VALUE;return t.forEach(function(r,o){if(!i&&o===t.length-1)return;const a=t[(o+1)%t.length],l=C._getProjectionToSegment(r.x,r.y,a.x,a.y,e.x,e.y),d=l[0],c=l[1],h=l[2];h<n&&(s.x=d,s.y=c,n=h)}),s},_prepareArrayForTween(e,t,i){const s=[],n=[];if(e.length>t.length){const o=t;t=e,e=o}for(let o=0;o<e.length;o+=2)s.push({x:e[o],y:e[o+1]});for(let o=0;o<t.length;o+=2)n.push({x:t[o],y:t[o+1]});const r=[];return n.forEach(function(o){const a=C._getProjectionToLine(o,s,i);r.push(a.x),r.push(a.y)}),r},_prepareToStringify(e){let t;e.visitedByCircularReferenceRemoval=!0;for(const i in e)if(e.hasOwnProperty(i)&&e[i]&&typeof e[i]=="object"){if(t=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||C._isElement(e[i]))if(t.configurable)delete e[i];else return null;else if(C._prepareToStringify(e[i])===null)if(t.configurable)delete e[i];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const i in t)e[i]=t[i];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){U.releaseCanvasOnDestroy&&e.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(e,t,i,s){let n=t<0?t:0,r=i<0?i:0;t=Math.abs(t),i=Math.abs(i);let o=0,a=0,l=0,d=0;typeof s=="number"?o=a=l=d=Math.min(s,t/2,i/2):(o=Math.min(s[0]||0,t/2,i/2),a=Math.min(s[1]||0,t/2,i/2),d=Math.min(s[2]||0,t/2,i/2),l=Math.min(s[3]||0,t/2,i/2)),e.moveTo(n+o,r),e.lineTo(n+t-a,r),e.arc(n+t-a,r+a,a,Math.PI*3/2,0,!1),e.lineTo(n+t,r+i-d),e.arc(n+t-d,r+i-d,d,0,Math.PI/2,!1),e.lineTo(n+l,r+i),e.arc(n+l,r+i-l,l,Math.PI/2,Math.PI,!1),e.lineTo(n,r+o),e.arc(n+o,r+o,o,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(e,t,i,s,n){s=Math.abs(s);for(let r=0;r<i;r++){const o=t[(r-1+i)%i],a=t[r],l=t[(r+1)%i],d={x:a.x-o.x,y:a.y-o.y},c={x:l.x-a.x,y:l.y-a.y},h=Math.hypot(d.x,d.y),u=Math.hypot(c.x,c.y);let f;typeof n=="number"?f=n:f=r<n.length?n[r]:0,f=s*Math.cos(Math.PI/i)*Math.min(1,f/s*2);const b={x:d.x/h,y:d.y/h},v={x:c.x/u,y:c.y/u},_={x:a.x-b.x*f,y:a.y-b.y*f},w={x:a.x+v.x*f,y:a.y+v.y*f};r===0?e.moveTo(_.x,_.y):e.lineTo(_.x,_.y),e.arcTo(a.x,a.y,w.x,w.y,f)}}};function mu(e){const t=[],i=e.length,s=C;for(let n=0;n<i;n++){let r=e[n];s._isNumber(r)?r=Math.round(r*1e3)/1e3:s._isString(r)||(r=r+""),t.push(r)}return t}const aa=",",bu="(",xu=")",yu="([",vu="])",_u=";",wu="()",Su="=",la=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Cu=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],ku=100;let Qs=null;function ca(){if(Qs!==null)return Qs;try{const t=C.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(Qs=!1,!1)}catch{return Qs=!1,!1}}class jn{constructor(t){this.canvas=t,U.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){let s=this.traceArr,n=s.length,r="",o,a,l,d;for(o=0;o<n;o++)a=s[o],l=a.method,l?(d=a.args,r+=l,t?r+=wu:C._isArray(d[0])?r+=yu+d.join(aa)+vu:(i&&(d=d.map(c=>typeof c=="number"?Math.floor(c):c)),r+=bu+d.join(aa)+xu)):(r+=a.property,t||(r+=Su+a.val)),r+=_u;return r}clearTrace(){this.traceArr=[]}_trace(t){let i=this.traceArr,s;i.push(t),s=i.length,s>=ku&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){const i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}_applyMiterLimit(t){const i=t.attrs.miterLimit;i!=null&&this.setAttr("miterLimit",i)}setAttr(t,i){this._context[t]=i}arc(t,i,s,n,r,o){this._context.arc(t,i,s,n,r,o)}arcTo(t,i,s,n,r){this._context.arcTo(t,i,s,n,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,s,n,r,o){this._context.bezierCurveTo(t,i,s,n,r,o)}clearRect(t,i,s,n){this._context.clearRect(t,i,s,n)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){const s=arguments;if(s.length===2)return this._context.createImageData(t,i);if(s.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,s,n){return this._context.createLinearGradient(t,i,s,n)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,s,n,r,o){return this._context.createRadialGradient(t,i,s,n,r,o)}drawImage(t,i,s,n,r,o,a,l,d){const c=arguments,h=this._context;c.length===3?h.drawImage(t,i,s):c.length===5?h.drawImage(t,i,s,n,r):c.length===9&&h.drawImage(t,i,s,n,r,o,a,l,d)}ellipse(t,i,s,n,r,o,a,l){this._context.ellipse(t,i,s,n,r,o,a,l)}isPointInPath(t,i,s,n){return s?this._context.isPointInPath(s,t,i,n):this._context.isPointInPath(t,i,n)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,s,n){this._context.fillRect(t,i,s,n)}strokeRect(t,i,s,n){this._context.strokeRect(t,i,s,n)}fillText(t,i,s,n){n?this._context.fillText(t,i,s,n):this._context.fillText(t,i,s)}measureText(t){return this._context.measureText(t)}getImageData(t,i,s,n){return this._context.getImageData(t,i,s,n)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,s,n){this._context.rect(t,i,s,n)}roundRect(t,i,s,n,r){this._context.roundRect(t,i,s,n,r)}putImageData(t,i,s){this._context.putImageData(t,i,s)}quadraticCurveTo(t,i,s,n){this._context.quadraticCurveTo(t,i,s,n)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,s,n,r,o){this._context.setTransform(t,i,s,n,r,o)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,s,n){this._context.strokeText(t,i,s,n)}transform(t,i,s,n,r,o){this._context.transform(t,i,s,n,r,o)}translate(t,i){this._context.translate(t,i)}_enableTrace(){let t=this,i=la.length,s=this.setAttr,n,r;const o=function(a){let l=t[a],d;t[a]=function(){return r=mu(Array.prototype.slice.call(arguments,0)),d=l.apply(t,arguments),t._trace({method:a,args:r}),d}};for(n=0;n<i;n++)o(la[n]);t.setAttr=function(){s.apply(t,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:a,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}}Cu.forEach(function(e){Object.defineProperty(jn.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class Mu extends jn{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){const i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),s=t.getFillPriority();if(i&&s==="color"){this._fillColor(t);return}const n=t.getFillPatternImage();if(n&&s==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&s==="linear-gradient"){this._fillLinearGradient(t);return}const o=t.getFillRadialGradientColorStops();if(o&&s==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):n?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),s=t.getStrokeLinearGradientEndPoint(),n=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,s.x,s.y);if(n){for(let o=0;o<n.length;o+=2)r.addColorStop(n[o],n[o+1]);this.setAttr("strokeStyle",r)}}_stroke(t){const i=t.dash(),s=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!s){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),s||this.restore()}}_applyShadow(t){var i,s,n;const r=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",o=(s=t.getShadowBlur())!==null&&s!==void 0?s:5,a=(n=t.getShadowOffset())!==null&&n!==void 0?n:{x:0,y:0},l=t.getAbsoluteScale(),d=this.canvas.getPixelRatio(),c=l.x*d,h=l.y*d;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(h))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*h)}}class Tu extends jn{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const i=t.getStrokeScaleEnabled();if(!i){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);const s=t.hitStrokeWidth(),n=s==="auto"?t.strokeWidth():s;this.setAttr("lineWidth",n),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}let Js;function Pu(){if(Js)return Js;const e=C.createCanvasElement(),t=e.getContext("2d");return Js=(function(){const i=U._global.devicePixelRatio||1,s=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/s})(),C.releaseCanvas(e),Js}class lo{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const s=(t||{}).pixelRatio||U.pixelRatio||Pu();this.pixelRatio=s,this._canvas=C.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(n){return C.error("Unable to get data URL. "+n.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Qe extends lo{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new Mu(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class co extends lo{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Tu(this),this.setSize(t.width,t.height)}}const St={get isDragging(){let e=!1;return St._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return St._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];St._dragElements.forEach((i,s)=>{const{node:n}=i,r=n.getStage();r.setPointersPositions(e),i.pointerId===void 0&&(i.pointerId=C._getFirstPointerId(e));const o=r._changedPointerPositions.find(a=>a.id===i.pointerId);if(o){if(i.dragStatus!=="dragging"){const a=n.dragDistance();if(Math.max(Math.abs(o.x-i.startPointerPos.x),Math.abs(o.y-i.startPointerPos.y))<a||(n.startDrag({evt:e}),!n.isDragging()))return}n._setDragPosition(e,i),t.push(n)}}),t.forEach(i=>{i.fire("dragmove",{type:"dragmove",target:i,evt:e},!0)})},_endDragBefore(e){const t=[];St._dragElements.forEach(i=>{const{node:s}=i,n=s.getStage();if(e&&n.setPointersPositions(e),!n._changedPointerPositions.find(a=>a.id===i.pointerId))return;(i.dragStatus==="dragging"||i.dragStatus==="stopped")&&(St.justDragged=!0,U._mouseListenClick=!1,U._touchListenClick=!1,U._pointerListenClick=!1,i.dragStatus="stopped");const o=i.node.getLayer()||i.node instanceof U.Stage&&i.node;o&&t.indexOf(o)===-1&&t.push(o)}),t.forEach(i=>{i.draw()})},_endDragAfter(e){St._dragElements.forEach((t,i)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&St._dragElements.delete(i)})}};U.isBrowser&&(window.addEventListener("mouseup",St._endDragBefore,!0),window.addEventListener("touchend",St._endDragBefore,!0),window.addEventListener("touchcancel",St._endDragBefore,!0),window.addEventListener("mousemove",St._drag),window.addEventListener("touchmove",St._drag),window.addEventListener("mouseup",St._endDragAfter,!1),window.addEventListener("touchend",St._endDragAfter,!1),window.addEventListener("touchcancel",St._endDragAfter,!1));function oi(e){return C._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||C._isBoolean(e)?e:Object.prototype.toString.call(e)}function jl(e){return e>255?255:e<0?0:Math.round(e)}function $(){if(U.isUnminified)return function(e,t){return C._isNumber(e)||C.warn(oi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function Un(e){if(U.isUnminified)return function(t,i){let s=C._isNumber(t),n=C._isArray(t)&&t.length==e;return!s&&!n&&C.warn(oi(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function ho(){if(U.isUnminified)return function(e,t){return C._isNumber(e)||e==="auto"||C.warn(oi(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function ki(){if(U.isUnminified)return function(e,t){return C._isString(e)||C.warn(oi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function Ul(){if(U.isUnminified)return function(e,t){const i=C._isString(e),s=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||s||C.warn(oi(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function Au(){if(U.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(C._isArray(e)?e.forEach(function(s){C._isNumber(s)||C.warn('"'+t+'" attribute has non numeric element '+s+". Make sure that all elements are numbers.")}):C.warn(oi(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function ve(){if(U.isUnminified)return function(e,t){return e===!0||e===!1||C.warn(oi(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function Eu(e){if(U.isUnminified)return function(t,i){return t==null||C.isObject(t)||C.warn(oi(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}const ss="get",ns="set",x={addGetterSetter(e,t,i,s,n){x.addGetter(e,t,i),x.addSetter(e,t,s,n),x.addOverloadedGetterSetter(e,t)},addGetter(e,t,i){const s=ss+C._capitalize(t);e.prototype[s]=e.prototype[s]||function(){const n=this.attrs[t];return n===void 0?i:n}},addSetter(e,t,i,s){const n=ns+C._capitalize(t);e.prototype[n]||x.overWriteSetter(e,t,i,s)},overWriteSetter(e,t,i,s){const n=ns+C._capitalize(t);e.prototype[n]=function(r){return i&&r!==void 0&&r!==null&&(r=i.call(this,r,t)),this._setAttr(t,r),s&&s.call(this),this}},addComponentsGetterSetter(e,t,i,s,n){const r=i.length,o=C._capitalize,a=ss+o(t),l=ns+o(t);e.prototype[a]=function(){const c={};for(let h=0;h<r;h++){const u=i[h];c[u]=this.getAttr(t+o(u))}return c};const d=Eu(i);e.prototype[l]=function(c){const h=this.attrs[t];s&&(c=s.call(this,c,t)),d&&d.call(this,c,t);for(const u in c)c.hasOwnProperty(u)&&this._setAttr(t+o(u),c[u]);return c||i.forEach(u=>{this._setAttr(t+o(u),void 0)}),this._fireChangeEvent(t,h,c),n&&n.call(this),this},x.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){const i=C._capitalize(t),s=ns+i,n=ss+i;e.prototype[t]=function(){return arguments.length?(this[s](arguments[0]),this):this[n]()}},addDeprecatedGetterSetter(e,t,i,s){C.error("Adding deprecated "+t);const n=ss+C._capitalize(t),r=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[n]=function(){C.error(r);const o=this.attrs[t];return o===void 0?i:o},x.addSetter(e,t,s,function(){C.error(r)}),x.addOverloadedGetterSetter(e,t)},backCompat(e,t){C.each(t,function(i,s){const n=e.prototype[s],r=ss+C._capitalize(i),o=ns+C._capitalize(i);function a(){n.apply(this,arguments),C.error('"'+i+'" method is deprecated and will be removed soon. Use ""'+s+'" instead.')}e.prototype[i]=a,e.prototype[r]=a,e.prototype[o]=a})},afterSetFilter(){this._filterUpToDate=!1}};function Ru(e){const t=/(\w+)\(([^)]+)\)/g;let i;for(;(i=t.exec(e))!==null;){const[,s,n]=i;switch(s){case"blur":{const r=parseFloat(n.replace("px",""));return function(o){this.blurRadius(r*.5);const a=U.Filters;a&&a.Blur&&a.Blur.call(this,o)}}case"brightness":{const r=n.includes("%")?parseFloat(n)/100:parseFloat(n);return function(o){this.brightness(r);const a=U.Filters;a&&a.Brightness&&a.Brightness.call(this,o)}}case"contrast":{const r=parseFloat(n);return function(o){const a=100*(Math.sqrt(r)-1);this.contrast(a);const l=U.Filters;l&&l.Contrast&&l.Contrast.call(this,o)}}case"grayscale":return function(r){const o=U.Filters;o&&o.Grayscale&&o.Grayscale.call(this,r)};case"sepia":return function(r){const o=U.Filters;o&&o.Sepia&&o.Sepia.call(this,r)};case"invert":return function(r){const o=U.Filters;o&&o.Invert&&o.Invert.call(this,r)};default:C.warn(`CSS filter "${s}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const pn="absoluteOpacity",da="allEventListeners",De="absoluteTransform",ha="absoluteScale",ui="canvas",Ou="Change",Lu="children",Iu="konva",Tr="listening",Du="mouseenter",Gu="mouseleave",Fu="pointerenter",Nu="pointerleave",Bu="touchenter",Hu="touchleave",ua="set",fa="Shape",mn=" ",ga="stage",Xe="transform",Wu="Stage",Pr="visible",$u=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(mn);let zu=1;class H{constructor(t){this._id=zu++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Xe||t===De)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){let s=this._cache.get(t);return(s===void 0||(t===Xe||t===De)&&s.dirty===!0)&&(s=i.call(this),this._cache.set(t,s)),s}_calculate(t,i,s){if(!this._attachedDepsListeners.get(t)){const n=i.map(r=>r+"Change.konva").join(mn);this.on(n,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,s)}_getCanvasCache(){return this._cache.get(ui)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===De&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(ui)){const{scene:t,filter:i,hit:s}=this._cache.get(ui);C.releaseCanvas(t._canvas,i._canvas,s._canvas),this._cache.delete(ui)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const i=t||{};let s={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(s=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let n=Math.ceil(i.width||s.width),r=Math.ceil(i.height||s.height),o=i.pixelRatio,a=i.x===void 0?Math.floor(s.x):i.x,l=i.y===void 0?Math.floor(s.y):i.y,d=i.offset||0,c=i.drawBorder||!1,h=i.hitCanvasPixelRatio||1;if(!n||!r){C.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const u=Math.abs(Math.round(s.x)-a)>.5?1:0,f=Math.abs(Math.round(s.y)-l)>.5?1:0;n+=d*2+u,r+=d*2+f,a-=d,l-=d;const g=new Qe({pixelRatio:o,width:n,height:r}),b=new Qe({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),v=new co({pixelRatio:h,width:n,height:r}),_=g.getContext(),w=v.getContext(),M=new Qe({width:g.width/g.pixelRatio+Math.abs(a),height:g.height/g.pixelRatio+Math.abs(l),pixelRatio:g.pixelRatio}),k=M.getContext();return v.isCache=!0,g.isCache=!0,this._cache.delete(ui),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(g.getContext()._context.imageSmoothingEnabled=!1,b.getContext()._context.imageSmoothingEnabled=!1),_.save(),w.save(),k.save(),_.translate(-a,-l),w.translate(-a,-l),k.translate(-a,-l),M.x=a,M.y=l,this._isUnderCache=!0,this._clearSelfAndDescendantCache(pn),this._clearSelfAndDescendantCache(ha),this.drawScene(g,this,M),this.drawHit(v,this),this._isUnderCache=!1,_.restore(),w.restore(),c&&(_.save(),_.beginPath(),_.rect(0,0,n,r),_.closePath(),_.setAttr("strokeStyle","red"),_.setAttr("lineWidth",5),_.stroke(),_.restore()),C.releaseCanvas(M._canvas),this._cache.set(ui,{scene:g,filter:b,hit:v,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(ui)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){const s=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let n=1/0,r=1/0,o=-1/0,a=-1/0;const l=this.getAbsoluteTransform(i);return s.forEach(function(d){const c=l.point(d);n===void 0&&(n=o=c.x,r=a=c.y),n=Math.min(n,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),{x:n,y:r,width:o-n,height:a-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);const s=this._getCachedSceneCanvas(),n=s.pixelRatio;t.drawImage(s._canvas,0,0,s.width/n,s.height/n),t.restore()}_drawCachedHitCanvas(t){const i=this._getCanvasCache(),s=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(s._canvas,0,0,s.width/s.pixelRatio,s.height/s.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),i=this._getCanvasCache(),s=i.scene,n=i.filter,r=n.getContext(),o,a,l,d;if(!t||t.length===0)return s;if(this._filterUpToDate)return n;let c=!0;for(let u=0;u<t.length;u++)if(typeof t[u]=="string"&&ca(),typeof t[u]!="string"||!ca()){c=!1;break}const h=s.pixelRatio;if(n.setSize(s.width/s.pixelRatio,s.height/s.pixelRatio),c){const u=t.join(" ");return r.save(),r.setAttr("filter",u),r.drawImage(s._canvas,0,0,s.getWidth()/h,s.getHeight()/h),r.restore(),this._filterUpToDate=!0,n}try{for(o=t.length,r.clear(),r.drawImage(s._canvas,0,0,s.getWidth()/h,s.getHeight()/h),a=r.getImageData(0,0,n.getWidth(),n.getHeight()),l=0;l<o;l++)d=t[l],typeof d=="string"&&(d=Ru(d)),d.call(this,a),r.putImageData(a,0,0)}catch(u){C.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,n}on(t,i){if(this._cache&&this._cache.delete(da),arguments.length===3)return this._delegate.apply(this,arguments);const s=t.split(mn);for(let n=0;n<s.length;n++){const o=s[n].split("."),a=o[0],l=o[1]||"";this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:l,handler:i})}return this}off(t,i){let s=(t||"").split(mn),n=s.length,r,o,a,l,d,c;if(this._cache&&this._cache.delete(da),!t)for(o in this.eventListeners)this._off(o);for(r=0;r<n;r++)if(a=s[r],l=a.split("."),d=l[0],c=l[1],d)this.eventListeners[d]&&this._off(d,c,i);else for(o in this.eventListeners)this._off(o,c,i);return this}dispatchEvent(t){const i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(s){i.call(this,s.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,s){const n=this;this.on(t,function(r){const o=r.target.findAncestors(i,!0,n);for(let a=0;a<o.length;a++)r=C.cloneObject(r),r.currentTarget=o[a],s.call(o[a],r)})}remove(){return this.isDragging()&&this.stopDrag(),St._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(De),this._clearSelfAndDescendantCache(pn),this._clearSelfAndDescendantCache(ha),this._clearSelfAndDescendantCache(ga),this._clearSelfAndDescendantCache(Pr),this._clearSelfAndDescendantCache(Tr)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const i="get"+C._capitalize(t);return C._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){let t=this.getParent(),i=[];for(;t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let i,s;if(!t)return this;for(i in t)i!==Lu&&(s=ua+C._capitalize(i),C._isFunction(this[s])?this[s](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Tr,this._isListening)}_isListening(t){if(!this.listening())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isListening(t):!0}isVisible(){return this._getCache(Pr,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const s=this.getParent();return s&&s!==t&&this!==t?s._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);const s=this.getLayer();let n=!1;St._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===s)&&(n=!0)});const r=!i&&!U.hitOnDragEnabled&&(n||U.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),i=this,s=0,n,r,o,a;function l(c){for(n=[],r=c.length,o=0;o<r;o++)a=c[o],s++,a.nodeType!==fa&&(n=n.concat(a.getChildren().slice())),a._id===i._id&&(o=r);n.length>0&&n[0].getDepth()<=t&&l(n)}const d=this.getStage();return i.nodeType!==Wu&&d&&l(d.getChildren()),s}getDepth(){let t=0,i=this.parent;for(;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Xe),this._clearSelfAndDescendantCache(De)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const i=t.getPointerPosition();if(!i)return null;const s=this.getAbsoluteTransform().copy();return s.invert(),s.point(i)}getAbsolutePosition(t){let i=!1,s=this.parent;for(;s;){if(s.isCached()){i=!0;break}s=s.parent}i&&!t&&(t=!0);const n=this.getAbsoluteTransform(t).getMatrix(),r=new ae,o=this.offset();return r.m=n.slice(),r.translate(o.x,o.y),r.getTranslation()}setAbsolutePosition(t){const{x:i,y:s,...n}=this._clearTransform();this.attrs.x=i,this.attrs.y=s,this._clearCache(Xe);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(n),this.setPosition({x:t.x,y:t.y}),this._clearCache(Xe),this._clearSelfAndDescendantCache(De),this}_setTransform(t){let i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let i=t.x,s=t.y,n=this.x(),r=this.y();return i!==void 0&&(n+=i),s!==void 0&&(r+=s),this.setPosition({x:n,y:r}),this}_eachAncestorReverse(t,i){let s=[],n=this.getParent(),r,o;if(!(i&&i._id===this._id)){for(s.unshift(this);n&&(!i||n._id!==i._id);)s.unshift(n),n=n.parent;for(r=s.length,o=0;o<r;o++)t(s[o])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return C.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return C.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return C.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return C.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return C.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&C.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(pn,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),i,s,n,r,o;const a={attrs:{},className:this.getClassName()};for(i in t)s=t[i],o=C.isObject(s)&&!C._isPlainObject(s)&&!C._isArray(s),!o&&(n=typeof this[i]=="function"&&this[i],delete t[i],r=n?n.call(this):null,t[i]=s,r!==s&&(a.attrs[i]=s));return C._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,s){const n=[];i&&this._isMatch(t)&&n.push(this);let r=this.parent;for(;r;){if(r===s)return n;r._isMatch(t)&&n.push(r),r=r.parent}return n}isAncestorOf(t){return!1}findAncestor(t,i,s){return this.findAncestors(t,i,s)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let i=t.replace(/ /g,"").split(","),s=i.length,n,r;for(n=0;n<s;n++)if(r=i[n],C.isValidSelector(r)||(C.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),C.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),C.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(ga,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,i={},s){return i.target=i.target||this,s?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(De,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let i;if(t)return i=new ae,this._eachAncestorReverse(function(s){const n=s.transformsEnabled();n==="all"?i.multiply(s.getTransform()):n==="position"&&i.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},t),i;{i=this._cache.get(De)||new ae,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();const s=this.transformsEnabled();if(s==="all")i.multiply(this.getTransform());else if(s==="position"){const n=this.attrs.x||0,r=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;i.translate(n-o,r-a)}return i.dirty=!1,i}}getAbsoluteScale(t){let i=this;for(;i;)i._isUnderCache&&(t=i),i=i.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Xe,this._getTransform)}_getTransform(){var t,i;const s=this._cache.get(Xe)||new ae;s.reset();const n=this.x(),r=this.y(),o=U.getAngle(this.rotation()),a=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,d=this.attrs.skewX||0,c=this.attrs.skewY||0,h=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return(n!==0||r!==0)&&s.translate(n,r),o!==0&&s.rotate(o),(d!==0||c!==0)&&s.skew(d,c),(a!==1||l!==1)&&s.scale(a,l),(h!==0||u!==0)&&s.translate(-1*h,-1*u),s.dirty=!1,s}clone(t){let i=C.cloneObject(this.attrs),s,n,r,o,a;for(s in t)i[s]=t[s];const l=new this.constructor(i);for(s in this.eventListeners)for(n=this.eventListeners[s],r=n.length,o=0;o<r;o++)a=n[o],a.name.indexOf(Iu)<0&&(l.eventListeners[s]||(l.eventListeners[s]=[]),l.eventListeners[s].push(a));return l}_toKonvaCanvas(t){t=t||{};const i=this.getClientRect(),s=this.getStage(),n=t.x!==void 0?t.x:Math.floor(i.x),r=t.y!==void 0?t.y:Math.floor(i.y),o=t.pixelRatio||1,a=new Qe({width:t.width||Math.ceil(i.width)||(s?s.width():0),height:t.height||Math.ceil(i.height)||(s?s.height():0),pixelRatio:o}),l=a.getContext(),d=new Qe({width:a.width/a.pixelRatio+Math.abs(n),height:a.height/a.pixelRatio+Math.abs(r),pixelRatio:a.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(n||r)&&l.translate(-1*n,-1*r),this.drawScene(a,void 0,d),l.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const i=t.mimeType||null,s=t.quality||null,n=this._toKonvaCanvas(t).toDataURL(i,s);return t.callback&&t.callback(n),n}toImage(t){return new Promise((i,s)=>{try{const n=t?.callback;n&&delete t.callback,C._urlToImage(this.toDataURL(t),function(r){i(r),n?.(r)})}catch(n){s(n)}})}toBlob(t){return new Promise((i,s)=>{try{const n=t?.callback;n&&delete t.callback,this.toCanvas(t).toBlob(r=>{i(r),n?.(r)},t?.mimeType,t?.quality)}catch(n){s(n)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():U.dragDistance}_off(t,i,s){let n=this.eventListeners[t],r,o,a;for(r=0;r<n.length;r++)if(o=n[r].name,a=n[r].handler,(o!=="konva"||i==="konva")&&(!i||o===i)&&(!s||s===a)){if(n.splice(r,1),n.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,i,s){this._fire(t+Ou,{oldVal:i,newVal:s})}addName(t){if(!this.hasName(t)){const i=this.name(),s=i?i+" "+t:t;this.name(s)}return this}hasName(t){if(!t)return!1;const i=this.name();return i?(i||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const i=(this.name()||"").split(/\s/g),s=i.indexOf(t);return s!==-1&&(i.splice(s,1),this.name(i.join(" "))),this}setAttr(t,i){const s=this[ua+C._capitalize(t)];return C._isFunction(s)?s.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(U.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,i){const s=this.attrs[t];s===i&&!C.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,s,i),this._requestDraw())}_setComponentAttr(t,i,s){let n;s!==void 0&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=s,this._fireChangeEvent(t,n,s))}_fireAndBubble(t,i,s){i&&this.nodeType===fa&&(i.target=this);const n=[Du,Gu,Fu,Nu,Bu,Hu];if(!(n.indexOf(t)!==-1&&(s&&(this===s||this.isAncestorOf&&this.isAncestorOf(s))||this.nodeType==="Stage"&&!s))){this._fire(t,i);const o=n.indexOf(t)!==-1&&s&&s.isAncestorOf&&s.isAncestorOf(this)&&!s.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!o&&(s&&s.parent?this._fireAndBubble.call(this.parent,t,i,s):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,s;const{nodeType:n}=this,r=H.protoListenerMap.get(n)||{};let o=r?.[t];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(s=(i=a.eventListeners)===null||i===void 0?void 0:i[t])!==null&&s!==void 0?s:[];o.push(...l),a=Object.getPrototypeOf(a)}r[t]=o,H.protoListenerMap.set(n,r)}return o}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const s=this._getProtoListeners(t);if(s)for(let r=0;r<s.length;r++)s[r].handler.call(this,i);const n=this.eventListeners[t];if(n)for(let r=0;r<n.length;r++)n[r].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const i=t?t.pointerId:void 0,s=this.getStage(),n=this.getAbsolutePosition();if(!s)return;const r=s._getPointerById(i)||s._changedPointerPositions[0]||n;St._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-n.x,y:r.y-n.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){St._dragElements.has(this._id)||this._createDragElement(t);const s=St._dragElements.get(this._id);s.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const s=this.getStage()._getPointerById(i.pointerId);if(!s)return;let n={x:s.x-i.offset.x,y:s.y-i.offset.y};const r=this.dragBoundFunc();if(r!==void 0){const o=r.call(this,n,t);o?n=o:C.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==n.x||this._lastPos.y!==n.y)&&(this.setAbsolutePosition(n),this._requestDraw()),this._lastPos=n}stopDrag(t){const i=St._dragElements.get(this._id);i&&(i.dragStatus="stopped"),St._endDragBefore(t),St._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=St._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||U.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let n=!1;St._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(n=!0)}),n||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const i=St._dragElements.get(this._id),s=i&&i.dragStatus==="dragging",n=i&&i.dragStatus==="ready";s?this.stopDrag():n&&St._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const s={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return C.haveIntersection(s,this.getClientRect())}static create(t,i){return C._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){let s=H.prototype.getClassName.call(t),n=t.children,r,o,a;i&&(t.attrs.container=i),U[s]||(C.warn('Can not find a node with class name "'+s+'". Fallback to "Shape".'),s="Shape");const l=U[s];if(r=new l(t.attrs),n)for(o=n.length,a=0;a<o;a++)r.add(H._createNode(n[a]));return r}}H.protoListenerMap=new Map;H.prototype.nodeType="Node";H.prototype._attrsAffectingSize=[];H.prototype.eventListeners={};H.prototype.on.call(H.prototype,$u,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Xe),this._clearSelfAndDescendantCache(De)});H.prototype.on.call(H.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Pr)});H.prototype.on.call(H.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Tr)});H.prototype.on.call(H.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(pn)});const Et=x.addGetterSetter;Et(H,"zIndex");Et(H,"absolutePosition");Et(H,"position");Et(H,"x",0,$());Et(H,"y",0,$());Et(H,"globalCompositeOperation","source-over",ki());Et(H,"opacity",1,$());Et(H,"name","",ki());Et(H,"id","",ki());Et(H,"rotation",0,$());x.addComponentsGetterSetter(H,"scale",["x","y"]);Et(H,"scaleX",1,$());Et(H,"scaleY",1,$());x.addComponentsGetterSetter(H,"skew",["x","y"]);Et(H,"skewX",0,$());Et(H,"skewY",0,$());x.addComponentsGetterSetter(H,"offset",["x","y"]);Et(H,"offsetX",0,$());Et(H,"offsetY",0,$());Et(H,"dragDistance",void 0,$());Et(H,"width",0,$());Et(H,"height",0,$());Et(H,"listening",!0,ve());Et(H,"preventDefault",!0,ve());Et(H,"filters",void 0,function(e){return this._filterUpToDate=!1,e});Et(H,"visible",!0,ve());Et(H,"transformsEnabled","all",ki());Et(H,"size");Et(H,"dragBoundFunc");Et(H,"draggable",!1,ve());x.backCompat(H,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class ce extends H{constructor(){super(...arguments),this.children=[]}getChildren(t){const i=this.children||[];return t?i.filter(t):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let s=0;s<t.length;s++)this.add(t[s]);return this}const i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){const s=[];return this._descendants(n=>{const r=n._isMatch(t);return r&&s.push(n),!!(r&&i)}),s}_descendants(t){let i=!1;const s=this.getChildren();for(const n of s){if(i=t(n),i)return!0;if(n.hasChildren()&&(i=n._descendants(t),i))return!0}return!1}toObject(){const t=H.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){let i=t.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){const i=H.prototype.clone.call(this,t);return this.getChildren().forEach(function(s){i.add(s.clone())}),i}getAllIntersections(t){const i=[];return this.find("Shape").forEach(s=>{s.isVisible()&&s.intersects(t)&&i.push(s)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(s){s._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,s){i.index=s}),this._requestDraw()}drawScene(t,i,s){const n=this.getLayer(),r=t||n&&n.getCanvas(),o=r&&r.getContext(),a=this._getCanvasCache(),l=a&&a.scene,d=r&&r.isCache;if(!this.isVisible()&&!d)return this;if(l){o.save();const c=this.getAbsoluteTransform(i).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",r,i,s);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;const s=this.getLayer(),n=t||s&&s.hitCanvas,r=n&&n.getContext(),o=this._getCanvasCache();if(o&&o.hit){r.save();const l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",n,i);return this}_drawChildren(t,i,s,n){var r;const o=i&&i.getContext(),a=this.clipWidth(),l=this.clipHeight(),d=this.clipFunc(),c=typeof a=="number"&&typeof l=="number"||d,h=s===this;if(c){o.save();const f=this.getAbsoluteTransform(s);let g=f.getMatrix();o.transform(g[0],g[1],g[2],g[3],g[4],g[5]),o.beginPath();let b;if(d)b=d.call(this,o,this);else{const v=this.clipX(),_=this.clipY();o.rect(v||0,_||0,a,l)}o.clip.apply(o,b),g=f.copy().invert().getMatrix(),o.transform(g[0],g[1],g[2],g[3],g[4],g[5])}const u=!h&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";u&&(o.save(),o._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(f){f[t](i,s,n)}),u&&o.restore(),c&&o.restore()}getClientRect(t={}){var i;const s=t.skipTransform,n=t.relativeTo;let r,o,a,l,d={x:1/0,y:1/0,width:0,height:0};const c=this;(i=this.children)===null||i===void 0||i.forEach(function(f){if(!f.visible())return;const g=f.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});g.width===0&&g.height===0||(r===void 0?(r=g.x,o=g.y,a=g.x+g.width,l=g.y+g.height):(r=Math.min(r,g.x),o=Math.min(o,g.y),a=Math.max(a,g.x+g.width),l=Math.max(l,g.y+g.height)))});const h=this.find("Shape");let u=!1;for(let f=0;f<h.length;f++)if(h[f]._isVisible(this)){u=!0;break}return u&&r!==void 0?d={x:r,y:o,width:a-r,height:l-o}:d={x:0,y:0,width:0,height:0},s?d:this._transformedRect(d,n)}}x.addComponentsGetterSetter(ce,"clip",["x","y","width","height"]);x.addGetterSetter(ce,"clipX",void 0,$());x.addGetterSetter(ce,"clipY",void 0,$());x.addGetterSetter(ce,"clipWidth",void 0,$());x.addGetterSetter(ce,"clipHeight",void 0,$());x.addGetterSetter(ce,"clipFunc");const Fs=new Map,Xl=U._global.PointerEvent!==void 0;function rr(e){return Fs.get(e)}function uo(e){return{evt:e,pointerId:e.pointerId}}function Yl(e,t){return Fs.get(e)===t}function Vl(e,t){Ss(e),t.getStage()&&(Fs.set(e,t),Xl&&t._fire("gotpointercapture",uo(new PointerEvent("gotpointercapture"))))}function Ss(e,t){const i=Fs.get(e);if(!i)return;const s=i.getStage();s&&s.content,Fs.delete(e),Xl&&i._fire("lostpointercapture",uo(new PointerEvent("lostpointercapture")))}const ju="Stage",Uu="string",pa="px",Xu="mouseout",Kl="mouseleave",ql="mouseover",Ql="mouseenter",Jl="mousemove",Zl="mousedown",tc="mouseup",ls="pointermove",cs="pointerdown",Di="pointerup",ds="pointercancel",Yu="lostpointercapture",Zs="pointerout",hs="pointerleave",tn="pointerover",en="pointerenter",Ar="contextmenu",ec="touchstart",ic="touchend",sc="touchmove",nc="touchcancel",Er="wheel",Vu=5,Ku=[[Ql,"_pointerenter"],[Zl,"_pointerdown"],[Jl,"_pointermove"],[tc,"_pointerup"],[Kl,"_pointerleave"],[ec,"_pointerdown"],[sc,"_pointermove"],[ic,"_pointerup"],[nc,"_pointercancel"],[ql,"_pointerover"],[Er,"_wheel"],[Ar,"_contextmenu"],[cs,"_pointerdown"],[ls,"_pointermove"],[Di,"_pointerup"],[ds,"_pointercancel"],[hs,"_pointerleave"],[Yu,"_lostpointercapture"]],or={mouse:{[Zs]:Xu,[hs]:Kl,[tn]:ql,[en]:Ql,[ls]:Jl,[cs]:Zl,[Di]:tc,[ds]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Zs]:"touchout",[hs]:"touchleave",[tn]:"touchover",[en]:"touchenter",[ls]:sc,[cs]:ec,[Di]:ic,[ds]:nc,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Zs]:Zs,[hs]:hs,[tn]:tn,[en]:en,[ls]:ls,[cs]:cs,[Di]:Di,[ds]:ds,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},us=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",Ri=e=>{const t=us(e);if(t==="pointer")return U.pointerEventsEnabled&&or.pointer;if(t==="touch")return or.touch;if(t==="mouse")return or.mouse};function ma(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&C.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const qu="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Cs=[];class Xn extends ce{constructor(t){super(ma(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Cs.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ma(this.attrs)}),this._checkVisibility()}_validateAdd(t){const i=t.getType()==="Layer",s=t.getType()==="FastLayer";i||s||C.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===Uu){let i;if(t.charAt(0)==="."){const s=t.slice(1);t=document.getElementsByClassName(s)[0]}else t.charAt(0)!=="#"?i=t:i=t.slice(1),t=document.getElementById(i);if(!t)throw"Can not find container in document with id "+i}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,i=t.length;for(let s=0;s<i;s++)t[s].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),ce.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&C._isInDocument(t)&&this.container().removeChild(t);const i=Cs.indexOf(this);return i>-1&&Cs.splice(i,1),C.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(C.warn(qu),null)}_getPointerById(t){return this._pointerPositions.find(i=>i.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const i=new Qe({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),s=i.getContext()._context,n=this.children;return(t.x||t.y)&&s.translate(-1*t.x,-1*t.y),n.forEach(function(r){if(!r.isVisible())return;const o=r._toKonvaCanvas(t);s.drawImage(o._canvas,t.x,t.y,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}),i}getIntersection(t){if(!t)return null;const i=this.children,s=i.length,n=s-1;for(let r=n;r>=0;r--){const o=i[r].getIntersection(t);if(o)return o}return null}_resizeDOM(){const t=this.width(),i=this.height();this.content&&(this.content.style.width=t+pa,this.content.style.height=i+pa),this.bufferCanvas.setSize(t,i),this.bufferHitCanvas.setSize(t,i),this.children.forEach(s=>{s.setSize({width:t,height:i}),s.draw()})}add(t,...i){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(t);const s=this.children.length;return s>Vu&&C.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),U.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return Yl(t,this)}setPointerCapture(t){Vl(t,this)}releaseCapture(t){Ss(t)}getLayers(){return this.children}_bindContentEvents(){U.isBrowser&&Ku.forEach(([t,i])=>{this.content.addEventListener(t,s=>{this[i](s)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const i=Ri(t.type);i&&this._fire(i.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const i=Ri(t.type);i&&this._fire(i.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let i=this[t+"targetShape"];return i&&!i.getStage()&&(i=null),i}_pointerleave(t){const i=Ri(t.type),s=us(t.type);if(!i)return;this.setPointersPositions(t);const n=this._getTargetShape(s),r=!(U.isDragging()||U.isTransforming())||U.hitOnDragEnabled;n&&r?(n._fireAndBubble(i.pointerout,{evt:t}),n._fireAndBubble(i.pointerleave,{evt:t}),this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this[s+"targetShape"]=null):r&&(this._fire(i.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(i.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const i=Ri(t.type),s=us(t.type);if(!i)return;this.setPointersPositions(t);let n=!1;this._changedPointerPositions.forEach(r=>{const o=this.getIntersection(r);if(St.justDragged=!1,U["_"+s+"ListenClick"]=!0,!o||!o.isListening()){this[s+"ClickStartShape"]=void 0;return}U.capturePointerEventsEnabled&&o.setPointerCapture(r.id),this[s+"ClickStartShape"]=o,o._fireAndBubble(i.pointerdown,{evt:t,pointerId:r.id}),n=!0;const a=t.type.indexOf("touch")>=0;o.preventDefault()&&t.cancelable&&a&&t.preventDefault()}),n||this._fire(i.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const i=Ri(t.type),s=us(t.type);if(!i)return;const n=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(U.isDragging()&&St.node.preventDefault()&&t.cancelable&&n&&t.preventDefault(),this.setPointersPositions(t),!(!(U.isDragging()||U.isTransforming())||U.hitOnDragEnabled))return;const o={};let a=!1;const l=this._getTargetShape(s);this._changedPointerPositions.forEach(d=>{const c=rr(d.id)||this.getIntersection(d),h=d.id,u={evt:t,pointerId:h},f=l!==c;if(f&&l&&(l._fireAndBubble(i.pointerout,{...u},c),l._fireAndBubble(i.pointerleave,{...u},c)),c){if(o[c._id])return;o[c._id]=!0}c&&c.isListening()?(a=!0,f&&(c._fireAndBubble(i.pointerover,{...u},l),c._fireAndBubble(i.pointerenter,{...u},l),this[s+"targetShape"]=c),c._fireAndBubble(i.pointermove,{...u})):l&&(this._fire(i.pointerover,{evt:t,target:this,currentTarget:this,pointerId:h}),this[s+"targetShape"]=null)}),a||this._fire(i.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const i=Ri(t.type),s=us(t.type);if(!i)return;this.setPointersPositions(t);const n=this[s+"ClickStartShape"],r=this[s+"ClickEndShape"],o={};let a=!1;this._changedPointerPositions.forEach(l=>{const d=rr(l.id)||this.getIntersection(l);if(d){if(d.releaseCapture(l.id),o[d._id])return;o[d._id]=!0}const c=l.id,h={evt:t,pointerId:c};let u=!1;U["_"+s+"InDblClickWindow"]?(u=!0,clearTimeout(this[s+"DblTimeout"])):St.justDragged||(U["_"+s+"InDblClickWindow"]=!0,clearTimeout(this[s+"DblTimeout"])),this[s+"DblTimeout"]=setTimeout(function(){U["_"+s+"InDblClickWindow"]=!1},U.dblClickWindow),d&&d.isListening()?(a=!0,this[s+"ClickEndShape"]=d,d._fireAndBubble(i.pointerup,{...h}),U["_"+s+"ListenClick"]&&n&&n===d&&(d._fireAndBubble(i.pointerclick,{...h}),u&&r&&r===d&&d._fireAndBubble(i.pointerdblclick,{...h}))):(this[s+"ClickEndShape"]=null,a||(this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),a=!0),U["_"+s+"ListenClick"]&&this._fire(i.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:c}),u&&this._fire(i.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:c}))}),a||this._fire(i.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),U["_"+s+"ListenClick"]=!1,t.cancelable&&s!=="touch"&&s!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Ar,{evt:t}):this._fire(Ar,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?i._fireAndBubble(Er,{evt:t}):this._fire(Er,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const i=rr(t.pointerId)||this.getIntersection(this.getPointerPosition());i&&i._fireAndBubble(Di,uo(t)),Ss(t.pointerId)}_lostpointercapture(t){Ss(t.pointerId)}setPointersPositions(t){const i=this._getContentPosition();let s=null,n=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,r=>{this._pointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,r=>{this._changedPointerPositions.push({id:r.identifier,x:(r.clientX-i.left)/i.scaleX,y:(r.clientY-i.top)/i.scaleY})})):(s=(t.clientX-i.left)/i.scaleX,n=(t.clientY-i.top)/i.scaleY,this.pointerPos={x:s,y:n},this._pointerPositions=[{x:s,y:n,id:C._getFirstPointerId(t)}],this._changedPointerPositions=[{x:s,y:n,id:C._getFirstPointerId(t)}])}_setPointerPosition(t){C.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Qe({width:this.width(),height:this.height()}),this.bufferHitCanvas=new co({pixelRatio:1,width:this.width(),height:this.height()}),!U.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return C.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}Xn.prototype.nodeType=ju;Bt(Xn);x.addGetterSetter(Xn,"container");U.isBrowser&&document.addEventListener("visibilitychange",()=>{Cs.forEach(e=>{e.batchDraw()})});const rc="hasShadow",oc="shadowRGBA",ac="patternImage",lc="linearGradient",cc="radialGradient";let sn;function ar(){return sn||(sn=C.createCanvasElement().getContext("2d"),sn)}const ks={};function Qu(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function Ju(e){e.stroke()}function Zu(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function t0(e){e.stroke()}function e0(){this._clearCache(rc)}function i0(){this._clearCache(oc)}function s0(){this._clearCache(ac)}function n0(){this._clearCache(lc)}function r0(){this._clearCache(cc)}class D extends H{constructor(t){super(t);let i,s=0;for(;i=C.getHitColor(),!(i&&!(i in ks));)if(s++,s>=1e4){C.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),i=C.getRandomColor();break}this.colorKey=i,ks[i]=this}getContext(){return C.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return C.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(rc,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(ac,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const i=ar().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(i&&i.setTransform){const s=new ae;s.translate(this.fillPatternX(),this.fillPatternY()),s.rotate(U.getAngle(this.fillPatternRotation())),s.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),s.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=s.getMatrix(),r=typeof DOMMatrix>"u"?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);i.setTransform(r)}return i}}_getLinearGradient(){return this._getCache(lc,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const i=ar(),s=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),r=i.createLinearGradient(s.x,s.y,n.x,n.y);for(let o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}}_getRadialGradient(){return this._getCache(cc,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const i=ar(),s=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),r=i.createRadialGradient(s.x,s.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius());for(let o=0;o<t.length;o+=2)r.addColorStop(t[o],t[o+1]);return r}}getShadowRGBA(){return this._getCache(oc,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=C.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const i=this.getStage();if(!i)return!1;const s=i.bufferHitCanvas;return s.getContext().clear(),this.drawHit(s,void 0,!0),s.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return H.prototype.destroy.call(this),delete ks[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var i;if(!((i=this.attrs.perfectDrawEnabled)!==null&&i!==void 0?i:!0))return!1;const n=t||this.hasFill(),r=this.hasStroke(),o=this.getAbsoluteOpacity()!==1;if(n&&r&&o)return!0;const a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(n&&r&&a&&l)}setStrokeHitEnabled(t){C.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let i=!1,s=this.getParent();for(;s;){if(s.isCached()){i=!0;break}s=s.getParent()}const n=t.skipTransform,r=t.relativeTo||i&&this.getStage()||void 0,o=this.getSelfRect(),l=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,d=o.width+l,c=o.height+l,h=!t.skipShadow&&this.hasShadow(),u=h?this.shadowOffsetX():0,f=h?this.shadowOffsetY():0,g=d+Math.abs(u),b=c+Math.abs(f),v=h&&this.shadowBlur()||0,_=g+v*2,w=b+v*2,M={width:_,height:w,x:-(l/2+v)+Math.min(u,0)+o.x,y:-(l/2+v)+Math.min(f,0)+o.y};return n?M:this._transformedRect(M,r)}drawScene(t,i,s){const n=this.getLayer(),r=t||n.getCanvas(),o=r.getContext(),a=this._getCanvasCache(),l=this.getSceneFunc(),d=this.hasShadow();let c;const h=i===this;if(!this.isVisible()&&!h)return this;if(a){o.save();const u=this.getAbsoluteTransform(i).getMatrix();return o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!l)return this;if(o.save(),this._useBufferCanvas()){c=this.getStage();const u=s||c.bufferCanvas,f=u.getContext();s?(f.save(),f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,u.width,u.height),f.restore()):f.clear(),f.save(),f._applyLineJoin(this),f._applyMiterLimit(this);const g=this.getAbsoluteTransform(i).getMatrix();f.transform(g[0],g[1],g[2],g[3],g[4],g[5]),l.call(this,f,this),f.restore();const b=u.pixelRatio;d&&o._applyShadow(this),h||(o._applyOpacity(this),o._applyGlobalCompositeOperation(this)),o.drawImage(u._canvas,u.x||0,u.y||0,u.width/b,u.height/b)}else{if(o._applyLineJoin(this),o._applyMiterLimit(this),!h){const u=this.getAbsoluteTransform(i).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)}d&&o._applyShadow(this),l.call(this,o,this)}return o.restore(),this}drawHit(t,i,s=!1){if(!this.shouldDrawHit(i,s))return this;const n=this.getLayer(),r=t||n.hitCanvas,o=r&&r.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),d=l&&l.hit;if(this.colorKey||C.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),d){o.save();const h=this.getAbsoluteTransform(i).getMatrix();return o.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),o._applyMiterLimit(this),!(this===i)){const h=this.getAbsoluteTransform(i).getMatrix();o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return a.call(this,o,this),o.restore(),this}drawHitFromCache(t=0){const i=this._getCanvasCache(),s=this._getCachedSceneCanvas(),n=i.hit,r=n.getContext(),o=n.getWidth(),a=n.getHeight();r.clear(),r.drawImage(s._canvas,0,0,o,a);try{const l=r.getImageData(0,0,o,a),d=l.data,c=d.length,h=C._hexToRgb(this.colorKey);for(let u=0;u<c;u+=4)d[u+3]>t?(d[u]=h.r,d[u+1]=h.g,d[u+2]=h.b,d[u+3]=255):d[u+3]=0;r.putImageData(l,0,0)}catch(l){C.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(t){return Yl(t,this)}setPointerCapture(t){Vl(t,this)}releaseCapture(t){Ss(t)}}D.prototype._fillFunc=Qu;D.prototype._strokeFunc=Ju;D.prototype._fillFuncHit=Zu;D.prototype._strokeFuncHit=t0;D.prototype._centroid=!1;D.prototype.nodeType="Shape";Bt(D);D.prototype.eventListeners={};D.prototype.on.call(D.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",e0);D.prototype.on.call(D.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",i0);D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",s0);D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",n0);D.prototype.on.call(D.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",r0);x.addGetterSetter(D,"stroke",void 0,Ul());x.addGetterSetter(D,"strokeWidth",2,$());x.addGetterSetter(D,"fillAfterStrokeEnabled",!1);x.addGetterSetter(D,"hitStrokeWidth","auto",ho());x.addGetterSetter(D,"strokeHitEnabled",!0,ve());x.addGetterSetter(D,"perfectDrawEnabled",!0,ve());x.addGetterSetter(D,"shadowForStrokeEnabled",!0,ve());x.addGetterSetter(D,"lineJoin");x.addGetterSetter(D,"lineCap");x.addGetterSetter(D,"miterLimit");x.addGetterSetter(D,"sceneFunc");x.addGetterSetter(D,"hitFunc");x.addGetterSetter(D,"dash");x.addGetterSetter(D,"dashOffset",0,$());x.addGetterSetter(D,"shadowColor",void 0,ki());x.addGetterSetter(D,"shadowBlur",0,$());x.addGetterSetter(D,"shadowOpacity",1,$());x.addComponentsGetterSetter(D,"shadowOffset",["x","y"]);x.addGetterSetter(D,"shadowOffsetX",0,$());x.addGetterSetter(D,"shadowOffsetY",0,$());x.addGetterSetter(D,"fillPatternImage");x.addGetterSetter(D,"fill",void 0,Ul());x.addGetterSetter(D,"fillPatternX",0,$());x.addGetterSetter(D,"fillPatternY",0,$());x.addGetterSetter(D,"fillLinearGradientColorStops");x.addGetterSetter(D,"strokeLinearGradientColorStops");x.addGetterSetter(D,"fillRadialGradientStartRadius",0);x.addGetterSetter(D,"fillRadialGradientEndRadius",0);x.addGetterSetter(D,"fillRadialGradientColorStops");x.addGetterSetter(D,"fillPatternRepeat","repeat");x.addGetterSetter(D,"fillEnabled",!0);x.addGetterSetter(D,"strokeEnabled",!0);x.addGetterSetter(D,"shadowEnabled",!0);x.addGetterSetter(D,"dashEnabled",!0);x.addGetterSetter(D,"strokeScaleEnabled",!0);x.addGetterSetter(D,"fillPriority","color");x.addComponentsGetterSetter(D,"fillPatternOffset",["x","y"]);x.addGetterSetter(D,"fillPatternOffsetX",0,$());x.addGetterSetter(D,"fillPatternOffsetY",0,$());x.addComponentsGetterSetter(D,"fillPatternScale",["x","y"]);x.addGetterSetter(D,"fillPatternScaleX",1,$());x.addGetterSetter(D,"fillPatternScaleY",1,$());x.addComponentsGetterSetter(D,"fillLinearGradientStartPoint",["x","y"]);x.addComponentsGetterSetter(D,"strokeLinearGradientStartPoint",["x","y"]);x.addGetterSetter(D,"fillLinearGradientStartPointX",0);x.addGetterSetter(D,"strokeLinearGradientStartPointX",0);x.addGetterSetter(D,"fillLinearGradientStartPointY",0);x.addGetterSetter(D,"strokeLinearGradientStartPointY",0);x.addComponentsGetterSetter(D,"fillLinearGradientEndPoint",["x","y"]);x.addComponentsGetterSetter(D,"strokeLinearGradientEndPoint",["x","y"]);x.addGetterSetter(D,"fillLinearGradientEndPointX",0);x.addGetterSetter(D,"strokeLinearGradientEndPointX",0);x.addGetterSetter(D,"fillLinearGradientEndPointY",0);x.addGetterSetter(D,"strokeLinearGradientEndPointY",0);x.addComponentsGetterSetter(D,"fillRadialGradientStartPoint",["x","y"]);x.addGetterSetter(D,"fillRadialGradientStartPointX",0);x.addGetterSetter(D,"fillRadialGradientStartPointY",0);x.addComponentsGetterSetter(D,"fillRadialGradientEndPoint",["x","y"]);x.addGetterSetter(D,"fillRadialGradientEndPointX",0);x.addGetterSetter(D,"fillRadialGradientEndPointY",0);x.addGetterSetter(D,"fillPatternRotation",0);x.addGetterSetter(D,"fillRule",void 0,ki());x.backCompat(D,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const o0="beforeDraw",a0="draw",dc=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],l0=dc.length;class Mi extends ce{constructor(t){super(t),this.canvas=new Qe,this.hitCanvas=new co({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){H.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!H.prototype.moveUp.call(this))return!1;const i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(H.prototype.moveDown.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(H.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return H.prototype.remove.call(this),t&&t.parentNode&&C._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&C.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),H.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){C.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){C.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,C.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let i=1,s=!1;for(;;){for(let n=0;n<l0;n++){const r=dc[n],o=this._getIntersection({x:t.x+r.x*i,y:t.y+r.y*i}),a=o.shape;if(a)return a;if(s=!!o.antialiased,!o.antialiased)break}if(s)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,s=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,n=s[3];if(n===255){const r=C.getHitColorKey(s[0],s[1],s[2]),o=ks[r];return o?{shape:o}:{antialiased:!0}}else if(n>0)return{antialiased:!0};return{}}drawScene(t,i,s){const n=this.getLayer(),r=t||n&&n.getCanvas();return this._fire(o0,{node:this}),this.clearBeforeDraw()&&r.getContext().clear(),ce.prototype.drawScene.call(this,r,i,s),this._fire(a0,{node:this}),this}drawHit(t,i){const s=this.getLayer(),n=t||s&&s.hitCanvas;return s&&s.clearBeforeDraw()&&s.getHitCanvas().getContext().clear(),ce.prototype.drawHit.call(this,n,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return C.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return C.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Mi.prototype.nodeType="Layer";Bt(Mi);x.addGetterSetter(Mi,"imageSmoothingEnabled",!0);x.addGetterSetter(Mi,"clearBeforeDraw",!0);x.addGetterSetter(Mi,"hitGraphEnabled",!0,ve());class fo extends Mi{constructor(t){super(t),this.listening(!1),C.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}fo.prototype.nodeType="FastLayer";Bt(fo);class Ui extends ce{_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&C.throw("You may only add groups and shapes to groups.")}}Ui.prototype.nodeType="Group";Bt(Ui);const lr=(function(){return xi.performance&&xi.performance.now?function(){return xi.performance.now()}:function(){return new Date().getTime()}})();class fe{constructor(t,i){this.id=fe.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:lr(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){let i=[];return t&&(i=Array.isArray(t)?t:[t]),this.layers=i,this}getLayers(){return this.layers}addLayer(t){const i=this.layers,s=i.length;for(let n=0;n<s;n++)if(i[n]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const i=fe.animations,s=i.length;for(let n=0;n<s;n++)if(i[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=lr(),fe._addAnimation(this),this}stop(){return fe._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const i=t.id,s=this.animations,n=s.length;for(let r=0;r<n;r++)if(s[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){const t={},i=this.animations;for(let s=0;s<i.length;s++){const n=i[s],r=n.layers,o=n.func;n._updateFrameObject(lr());const a=r.length;let l;if(o?l=o.call(n,n.frame)!==!1:l=!0,!!l)for(let d=0;d<a;d++){const c=r[d];c._id!==void 0&&(t[c._id]=c)}}for(const s in t)t.hasOwnProperty(s)&&t[s].batchDraw()}static _animationLoop(){const t=fe;t.animations.length?(t._runFrames(),C.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,C.requestAnimFrame(this._animationLoop))}}fe.animations=[];fe.animIdCounter=0;fe.animRunning=!1;const c0={node:1,duration:1,easing:1,onFinish:1,yoyo:1},d0=1,ba=2,xa=3,ya=["fill","stroke","shadowColor"];let h0=0;class u0{constructor(t,i,s,n,r,o,a){this.prop=t,this.propFunc=i,this.begin=n,this._pos=n,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=s,this._change=r-this.begin,this.pause()}fire(t){const i=this[t];i&&i()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=ba,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=xa,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===ba?this.setTime(t):this.state===xa&&this.setTime(this.duration-t)}pause(){this.state=d0,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Ot{constructor(t){const i=this,s=t.node,n=s._id,r=t.easing||Ms.Linear,o=!!t.yoyo;let a,l;typeof t.duration>"u"?a=.3:t.duration===0?a=.001:a=t.duration,this.node=s,this._id=h0++;const d=s.getLayer()||(s instanceof U.Stage?s.getLayers():null);d||C.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new fe(function(){i.tween.onEnterFrame()},d),this.tween=new u0(l,function(c){i._tweenFunc(c)},r,0,1,a*1e3,o),this._addListeners(),Ot.attrs[n]||(Ot.attrs[n]={}),Ot.attrs[n][this._id]||(Ot.attrs[n][this._id]={}),Ot.tweens[n]||(Ot.tweens[n]={});for(l in t)c0[l]===void 0&&this._addAttr(l,t[l]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,i){const s=this.node,n=s._id;let r,o,a,l,d;const c=Ot.tweens[n][t];c&&delete Ot.attrs[n][c][t];let h=s.getAttr(t);if(C._isArray(i))if(r=[],o=Math.max(i.length,h.length),t==="points"&&i.length!==h.length&&(i.length>h.length?(l=h,h=C._prepareArrayForTween(h,i,s.closed())):(a=i,i=C._prepareArrayForTween(i,h,s.closed()))),t.indexOf("fill")===0)for(let u=0;u<o;u++)if(u%2===0)r.push(i[u]-h[u]);else{const f=C.colorToRGBA(h[u]);d=C.colorToRGBA(i[u]),h[u]=f,r.push({r:d.r-f.r,g:d.g-f.g,b:d.b-f.b,a:d.a-f.a})}else for(let u=0;u<o;u++)r.push(i[u]-h[u]);else ya.indexOf(t)!==-1?(h=C.colorToRGBA(h),d=C.colorToRGBA(i),r={r:d.r-h.r,g:d.g-h.g,b:d.b-h.b,a:d.a-h.a}):r=i-h;Ot.attrs[n][this._id][t]={start:h,diff:r,end:i,trueEnd:a,trueStart:l},Ot.tweens[n][t]=this._id}_tweenFunc(t){const i=this.node,s=Ot.attrs[i._id][this._id];let n,r,o,a,l,d,c,h;for(n in s){if(r=s[n],o=r.start,a=r.diff,h=r.end,C._isArray(o))if(l=[],c=Math.max(o.length,h.length),n.indexOf("fill")===0)for(d=0;d<c;d++)d%2===0?l.push((o[d]||0)+a[d]*t):l.push("rgba("+Math.round(o[d].r+a[d].r*t)+","+Math.round(o[d].g+a[d].g*t)+","+Math.round(o[d].b+a[d].b*t)+","+(o[d].a+a[d].a*t)+")");else for(d=0;d<c;d++)l.push((o[d]||0)+a[d]*t);else ya.indexOf(n)!==-1?l="rgba("+Math.round(o.r+a.r*t)+","+Math.round(o.g+a.g*t)+","+Math.round(o.b+a.b*t)+","+(o.a+a.a*t)+")":l=o+a*t;i.setAttr(n,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,i=Ot.attrs[t._id][this._id];i.points&&i.points.trueEnd&&t.setAttr("points",i.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,i=Ot.attrs[t._id][this._id];i.points&&i.points.trueStart&&t.points(i.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,i=this._id,s=Ot.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const n in s)delete Ot.tweens[t][n];delete Ot.attrs[t][i],Ot.tweens[t]&&(Object.keys(Ot.tweens[t]).length===0&&delete Ot.tweens[t],Object.keys(Ot.attrs[t]).length===0&&delete Ot.attrs[t])}}Ot.attrs={};Ot.tweens={};H.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new Ot(e).play()};const Ms={BackEaseIn(e,t,i,s){return i*(e/=s)*e*((1.70158+1)*e-1.70158)+t},BackEaseOut(e,t,i,s){return i*((e=e/s-1)*e*((1.70158+1)*e+1.70158)+1)+t},BackEaseInOut(e,t,i,s){let n=1.70158;return(e/=s/2)<1?i/2*(e*e*(((n*=1.525)+1)*e-n))+t:i/2*((e-=2)*e*(((n*=1.525)+1)*e+n)+2)+t},ElasticEaseIn(e,t,i,s,n,r){let o=0;return e===0?t:(e/=s)===1?t+i:(r||(r=s*.3),!n||n<Math.abs(i)?(n=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/n),-(n*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+t)},ElasticEaseOut(e,t,i,s,n,r){let o=0;return e===0?t:(e/=s)===1?t+i:(r||(r=s*.3),!n||n<Math.abs(i)?(n=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*e)*Math.sin((e*s-o)*(2*Math.PI)/r)+i+t)},ElasticEaseInOut(e,t,i,s,n,r){let o=0;return e===0?t:(e/=s/2)===2?t+i:(r||(r=s*(.3*1.5)),!n||n<Math.abs(i)?(n=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/n),e<1?-.5*(n*Math.pow(2,10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r))+t:n*Math.pow(2,-10*(e-=1))*Math.sin((e*s-o)*(2*Math.PI)/r)*.5+i+t)},BounceEaseOut(e,t,i,s){return(e/=s)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,i,s){return i-Ms.BounceEaseOut(s-e,0,i,s)+t},BounceEaseInOut(e,t,i,s){return e<s/2?Ms.BounceEaseIn(e*2,0,i,s)*.5+t:Ms.BounceEaseOut(e*2-s,0,i,s)*.5+i*.5+t},EaseIn(e,t,i,s){return i*(e/=s)*e+t},EaseOut(e,t,i,s){return-i*(e/=s)*(e-2)+t},EaseInOut(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,i,s){return i*(e/=s)*e*e*e*e+t},StrongEaseOut(e,t,i,s){return i*((e=e/s-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,i,s){return i*e/s+t}},va=C._assign(U,{Util:C,Transform:ae,Node:H,Container:ce,Stage:Xn,stages:Cs,Layer:Mi,FastLayer:fo,Group:Ui,DD:St,Shape:D,shapes:ks,Animation:fe,Tween:Ot,Easings:Ms,Context:jn,Canvas:lo});class ze extends D{_sceneFunc(t){const i=U.getAngle(this.angle()),s=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,s),t.arc(0,0,this.innerRadius(),i,0,!s),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),s=this.clockwise(),n=U.getAngle(s?360-this.angle():this.angle()),r=Math.cos(Math.min(n,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,n),3*Math.PI/2)),l=Math.sin(Math.min(n,Math.PI/2)),d=r*(r>0?t:i),c=o*i,h=a*(a>0?t:i),u=l*(l>0?i:t);return{x:d,y:s?-1*u:h,width:c-d,height:u-h}}}ze.prototype._centroid=!0;ze.prototype.className="Arc";ze.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];Bt(ze);x.addGetterSetter(ze,"innerRadius",0,$());x.addGetterSetter(ze,"outerRadius",0,$());x.addGetterSetter(ze,"angle",0,$());x.addGetterSetter(ze,"clockwise",!1,ve());function Rr(e,t,i,s,n,r,o){const a=Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2)),l=Math.sqrt(Math.pow(n-i,2)+Math.pow(r-s,2)),d=o*a/(a+l),c=o*l/(a+l),h=i-d*(n-e),u=s-d*(r-t),f=i+c*(n-e),g=s+c*(r-t);return[h,u,f,g]}function _a(e,t){const i=e.length,s=[];for(let n=2;n<i-2;n+=2){const r=Rr(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],t);isNaN(r[0])||(s.push(r[0]),s.push(r[1]),s.push(e[n]),s.push(e[n+1]),s.push(r[2]),s.push(r[3]))}return s}function f0(e){const t=[[e[0],e[2],e[4],e[6]],[e[1],e[3],e[5],e[7]]],i=[];for(const s of t){const n=-3*s[0]+9*s[1]-9*s[2]+3*s[3];if(n!==0){const r=6*s[0]-12*s[1]+6*s[2],o=-3*s[0]+3*s[1],a=r*r-4*n*o;if(a>=0){const l=Math.sqrt(a);i.push((-r+l)/(2*n)),i.push((-r-l)/(2*n))}}}return i.filter(s=>s>0&&s<1).flatMap(s=>t.map(n=>{const r=1-s;return r*r*r*n[0]+3*r*r*s*n[1]+3*r*s*s*n[2]+s*s*s*n[3]}))}class je extends D{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const i=this.points(),s=i.length,n=this.tension(),r=this.closed(),o=this.bezier();if(!s)return;let a=0;if(t.beginPath(),t.moveTo(i[0],i[1]),n!==0&&s>4){const l=this.getTensionPoints(),d=l.length;for(a=r?0:4,r||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);a<d-2;)t.bezierCurveTo(l[a++],l[a++],l[a++],l[a++],l[a++],l[a++]);r||t.quadraticCurveTo(l[d-2],l[d-1],i[s-2],i[s-1])}else if(o)for(a=2;a<s;)t.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);else for(a=2;a<s;a+=2)t.lineTo(i[a],i[a+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():_a(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),i=t.length,s=this.tension(),n=Rr(t[i-2],t[i-1],t[0],t[1],t[2],t[3],s),r=Rr(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],s),o=_a(t,s);return[n[2],n[3]].concat(o).concat([r[0],r[1],t[i-2],t[i-1],r[2],r[3],n[0],n[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...f0(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let i=t[0],s=t[0],n=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],i=Math.min(i,o),s=Math.max(s,o),n=Math.min(n,a),r=Math.max(r,a);return{x:i,y:n,width:s-i,height:r-n}}}je.prototype.className="Line";je.prototype._attrsAffectingSize=["points","bezier","tension"];Bt(je);x.addGetterSetter(je,"closed",!1);x.addGetterSetter(je,"bezier",!1);x.addGetterSetter(je,"tension",0,$());x.addGetterSetter(je,"points",[],Au());const g0=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],p0=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],m0=[[1],[1,1],[1,2,1],[1,3,3,1]],wa=(e,t,i)=>{let s,n;const o=i/2;s=0;for(let a=0;a<20;a++)n=o*g0[20][a]+o,s+=p0[20][a]*b0(e,t,n);return o*s},Sa=(e,t,i)=>{i===void 0&&(i=1);const s=e[0]-2*e[1]+e[2],n=t[0]-2*t[1]+t[2],r=2*e[1]-2*e[0],o=2*t[1]-2*t[0],a=4*(s*s+n*n),l=4*(s*r+n*o),d=r*r+o*o;if(a===0)return i*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const c=l/(2*a),h=d/a,u=i+c,f=h-c*c,g=u*u+f>0?Math.sqrt(u*u+f):0,b=c*c+f>0?Math.sqrt(c*c+f):0,v=c+Math.sqrt(c*c+f)!==0?f*Math.log(Math.abs((u+g)/(c+b))):0;return Math.sqrt(a)/2*(u*g-c*b+v)};function b0(e,t,i){const s=Or(1,i,e),n=Or(1,i,t),r=s*s+n*n;return Math.sqrt(r)}const Or=(e,t,i)=>{const s=i.length-1;let n,r;if(s===0)return 0;if(e===0){r=0;for(let o=0;o<=s;o++)r+=m0[s][o]*Math.pow(1-t,s-o)*Math.pow(t,o)*i[o];return r}else{n=new Array(s);for(let o=0;o<s;o++)n[o]=s*(i[o+1]-i[o]);return Or(e-1,t,n)}},Ca=(e,t,i)=>{let s=1,n=e/t,r=(e-i(n))/t,o=0;for(;s>.001;){const a=i(n+r),l=Math.abs(e-a)/t;if(l<s)s=l,n+=r;else{const d=i(n-r),c=Math.abs(e-d)/t;c<s?(s=c,n-=r):r/=2}if(o++,o>500)break}return n};class It extends D{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=It.parsePathData(this.data()),this.pathLength=It.getPathLength(this.dataArray)}_sceneFunc(t){const i=this.dataArray;t.beginPath();let s=!1;for(let n=0;n<i.length;n++){const r=i[n].command,o=i[n].points;switch(r){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":const a=o[0],l=o[1],d=o[2],c=o[3],h=o[4],u=o[5],f=o[6],g=o[7],b=d>c?d:c,v=d>c?1:d/c,_=d>c?c/d:1;t.translate(a,l),t.rotate(f),t.scale(v,_),t.arc(0,0,b,h,h+u,1-g),t.scale(1/v,1/_),t.rotate(-f),t.translate(-a,-l);break;case"z":s=!0,t.closePath();break}}!s&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(l){if(l.command==="A"){const d=l.points[4],c=l.points[5],h=l.points[4]+c;let u=Math.PI/180;if(Math.abs(d-h)<u&&(u=Math.abs(d-h)),c<0)for(let f=d-u;f>h;f-=u){const g=It.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);t.push(g.x,g.y)}else for(let f=d+u;f<h;f+=u){const g=It.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);t.push(g.x,g.y)}}else if(l.command==="C")for(let d=0;d<=1;d+=.01){const c=It.getPointOnCubicBezier(d,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);t.push(c.x,c.y)}else t=t.concat(l.points)});let i=t[0],s=t[0],n=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],isNaN(o)||(i=Math.min(i,o),s=Math.max(s,o)),isNaN(a)||(n=Math.min(n,a),r=Math.max(r,a));return{x:i,y:n,width:s-i,height:r-n}}getLength(){return this.pathLength}getPointAtLength(t){return It.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,i,s,n){return Math.sqrt((s-t)*(s-t)+(n-i)*(n-i))}static getPathLength(t){let i=0;for(let s=0;s<t.length;++s)i+=t[s].pathLength;return i}static getPointAtLengthOfDataArray(t,i){let s,n=0,r=i.length;if(!r)return null;for(;n<r&&t>i[n].pathLength;)t-=i[n].pathLength,++n;if(n===r)return s=i[n-1].points.slice(-2),{x:s[0],y:s[1]};if(t<.01)return i[n].command==="M"?(s=i[n].points.slice(0,2),{x:s[0],y:s[1]}):{x:i[n].start.x,y:i[n].start.y};const o=i[n],a=o.points;switch(o.command){case"L":return It.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return It.getPointOnCubicBezier(Ca(t,It.getPathLength(i),b=>wa([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],b)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return It.getPointOnQuadraticBezier(Ca(t,It.getPathLength(i),b=>Sa([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],b)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":const l=a[0],d=a[1],c=a[2],h=a[3],u=a[5],f=a[6];let g=a[4];return g+=u*t/o.pathLength,It.getPointOnEllipticalArc(l,d,c,h,g,f)}return null}static getPointOnLine(t,i,s,n,r,o,a){o=o??i,a=a??s;const l=this.getLineLength(i,s,n,r);if(l<1e-10)return{x:i,y:s};if(n===i)return{x:o,y:a+(r>s?t:-t)};const d=(r-s)/(n-i),c=Math.sqrt(t*t/(1+d*d))*(n<i?-1:1),h=d*c;if(Math.abs(a-s-d*(o-i))<1e-10)return{x:o+c,y:a+h};const u=((o-i)*(n-i)+(a-s)*(r-s))/(l*l),f=i+u*(n-i),g=s+u*(r-s),b=this.getLineLength(o,a,f,g),v=Math.sqrt(t*t-b*b),_=Math.sqrt(v*v/(1+d*d))*(n<i?-1:1),w=d*_;return{x:f+_,y:g+w}}static getPointOnCubicBezier(t,i,s,n,r,o,a,l,d){function c(v){return v*v*v}function h(v){return 3*v*v*(1-v)}function u(v){return 3*v*(1-v)*(1-v)}function f(v){return(1-v)*(1-v)*(1-v)}const g=l*c(t)+o*h(t)+n*u(t)+i*f(t),b=d*c(t)+a*h(t)+r*u(t)+s*f(t);return{x:g,y:b}}static getPointOnQuadraticBezier(t,i,s,n,r,o,a){function l(f){return f*f}function d(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}const h=o*l(t)+n*d(t)+i*c(t),u=a*l(t)+r*d(t)+s*c(t);return{x:h,y:u}}static getPointOnEllipticalArc(t,i,s,n,r,o){const a=Math.cos(o),l=Math.sin(o),d={x:s*Math.cos(r),y:n*Math.sin(r)};return{x:t+(d.x*a-d.y*l),y:i+(d.x*l+d.y*a)}}static parsePathData(t){if(!t)return[];let i=t;const s=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(let h=0;h<s.length;h++)i=i.replace(new RegExp(s[h],"g"),"|"+s[h]);const n=i.split("|"),r=[],o=[];let a=0,l=0;const d=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let c;for(let h=1;h<n.length;h++){let u=n[h],f=u.charAt(0);for(u=u.slice(1),o.length=0;c=d.exec(u);)o.push(c[0]);let g=[],b=f==="A"||f==="a"?0:-1;for(let v=0,_=o.length;v<_;v++){const w=o[v];if(w==="00"){g.push(0,0),b>=0&&(b+=2,b>=7&&(b-=7));continue}if(b>=0){if(b===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(w)){g.push(parseInt(w[0],10)),g.push(parseInt(w[1],10)),g.push(parseFloat(w.slice(2))),b+=3,b>=7&&(b-=7);continue}if(w==="11"||w==="10"||w==="01"){g.push(parseInt(w[0],10)),g.push(parseInt(w[1],10)),b+=2,b>=7&&(b-=7);continue}if(w==="0"||w==="1"){g.push(parseInt(w,10)),b+=1,b>=7&&(b-=7);continue}}else if(b===4){if(/^[01]\d+(?:\.\d+)?$/.test(w)){g.push(parseInt(w[0],10)),g.push(parseFloat(w.slice(1))),b+=2,b>=7&&(b-=7);continue}if(w==="0"||w==="1"){g.push(parseInt(w,10)),b+=1,b>=7&&(b-=7);continue}}const M=parseFloat(w);isNaN(M)?g.push(0):g.push(M),b+=1,b>=7&&(b-=7)}else{const M=parseFloat(w);isNaN(M)?g.push(0):g.push(M)}}for(;g.length>0&&!isNaN(g[0]);){let v="",_=[];const w=a,M=l;let k,E,A,V,O,K,J,lt,Z,st;switch(f){case"l":a+=g.shift(),l+=g.shift(),v="L",_.push(a,l);break;case"L":a=g.shift(),l=g.shift(),_.push(a,l);break;case"m":const ct=g.shift(),tt=g.shift();if(a+=ct,l+=tt,v="M",r.length>2&&r[r.length-1].command==="z"){for(let j=r.length-2;j>=0;j--)if(r[j].command==="M"){a=r[j].points[0]+ct,l=r[j].points[1]+tt;break}}_.push(a,l),f="l";break;case"M":a=g.shift(),l=g.shift(),v="M",_.push(a,l),f="L";break;case"h":a+=g.shift(),v="L",_.push(a,l);break;case"H":a=g.shift(),v="L",_.push(a,l);break;case"v":l+=g.shift(),v="L",_.push(a,l);break;case"V":l=g.shift(),v="L",_.push(a,l);break;case"C":_.push(g.shift(),g.shift(),g.shift(),g.shift()),a=g.shift(),l=g.shift(),_.push(a,l);break;case"c":_.push(a+g.shift(),l+g.shift(),a+g.shift(),l+g.shift()),a+=g.shift(),l+=g.shift(),v="C",_.push(a,l);break;case"S":E=a,A=l,k=r[r.length-1],k.command==="C"&&(E=a+(a-k.points[2]),A=l+(l-k.points[3])),_.push(E,A,g.shift(),g.shift()),a=g.shift(),l=g.shift(),v="C",_.push(a,l);break;case"s":E=a,A=l,k=r[r.length-1],k.command==="C"&&(E=a+(a-k.points[2]),A=l+(l-k.points[3])),_.push(E,A,a+g.shift(),l+g.shift()),a+=g.shift(),l+=g.shift(),v="C",_.push(a,l);break;case"Q":_.push(g.shift(),g.shift()),a=g.shift(),l=g.shift(),_.push(a,l);break;case"q":_.push(a+g.shift(),l+g.shift()),a+=g.shift(),l+=g.shift(),v="Q",_.push(a,l);break;case"T":E=a,A=l,k=r[r.length-1],k.command==="Q"&&(E=a+(a-k.points[0]),A=l+(l-k.points[1])),a=g.shift(),l=g.shift(),v="Q",_.push(E,A,a,l);break;case"t":E=a,A=l,k=r[r.length-1],k.command==="Q"&&(E=a+(a-k.points[0]),A=l+(l-k.points[1])),a+=g.shift(),l+=g.shift(),v="Q",_.push(E,A,a,l);break;case"A":V=g.shift(),O=g.shift(),K=g.shift(),J=g.shift(),lt=g.shift(),Z=a,st=l,a=g.shift(),l=g.shift(),v="A",_=this.convertEndpointToCenterParameterization(Z,st,a,l,J,lt,V,O,K);break;case"a":V=g.shift(),O=g.shift(),K=g.shift(),J=g.shift(),lt=g.shift(),Z=a,st=l,a+=g.shift(),l+=g.shift(),v="A",_=this.convertEndpointToCenterParameterization(Z,st,a,l,J,lt,V,O,K);break}r.push({command:v||f,points:_,start:{x:w,y:M},pathLength:this.calcLength(w,M,v||f,_)})}(f==="z"||f==="Z")&&r.push({command:"z",points:[],start:void 0,pathLength:0})}return r}static calcLength(t,i,s,n){let r,o,a,l;const d=It;switch(s){case"L":return d.getLineLength(t,i,n[0],n[1]);case"C":return wa([t,n[0],n[2],n[4]],[i,n[1],n[3],n[5]],1);case"Q":return Sa([t,n[0],n[2]],[i,n[1],n[3]],1);case"A":r=0;const c=n[4],h=n[5],u=n[4]+h;let f=Math.PI/180;if(Math.abs(c-u)<f&&(f=Math.abs(c-u)),o=d.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),h<0)for(l=c-f;l>u;l-=f)a=d.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),r+=d.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=c+f;l<u;l+=f)a=d.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),r+=d.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=d.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],u,0),r+=d.getLineLength(o.x,o.y,a.x,a.y),r}return 0}static convertEndpointToCenterParameterization(t,i,s,n,r,o,a,l,d){const c=d*(Math.PI/180),h=Math.cos(c)*(t-s)/2+Math.sin(c)*(i-n)/2,u=-1*Math.sin(c)*(t-s)/2+Math.cos(c)*(i-n)/2,f=h*h/(a*a)+u*u/(l*l);f>1&&(a*=Math.sqrt(f),l*=Math.sqrt(f));let g=Math.sqrt((a*a*(l*l)-a*a*(u*u)-l*l*(h*h))/(a*a*(u*u)+l*l*(h*h)));r===o&&(g*=-1),isNaN(g)&&(g=0);const b=g*a*u/l,v=g*-l*h/a,_=(t+s)/2+Math.cos(c)*b-Math.sin(c)*v,w=(i+n)/2+Math.sin(c)*b+Math.cos(c)*v,M=function(J){return Math.sqrt(J[0]*J[0]+J[1]*J[1])},k=function(J,lt){return(J[0]*lt[0]+J[1]*lt[1])/(M(J)*M(lt))},E=function(J,lt){return(J[0]*lt[1]<J[1]*lt[0]?-1:1)*Math.acos(k(J,lt))},A=E([1,0],[(h-b)/a,(u-v)/l]),V=[(h-b)/a,(u-v)/l],O=[(-1*h-b)/a,(-1*u-v)/l];let K=E(V,O);return k(V,O)<=-1&&(K=Math.PI),k(V,O)>=1&&(K=0),o===0&&K>0&&(K=K-2*Math.PI),o===1&&K<0&&(K=K+2*Math.PI),[_,w,a,l,A,K,c,o]}}It.prototype.className="Path";It.prototype._attrsAffectingSize=["data"];Bt(It);x.addGetterSetter(It,"data");class Ti extends je{_sceneFunc(t){super._sceneFunc(t);const i=Math.PI*2,s=this.points();let n=s;const r=this.tension()!==0&&s.length>4;r&&(n=this.getTensionPoints());const o=this.pointerLength(),a=s.length;let l,d;if(r){const u=[n[n.length-4],n[n.length-3],n[n.length-2],n[n.length-1],s[a-2],s[a-1]],f=It.calcLength(n[n.length-4],n[n.length-3],"C",u),g=It.getPointOnQuadraticBezier(Math.min(1,1-o/f),u[0],u[1],u[2],u[3],u[4],u[5]);l=s[a-2]-g.x,d=s[a-1]-g.y}else l=s[a-2]-s[a-4],d=s[a-1]-s[a-3];const c=(Math.atan2(d,l)+i)%i,h=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(s[a-2],s[a-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-o,h/2),t.lineTo(-o,-h/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(s[0],s[1]),r?(l=(n[0]+n[2])/2-s[0],d=(n[1]+n[3])/2-s[1]):(l=s[2]-s[0],d=s[3]-s[1]),t.rotate((Math.atan2(-d,-l)+i)%i),t.moveTo(0,0),t.lineTo(-o,h/2),t.lineTo(-o,-h/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x,y:t.y-i,width:t.width,height:t.height+i*2}}}Ti.prototype.className="Arrow";Bt(Ti);x.addGetterSetter(Ti,"pointerLength",10,$());x.addGetterSetter(Ti,"pointerWidth",10,$());x.addGetterSetter(Ti,"pointerAtBeginning",!1);x.addGetterSetter(Ti,"pointerAtEnding",!0);class Vi extends D{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Vi.prototype._centroid=!0;Vi.prototype.className="Circle";Vi.prototype._attrsAffectingSize=["radius"];Bt(Vi);x.addGetterSetter(Vi,"radius",0,$());class ai extends D{_sceneFunc(t){const i=this.radiusX(),s=this.radiusY();t.beginPath(),t.save(),i!==s&&t.scale(1,s/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}ai.prototype.className="Ellipse";ai.prototype._centroid=!0;ai.prototype._attrsAffectingSize=["radiusX","radiusY"];Bt(ai);x.addComponentsGetterSetter(ai,"radius",["x","y"]);x.addGetterSetter(ai,"radiusX",0,$());x.addGetterSetter(ai,"radiusY",0,$());class de extends D{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",i=>{this._removeImageLoad(i.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),i=this.hasShadow();return t&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),s=this.getHeight(),n=this.cornerRadius(),r=this.attrs.image;let o;if(r){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[r,this.cropX(),this.cropY(),a,l,0,0,i,s]:o=[r,0,0,i,s]}(this.hasFill()||this.hasStroke()||n)&&(t.beginPath(),n?C.drawRoundedRectPath(t,i,s,n):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)),r&&(n&&t.clip(),t.drawImage.apply(t,o))}_hitFunc(t){const i=this.width(),s=this.height(),n=this.cornerRadius();t.beginPath(),n?C.drawRoundedRectPath(t,i,s,n):t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i,s;return(s=(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width)!==null&&s!==void 0?s:0}getHeight(){var t,i,s;return(s=(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height)!==null&&s!==void 0?s:0}static fromURL(t,i,s=null){const n=C.createImageElement();n.onload=function(){const r=new de({image:n});i(r)},n.onerror=s,n.crossOrigin="Anonymous",n.src=t}}de.prototype.className="Image";de.prototype._attrsAffectingSize=["image"];Bt(de);x.addGetterSetter(de,"cornerRadius",0,Un(4));x.addGetterSetter(de,"image");x.addComponentsGetterSetter(de,"crop",["x","y","width","height"]);x.addGetterSetter(de,"cropX",0,$());x.addGetterSetter(de,"cropY",0,$());x.addGetterSetter(de,"cropWidth",0,$());x.addGetterSetter(de,"cropHeight",0,$());const hc=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],x0="Change.konva",y0="none",Lr="up",Ir="right",Dr="down",Gr="left",v0=hc.length;class go extends Ui{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let i=this,s;const n=function(){i._sync()};for(s=0;s<v0;s++)t.on(hc[s]+x0,n)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),i=this.getTag(),s,n,r,o,a,l,d;if(t&&i){switch(s=t.width(),n=t.height(),r=i.pointerDirection(),o=i.pointerWidth(),d=i.pointerHeight(),a=0,l=0,r){case Lr:a=s/2,l=-1*d;break;case Ir:a=s+o,l=n/2;break;case Dr:a=s/2,l=n+d;break;case Gr:a=-1*o,l=n/2;break}i.setAttrs({x:-1*a,y:-1*l,width:s,height:n}),t.setAttrs({x:-1*a,y:-1*l})}}}go.prototype.className="Label";Bt(go);class Pi extends D{_sceneFunc(t){const i=this.width(),s=this.height(),n=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,d=0,c=0,h=0;typeof a=="number"?l=d=c=h=Math.min(a,i/2,s/2):(l=Math.min(a[0]||0,i/2,s/2),d=Math.min(a[1]||0,i/2,s/2),h=Math.min(a[2]||0,i/2,s/2),c=Math.min(a[3]||0,i/2,s/2)),t.beginPath(),t.moveTo(l,0),n===Lr&&(t.lineTo((i-r)/2,0),t.lineTo(i/2,-1*o),t.lineTo((i+r)/2,0)),t.lineTo(i-d,0),t.arc(i-d,d,d,Math.PI*3/2,0,!1),n===Ir&&(t.lineTo(i,(s-o)/2),t.lineTo(i+r,s/2),t.lineTo(i,(s+o)/2)),t.lineTo(i,s-h),t.arc(i-h,s-h,h,0,Math.PI/2,!1),n===Dr&&(t.lineTo((i+r)/2,s),t.lineTo(i/2,s+o),t.lineTo((i-r)/2,s)),t.lineTo(c,s),t.arc(c,s-c,c,Math.PI/2,Math.PI,!1),n===Gr&&(t.lineTo(0,(s+o)/2),t.lineTo(-1*r,s/2),t.lineTo(0,(s-o)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,i=0,s=this.pointerWidth(),n=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),a=this.height();return r===Lr?(i-=n,a+=n):r===Dr?a+=n:r===Gr?(t-=s*1.5,o+=s):r===Ir&&(o+=s*1.5),{x:t,y:i,width:o,height:a}}}Pi.prototype.className="Tag";Bt(Pi);x.addGetterSetter(Pi,"pointerDirection",y0);x.addGetterSetter(Pi,"pointerWidth",0,$());x.addGetterSetter(Pi,"pointerHeight",0,$());x.addGetterSetter(Pi,"cornerRadius",0,Un(4));class js extends D{_sceneFunc(t){const i=this.cornerRadius(),s=this.width(),n=this.height();t.beginPath(),i?C.drawRoundedRectPath(t,s,n,i):t.rect(0,0,s,n),t.closePath(),t.fillStrokeShape(this)}}js.prototype.className="Rect";Bt(js);x.addGetterSetter(js,"cornerRadius",0,Un(4));class li extends D{_sceneFunc(t){const i=this._getPoints(),s=this.radius(),n=this.sides(),r=this.cornerRadius();if(t.beginPath(),r)C.drawRoundedPolygonPath(t,i,n,s,r);else{t.moveTo(i[0].x,i[0].y);for(let o=1;o<i.length;o++)t.lineTo(i[o].x,i[o].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,s=[];for(let n=0;n<t;n++)s.push({x:i*Math.sin(n*2*Math.PI/t),y:-1*i*Math.cos(n*2*Math.PI/t)});return s}getSelfRect(){const t=this._getPoints();let i=t[0].x,s=t[0].x,n=t[0].y,r=t[0].y;return t.forEach(o=>{i=Math.min(i,o.x),s=Math.max(s,o.x),n=Math.min(n,o.y),r=Math.max(r,o.y)}),{x:i,y:n,width:s-i,height:r-n}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}li.prototype.className="RegularPolygon";li.prototype._centroid=!0;li.prototype._attrsAffectingSize=["radius"];Bt(li);x.addGetterSetter(li,"radius",0,$());x.addGetterSetter(li,"sides",0,$());x.addGetterSetter(li,"cornerRadius",0,Un(4));const ka=Math.PI*2;class Ai extends D{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,ka,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),ka,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Ai.prototype.className="Ring";Ai.prototype._centroid=!0;Ai.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Bt(Ai);x.addGetterSetter(Ai,"innerRadius",0,$());x.addGetterSetter(Ai,"outerRadius",0,$());class Le extends D{constructor(t){super(t),this._updated=!0,this.anim=new fe(()=>{const i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const i=this.animation(),s=this.frameIndex(),n=s*4,r=this.animations()[i],o=this.frameOffsets(),a=r[n+0],l=r[n+1],d=r[n+2],c=r[n+3],h=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,d,c),t.closePath(),t.fillStrokeShape(this)),h)if(o){const u=o[i],f=s*2;t.drawImage(h,a,l,d,c,u[f+0],u[f+1],d,c)}else t.drawImage(h,a,l,d,c,0,0,d,c)}_hitFunc(t){const i=this.animation(),s=this.frameIndex(),n=s*4,r=this.animations()[i],o=this.frameOffsets(),a=r[n+2],l=r[n+3];if(t.beginPath(),o){const d=o[i],c=s*2;t.rect(d[c+0],d[c+1],a,l)}else t.rect(0,0,a,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),i=this.animation(),s=this.animations(),n=s[i],r=n.length/4;t<r-1?this.frameIndex(t+1):this.frameIndex(0)}}Le.prototype.className="Sprite";Bt(Le);x.addGetterSetter(Le,"animation");x.addGetterSetter(Le,"animations");x.addGetterSetter(Le,"frameOffsets");x.addGetterSetter(Le,"image");x.addGetterSetter(Le,"frameIndex",0,$());x.addGetterSetter(Le,"frameRate",17,$());x.backCompat(Le,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class ci extends D{_sceneFunc(t){const i=this.innerRadius(),s=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-s);for(let r=1;r<n*2;r++){const o=r%2===0?s:i,a=o*Math.sin(r*Math.PI/n),l=-1*o*Math.cos(r*Math.PI/n);t.lineTo(a,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}ci.prototype.className="Star";ci.prototype._centroid=!0;ci.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Bt(ci);x.addGetterSetter(ci,"numPoints",5,$());x.addGetterSetter(ci,"innerRadius",0,$());x.addGetterSetter(ci,"outerRadius",0,$());function Ye(e){return[...e].reduce((t,i,s,n)=>{if(new RegExp("\\p{Emoji}","u").test(i)){const r=n[s+1];r&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(r)?(t.push(i+r),n[s+1]=""):t.push(i)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(n[s+1]||""))?t.push(i+n[s+1]):s>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?t[t.length-1]+=i:i&&t.push(i);return t},[])}const Oi="auto",_0="center",uc="inherit",rs="justify",w0="Change.konva",S0="2d",Ma="-",fc="left",C0="text",k0="Text",M0="top",T0="bottom",Ta="middle",gc="normal",P0="px ",nn=" ",A0="right",Pa="rtl",E0="word",R0="char",Aa="none",cr="",pc=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],O0=pc.length;function L0(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,s=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!s&&(t=`"${t}"`),t}).join(", ")}let rn;function dr(){return rn||(rn=C.createCanvasElement().getContext(S0),rn)}function I0(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function D0(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function G0(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Gt extends D{constructor(t){super(G0(t)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<O0;i++)this.on(pc[i]+w0,this._setTextData);this._setTextData()}_sceneFunc(t){var i,s;const n=this.textArr,r=n.length;if(!this.text())return;let o=this.padding(),a=this.fontSize(),l=this.lineHeight()*a,d=this.verticalAlign(),c=this.direction(),h=0,u=this.align(),f=this.getWidth(),g=this.letterSpacing(),b=this.charRenderFunc(),v=this.fill(),_=this.textDecoration(),w=this.underlineOffset(),M=_.indexOf("underline")!==-1,k=_.indexOf("line-through")!==-1,E;c=c===uc?t.direction:c;let A=l/2,V=Ta;if(!U.legacyTextRendering){const O=this.measureSize("M");V="alphabetic";const K=(i=O.fontBoundingBoxAscent)!==null&&i!==void 0?i:O.actualBoundingBoxAscent,J=(s=O.fontBoundingBoxDescent)!==null&&s!==void 0?s:O.actualBoundingBoxDescent;A=(K-J)/2+l/2}for(c===Pa&&t.setAttr("direction",c),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",V),t.setAttr("textAlign",fc),d===Ta?h=(this.getHeight()-r*l-o*2)/2:d===T0&&(h=this.getHeight()-r*l-o*2),t.translate(o,h+o),E=0;E<r;E++){let O=0,K=0;const J=n[E],lt=J.text,Z=J.width,st=J.lastInParagraph;if(t.save(),u===A0?O+=f-Z-o*2:u===_0&&(O+=(f-Z-o*2)/2),M){t.save(),t.beginPath();const tt=w??(U.legacyTextRendering?Math.round(a/2):Math.round(a/4)),j=O,R=A+K+tt;t.moveTo(j,R);const m=u===rs&&!st?f-o*2:Z;t.lineTo(j+Math.round(m),R),t.lineWidth=a/15;const T=this._getLinearGradient();t.strokeStyle=T||v,t.stroke(),t.restore()}const ct=O;if(c!==Pa&&(g!==0||u===rs||b)){const tt=lt.split(" ").length-1,j=Ye(lt);for(let R=0;R<j.length;R++){const m=j[R];if(m===" "&&!st&&u===rs&&(O+=(f-o*2-Z)/tt),this._partialTextX=O,this._partialTextY=A+K,this._partialText=m,b){t.save();const gt=n.slice(0,E).reduce((W,pt)=>W+Ye(pt.text).length,0),F=R+gt;b({char:m,index:F,x:O,y:A+K,lineIndex:E,column:R,isLastInLine:st,width:this.measureSize(m).width,context:t})}t.fillStrokeShape(this),b&&t.restore(),O+=this.measureSize(m).width+g}}else g!==0&&t.setAttr("letterSpacing",`${g}px`),this._partialTextX=O,this._partialTextY=A+K,this._partialText=lt,t.fillStrokeShape(this);if(k){t.save(),t.beginPath();const tt=U.legacyTextRendering?0:-Math.round(a/4),j=ct;t.moveTo(j,A+K+tt);const R=u===rs&&!st?f-o*2:Z;t.lineTo(j+Math.round(R),A+K+tt),t.lineWidth=a/15;const m=this._getLinearGradient();t.strokeStyle=m||v,t.stroke(),t.restore()}t.restore(),r>1&&(A+=l)}}_hitFunc(t){const i=this.getWidth(),s=this.getHeight();t.beginPath(),t.rect(0,0,i,s),t.closePath(),t.fillStrokeShape(this)}setText(t){const i=C._isString(t)?t:t==null?"":t+"";return this._setAttr(C0,i),this}getWidth(){return this.attrs.width===Oi||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===Oi||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i,s,n,r,o,a,l,d,c,h,u;let f=dr(),g=this.fontSize(),b;f.save(),f.font=this._getContextFont(),b=f.measureText(t),f.restore();const v=g/100;return{actualBoundingBoxAscent:(i=b.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*v,actualBoundingBoxDescent:(s=b.actualBoundingBoxDescent)!==null&&s!==void 0?s:0,actualBoundingBoxLeft:(n=b.actualBoundingBoxLeft)!==null&&n!==void 0?n:-7.421875*v,actualBoundingBoxRight:(r=b.actualBoundingBoxRight)!==null&&r!==void 0?r:75.732421875*v,alphabeticBaseline:(o=b.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=b.emHeightAscent)!==null&&a!==void 0?a:100*v,emHeightDescent:(l=b.emHeightDescent)!==null&&l!==void 0?l:-20*v,fontBoundingBoxAscent:(d=b.fontBoundingBoxAscent)!==null&&d!==void 0?d:91*v,fontBoundingBoxDescent:(c=b.fontBoundingBoxDescent)!==null&&c!==void 0?c:21*v,hangingBaseline:(h=b.hangingBaseline)!==null&&h!==void 0?h:72.80000305175781*v,ideographicBaseline:(u=b.ideographicBaseline)!==null&&u!==void 0?u:-21*v,width:b.width,height:g}}_getContextFont(){return this.fontStyle()+nn+this.fontVariant()+nn+(this.fontSize()+P0)+L0(this.fontFamily())}_addTextLine(t){this.align()===rs&&(t=t.trim());const s=this._getTextWidth(t);return this.textArr.push({text:t,width:s,lastInParagraph:!1})}_getTextWidth(t){const i=this.letterSpacing(),s=t.length;return dr().measureText(t).width+i*s}_setTextData(){let t=this.text().split(`
`),i=+this.fontSize(),s=0,n=this.lineHeight()*i,r=this.attrs.width,o=this.attrs.height,a=r!==Oi&&r!==void 0,l=o!==Oi&&o!==void 0,d=this.padding(),c=r-d*2,h=o-d*2,u=0,f=this.wrap(),g=f!==Aa,b=f!==R0&&g,v=this.ellipsis();this.textArr=[],dr().font=this._getContextFont();const _=v?this._getTextWidth(cr):0;for(let w=0,M=t.length;w<M;++w){let k=t[w],E=this._getTextWidth(k);if(a&&E>c)for(;k.length>0;){let A=0,V=Ye(k).length,O="",K=0;for(;A<V;){const J=A+V>>>1,lt=Ye(k),Z=lt.slice(0,J+1).join(""),st=this._getTextWidth(Z);(v&&l&&u+n>h?st+_:st)<=c?(A=J+1,O=Z,K=st):V=J}if(O){if(b){const Z=Ye(k),st=Ye(O),ct=Z[st.length],tt=ct===nn||ct===Ma;let j;if(tt&&K<=c)j=st.length;else{const R=st.lastIndexOf(nn),m=st.lastIndexOf(Ma);j=Math.max(R,m)+1}j>0&&(A=j,O=Z.slice(0,A).join(""),K=this._getTextWidth(O))}if(O=O.trimRight(),this._addTextLine(O),s=Math.max(s,K),u+=n,this._shouldHandleEllipsis(u)){this._tryToAddEllipsisToLastLine();break}if(k=Ye(k).slice(A).join("").trimLeft(),k.length>0&&(E=this._getTextWidth(k),E<=c)){this._addTextLine(k),u+=n,s=Math.max(s,E);break}}else break}else this._addTextLine(k),u+=n,s=Math.max(s,E),this._shouldHandleEllipsis(u)&&w<M-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&u+n>h)break}this.textHeight=i,this.textWidth=s}_shouldHandleEllipsis(t){const i=+this.fontSize(),s=this.lineHeight()*i,n=this.attrs.height,r=n!==Oi&&n!==void 0,o=this.padding(),a=n-o*2;return!(this.wrap()!==Aa)||r&&t+s>a}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,i=t!==Oi&&t!==void 0,s=this.padding(),n=t-s*2,r=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!r||(i&&(this._getTextWidth(o.text+cr)<n||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+cr))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return t&&i?!0:super._useBufferCanvas()}}Gt.prototype._fillFunc=I0;Gt.prototype._strokeFunc=D0;Gt.prototype.className=k0;Gt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Bt(Gt);x.overWriteSetter(Gt,"width",ho());x.overWriteSetter(Gt,"height",ho());x.addGetterSetter(Gt,"direction",uc);x.addGetterSetter(Gt,"fontFamily","Arial");x.addGetterSetter(Gt,"fontSize",12,$());x.addGetterSetter(Gt,"fontStyle",gc);x.addGetterSetter(Gt,"fontVariant",gc);x.addGetterSetter(Gt,"padding",0,$());x.addGetterSetter(Gt,"align",fc);x.addGetterSetter(Gt,"verticalAlign",M0);x.addGetterSetter(Gt,"lineHeight",1,$());x.addGetterSetter(Gt,"wrap",E0);x.addGetterSetter(Gt,"ellipsis",!1,ve());x.addGetterSetter(Gt,"letterSpacing",0,$());x.addGetterSetter(Gt,"text","",ki());x.addGetterSetter(Gt,"textDecoration","");x.addGetterSetter(Gt,"underlineOffset",void 0,$());x.addGetterSetter(Gt,"charRenderFunc",void 0);const F0="",mc="normal";function bc(e){e.fillText(this.partialText,0,0)}function xc(e){e.strokeText(this.partialText,0,0)}class $t extends D{constructor(t){super(t),this.dummyCanvas=C.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return It.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const i=this.pathLength;return t>i?null:It.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=It.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const i=this.textDecoration(),s=this.fill(),n=this.fontSize(),r=this.glyphInfo,o=i.indexOf("underline")!==-1,a=i.indexOf("line-through")!==-1;o&&t.beginPath();for(let l=0;l<r.length;l++){t.save();const d=r[l].p0;t.translate(d.x,d.y),t.rotate(r[l].rotation),this.partialText=r[l].text,t.fillStrokeShape(this),o&&(l===0&&t.moveTo(0,n/2+1),t.lineTo(r[l].width,n/2+1)),t.restore()}if(o&&(t.strokeStyle=s,t.lineWidth=n/20,t.stroke()),a){t.beginPath();for(let l=0;l<r.length;l++){t.save();const d=r[l].p0;t.translate(d.x,d.y),t.rotate(r[l].rotation),l===0&&t.moveTo(0,0),t.lineTo(r[l].width,0),t.restore()}t.strokeStyle=s,t.lineWidth=n/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const i=this.glyphInfo;if(i.length>=1){const s=i[0].p0;t.moveTo(s.x,s.y)}for(let s=0;s<i.length;s++){const n=i[s].p1;t.lineTo(n.x,n.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return C.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Gt.prototype.setText.call(this,t)}_getContextFont(){return Gt.prototype._getContextFont.call(this)}_getTextSize(t){const s=this.dummyCanvas.getContext("2d");s.save(),s.font=this._getContextFont();const n=s.measureText(t);return s.restore(),{width:n.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=Ye(this.text()),i=[];let s=0;for(let h=0;h<t.length;h++)i.push({char:t[h],width:this._getTextSize(t[h]).width}),s+=i[h].width;const{height:n}=this._getTextSize(this.attrs.text);if(this.textWidth=s,this.textHeight=n,this.glyphInfo=[],!this.attrs.data)return null;const r=this.letterSpacing(),o=this.align(),a=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);let d=0;o==="center"&&(d=Math.max(0,this.pathLength/2-l/2)),o==="right"&&(d=Math.max(0,this.pathLength-l));let c=d;for(let h=0;h<i.length;h++){const u=this._getPointAtLength(c);if(!u)return;const f=i[h].char;let g=i[h].width+r;if(f===" "&&o==="justify"){const k=this.text().split(" ").length-1;g+=(this.pathLength-l)/k}const b=this._getPointAtLength(c+g);if(!b)return;const v=It.getLineLength(u.x,u.y,b.x,b.y);let _=0;if(a)try{_=a(i[h-1].char,f)*this.fontSize()}catch{_=0}u.x+=_,b.x+=_,this.textWidth+=_;const w=It.getPointOnLine(_+v/2,u.x,u.y,b.x,b.y),M=Math.atan2(b.y-u.y,b.x-u.x);this.glyphInfo.push({transposeX:w.x,transposeY:w.y,text:t[h],rotation:M,p0:u,p1:b,width:v}),c+=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(d){t.push(d.p0.x),t.push(d.p0.y),t.push(d.p1.x),t.push(d.p1.y)});let i=t[0]||0,s=t[0]||0,n=t[1]||0,r=t[1]||0,o,a;for(let d=0;d<t.length/2;d++)o=t[d*2],a=t[d*2+1],i=Math.min(i,o),s=Math.max(s,o),n=Math.min(n,a),r=Math.max(r,a);const l=this.fontSize();return{x:i-l/2,y:n-l/2,width:s-i+l,height:r-n+l}}destroy(){return C.releaseCanvas(this.dummyCanvas),super.destroy()}}$t.prototype._fillFunc=bc;$t.prototype._strokeFunc=xc;$t.prototype._fillFuncHit=bc;$t.prototype._strokeFuncHit=xc;$t.prototype.className="TextPath";$t.prototype._attrsAffectingSize=["text","fontSize","data"];Bt($t);x.addGetterSetter($t,"data");x.addGetterSetter($t,"fontFamily","Arial");x.addGetterSetter($t,"fontSize",12,$());x.addGetterSetter($t,"fontStyle",mc);x.addGetterSetter($t,"align","left");x.addGetterSetter($t,"letterSpacing",0,$());x.addGetterSetter($t,"textBaseline","middle");x.addGetterSetter($t,"fontVariant",mc);x.addGetterSetter($t,"text",F0);x.addGetterSetter($t,"textDecoration","");x.addGetterSetter($t,"kerningFunc",void 0);const yc="tr-konva",N0=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${yc}`).join(" "),Ea="nodesRect",B0=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],H0={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},W0="ontouchstart"in U._global;function $0(e,t,i){if(e==="rotater")return i;t+=C.degToRad(H0[e]||0);const s=(C.radToDeg(t)%360+360)%360;return C._inRange(s,315+22.5,360)||C._inRange(s,0,22.5)?"ns-resize":C._inRange(s,45-22.5,45+22.5)?"nesw-resize":C._inRange(s,90-22.5,90+22.5)?"ew-resize":C._inRange(s,135-22.5,135+22.5)?"nwse-resize":C._inRange(s,180-22.5,180+22.5)?"ns-resize":C._inRange(s,225-22.5,225+22.5)?"nesw-resize":C._inRange(s,270-22.5,270+22.5)?"ew-resize":C._inRange(s,315-22.5,315+22.5)?"nwse-resize":(C.error("Transformer has unknown angle for cursor detection: "+s),"pointer")}const Tn=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function z0(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function vc(e,t,i){const s=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),n=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:s,y:n}}function j0(e,t){const i=z0(e);return vc(e,t,i)}function U0(e,t,i){let s=t;for(let n=0;n<e.length;n++){const r=U.getAngle(e[n]),o=Math.abs(r-t)%(Math.PI*2);Math.min(o,Math.PI*2-o)<i&&(s=r)}return s}let Fr=0;class bt extends Ui{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(N0,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return C.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return yc+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(n=>n.isAncestorOf(this)?(C.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(n=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(n._attrsAffectingSize.length){const o=n._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");n.on(o,r)}n.on(B0.map(o=>o+`.${this._getEventNamespace()}`).join(" "),r),n.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(n)}),this._resetTransformCache(),this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,s=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(s,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,s=>{if(!i)return;const n=t.getAbsolutePosition(),r=n.x-i.x,o=n.y-i.y;this.nodes().forEach(a=>{if(a===t||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+r,y:l.y+o}),a.startDrag(s)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Ea),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Ea,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),s){const n=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(s),o=t.getAbsolutePosition(s),a=n.x*r.x-t.offsetX()*r.x,l=n.y*r.y-t.offsetY()*r.y,d=(U.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:o.x+a*Math.cos(d)+l*Math.sin(-d),y:o.y+l*Math.cos(d)+a*Math.sin(d),width:n.width*r.x,height:n.height*r.y,rotation:d};return vc(c,-U.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const i=[];this.nodes().map(d=>{const c=d.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),h=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],u=d.getAbsoluteTransform();h.forEach(function(f){const g=u.point(f);i.push(g)})});const s=new ae;s.rotate(-U.getAngle(this.rotation()));let n=1/0,r=1/0,o=-1/0,a=-1/0;i.forEach(function(d){const c=s.point(d);n===void 0&&(n=o=c.x,r=a=c.y),n=Math.min(n,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),s.invert();const l=s.point({x:n,y:r});return{x:l.x,y:l.y,width:o-n,height:a-r,rotation:U.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Tn.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const i=new js({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:W0?10:"auto"}),s=this;i.on("mousedown touchstart",function(n){s._handleMouseDown(n)}),i.on("dragstart",n=>{i.stopDrag(),n.cancelBubble=!0}),i.on("dragend",n=>{n.cancelBubble=!0}),i.on("mouseenter",()=>{const n=U.getAngle(this.rotation()),r=this.rotateAnchorCursor(),o=$0(t,n,r);i.getStage().content&&(i.getStage().content.style.cursor=o),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){const t=new D({name:"back",width:0,height:0,sceneFunc(i,s){const n=s.getParent(),r=n.padding(),o=s.width(),a=s.height();if(i.beginPath(),i.rect(-r,-r,o+r*2,a+r*2),n.rotateEnabled()&&n.rotateLineVisible()){const l=n.rotateAnchorAngle(),d=n.rotateAnchorOffset(),c=C.degToRad(l),h=Math.sin(c),u=-Math.cos(c),f=o/2,g=a/2;let b=1/0;u<0?b=Math.min(b,-g/u):u>0&&(b=Math.min(b,(a-g)/u)),h<0?b=Math.min(b,-f/h):h>0&&(b=Math.min(b,(o-f)/h));const v=f+h*b,_=g+u*b,w=C._sign(a),M=v+h*d*w,k=_+u*d*w;i.moveTo(v,_),i.lineTo(M,k)}i.fillStrokeShape(s)},hitFunc:(i,s)=>{if(!this.shouldOverdrawWholeArea())return;const n=this.padding();i.beginPath(),i.rect(-n,-n,s.width()+n*2,s.height()+n*2),i.fillStrokeShape(s)}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const i=this._getNodeRect(),s=i.width,n=i.height,r=Math.sqrt(Math.pow(s,2)+Math.pow(n,2));this.sin=Math.abs(n/r),this.cos=Math.abs(s/r),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},Fr++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){let i,s,n;const r=this.findOne("."+this._movingAnchorName),o=r.getStage();o.setPointersPositions(t);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const d=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(d,l,t)),r.setAbsolutePosition(l);const c=r.getAbsolutePosition();if(d.x===c.x&&d.y===c.y)return;if(this._movingAnchorName==="rotater"){const w=this._getNodeRect();i=r.x()-w.width/2,s=-r.y()+w.height/2;const M=U.getAngle(this.rotateAnchorAngle());let k=Math.atan2(-s,i)+Math.PI/2-M;w.height<0&&(k-=Math.PI);const A=U.getAngle(this.rotation())+k,V=U.getAngle(this.rotationSnapTolerance()),K=U0(this.rotationSnaps(),A,V)-w.rotation,J=j0(w,K);this._fitNodesInto(J,t);return}const h=this.shiftBehavior();let u;h==="inverted"?u=this.keepRatio()&&!t.shiftKey:h==="none"?u=this.keepRatio():u=this.keepRatio()||t.shiftKey;let f=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};n=Math.sqrt(Math.pow(w.x-r.x(),2)+Math.pow(w.y-r.y(),2));const M=this.findOne(".top-left").x()>w.x?-1:1,k=this.findOne(".top-left").y()>w.y?-1:1;i=n*this.cos*M,s=n*this.sin*k,this.findOne(".top-left").x(w.x-i),this.findOne(".top-left").y(w.y-s)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(r.y());else if(this._movingAnchorName==="top-right"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};n=Math.sqrt(Math.pow(r.x()-w.x,2)+Math.pow(w.y-r.y(),2));const M=this.findOne(".top-right").x()<w.x?-1:1,k=this.findOne(".top-right").y()>w.y?-1:1;i=n*this.cos*M,s=n*this.sin*k,this.findOne(".top-right").x(w.x+i),this.findOne(".top-right").y(w.y-s)}var g=r.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(r.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(r.x());else if(this._movingAnchorName==="bottom-left"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};n=Math.sqrt(Math.pow(w.x-r.x(),2)+Math.pow(r.y()-w.y,2));const M=w.x<r.x()?-1:1,k=r.y()<w.y?-1:1;i=n*this.cos*M,s=n*this.sin*k,r.x(w.x-i),r.y(w.y+s)}g=r.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(r.y());else if(this._movingAnchorName==="bottom-right"){if(u){const w=f?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};n=Math.sqrt(Math.pow(r.x()-w.x,2)+Math.pow(r.y()-w.y,2));const M=this.findOne(".bottom-right").x()<w.x?-1:1,k=this.findOne(".bottom-right").y()<w.y?-1:1;i=n*this.cos*M,s=n*this.sin*k,this.findOne(".bottom-right").x(w.x+i),this.findOne(".bottom-right").y(w.y+s)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(f=this.centeredScaling()||t.altKey,f){const w=this.findOne(".top-left"),M=this.findOne(".bottom-right"),k=w.x(),E=w.y(),A=this.getWidth()-M.x(),V=this.getHeight()-M.y();M.move({x:-k,y:-E}),w.move({x:A,y:V})}const b=this.findOne(".top-left").getAbsolutePosition();i=b.x,s=b.y;const v=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),_=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:s,width:v,height:_,rotation:U.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const s=this.getNode();Fr--,this._fire("transformend",{evt:t,target:s}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),s&&this._nodes.forEach(n=>{var r;n._fire("transformend",{evt:t,target:n}),(r=n.getLayer())===null||r===void 0||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,i){const s=this._getNodeRect(),n=1;if(C._inRange(t.width,-this.padding()*2-n,n)){this.update();return}if(C._inRange(t.height,-this.padding()*2-n,n)){this.update();return}const r=new ae;if(r.rotate(U.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const u=r.point({x:-this.padding()*2,y:0});t.x+=u.x,t.y+=u.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const u=r.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const u=r.point({x:0,y:-this.padding()*2});t.x+=u.x,t.y+=u.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const u=r.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=u.x,this._anchorDragOffset.y-=u.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const u=this.boundBoxFunc()(s,t);u?t=u:C.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new ae;a.translate(s.x,s.y),a.rotate(s.rotation),a.scale(s.width/o,s.height/o);const l=new ae,d=t.width/o,c=t.height/o;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(d),Math.abs(c))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(d,c));const h=l.multiply(a.invert());this._nodes.forEach(u=>{var f;if(!u.getStage())return;const g=u.getParent().getAbsoluteTransform(),b=u.getTransform().copy();b.translate(u.offsetX(),u.offsetY());const v=new ae;v.multiply(g.copy().invert()).multiply(h).multiply(g).multiply(b);const _=v.decompose();u.setAttrs(_),(f=u.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(C._getRotation(t.rotation)),this._nodes.forEach(u=>{this._fire("transform",{evt:i,target:u}),u._fire("transform",{evt:i,target:u})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t;const i=this._getNodeRect();this.rotation(C._getRotation(i.rotation));const s=i.width,n=i.height,r=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),d=this.find("._anchor");d.forEach(A=>{A.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:s/2,y:0,offsetY:l/2+a,visible:o&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:s,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:n/2,offsetX:l/2+a,visible:o&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:s,y:n/2,offsetX:l/2-a,visible:o&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:n,offsetX:l/2+a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:s/2,y:n,offsetY:l/2-a,visible:o&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:s,y:n,offsetX:l/2-a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-right")>=0});const c=this.rotateAnchorAngle(),h=this.rotateAnchorOffset(),u=C.degToRad(c),f=Math.sin(u),g=-Math.cos(u),b=s/2,v=n/2;let _=1/0;g<0?_=Math.min(_,-v/g):g>0&&(_=Math.min(_,(n-v)/g)),f<0?_=Math.min(_,-b/f):f>0&&(_=Math.min(_,(s-b)/f));const w=b+f*_,M=v+g*_,k=C._sign(n);this._batchChangeChild(".rotater",{x:w+f*h*k,y:M+g*h*k-a*g,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:s,height:n,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(A=>A.draggable()),x:0,y:0});const E=this.anchorStyleFunc();E&&d.forEach(A=>{E(A)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Ui.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return H.prototype.toObject.call(this)}clone(t){return H.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}bt.isTransforming=()=>Fr>0;function X0(e){return e instanceof Array||C.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){Tn.indexOf(t)===-1&&C.warn("Unknown anchor name: "+t+". Available names are: "+Tn.join(", "))}),e||[]}bt.prototype.className="Transformer";Bt(bt);x.addGetterSetter(bt,"enabledAnchors",Tn,X0);x.addGetterSetter(bt,"flipEnabled",!0,ve());x.addGetterSetter(bt,"resizeEnabled",!0);x.addGetterSetter(bt,"anchorSize",10,$());x.addGetterSetter(bt,"rotateEnabled",!0);x.addGetterSetter(bt,"rotateLineVisible",!0);x.addGetterSetter(bt,"rotationSnaps",[]);x.addGetterSetter(bt,"rotateAnchorOffset",50,$());x.addGetterSetter(bt,"rotateAnchorAngle",0,$());x.addGetterSetter(bt,"rotateAnchorCursor","crosshair");x.addGetterSetter(bt,"rotationSnapTolerance",5,$());x.addGetterSetter(bt,"borderEnabled",!0);x.addGetterSetter(bt,"anchorStroke","rgb(0, 161, 255)");x.addGetterSetter(bt,"anchorStrokeWidth",1,$());x.addGetterSetter(bt,"anchorFill","white");x.addGetterSetter(bt,"anchorCornerRadius",0,$());x.addGetterSetter(bt,"borderStroke","rgb(0, 161, 255)");x.addGetterSetter(bt,"borderStrokeWidth",1,$());x.addGetterSetter(bt,"borderDash");x.addGetterSetter(bt,"keepRatio",!0);x.addGetterSetter(bt,"shiftBehavior","default");x.addGetterSetter(bt,"centeredScaling",!1);x.addGetterSetter(bt,"ignoreStroke",!1);x.addGetterSetter(bt,"padding",0,$());x.addGetterSetter(bt,"nodes");x.addGetterSetter(bt,"node");x.addGetterSetter(bt,"boundBoxFunc");x.addGetterSetter(bt,"anchorDragBoundFunc");x.addGetterSetter(bt,"anchorStyleFunc");x.addGetterSetter(bt,"shouldOverdrawWholeArea",!1);x.addGetterSetter(bt,"useSingleNodeRotation",!0);x.backCompat(bt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Ue extends D{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,U.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Ue.prototype.className="Wedge";Ue.prototype._centroid=!0;Ue.prototype._attrsAffectingSize=["radius"];Bt(Ue);x.addGetterSetter(Ue,"radius",0,$());x.addGetterSetter(Ue,"angle",0,$());x.addGetterSetter(Ue,"clockwise",!1);x.backCompat(Ue,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Ra(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const Y0=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],V0=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function K0(e,t){const i=e.data,s=e.width,n=e.height;let r,o,a,l,d,c,h,u,f,g,b,v,_,w,M,k,E,A,V,O;const K=t+t+1,J=s-1,lt=n-1,Z=t+1,st=Z*(Z+1)/2,ct=new Ra,tt=Y0[t],j=V0[t];let R=null,m=ct,T=null,gt=null;for(let F=1;F<K;F++)m=m.next=new Ra,F===Z&&(R=m);m.next=ct,a=o=0;for(let F=0;F<n;F++){v=_=w=M=l=d=c=h=0,u=Z*(k=i[o]),f=Z*(E=i[o+1]),g=Z*(A=i[o+2]),b=Z*(V=i[o+3]),l+=st*k,d+=st*E,c+=st*A,h+=st*V,m=ct;for(let W=0;W<Z;W++)m.r=k,m.g=E,m.b=A,m.a=V,m=m.next;for(let W=1;W<Z;W++)r=o+((J<W?J:W)<<2),l+=(m.r=k=i[r])*(O=Z-W),d+=(m.g=E=i[r+1])*O,c+=(m.b=A=i[r+2])*O,h+=(m.a=V=i[r+3])*O,v+=k,_+=E,w+=A,M+=V,m=m.next;T=ct,gt=R;for(let W=0;W<s;W++)i[o+3]=V=h*tt>>j,V!==0?(V=255/V,i[o]=(l*tt>>j)*V,i[o+1]=(d*tt>>j)*V,i[o+2]=(c*tt>>j)*V):i[o]=i[o+1]=i[o+2]=0,l-=u,d-=f,c-=g,h-=b,u-=T.r,f-=T.g,g-=T.b,b-=T.a,r=a+((r=W+t+1)<J?r:J)<<2,v+=T.r=i[r],_+=T.g=i[r+1],w+=T.b=i[r+2],M+=T.a=i[r+3],l+=v,d+=_,c+=w,h+=M,T=T.next,u+=k=gt.r,f+=E=gt.g,g+=A=gt.b,b+=V=gt.a,v-=k,_-=E,w-=A,M-=V,gt=gt.next,o+=4;a+=s}for(let F=0;F<s;F++){_=w=M=v=d=c=h=l=0,o=F<<2,u=Z*(k=i[o]),f=Z*(E=i[o+1]),g=Z*(A=i[o+2]),b=Z*(V=i[o+3]),l+=st*k,d+=st*E,c+=st*A,h+=st*V,m=ct;for(let pt=0;pt<Z;pt++)m.r=k,m.g=E,m.b=A,m.a=V,m=m.next;let W=s;for(let pt=1;pt<=t;pt++)o=W+F<<2,l+=(m.r=k=i[o])*(O=Z-pt),d+=(m.g=E=i[o+1])*O,c+=(m.b=A=i[o+2])*O,h+=(m.a=V=i[o+3])*O,v+=k,_+=E,w+=A,M+=V,m=m.next,pt<lt&&(W+=s);o=F,T=ct,gt=R;for(let pt=0;pt<n;pt++)r=o<<2,i[r+3]=V=h*tt>>j,V>0?(V=255/V,i[r]=(l*tt>>j)*V,i[r+1]=(d*tt>>j)*V,i[r+2]=(c*tt>>j)*V):i[r]=i[r+1]=i[r+2]=0,l-=u,d-=f,c-=g,h-=b,u-=T.r,f-=T.g,g-=T.b,b-=T.a,r=F+((r=pt+Z)<lt?r:lt)*s<<2,l+=v+=T.r=i[r],d+=_+=T.g=i[r+1],c+=w+=T.b=i[r+2],h+=M+=T.a=i[r+3],T=T.next,u+=k=gt.r,f+=E=gt.g,g+=A=gt.b,b+=V=gt.a,v-=k,_-=E,w-=A,M-=V,gt=gt.next,o+=s}}const q0=function(t){const i=Math.round(this.blurRadius());i>0&&K0(t,i)};x.addGetterSetter(H,"blurRadius",0,$(),x.afterSetFilter);const Q0=function(e){const t=this.brightness()*255,i=e.data,s=i.length;for(let n=0;n<s;n+=4)i[n]+=t,i[n+1]+=t,i[n+2]+=t};x.addGetterSetter(H,"brightness",0,$(),x.afterSetFilter);const J0=function(e){const t=this.brightness(),i=e.data,s=i.length;for(let n=0;n<s;n+=4)i[n]=Math.min(255,i[n]*t),i[n+1]=Math.min(255,i[n+1]*t),i[n+2]=Math.min(255,i[n+2]*t)},Z0=function(e){const t=Math.pow((this.contrast()+100)/100,2),i=e.data,s=i.length;let n=150,r=150,o=150;for(let a=0;a<s;a+=4)n=i[a],r=i[a+1],o=i[a+2],n/=255,n-=.5,n*=t,n+=.5,n*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,n=n<0?0:n>255?255:n,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,i[a]=n,i[a+1]=r,i[a+2]=o};x.addGetterSetter(H,"contrast",0,$(),x.afterSetFilter);const tf=function(e){var t,i,s,n,r,o,a,l,d;const c=e.data,h=e.width,u=e.height,f=Math.min(1,Math.max(0,(i=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&i!==void 0?i:.5)),g=Math.min(1,Math.max(0,(n=(s=this.embossWhiteLevel)===null||s===void 0?void 0:s.call(this))!==null&&n!==void 0?n:.5)),v=(a={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(o=(r=this.embossDirection)===null||r===void 0?void 0:r.call(this))!==null&&o!==void 0?o:"top-left"])!==null&&a!==void 0?a:315,_=!!((d=(l=this.embossBlend)===null||l===void 0?void 0:l.call(this))!==null&&d!==void 0&&d),w=f*10,M=g*255,k=v*Math.PI/180,E=Math.cos(k),A=Math.sin(k),V=128/1020*w,O=new Uint8ClampedArray(c),K=new Float32Array(h*u);for(let ct=0,tt=0;tt<c.length;tt+=4,ct++)K[ct]=.2126*O[tt]+.7152*O[tt+1]+.0722*O[tt+2];const J=[-1,0,1,-2,0,2,-1,0,1],lt=[-1,-2,-1,0,0,0,1,2,1],Z=[-h-1,-h,-h+1,-1,0,1,h-1,h,h+1],st=ct=>ct<0?0:ct>255?255:ct;for(let ct=1;ct<u-1;ct++)for(let tt=1;tt<h-1;tt++){const j=ct*h+tt;let R=0,m=0;R+=K[j+Z[0]]*J[0],m+=K[j+Z[0]]*lt[0],R+=K[j+Z[1]]*J[1],m+=K[j+Z[1]]*lt[1],R+=K[j+Z[2]]*J[2],m+=K[j+Z[2]]*lt[2],R+=K[j+Z[3]]*J[3],m+=K[j+Z[3]]*lt[3],R+=K[j+Z[5]]*J[5],m+=K[j+Z[5]]*lt[5],R+=K[j+Z[6]]*J[6],m+=K[j+Z[6]]*lt[6],R+=K[j+Z[7]]*J[7],m+=K[j+Z[7]]*lt[7],R+=K[j+Z[8]]*J[8],m+=K[j+Z[8]]*lt[8];const T=E*R+A*m,gt=st(M+T*V),F=j*4;if(_){const W=gt-M;c[F]=st(O[F]+W),c[F+1]=st(O[F+1]+W),c[F+2]=st(O[F+2]+W),c[F+3]=O[F+3]}else c[F]=c[F+1]=c[F+2]=gt,c[F+3]=O[F+3]}for(let ct=0;ct<h;ct++){let tt=ct*4,j=((u-1)*h+ct)*4;c[tt]=O[tt],c[tt+1]=O[tt+1],c[tt+2]=O[tt+2],c[tt+3]=O[tt+3],c[j]=O[j],c[j+1]=O[j+1],c[j+2]=O[j+2],c[j+3]=O[j+3]}for(let ct=1;ct<u-1;ct++){let tt=ct*h*4,j=(ct*h+(h-1))*4;c[tt]=O[tt],c[tt+1]=O[tt+1],c[tt+2]=O[tt+2],c[tt+3]=O[tt+3],c[j]=O[j],c[j+1]=O[j+1],c[j+2]=O[j+2],c[j+3]=O[j+3]}return e};x.addGetterSetter(H,"embossStrength",.5,$(),x.afterSetFilter);x.addGetterSetter(H,"embossWhiteLevel",.5,$(),x.afterSetFilter);x.addGetterSetter(H,"embossDirection","top-left",void 0,x.afterSetFilter);x.addGetterSetter(H,"embossBlend",!1,void 0,x.afterSetFilter);function hr(e,t,i,s,n){const r=i-t,o=n-s;if(r===0)return s+o/2;if(o===0)return s;let a=(e-t)/r;return a=o*a+s,a}const ef=function(e){const t=e.data,i=t.length;let s=t[0],n=s,r,o=t[1],a=o,l,d=t[2],c=d,h;const u=this.enhance();if(u===0)return;for(let M=0;M<i;M+=4)r=t[M+0],r<s?s=r:r>n&&(n=r),l=t[M+1],l<o?o=l:l>a&&(a=l),h=t[M+2],h<d?d=h:h>c&&(c=h);n===s&&(n=255,s=0),a===o&&(a=255,o=0),c===d&&(c=255,d=0);let f,g,b,v,_,w;if(u>0)f=n+u*(255-n),g=s-u*(s-0),b=a+u*(255-a),v=o-u*(o-0),_=c+u*(255-c),w=d-u*(d-0);else{const M=(n+s)*.5;f=n+u*(n-M),g=s+u*(s-M);const k=(a+o)*.5;b=a+u*(a-k),v=o+u*(o-k);const E=(c+d)*.5;_=c+u*(c-E),w=d+u*(d-E)}for(let M=0;M<i;M+=4)t[M+0]=hr(t[M+0],s,n,g,f),t[M+1]=hr(t[M+1],o,a,v,b),t[M+2]=hr(t[M+2],d,c,w,_)};x.addGetterSetter(H,"enhance",0,$(),x.afterSetFilter);const sf=function(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const n=.34*t[s]+.5*t[s+1]+.16*t[s+2];t[s]=n,t[s+1]=n,t[s+2]=n}};x.addGetterSetter(H,"hue",0,$(),x.afterSetFilter);x.addGetterSetter(H,"saturation",0,$(),x.afterSetFilter);x.addGetterSetter(H,"luminance",0,$(),x.afterSetFilter);const nf=function(e){const t=e.data,i=t.length,s=1,n=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a=s*n*Math.cos(r*Math.PI/180),l=s*n*Math.sin(r*Math.PI/180),d=.299*s+.701*a+.167*l,c=.587*s-.587*a+.33*l,h=.114*s-.114*a-.497*l,u=.299*s-.299*a-.328*l,f=.587*s+.413*a+.035*l,g=.114*s-.114*a+.293*l,b=.299*s-.3*a+1.25*l,v=.587*s-.586*a-1.05*l,_=.114*s+.886*a-.2*l;let w,M,k,E;for(let A=0;A<i;A+=4)w=t[A+0],M=t[A+1],k=t[A+2],E=t[A+3],t[A+0]=d*w+c*M+h*k+o,t[A+1]=u*w+f*M+g*k+o,t[A+2]=b*w+v*M+_*k+o,t[A+3]=E},rf=function(e){const t=e.data,i=t.length,s=Math.pow(2,this.value()),n=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=s*n*Math.cos(r*Math.PI/180),a=s*n*Math.sin(r*Math.PI/180),l=.299*s+.701*o+.167*a,d=.587*s-.587*o+.33*a,c=.114*s-.114*o-.497*a,h=.299*s-.299*o-.328*a,u=.587*s+.413*o+.035*a,f=.114*s-.114*o+.293*a,g=.299*s-.3*o+1.25*a,b=.587*s-.586*o-1.05*a,v=.114*s+.886*o-.2*a;for(let _=0;_<i;_+=4){const w=t[_+0],M=t[_+1],k=t[_+2],E=t[_+3];t[_+0]=l*w+d*M+c*k,t[_+1]=h*w+u*M+f*k,t[_+2]=g*w+b*M+v*k,t[_+3]=E}};x.addGetterSetter(H,"hue",0,$(),x.afterSetFilter);x.addGetterSetter(H,"saturation",0,$(),x.afterSetFilter);x.addGetterSetter(H,"value",0,$(),x.afterSetFilter);const of=function(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4)t[s]=255-t[s],t[s+1]=255-t[s+1],t[s+2]=255-t[s+2]},af=function(e,t,i){const s=e.data,n=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2;let d=Math.sqrt(a*a+l*l),c=r-a,h=o-l;const u=Math.sqrt(c*c+h*h);d=u>d?u:d;const f=o,g=r,b=360/g*Math.PI/180;for(let v=0;v<g;v+=1){const _=Math.sin(v*b),w=Math.cos(v*b);for(let M=0;M<f;M+=1){c=Math.floor(a+d*M/f*w),h=Math.floor(l+d*M/f*_);let k=(h*r+c)*4;const E=s[k+0],A=s[k+1],V=s[k+2],O=s[k+3];k=(v+M*r)*4,n[k+0]=E,n[k+1]=A,n[k+2]=V,n[k+3]=O}}},lf=function(e,t,i){const s=e.data,n=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2;let d=Math.sqrt(a*a+l*l),c=r-a,h=o-l;const u=Math.sqrt(c*c+h*h);d=u>d?u:d;const f=o,g=r,b=0;let v,_;for(c=0;c<r;c+=1)for(h=0;h<o;h+=1){const w=c-a,M=h-l,k=Math.sqrt(w*w+M*M)*f/d;let E=(Math.atan2(M,w)*180/Math.PI+360+b)%360;E=E*g/360,v=Math.floor(E),_=Math.floor(k);let A=(_*r+v)*4;const V=s[A+0],O=s[A+1],K=s[A+2],J=s[A+3];A=(h*r+c)*4,n[A+0]=V,n[A+1]=O,n[A+2]=K,n[A+3]=J}},cf=function(e){const t=e.width,i=e.height;let s,n,r,o,a,l,d,c,h,u,f=Math.round(this.kaleidoscopePower());const g=Math.round(this.kaleidoscopeAngle()),b=Math.floor(t*(g%360)/360);if(f<1)return;const v=C.createCanvasElement();v.width=t,v.height=i;const _=v.getContext("2d").getImageData(0,0,t,i);C.releaseCanvas(v),af(e,_,{polarCenterX:t/2,polarCenterY:i/2});let w=t/Math.pow(2,f);for(;w<=8;)w=w*2,f-=1;w=Math.ceil(w);let M=w,k=0,E=M,A=1;for(b+w>t&&(k=M,E=0,A=-1),n=0;n<i;n+=1)for(s=k;s!==E;s+=A)r=Math.round(s+b)%t,h=(t*n+r)*4,a=_.data[h+0],l=_.data[h+1],d=_.data[h+2],c=_.data[h+3],u=(t*n+s)*4,_.data[u+0]=a,_.data[u+1]=l,_.data[u+2]=d,_.data[u+3]=c;for(n=0;n<i;n+=1)for(M=Math.floor(w),o=0;o<f;o+=1){for(s=0;s<M+1;s+=1)h=(t*n+s)*4,a=_.data[h+0],l=_.data[h+1],d=_.data[h+2],c=_.data[h+3],u=(t*n+M*2-s-1)*4,_.data[u+0]=a,_.data[u+1]=l,_.data[u+2]=d,_.data[u+3]=c;M*=2}lf(_,e,{})};x.addGetterSetter(H,"kaleidoscopePower",2,$(),x.afterSetFilter);x.addGetterSetter(H,"kaleidoscopeAngle",0,$(),x.afterSetFilter);function on(e,t,i){let s=(i*e.width+t)*4;const n=[];return n.push(e.data[s++],e.data[s++],e.data[s++],e.data[s++]),n}function os(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function df(e){const t=[0,0,0];for(let i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function hf(e,t){const i=on(e,0,0),s=on(e,e.width-1,0),n=on(e,0,e.height-1),r=on(e,e.width-1,e.height-1),o=t||10;if(os(i,s)<o&&os(s,r)<o&&os(r,n)<o&&os(n,i)<o){const a=df([s,i,r,n]),l=[];for(let d=0;d<e.width*e.height;d++){const c=os(a,[e.data[d*4],e.data[d*4+1],e.data[d*4+2]]);l[d]=c<o?0:255}return l}}function uf(e,t){for(let i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function ff(e,t,i){const s=[1,1,1,1,0,1,1,1,1],n=Math.round(Math.sqrt(s.length)),r=Math.floor(n/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const d=a*t+l;let c=0;for(let h=0;h<n;h++)for(let u=0;u<n;u++){const f=a+h-r,g=l+u-r;if(f>=0&&f<i&&g>=0&&g<t){const b=f*t+g,v=s[h*n+u];c+=e[b]*v}}o[d]=c===2040?255:0}return o}function gf(e,t,i){const s=[1,1,1,1,1,1,1,1,1],n=Math.round(Math.sqrt(s.length)),r=Math.floor(n/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const d=a*t+l;let c=0;for(let h=0;h<n;h++)for(let u=0;u<n;u++){const f=a+h-r,g=l+u-r;if(f>=0&&f<i&&g>=0&&g<t){const b=f*t+g,v=s[h*n+u];c+=e[b]*v}}o[d]=c>=1020?255:0}return o}function pf(e,t,i){const s=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],n=Math.round(Math.sqrt(s.length)),r=Math.floor(n/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const d=a*t+l;let c=0;for(let h=0;h<n;h++)for(let u=0;u<n;u++){const f=a+h-r,g=l+u-r;if(f>=0&&f<i&&g>=0&&g<t){const b=f*t+g,v=s[h*n+u];c+=e[b]*v}}o[d]=c}return o}const mf=function(e){const t=this.threshold();let i=hf(e,t);return i&&(i=ff(i,e.width,e.height),i=gf(i,e.width,e.height),i=pf(i,e.width,e.height),uf(e,i)),e};x.addGetterSetter(H,"threshold",0,$(),x.afterSetFilter);const bf=function(e){const t=this.noise()*255,i=e.data,s=i.length,n=t/2;for(let r=0;r<s;r+=4)i[r+0]+=n-2*n*Math.random(),i[r+1]+=n-2*n*Math.random(),i[r+2]+=n-2*n*Math.random()};x.addGetterSetter(H,"noise",.2,$(),x.afterSetFilter);const xf=function(e){let t=Math.ceil(this.pixelSize()),i=e.width,s=e.height,n=Math.ceil(i/t),r=Math.ceil(s/t),o=e.data;if(t<=0){C.error("pixelSize value can not be <= 0");return}for(let a=0;a<n;a+=1)for(let l=0;l<r;l+=1){let d=0,c=0,h=0,u=0;const f=a*t,g=f+t,b=l*t,v=b+t;let _=0;for(let w=f;w<g;w+=1)if(!(w>=i))for(let M=b;M<v;M+=1){if(M>=s)continue;const k=(i*M+w)*4;d+=o[k+0],c+=o[k+1],h+=o[k+2],u+=o[k+3],_+=1}d=d/_,c=c/_,h=h/_,u=u/_;for(let w=f;w<g;w+=1)if(!(w>=i))for(let M=b;M<v;M+=1){if(M>=s)continue;const k=(i*M+w)*4;o[k+0]=d,o[k+1]=c,o[k+2]=h,o[k+3]=u}}};x.addGetterSetter(H,"pixelSize",8,$(),x.afterSetFilter);const yf=function(e){const t=Math.round(this.levels()*254)+1,i=e.data,s=i.length,n=255/t;for(let r=0;r<s;r+=1)i[r]=Math.floor(i[r]/n)*n};x.addGetterSetter(H,"levels",.5,$(),x.afterSetFilter);const vf=function(e){const t=e.data,i=t.length,s=this.red(),n=this.green(),r=this.blue();for(let o=0;o<i;o+=4){const a=(.34*t[o]+.5*t[o+1]+.16*t[o+2])/255;t[o]=a*s,t[o+1]=a*n,t[o+2]=a*r,t[o+3]=t[o+3]}};x.addGetterSetter(H,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(H,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(H,"blue",0,jl,x.afterSetFilter);const _f=function(e){const t=e.data,i=t.length,s=this.red(),n=this.green(),r=this.blue(),o=this.alpha();for(let a=0;a<i;a+=4){const l=1-o;t[a]=s*o+t[a]*l,t[a+1]=n*o+t[a+1]*l,t[a+2]=r*o+t[a+2]*l}};x.addGetterSetter(H,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(H,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});x.addGetterSetter(H,"blue",0,jl,x.afterSetFilter);x.addGetterSetter(H,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const wf=function(e){const t=e.data,i=t.length;for(let s=0;s<i;s+=4){const n=t[s+0],r=t[s+1],o=t[s+2];t[s+0]=Math.min(255,n*.393+r*.769+o*.189),t[s+1]=Math.min(255,n*.349+r*.686+o*.168),t[s+2]=Math.min(255,n*.272+r*.534+o*.131)}},Sf=function(e){const i=e.data;for(let s=0;s<i.length;s+=4){const n=i[s],r=i[s+1],o=i[s+2];.2126*n+.7152*r+.0722*o>=128&&(i[s]=255-n,i[s+1]=255-r,i[s+2]=255-o)}return e},Cf=function(e){const t=this.threshold()*255,i=e.data,s=i.length;for(let n=0;n<s;n+=1)i[n]=i[n]<t?0:255};x.addGetterSetter(H,"threshold",.5,$(),x.afterSetFilter);const _t=va.Util._assign(va,{Arc:ze,Arrow:Ti,Circle:Vi,Ellipse:ai,Image:de,Label:go,Tag:Pi,Line:je,Path:It,Rect:js,RegularPolygon:li,Ring:Ai,Sprite:Le,Star:ci,Text:Gt,TextPath:$t,Transformer:bt,Wedge:Ue,Filters:{Blur:q0,Brightness:J0,Brighten:Q0,Contrast:Z0,Emboss:tf,Enhance:ef,Grayscale:sf,HSL:nf,HSV:rf,Invert:of,Kaleidoscope:cf,Mask:mf,Noise:bf,Pixelate:xf,Posterize:yf,RGB:vf,RGBA:_f,Sepia:wf,Solarize:Sf,Threshold:Cf}}),kf=1.3,Nr=30,Mf=12,Tf=8,Pf=16,Af=.42,Ef=.8,Rf=1.4,Of=.6,Lf=2,If=!0,Df=245,Ze=10,Gf=26,Ff=20,Nf=36,Bf=.35,Hf=16,an="#88E523",Wf="rgba(136,229,35,0.22)",$f="rgba(136,229,35,0.9)",zf="rgba(136,229,35,0.4)",Oa=8;let vt=null,po=null,se=null,Te=null,et=null,mt=null,Pe=null,ge={},ri=null,re=null,Xi=new Map,rt=null,Ns=null,Pn="",Pt=null,bi=null,Ee=null,yt=!1,ne=null,Bs=1,Hs={x:0,y:0},ht=null,wi=0,ti=0,bn=!1,Ts=0,Ps=0;const jf=4;let Si=null,Ii=null,Tt=null,ii=null,fs={x:0,y:0},Yi=!0,Je=null,yi=null,As=null;function Yn(){if(!mt)return null;const e=mt.nodes();return e&&e.length>0?e[0]:null}function ur(e){if(!mt||!et)return;mt.keepRatio(Yi),mt.nodes([e]),e&&e.moveToTop&&e.moveToTop(),mt.getParent()===et&&mt.moveToTop(),yt&&(ii=e&&e.getAttr?.("name")==="dent"?e:null,Tt&&(ii?(Tt.visible(!0),$i(ii)):Tt.visible(!1)));const t=et.getLayer?et.getLayer():et;t&&t.batchDraw(),re&&re(bo())}function _c(){if(Tt)return;Tt=new _t.Group({name:"dent-handle",visible:!1,listening:!0});const e=new _t.Line({name:"stem-line",points:[0,0,0,0],stroke:an,strokeWidth:1,listening:!1}),t=new _t.Group({name:"handle-plus",draggable:!0,listening:!0}),i=new _t.Group({listening:!1}),s=new _t.Circle({radius:Oa,x:0,y:0,fill:Wf,stroke:$f,strokeWidth:1.5,shadowColor:an,shadowBlur:8,shadowOpacity:.5,listening:!1}),n=new _t.Line({points:[-5,0,5,0],stroke:an,strokeWidth:1.8,lineCap:"round",listening:!1}),r=new _t.Line({points:[0,-5,0,5],stroke:an,strokeWidth:1.8,lineCap:"round",listening:!1}),o=new _t.Circle({radius:Oa+2,x:0,y:0,stroke:zf,strokeWidth:1,listening:!1});i.add(s),i.add(n),i.add(r),i.add(o);const a=new _t.Circle({radius:Hf,x:0,y:0,fill:"rgba(0,0,0,0)",listening:!0});t.add(i),t.add(a),Tt.add(e),Tt.add(t),t.on("click tap dragstart",l=>{l.cancelBubble=!0}),t.on("mousedown touchstart",()=>{ht&&ht.draggable(!1)}),t.on("dragstart",l=>{l&&l.cancelBubble!==void 0&&(l.cancelBubble=!0),ht&&ht.draggable(!1),fs=t.position()}),t.on("dragmove",()=>{const l=ii||Yn();if(!l||l.getAttr?.("name")!=="dent")return;const d=t.position(),c=d.x-fs.x,h=d.y-fs.y;l.x(l.x()+c),l.y(l.y()+h),yt&&Ee&&Es(l),$i(l),mt&&(mt.nodes([l]),mt.forceUpdate&&mt.forceUpdate()),fs=t.position();const u=l._dentMeta;u&&mo(l,u.type,u.id,u.sizes);const f=et.getLayer?et.getLayer():et;f&&f.batchDraw()}),t.on("dragend",()=>{})}function wc(){if(!Tt||!ht)return;const e=ht.scaleX(),t=Tt.getChildren?.()?.[1];t&&t.scale({x:1/e,y:1/e})}function $i(e){if(!Tt||!e)return;const t=e.getParent(),i=e.getClientRect({relativeTo:t}),s=i.x+i.width/2,n=i.y+i.height,r=Math.max(Gf,Math.max(Ff,Math.min(Nf,i.height*Bf))),o=s,a=n+r,l=Tt.getChildren?Tt.getChildren():[],d=l[0];d&&d.points([s,n,o,a]);const c=l[1];c&&(c.position({x:o,y:a}),fs={x:o,y:a},wc())}function Br(e,t){return!e||!t?!0:e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height}function fr(e){if(!e)return!0;const t=rt?Br(e,rt):!0,i=Ns?Br(e,Ns):!0;return t&&i}function Uf(e){return new Promise((t,i)=>{const s=e.naturalWidth||e.width,n=e.naturalHeight||e.height;if(!s||!n){t(e);return}const r=document.createElement("canvas");r.width=s,r.height=n;const o=r.getContext("2d");if(!o){t(e);return}o.drawImage(e,0,0);const a=o.getImageData(0,0,s,n),l=a.data,d=Df;for(let u=0;u<l.length;u+=4)l[u]>d&&l[u+1]>d&&l[u+2]>d&&(l[u+3]=0);o.putImageData(a,0,0);const c=r.toDataURL("image/png"),h=new window.Image;h.crossOrigin="anonymous",h.onload=()=>t(h),h.onerror=()=>i(new Error("removeWhiteBackground: failed to load result image")),h.src=c})}const gr=new Map;function Xf(e,t=10){const i=e.src||e.currentSrc||"";if(i&&gr.has(i))return gr.get(i);const s=e.naturalWidth||e.width,n=e.naturalHeight||e.height,r={x:0,y:0,width:s||1,height:n||1};if(!s||!n)return r;const o=document.createElement("canvas");o.width=s,o.height=n;const a=o.getContext("2d");if(!a)return r;a.drawImage(e,0,0);const l=a.getImageData(0,0,s,n).data;let d=s,c=n,h=0,u=0,f=!1;for(let b=0;b<n;b++)for(let v=0;v<s;v++){const _=(b*s+v)*4;l[_+3]>t&&(f=!0,v<d&&(d=v),v>h&&(h=v),b<c&&(c=b),b>u&&(u=b))}const g=f?{x:d,y:c,width:h-d+1,height:u-c+1}:r;return i&&gr.set(i,g),g}function Yf(e){const t=(e||"").replace(/^\/+/,""),i=(Pn||"/DentMetric/").replace(/\/$/,"")||"",s=t?i?`${window.location.origin}${i}/${t}`:`/${t}`:"";return new Promise((n,r)=>{const o=new window.Image;o.crossOrigin="anonymous",o.onload=()=>{!o.naturalWidth||!o.naturalHeight?r(new Error("Image invalid size")):n(o)},o.onerror=()=>r(new Error("Image load failed: "+s)),o.src=s})}async function Vf(e,t,i,s,n="",r=null){if(!e||!t)return;po=e,Pn=n||"",Pe=t,ge=i||{},ri=s,re=r??null,yt=!!(t.realSizeMm&&t.asset&&t.asset.type==="image"),Pt=null,bi=null;let o=e.offsetWidth||0,a=e.offsetHeight||0;if((o<=0||a<=0)&&(await new Promise(d=>requestAnimationFrame(d)),o=e.offsetWidth||0,a=e.offsetHeight||0),(o<=0||a<=0)&&(o=Math.max(o,320),a=Math.max(a,240)),Ns={x:0,y:0,width:o,height:a},vt&&vt.destroy(),vt=new _t.Stage({container:e,width:o,height:a}),yt){const d=new _t.Layer;vt.add(d),Si=new _t.Rect({x:0,y:0,width:o,height:a,fill:"#0b0f14",listening:!1}),d.add(Si),ht=new _t.Group,ht.listening(!0),ht.draggable(!1),d.add(ht),se=new _t.Group,se.listening(!1),se.setAttr("isBackground",!0),Te=new _t.Group,Te.listening(!1),Te.setAttr("isBackground",!0),et=new _t.Group,ht.add(se),ht.add(Te),ht.add(et),await i1(o,a),wi=bi?bi.width:0,ti=bi?bi.height:0,ht.offset({x:0,y:0}),ne&&ht.clip({x:ne.x,y:ne.y,width:ne.width,height:ne.height});const c=kc(o,a);Bs=c.scaleFit,Hs={x:c.posFit.x,y:c.posFit.y},Ts=o,Ps=a,Hr()}else Si=null,ht=null,wi=0,ti=0,se=new _t.Layer,vt.add(se),e1(o,a),et=new _t.Layer,vt.add(et);if(mt=new _t.Transformer({anchorStroke:"#88E523",anchorFill:"#0B121E",anchorSize:15,borderStroke:"#88E523",borderDash:[4,4],centeredScaling:!0,rotateEnabled:!0,keepRatio:Yi,boundBoxFunc:(d,c)=>c.width<Ze||c.height<Ze?d:c}),mt.on("mousedown touchstart",()=>{ht&&ht.draggable(!1)}),et.add(mt),yt&&_c(),yt&&Tt&&et.add(Tt),yt){Ii=new _t.Layer({listening:!1}),vt.add(Ii);const d=(Pn||"/DentMetric/").replace(/\/$/,"")||"",c=d?`${window.location.origin}${d}/logo.png`:`${window.location.origin}/logo.png`,h=new window.Image;h.crossOrigin="anonymous",h.onload=()=>{if(!Ii)return;const u=vt.width(),f=u*.1,g=Math.round(Math.max(56,Math.min(92,f))),b=h.naturalHeight/h.naturalWidth*g,v=u<400?8:10,_=new _t.Image({image:h,x:v,y:v,width:g,height:b,opacity:.75,listening:!1,shadowColor:"black",shadowBlur:6,shadowOffset:{x:0,y:2},shadowOpacity:.35});Ii.add(_),Ii.batchDraw()},h.onerror=()=>{},h.src=c}vt.on("click tap",d=>{const c=d.target,h=c===vt,u=c?.getAttr&&c.getAttr("isBackground")===!0,f=c===mt||c?.getParent&&c.getParent()===mt||mt&&typeof mt.isAncestorOf=="function"&&mt.isAncestorOf(c),g=c?.name?.()==="dent-handle"||c?.name?.()==="handle-plus"||c?.getParent?.()?.name?.()==="dent-handle"||c?.getParent?.()?.name?.()==="handle-plus";if(f||g)return;const b=ht&&c===ht,v=c?.getType&&c.getType()==="Layer";if(h||u||b||v||et&&c===et){mt.nodes([]),yt&&(ii=null,Tt&&Tt.visible(!1));const w=et?.getLayer?et.getLayer():et;w&&w.batchDraw(),re&&re(null)}});const l=et.getLayer?et.getLayer():et;l&&l.batchDraw(),Je&&yi&&(Je.unobserve(yi),Je=null,yi=null),yi=e,Je=new ResizeObserver(()=>{Rs()}),Je.observe(e),As=()=>Rs(),window.addEventListener("resize",As)}function Es(e,t={}){if(!vt||!ht)return;const i=ne?t.marginPx??0:t.marginPx??Mf;let s;if(ne){const w=ht.scaleX(),M=ht.position();s={x:M.x+ne.x*w,y:M.y+ne.y*w,width:ne.width*w,height:ne.height*w}}else if(Ee)s=Ee.getClientRect({relativeTo:vt});else return;const n={left:s.x-i,top:s.y-i,right:s.x+s.width+i,bottom:s.y+s.height+i},r=e.getClientRect({relativeTo:vt}),o=r.x,a=r.y,l=r.x+r.width,d=r.y+r.height;let c=0,h=0;if(o<n.left?c=n.left-o:l>n.right&&(c=n.right-l),a<n.top?h=n.top-a:d>n.bottom&&(h=n.bottom-d),c===0&&h===0)return;const u=e.getParent();if(!u)return;const f=u.getAbsoluteTransform().copy().invert(),g=f.point({x:0,y:0}),b=f.point({x:c,y:h}),v=b.x-g.x,_=b.y-g.y;e.x(e.x()+v),e.y(e.y()+_)}function Sc(e){if(!e)return 20;const t=Math.max(.01,Math.abs(e.scaleX())),i=Math.max(.01,Math.abs(e.scaleY()));let s;if(e.className==="Ellipse"){const n=Math.abs(e.radiusX())*t*2,r=Math.abs(e.radiusY())*i*2;s=Math.min(n,r)}else s=Math.min(Math.abs(e.width())*t,Math.abs(e.height())*i);return s}function An(e){if(!e||!ht)return;const t=ht.scaleX(),s=Sc(e)*t,n=Math.max(Tf,Math.min(Pf,s*Af)),r=Math.max(2,n/t);e.hitStrokeWidth(r)}function En(e){if(!e||!ht)return;const t=ht.scaleX(),n=Sc(e)*t<40?Ef:Rf,r=Math.max(Of,Math.min(Lf,n/t));e.strokeWidth(r)}function Cc(e){if(!e||!ht)return;const t=ht.scaleX();e.strokeWidth(Math.max(.6,1.2/t))}const Kf=.99;function kc(e,t,i="fitWidth"){if(!wi||!ti||e<=0||t<=0)return{scaleFit:1,posFit:{x:0,y:0}};const s=e/wi,n=t/ti;let r;i==="fitWidth"?(r=s,ti*s>t&&(r=Math.min(s,n))):r=Math.min(s,n),r*=Kf,(!Number.isFinite(r)||r<=0)&&(r=1);const o=wi*r,a=ti*r,l={x:(e-o)/2,y:(t-a)/2};return{scaleFit:r,posFit:l}}function Hr(){if(!ht||!vt)return;ht.scale({x:Bs,y:Bs}),ht.position({x:Hs.x,y:Hs.y}),et&&(et.getChildren?et.getChildren():[]).forEach(i=>{i!==mt&&i.getAttr?.("name")==="dent"&&(En(i),An(i),Cc(i))}),wc();const e=ht.getLayer();e&&e.batchDraw()}function La(e){Yi=!!e,mt&&mt.keepRatio(Yi)}function qf(e){if(!vt)return;vt.listening(!!e),mt&&mt.visible(!!e),Tt&&Tt.visible(!!e&&!!ii),(et?.getChildren?.()||[]).forEach(s=>{s!==mt&&s!==Tt&&s.getAttr?.("name")==="dent"&&s.draggable(!!e)});const i=et?.getLayer?et.getLayer():et;i&&i.batchDraw()}function Qf(e){qf(!!e)}function Jf(e,t){if(!vt||e<=0||t<=0)return;vt.width(e),vt.height(t),Ns={x:0,y:0,width:e,height:t},Si&&(Si.width(e),Si.height(t));const i=et?et.getLayer?et.getLayer():et:null;i&&i.batchDraw()}function Zf(){const e=po||vt&&vt.container&&vt.container();if(!vt||!e)return;const t=e.getBoundingClientRect(),i=Math.round(t.width)||e.clientWidth||e.offsetWidth,s=Math.round(t.height)||e.clientHeight||e.offsetHeight;i<=0||s<=0||Jf(i,s)}function t1(){if(Zf(),!ht||wi<=0||ti<=0)return;const e=vt.width(),t=vt.height(),i=jf;if(Ts>0&&Ps>0&&Math.abs(e-Ts)<=i&&Math.abs(t-Ps)<=i){Hr();return}Ts=e,Ps=t;const n=kc(e,t,"fitWidth");Bs=n.scaleFit,Hs={x:n.posFit.x,y:n.posFit.y},Hr()}function Rs(e){bn||(bn=!0,requestAnimationFrame(()=>{bn=!1,t1()}))}function e1(e,t){const i=e/320,s=t/420,n=Math.min(i,s),r=new _t.Path({data:Pe.path,fill:"#151F2E",stroke:"#334155",strokeWidth:3/n,shadowColor:"black",shadowBlur:20,shadowOpacity:.5,scaleX:n,scaleY:n,x:(e-300*n)/2,y:(t-400*n)/2,name:"partPath"});se.add(r),rt=r.getClientRect(),Pe.ribs&&Pe.ribs.length&&Pe.ribs.forEach(o=>{const a=new _t.Rect({x:o.x*n+r.x(),y:o.y*n+r.y(),width:o.w*n,height:o.h*n,fill:"rgba(255, 50, 50, 0.25)",stroke:"rgba(255, 50, 50, 0.5)",strokeWidth:1,name:"rib",listening:!1});se.add(a)})}async function i1(e,t){const i=Pe.realSizeMm.w,s=Pe.realSizeMm.h,n=Pe.asset.src;let r=null,o=0,a=0,l=null;try{let h=await Yf(n);if(If)try{h=await Uf(h)}catch{}l=h;const u=h.naturalWidth||h.width,f=h.naturalHeight||h.height,g=Xf(h,10);o=g.width,a=g.height,Pt=Math.min(o/i,a/s)||.1;const b=new _t.Rect({x:0,y:0,width:o,height:a,fill:"rgba(255,255,255,0.03)",listening:!1});se.add(b),r=new _t.Image({image:h,x:0,y:0,width:o,height:a,crop:{x:g.x,y:g.y,width:g.width,height:g.height},shadowColor:"black",shadowBlur:18,shadowOpacity:.45,name:"partImage",listening:!1}),r.setAttr("isBackground",!0),se.add(r),Ee=r}catch{o=Math.min(300,e),a=Math.min(400,t),Pt=Math.min(o/i,a/s)||.1,r=new _t.Rect({x:0,y:0,width:o,height:a,fill:"#2a2a2a",stroke:"#444",strokeWidth:2,name:"partPlaceholder",listening:!1}),r.setAttr("isBackground",!0),se.add(r);const u=new _t.Text({text:Pe.name||"",fontSize:16,fill:"#888",width:280,padding:10,align:"center",listening:!1});u.position({x:10,y:(a-u.height())/2}),se.add(u),Ee=r}bi={x:0,y:0,width:o,height:a},ne=null;const d={x:0,y:0,width:o,height:a};ne=d,rt=d,s1(d.x,d.y,d.width,d.height);const c=se.getLayer();c&&c.batchDraw()}function s1(e,t,i,s){if(!Te||Pt==null||i<=0||s<=0)return;Te.destroyChildren();const n=Nr*Pt,r=Math.floor(e/n),o=Math.ceil((e+i)/n),a=Math.floor(t/n),l=Math.ceil((t+s)/n);for(let c=r;c<=o;c++){const h=c*n,u=new _t.Line({points:[h,t,h,t+s],stroke:"rgba(255,255,255,0.06)",strokeWidth:1,strokeScaleEnabled:!1,listening:!1});u.setAttr("isBackground",!0),Te.add(u)}for(let c=a;c<=l;c++){const h=c*n,u=new _t.Line({points:[e,h,e+i,h],stroke:"rgba(255,255,255,0.06)",strokeWidth:1,strokeScaleEnabled:!1,listening:!1});u.setAttr("isBackground",!0),Te.add(u)}const d=Te.getLayer();d&&d.batchDraw()}function n1(e,t,i){if(!i||i.length===0)return 0;const s=[...i].sort((n,r)=>n.areaMm2-r.areaMm2);if(e<=s[0].areaMm2)return ge[s[0].code]??0;if(e>=s[s.length-1].areaMm2)return ge[s[s.length-1].code]??0;for(let n=0;n<s.length-1;n++){const r=s[n],o=s[n+1];if(e>=r.areaMm2&&e<=o.areaMm2){const a=ge[r.code]??0,l=ge[o.code]??0,d=(e-r.areaMm2)/(o.areaMm2-r.areaMm2);return a+(l-a)*d}}return ge[s[0].code]??0}function r1(e,t,i){if(!i||i.length===0)return 0;const s=[...i].sort((r,o)=>(r.area||0)-(o.area||0));if(s[0].area!=null&&e<=s[0].area)return ge[s[0].code]??s[0].basePrice??0;const n=s[s.length-1];if(n.area!=null&&e>=n.area)return ge[n.code]??n.basePrice??0;for(let r=0;r<s.length-1;r++){const o=s[r],a=s[r+1],l=o.area??0,d=a.area??0;if(d>l&&e>=l&&e<=d){const c=ge[o.code]??o.basePrice??0,h=ge[a.code]??a.basePrice??0,u=(e-l)/(d-l);return c+(h-c)*u}}return ge[s[0].code]??s[0].basePrice??0}function xn(e){const t=Math.abs(e.scaleX())||1,i=Math.abs(e.scaleY())||1;if(e.className==="Ellipse"){const a=Math.abs(e.radiusX()*t),l=Math.abs(e.radiusY()*i);return{x:e.x()-a,y:e.y()-l,width:a*2,height:l*2}}const s=Math.abs(e.width()*t),n=Math.abs(e.height()*i),r=e.offsetX?e.offsetX():0,o=e.offsetY?e.offsetY():0;return{x:e.x()-(Math.abs(r*t)||s/2),y:e.y()-(Math.abs(o*i)||n/2),width:s,height:n}}function mo(e,t,i,s){if(!e||!vt)return;const n=Math.abs(e.scaleX())||1,r=Math.abs(e.scaleY())||1;let o=0;e.className==="Ellipse"?o=Math.PI*Math.abs(e.radiusX()*n)*Math.abs(e.radiusY()*r):o=Math.abs(e.width()*n)*Math.abs(e.height()*r);let a=null,l=null;yt&&Pt!=null&&Pt>0&&(a=o/(Pt*Pt),l=a/(Nr*Nr));let d=!1,c=1;if(!yt){const f=e.getClientRect(),g=vt.find(".rib");for(let b of g)if(_t.Util.haveIntersection(b.getClientRect(),f)){d=!0,c=kf;break}}let h;yt&&a!=null&&s&&s[0]&&s[0].areaMm2!=null?h=n1(a,t,s):h=r1(o,t,s),d&&(h*=c),d?(e.stroke("#FF4444"),e.fill("rgba(255, 68, 68, 0.3)")):(e.stroke(t==="circle"?"#88E523":"#A0AEC0"),e.fill(t==="circle"?"rgba(136, 229, 35, 0.3)":"rgba(200, 200, 200, 0.3)"));const u={id:i,type:t,areaPx:o,areaMm2:a??void 0,cellsCount:l!=null?Math.round(l*100)/100:void 0,isComplex:d,price:h};Xi.set(i,u),ri&&ri(Array.from(Xi.values()))}const Wr=2e3,ln=.1;function bo(){const e=Yn();if(!e||!e._dentMeta||!yt||Pt==null||Pt<=0)return null;const t=xn(e);return{id:e._dentMeta.id,type:e._dentMeta.type,widthMm:t.width/Pt,heightMm:t.height/Pt}}function o1(e,t){const i=Yn();if(!i||!i._dentMeta||!yt||Pt==null||Pt<=0)return;const s=Math.max(ln,Math.min(Wr,Number(e)||ln)),n=Math.max(ln,Math.min(Wr,Number(t)||ln)),r=s*Pt,o=n*Pt;i.className==="Ellipse"?(i.radiusX(r/2),i.radiusY(o/2)):(i.width(r),i.height(o),i.scaleX(1),i.scaleY(1),i.offsetX(r/2),i.offsetY(o/2)),yt&&Ee&&Es(i);const a=i._dentMeta;mo(i,a.type,a.id,a.sizes),En(i),An(i),yt&&Tt&&$i(i);const l=i.getLayer();l&&l.batchDraw(),re&&re(bo())}function a1(e,t,i){if(!vt||!et||!mt)return;const s=i.find(f=>f.code===t);if(!s)return;const n=Date.now();let r,o;yt&&rt||rt?(r=rt.x+rt.width/2,o=rt.y+rt.height/2):(r=vt.width()/2,o=vt.height()/2);let a;if(e==="circle"){let f,g;if(yt&&Pt!=null&&s.mm)f=s.mm.w/2*Pt,g=s.mm.h/2*Pt;else{const b=s.radius??20;f=b,g=b}a=new _t.Ellipse({x:r,y:o,radiusX:f||15,radiusY:g||15,fill:"rgba(136, 229, 35, 0.3)",stroke:"#88E523",strokeWidth:1,draggable:!0,listening:!0,name:"dent",id:String(n)}),a.setAttr("type","circle")}else{let f,g;yt&&Pt!=null&&s.mm?(f=(s.mm.w||s.w)*Pt,g=(s.mm.h||s.h)*Pt):(f=s.w??40,g=s.h??20),a=new _t.Rect({x:r,y:o,width:f,height:g,offsetX:f/2,offsetY:g/2,cornerRadius:5,fill:"rgba(200, 200, 200, 0.3)",stroke:"#A0AEC0",strokeWidth:1,draggable:!0,listening:!0,name:"dent",id:String(n)}),a.setAttr("type","strip")}if(a._dentMeta={id:n,type:e,sizes:i},yt&&rt){const f=xn(a);let g=0,b=0;f.x<rt.x?g=rt.x-f.x:f.x+f.width>rt.x+rt.width&&(g=rt.x+rt.width-(f.x+f.width)),f.y<rt.y?b=rt.y-f.y:f.y+f.height>rt.y+rt.height&&(b=rt.y+rt.height-(f.y+f.height)),(g!==0||b!==0)&&a.position({x:a.x()+g,y:a.y()+b})}a.dragBoundFunc(f=>{if(yt)return f;const g=a.position(),b=a.getClientRect(),v=f.x-g.x,_=f.y-g.y,w={x:b.x+v,y:b.y+_,width:b.width,height:b.height};return fr(w)?f:g});const l=.1,d=()=>{const f=Math.max(l,Math.abs(a.scaleX())),g=Math.max(l,Math.abs(a.scaleY())),b={x:a.x(),y:a.y(),scaleX:f,scaleY:g,rotation:a.rotation()};a.className==="Ellipse"&&(b.radiusX=Math.abs(a.radiusX()),b.radiusY=Math.abs(a.radiusY())),a._lastGoodTransform=b};d();const c=(f,g)=>{const b=f.x(),v=f.y();return b>=g.x&&b<=g.x+g.width&&v>=g.y&&v<=g.y+g.height},h=()=>{if(mo(a,e,n,i),yt&&rt){const f=xn(a);(Br(f,rt)||c(a,rt))&&d()}else fr(a.getClientRect())&&d()};a.on("mousedown touchstart",f=>{f.cancelBubble=!0,ht&&ht.draggable(!1)}),a.on("dragstart",f=>{f.cancelBubble=!0,ur(a),ht&&ht.draggable(!1)}),a.on("dragmove",()=>{yt&&Ee&&Es(a),yt&&Tt&&$i(a),mt&&(mt.nodes([a]),mt.forceUpdate&&mt.forceUpdate()),h();const f=et.getLayer?et.getLayer():et;f&&f.batchDraw()}),a.on("dragend",()=>{yt&&Ee&&Es(a),yt&&Tt&&$i(a),h();const f=et.getLayer?et.getLayer():et;f&&f.batchDraw()}),a.on("transform",h),a.on("transformstart",()=>{ht&&ht.draggable(!1)}),a.on("transformend",()=>{if(yt&&rt){const f=xn(a);let g=0,b=0;f.x<rt.x?g=rt.x-f.x:f.x+f.width>rt.x+rt.width&&(g=rt.x+rt.width-(f.x+f.width)),f.y<rt.y?b=rt.y-f.y:f.y+f.height>rt.y+rt.height&&(b=rt.y+rt.height-(f.y+f.height)),(g!==0||b!==0)&&a.position({x:a.x()+g,y:a.y()+b})}if(a.className==="Rect"){const f=Math.max(Ze,Math.abs(a.width()*a.scaleX())),g=Math.max(Ze,Math.abs(a.height()*a.scaleY()));a.width(f),a.height(g),a.scaleX(1),a.scaleY(1),a.offsetX(f/2),a.offsetY(g/2)}if(a.className==="Ellipse"){let f=Math.abs(a.radiusX()*a.scaleX()),g=Math.abs(a.radiusY()*a.scaleY());if(yt&&Pt!=null&&Pt>0){const b=Wr/2*Pt;f=Math.min(f,b),g=Math.min(g,b)}f=Math.max(Ze/2,f),g=Math.max(Ze/2,g),a.radiusX(f),a.radiusY(g),a.scaleX(1),a.scaleY(1)}if(yt&&Ee&&Es(a),En(a),An(a),yt&&rt&&a._lastGoodTransform)if(!c(a,rt))a.setAttrs(a._lastGoodTransform);else{const f=Math.max(l,Math.abs(a.scaleX())),g=Math.max(l,Math.abs(a.scaleY()));a.scaleX(f),a.scaleY(g),d()}else!yt&&!fr(a.getClientRect())&&a._lastGoodTransform&&a.setAttrs(a._lastGoodTransform);h(),yt&&Tt&&$i(a),re&&re(bo())}),a.on("click tap",f=>{f.cancelBubble=!0,yt&&(ii=a),ur(a)}),et.add(a),Tt&&Tt.moveToTop(),En(a),An(a),Cc(a),ur(a),h();const u=et.getLayer?et.getLayer():et;u&&u.batchDraw()}function Mc(){const e=Yn();if(!e||!e._dentMeta)return;Xi.delete(e._dentMeta.id),mt.nodes([]),e.destroy();const t=et?et.getLayer():null;t&&t.batchDraw(),ri&&ri(Array.from(Xi.values())),re&&re(null)}function l1(){if(et){if(et.destroyChildren(),Xi.clear(),vt&&et){mt=new _t.Transformer({anchorStroke:"#88E523",anchorFill:"#0B121E",anchorSize:15,borderStroke:"#88E523",borderDash:[4,4],centeredScaling:!0,rotateEnabled:!0,keepRatio:Yi,boundBoxFunc:(t,i)=>i.width<Ze||i.height<Ze?t:i}),mt.on("mousedown touchstart",()=>{ht&&ht.draggable(!1)}),et.add(mt),yt&&(Tt=null,_c(),Tt&&et.add(Tt));const e=et.getLayer?et.getLayer():et;e&&e.batchDraw()}ri&&ri([]),re&&re(null)}}function c1(){Je&&yi&&(Je.unobserve(yi),Je=null,yi=null),As&&(window.removeEventListener("resize",As),As=null),vt&&(vt.destroy(),vt=null),po=null,Bs=1,Hs={x:0,y:0},bn=!1,Ts=0,Ps=0,se=null,Te=null,et=null,mt=null,Pe=null,ge={},ri=null,re=null,Xi.clear(),rt=null,Ns=null,Pt=null,bi=null,Ee=null,ne=null,yt=!1,Pn="",ht=null,wi=0,ti=0,Si=null,Ii=null,Tt=null,ii=null,Yi=!0}const Nt={repairTypes:[{code:"R1",name:" ",mult:1},{code:"R2",name:" ",mult:.85}],materials:[{code:"M1",name:"",mult:1},{code:"M2",name:"",mult:1.3}],carClasses:[{code:"CLASS_STD",name:"",mult:1},{code:"CLASS_PREM",name:" / ",mult:1.2}],risks:[{code:"RK1",name:"",matrixKey:"K1"},{code:"RK2",name:"",matrixKey:"K2"},{code:"RK3",name:"",matrixKey:"K3"},{code:"RK4",name:"",matrixKey:"K4"}],disassembly:[{code:"Z0",name:" ",price:0},{code:"Z1",name:"",price:1e3},{code:"Z2",name:"",price:2e3},{code:"Z3",name:"",price:4e3},{code:"Z4",name:"+",price:3e3}],defaultMasters:[{name:"",rate:5e3},{name:"",rate:2500}],circleSizes:[{code:"S2",name:" ",basePrice:2e3,radius:15,area:706},{code:"S4",name:"  ",basePrice:3e3,radius:25,area:1963},{code:"S6",name:" ",basePrice:5e3,radius:35,area:3848},{code:"S8",name:" ",basePrice:7e3,radius:45,area:6361},{code:"S10",name:"  ",basePrice:12e3,radius:60,area:11309},{code:"S11",name:" ",basePrice:15e3,radius:75,area:17671}],stripSizes:[{code:"LS1",name:" . ",basePrice:4e3,w:40,h:20,area:800},{code:"LS2",name:" ",basePrice:6e3,w:80,h:10,area:800},{code:"LS3",name:" ",basePrice:9e3,w:120,h:10,area:1200},{code:"LS4",name:" ",basePrice:13e3,w:150,h:50,area:7500},{code:"LS5",name:" ",basePrice:16e3,w:200,h:100,area:2e4},{code:"LS6",name:" ",basePrice:22e3,w:250,h:150,area:37500},{code:"LS7",name:" ",basePrice:3e4,w:280,h:200,area:56e3},{code:"LS8",name:" ",basePrice:42e3,w:300,h:300,area:9e4}],complexityMatrix:{S2:{K1:1,K2:1.15,K3:2.3,K4:4},S4:{K1:1,K2:1.6,K3:2.3,K4:4},S6:{K1:1,K2:1.4,K3:2,K4:3},S8:{K1:1,K2:1.4,K3:1.8,K4:3},S10:{K1:1,K2:1.3,K3:1.6,K4:2.2},S11:{K1:1,K2:1.2,K3:1.9,K4:2.7},STRIP_DEFAULT:{K1:.95,K2:1,K3:1.15,K4:1.3}}},Ia={door:{id:"door",name:"",icon:"door",path:"M20,20 L280,20 Q300,20 300,50 L300,350 Q300,380 280,380 L20,380 Q0,380 0,350 L0,50 Q0,20 20,20 Z",ribs:[{x:0,y:150,w:300,h:20},{x:0,y:320,w:300,h:30}]},hood:{id:"hood",name:"",icon:"hood",path:"M50,20 L250,20 Q280,20 290,100 L300,350 Q300,380 150,390 Q0,380 0,350 L10,100 Q20,20 50,20 Z",ribs:[{x:140,y:20,w:20,h:370},{x:50,y:100,w:200,h:20}]},fender:{id:"fender",name:"",icon:"fender",path:"M20,20 L250,20 Q280,20 280,100 L280,350 Q150,250 20,350 L20,20 Z",ribs:[{x:20,y:180,w:260,h:40}]},trunk:{id:"trunk",name:"",icon:"trunk",path:"M20,20 L280,20 L280,350 L20,350 Z",ribs:[{x:0,y:200,w:300,h:30}]}},d1=[{id:"hood",name:"",icon:"hood",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/hood.jpg"},realSizeMm:{w:1570,h:1315}},{id:"door_front_left",name:"  ",icon:"door",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/door_front_left.jpg"},realSizeMm:{w:1112,h:950}},{id:"door_rear_left",name:"  ",icon:"door",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/door_rear_left.jpg"},realSizeMm:{w:1170,h:790}},{id:"fender_rear_right",name:"  ",icon:"fender",classIds:["crossover"],asset:{type:"image",src:"parts/crossover/fender_rear_left.jpg"},realSizeMm:{w:585,h:390}}];function Da(e){return d1.filter(t=>t.classIds.includes(e))}const h1=[{code:"S2",name:"",mm:{w:25,h:25}},{code:"S4",name:"",mm:{w:45,h:60}},{code:"S6",name:"",mm:{w:90,h:90}},{code:"S8",name:"",mm:{w:85,h:180}},{code:"S10",name:" ",mm:{w:220,h:220}},{code:"S11",name:" ",mm:{w:440,h:440}}];function u1(e,t){return Math.PI*(e/2)*(t/2)}const f1=h1.map(e=>({...e,areaMm2:u1(e.mm.w,e.mm.h)})),Ga=100;function gs(e){return Math.round((e||0)/Ga)*Ga}function Tc(e){if(!e||e.length===0)return 0;const t=[...e].sort((s,n)=>(n.price||0)-(s.price||0));let i=t[0].price||0;for(let s=1;s<t.length;s++)i+=(t[s].price||0)*.5;return i}function Pc(e,t,i,s="STRIP_DEFAULT",n=100){const r=Tc(e);return r<=0?0:t&&t.repairCode&&t.riskCode&&t.materialCode&&t.carClassCode&&t.disassemblyCode?$r(r,t,i,s,n):Math.round(r/n)*n}function $r(e,t,i,s="STRIP_DEFAULT",n=100){if(!t||!i||e<=0)return 0;const{repairCode:r,riskCode:o,materialCode:a,carClassCode:l,disassemblyCode:d}=t;if(!r||!o||!a||!l||!d)return 0;const c=i.risks.find(M=>M.code===o),h=c?c.matrixKey:"K2",f=(i.complexityMatrix[s]??i.complexityMatrix.STRIP_DEFAULT)[h]??1,g=i.repairTypes.find(M=>M.code===r)?.mult??1,b=i.materials.find(M=>M.code===a)?.mult??1,v=i.carClasses.find(M=>M.code===l)?.mult??1,_=i.disassembly.find(M=>M.code===d)?.price??0,w=e*g*b*f*v+_;return Math.round(w/n)*n}function g1(e,t,i,s="STRIP_DEFAULT"){const n=[];if(!t||!i||e<=0)return n;const{repairCode:r,riskCode:o,materialCode:a,carClassCode:l,disassemblyCode:d}=t;if(!r||!o||!a||!l||!d)return n;const c=i.risks.find(A=>A.code===o),h=c?c.matrixKey:"K2",f=(i.complexityMatrix[s]??i.complexityMatrix.STRIP_DEFAULT)[h]??1,g=i.repairTypes.find(A=>A.code===r),b=g?.mult??1,v=i.materials.find(A=>A.code===a),_=v?.mult??1,w=i.carClasses.find(A=>A.code===l),M=w?.mult??1,k=i.disassembly.find(A=>A.code===d),E=k?.price??0;return n.push({name:" ",value:`${(Math.round(e/100)*100).toLocaleString("ru-RU")} `}),g&&n.push({name:g.name,value:`${b}`}),v&&n.push({name:v.name,value:`${_}`}),c&&n.push({name:c.name,value:`${f}`}),w&&n.push({name:w.name,value:`${M}`}),E>0&&k&&n.push({name:k.name,value:`+${gs(E).toLocaleString("ru-RU")} `}),n}const xo=(e,t)=>{const i=e.__vccOpts||e;for(const[s,n]of t)i[s]=n;return i},p1={class:"conditions-panel"},m1=["open"],b1={class:"p-3 space-y-3"},x1={key:0,class:"text-xs text-gray-500 italic"},y1={key:1,class:"space-y-3"},v1=["value"],_1=["value"],w1=["value"],S1=["value"],C1=["value"],k1=["value"],M1=["value"],T1=["value"],P1=["value"],A1=["value"],E1={class:"card-metallic rounded-2xl p-5"},R1={class:"relative"},O1=["value","disabled"],L1=["value"],I1={class:"card-metallic rounded-2xl p-5 space-y-4"},D1={class:"relative"},G1=["value","disabled"],F1=["value"],N1={class:"relative"},B1=["value","disabled"],H1=["value"],W1={class:"relative"},$1=["value","disabled"],z1=["value"],j1={class:"card-metallic rounded-2xl p-5"},U1={class:"relative"},X1=["value","disabled"],Y1=["value"],V1={__name:"ConditionsPanel",props:{model:{type:Object,required:!0},initialData:{type:Object,required:!0},disabled:{type:Boolean,default:!1},compact:{type:Boolean,default:!1},openWhenFormed:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const i=e,s=t;function n(r,o){i.model&&(i.model[r]=o,s("update:modelValue",i.model))}return(r,o)=>(B(),z("div",p1,[e.compact?(B(),z("details",{key:0,class:"card-metallic rounded-xl overflow-hidden border border-white/10",open:e.openWhenFormed},[o[20]||(o[20]=p("summary",{class:"flex items-center justify-between p-3 cursor-pointer select-none list-none border-b border-white/5"},[p("span",{class:"text-[10px] font-bold text-metric-green uppercase tracking-widest"},"  "),p("svg",{class:"w-4 h-4 text-gray-500 transition-transform duration-200 details-chevron",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1)),p("div",b1,[e.disabled?(B(),z("p",x1,"     .")):(B(),z("div",y1,[p("div",null,[o[11]||(o[11]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"},"",-1)),p("select",{value:e.model.repairCode,onChange:o[0]||(o[0]=a=>n("repairCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[o[10]||(o[10]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(e.initialData.repairTypes,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,_1))),128))],40,v1)]),p("div",null,[o[13]||(o[13]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"},"",-1)),p("select",{value:e.model.riskCode,onChange:o[1]||(o[1]=a=>n("riskCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[o[12]||(o[12]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(e.initialData.risks,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,S1))),128))],40,w1)]),p("div",null,[o[15]||(o[15]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"},"",-1)),p("select",{value:e.model.materialCode,onChange:o[2]||(o[2]=a=>n("materialCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[o[14]||(o[14]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(e.initialData.materials,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,k1))),128))],40,C1)]),p("div",null,[o[17]||(o[17]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"}," ",-1)),p("select",{value:e.model.carClassCode,onChange:o[3]||(o[3]=a=>n("carClassCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[o[16]||(o[16]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(e.initialData.carClasses,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,T1))),128))],40,M1)]),p("div",null,[o[19]||(o[19]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1 ml-1"}," ",-1)),p("select",{value:e.model.disassemblyCode,onChange:o[4]||(o[4]=a=>n("disassemblyCode",a.target.value)),class:"conditions-select-compact w-full bg-[#151515] border border-[#333] rounded-lg px-3 py-2.5 text-sm text-white focus:border-metric-green/50 outline-none disabled:opacity-60"},[o[18]||(o[18]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(e.initialData.disassembly,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,A1))),128))],40,P1)])]))])],8,m1)):(B(),z(ut,{key:1},[p("div",E1,[o[23]||(o[23]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",R1,[p("select",{value:e.model.repairCode,onChange:o[5]||(o[5]=a=>n("repairCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[o[21]||(o[21]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(e.initialData.repairTypes,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,L1))),128))],40,O1),o[22]||(o[22]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",I1,[o[33]||(o[33]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),p("div",null,[o[26]||(o[26]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",D1,[p("select",{value:e.model.riskCode,onChange:o[6]||(o[6]=a=>n("riskCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[o[24]||(o[24]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(e.initialData.risks,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,F1))),128))],40,G1),o[25]||(o[25]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[o[29]||(o[29]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",N1,[p("select",{value:e.model.materialCode,onChange:o[7]||(o[7]=a=>n("materialCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[o[27]||(o[27]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(e.initialData.materials,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,H1))),128))],40,B1),o[28]||(o[28]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[o[32]||(o[32]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",W1,[p("select",{value:e.model.carClassCode,onChange:o[8]||(o[8]=a=>n("carClassCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[o[30]||(o[30]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(e.initialData.carClasses,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,z1))),128))],40,$1),o[31]||(o[31]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),p("div",j1,[o[36]||(o[36]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),o[37]||(o[37]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",U1,[p("select",{value:e.model.disassemblyCode,onChange:o[9]||(o[9]=a=>n("disassemblyCode",a.target.value)),disabled:e.disabled,class:"conditions-select w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors disabled:opacity-60"},[o[34]||(o[34]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(e.initialData.disassembly,a=>(B(),z("option",{key:a.code,value:a.code},ot(a.name),9,Y1))),128))],40,X1),o[35]||(o[35]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])],64))]))}},K1=xo(V1,[["__scopeId","data-v-28183ebc"]]),q1={class:"graphics-header shrink-0 flex items-center gap-2 px-2 py-1.5 border-b border-white/10 bg-black/60"},Q1={class:"flex-1 min-w-0 flex flex-wrap items-center gap-1.5"},J1=["value","disabled"],Z1=["value"],tg=["value","disabled"],eg=["value"],ig={class:"flex items-center gap-1 shrink-0"},sg={__name:"StepHeader",props:{selectedClassId:{type:String,required:!0},selectedPartId:{type:String,required:!0},carClasses:{type:Array,default:()=>[]},partsList:{type:Array,default:()=>[]},lockSelection:{type:Boolean,default:!1},showReset:{type:Boolean,default:!0},currentStep:{type:Number,default:1}},emits:["back","update:selectedClassId","update:selectedPartId","reset"],setup(e){return(t,i)=>(B(),z("header",q1,[p("button",{onClick:i[0]||(i[0]=s=>t.$emit("back")),class:"text-metric-silver hover:text-white p-1.5 rounded border border-white/10 shrink-0","aria-label":""},"  "),p("div",Q1,[p("select",{value:e.selectedClassId,disabled:e.lockSelection,onChange:i[1]||(i[1]=s=>t.$emit("update:selectedClassId",s.target.value)),class:"graphics-select flex-1 min-w-0 max-w-[140px] bg-[#151515] border border-[#333] rounded-lg px-2 py-1.5 text-xs text-white focus:border-metric-green/50 outline-none disabled:opacity-60 disabled:cursor-not-allowed"},[(B(!0),z(ut,null,wt(e.carClasses,s=>(B(),z("option",{key:s.id,value:s.id},ot(s.name),9,Z1))),128))],40,J1),p("select",{value:e.selectedPartId,disabled:e.lockSelection,onChange:i[2]||(i[2]=s=>t.$emit("update:selectedPartId",s.target.value)),class:"graphics-select flex-1 min-w-0 max-w-[160px] bg-[#151515] border border-[#333] rounded-lg px-2 py-1.5 text-xs text-white focus:border-metric-green/50 outline-none disabled:opacity-60 disabled:cursor-not-allowed"},[(B(!0),z(ut,null,wt(e.partsList,s=>(B(),z("option",{key:s.id,value:s.id},ot(s.name),9,eg))),128))],40,tg)]),e.showReset?(B(),z("button",{key:0,onClick:i[3]||(i[3]=s=>t.$emit("reset")),class:"text-xs text-red-400 px-2 py-1 hover:text-red-300 shrink-0"},"  ")):zt("",!0),p("div",ig,[(B(),z(ut,null,wt(4,s=>p("span",{key:s,class:Ft(["w-1.5 h-1.5 rounded-full transition-colors",e.currentStep>=s?"bg-metric-green":"bg-white/20"])},null,2)),64))])]))}},ng={class:"p-2 space-y-2"},rg={class:"grid grid-cols-2 gap-2"},og={class:"text-center text-[11px] text-gray-400"},ag=["disabled","title"],lg={key:0,class:"text-[10px] text-gray-500 text-center"},cg={__name:"Step1PlacementPanel",props:{previewPrice:{type:Number,default:0},canNext:{type:Boolean,default:!1}},emits:["add-type","next"],setup(e){const t=i=>new Intl.NumberFormat("ru-RU").format(i);return(i,s)=>(B(),z("div",ng,[p("div",rg,[p("button",{onClick:s[0]||(s[0]=n=>i.$emit("add-type","circle")),class:"card-metallic p-2.5 rounded-xl flex items-center gap-2 active:scale-95 hover:border-metric-green/30 transition-all"},[...s[3]||(s[3]=[p("div",{class:"w-5 h-5 rounded-full border-2 border-metric-green bg-metric-green/20 shrink-0"},null,-1),p("div",{class:"text-left min-w-0"},[p("div",{class:"font-bold text-[10px] text-white"},""),p("div",{class:"text-[9px] text-gray-500"},"/")],-1)])]),p("button",{onClick:s[1]||(s[1]=n=>i.$emit("add-type","strip")),class:"card-metallic p-2.5 rounded-xl flex items-center gap-2 active:scale-95 hover:border-metric-green/30 transition-all"},[...s[4]||(s[4]=[p("div",{class:"w-5 h-2 bg-metric-silver rotate-45 rounded-sm shrink-0"},null,-1),p("div",{class:"text-left min-w-0"},[p("div",{class:"font-bold text-[10px] text-white"},""),p("div",{class:"text-[9px] text-gray-500"},"")],-1)])])]),p("div",og," : "+ot(e.previewPrice>0?"~ "+t(e.previewPrice)+" ":""),1),p("button",{type:"button",onClick:s[2]||(s[2]=n=>i.$emit("next")),disabled:!e.canNext,title:e.canNext?"":"    ",class:Ft(["w-full py-3 rounded-xl font-bold text-sm uppercase tracking-widest transition-all flex items-center justify-center gap-2",e.canNext?"bg-metric-green text-black shadow-[0_0_15px_rgba(136,229,35,0.4)] hover:opacity-95 active:opacity-90":"bg-white/10 text-gray-500 cursor-not-allowed"])},[...s[5]||(s[5]=[p("span",null,"  ",-1)])],10,ag),e.canNext?zt("",!0):(B(),z("p",lg,"    "))]))}},dg={class:"p-2 space-y-2"},hg={class:"flex items-center gap-2"},ug={class:"flex items-center gap-2 cursor-pointer text-[10px] text-gray-400"},fg=["checked"],gg={key:0,class:"rounded-xl bg-black/35 border border-white/10 p-2.5"},pg={class:"grid grid-cols-2 gap-3"},mg={class:"block text-[10px] text-gray-500 mb-1"},bg=["value"],xg={class:"block text-[10px] text-gray-500 mb-1"},yg=["value"],vg={class:"text-center text-[11px] text-gray-400"},_g=["disabled"],wg={key:1,class:"text-[10px] text-gray-500 text-center"},Sg={__name:"Step2SizePanel",props:{selectedDentSize:{type:Object,default:null},sizeWidthMm:{type:Number,default:0},sizeHeightMm:{type:Number,default:0},freeStretch:{type:Boolean,default:!1},previewPrice:{type:Number,default:0},canNext:{type:Boolean,default:!1}},emits:["delete","update:freeStretch","update:sizeWidthMm","update:sizeHeightMm","dimensions-focus","next"],setup(e){const t=i=>new Intl.NumberFormat("ru-RU").format(i);return(i,s)=>(B(),z("div",dg,[p("button",{type:"button",class:"card-metallic w-full px-3 py-2 rounded-xl flex items-center justify-center gap-2 active:scale-95 hover:border-red-400/60 transition-all",onClick:s[0]||(s[0]=n=>i.$emit("delete"))},[...s[7]||(s[7]=[p("span",{class:"text-base text-red-400"},"",-1),p("span",{class:"text-[9px] text-gray-500"},"  ",-1)])]),p("div",hg,[p("label",ug,[p("input",{type:"checkbox",checked:e.freeStretch,onChange:s[1]||(s[1]=n=>i.$emit("update:freeStretch",n.target.checked)),class:"rounded border-white/20 bg-[#151515] text-metric-green focus:ring-metric-green/50"},null,40,fg),s[8]||(s[8]=p("span",null,"  ( )",-1))])]),e.selectedDentSize?(B(),z("div",gg,[s[9]||(s[9]=p("div",{class:"text-[10px] uppercase font-bold text-metric-green tracking-widest mb-2"}," ()",-1)),p("div",pg,[p("div",null,[p("label",mg,ot(e.selectedDentSize.type==="circle"?"":""),1),p("input",{value:e.sizeWidthMm,onInput:s[2]||(s[2]=n=>i.$emit("update:sizeWidthMm",Number(n.target.value))),type:"number",min:"0.1",max:"2000",step:"0.5",inputmode:"numeric",class:"w-full rounded-lg bg-white/5 border border-white/20 px-2 py-1.5 text-sm text-white focus:border-metric-green focus:ring-1 focus:ring-metric-green/50 outline-none",onFocus:s[3]||(s[3]=n=>i.$emit("dimensions-focus"))},null,40,bg)]),p("div",null,[p("label",xg,ot(e.selectedDentSize.type==="circle"?"":""),1),p("input",{value:e.sizeHeightMm,onInput:s[4]||(s[4]=n=>i.$emit("update:sizeHeightMm",Number(n.target.value))),type:"number",min:"0.1",max:"2000",step:"0.5",inputmode:"numeric",class:"w-full rounded-lg bg-white/5 border border-white/20 px-2 py-1.5 text-sm text-white focus:border-metric-green focus:ring-1 focus:ring-metric-green/50 outline-none",onFocus:s[5]||(s[5]=n=>i.$emit("dimensions-focus"))},null,40,yg)])])])):zt("",!0),p("div",vg," : "+ot(e.previewPrice>0?"~ "+t(e.previewPrice)+" ":""),1),p("button",{type:"button",onClick:s[6]||(s[6]=n=>i.$emit("next")),disabled:!e.canNext,class:Ft(["w-full py-3 rounded-xl font-bold text-sm uppercase tracking-widest transition-all flex items-center justify-center gap-2",e.canNext?"bg-metric-green text-black shadow-[0_0_15px_rgba(136,229,35,0.4)] hover:opacity-95 active:opacity-90":"bg-white/10 text-gray-500 cursor-not-allowed"])},[...s[10]||(s[10]=[p("span",null,"  ",-1)])],10,_g),e.canNext?zt("",!0):(B(),z("p",wg,"    0"))]))}},Cg={class:"p-2 space-y-2"},kg={class:"mx-0"},Mg={class:"rounded-xl bg-black/35 border border-white/10 p-3 space-y-1"},Tg={class:"flex justify-between text-[11px]"},Pg={class:"text-white font-medium"},Ag={class:"flex justify-between text-[11px]"},Eg={class:"text-metric-green font-bold"},Rg={__name:"Step3ConditionsPanel",props:{model:{type:Object,required:!0},initialData:{type:Object,required:!0},basePrice:{type:Number,default:0},totalPrice:{type:Number,default:0}},emits:["back-to-edit","calculate"],setup(e){const t=i=>new Intl.NumberFormat("ru-RU").format(i);return(i,s)=>(B(),z("div",Cg,[p("button",{type:"button",onClick:s[0]||(s[0]=n=>i.$emit("back-to-edit")),class:"w-full py-3 rounded-xl font-bold text-sm uppercase tracking-widest flex items-center justify-center gap-2 bg-metric-green text-black shadow-[0_0_15px_rgba(136,229,35,0.4)] hover:opacity-95 active:opacity-90 transition-opacity"},[...s[2]||(s[2]=[p("span",{"aria-hidden":"true"},"",-1),p("span",null,"  ",-1)])]),p("div",kg,[be(K1,{model:e.model,"initial-data":e.initialData,disabled:!1,compact:"","open-when-formed":!0},null,8,["model","initial-data"])]),p("div",Mg,[p("div",Tg,[s[3]||(s[3]=p("span",{class:"text-gray-400"}," :",-1)),p("span",Pg,ot(t(e.basePrice))+" ",1)]),p("div",Ag,[s[4]||(s[4]=p("span",{class:"text-gray-400"}," :",-1)),p("span",Eg,ot(t(e.totalPrice))+" ",1)])]),p("button",{type:"button",onClick:s[1]||(s[1]=n=>i.$emit("calculate")),class:"w-full py-3 rounded-xl font-bold text-sm uppercase tracking-widest flex items-center justify-center gap-2 bg-metric-green text-black shadow-[0_0_15px_rgba(136,229,35,0.4)] hover:opacity-95 active:opacity-90 transition-opacity"},[...s[5]||(s[5]=[p("span",null," ",-1)])])]))}},Og={class:"p-2 space-y-3"},Lg={class:"rounded-xl bg-black/35 border border-white/10 p-4 space-y-2"},Ig={class:"text-gray-400"},Dg={class:"text-white font-medium"},Gg={class:"border-t border-white/10 pt-2 mt-2 flex justify-between"},Fg={class:"text-metric-green font-bold text-lg"},Ng={class:"flex flex-col gap-2"},Bg={__name:"Step4SummaryPanel",props:{breakdown:{type:Array,default:()=>[]},totalPrice:{type:Number,default:0}},emits:["back-to-edit","reset"],setup(e){const t=i=>new Intl.NumberFormat("ru-RU").format(i);return(i,s)=>(B(),z("div",Og,[p("div",Lg,[s[3]||(s[3]=p("div",{class:"text-[10px] font-bold text-metric-green uppercase tracking-widest mb-2"}," ",-1)),(B(!0),z(ut,null,wt(e.breakdown,(n,r)=>(B(),z("div",{key:r,class:"flex justify-between text-[11px]"},[p("span",Ig,ot(n.name)+":",1),p("span",Dg,ot(n.value),1)]))),128)),p("div",Gg,[s[2]||(s[2]=p("span",{class:"text-metric-green font-bold text-sm"},":",-1)),p("span",Fg,ot(t(e.totalPrice))+" ",1)])]),p("div",Ng,[p("button",{type:"button",onClick:s[0]||(s[0]=n=>i.$emit("back-to-edit")),class:"w-full py-3 rounded-xl font-bold text-sm uppercase tracking-widest flex items-center justify-center gap-2 bg-metric-green text-black shadow-[0_0_15px_rgba(136,229,35,0.4)] hover:opacity-95 active:opacity-90 transition-opacity"},[...s[4]||(s[4]=[p("span",null,"  ",-1)])]),p("button",{type:"button",onClick:s[1]||(s[1]=n=>i.$emit("reset")),class:"w-full py-3 text-xs font-bold uppercase tracking-widest text-red-400 hover:text-red-300 hover:bg-red-900/10 border border-transparent hover:border-red-900/20 rounded-xl transition-all flex items-center justify-center gap-2"},[...s[5]||(s[5]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p("span",null,"",-1)])])])]))}},Hg={key:0,class:"absolute inset-0 z-10 cursor-default pointer-events-auto","aria-label":" "},Wg={key:1,class:"absolute top-2 left-2 z-20 px-2 py-1 rounded-md bg-black/60 border border-white/20 text-[10px] font-bold uppercase tracking-widest text-metric-silver pointer-events-none"},$g={key:2,class:"absolute top-2 right-2 z-20 flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-black/55 backdrop-blur-sm border border-white/10 text-[11px] font-medium pointer-events-none"},zg=["disabled","aria-label"],jg={class:"bg-[#151F2E] w-full max-w-md rounded-2xl p-5 border border-white/10 shadow-2xl space-y-4 pb-8 max-h-[80vh] overflow-y-auto"},Ug={class:"flex justify-between items-center border-b border-white/5 pb-3"},Xg={class:"text-white font-bold text-lg pl-1"},Yg={class:"grid grid-cols-2 gap-3 max-h-[50vh] overflow-y-auto"},Vg=["onClick"],Kg={class:"text-metric-green font-bold text-base"},qg={class:"text-gray-400 text-xs text-center leading-tight"},Qg={__name:"GraphicsWizard",props:{form:{type:Object,required:!0},initialData:{type:Object,required:!0},userSettings:{type:Object,required:!0},carClasses:{type:Array,default:()=>[]},partsList:{type:Array,default:()=>[]},selectedClassId:{type:String,required:!0},selectedPartId:{type:String,required:!0},selectedPart:{type:Object,default:null},circleSizes:{type:Array,default:()=>[]},stripSizes:{type:Array,default:()=>[]}},emits:["update:selectedClassId","update:selectedPartId","close","dents-change"],setup(e,{emit:t}){const i=t,s=e,n=Ut(1),r=Ut(null),o=Ut(null),a=Ut(null),l=Ut(!1),d=Ut(null),c=Ut(null),h=Ut(0),u=Ut(0),f=Ut(!1),g=Ut([]);let b=null;const v=Ut(0),_=Qt(()=>v.value>0);let w=null;function M(){w||(w=requestAnimationFrame(()=>{w=null;const F=window.visualViewport;if(!F){v.value=0;return}const W=window.innerHeight-F.height-(F.offsetTop||0);v.value=Math.max(0,Math.round(W))}))}let k=!1;function E(F){const W=F?.target;W?.scrollIntoView&&(k||(k=!0,requestAnimationFrame(()=>{setTimeout(()=>{W.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),setTimeout(()=>{k=!1},600)},150)})))}const A=Qt(()=>{if(_.value)return{paddingBottom:`calc(12px + env(safe-area-inset-bottom, 0px) + ${v.value}px)`}}),V=Qt(()=>r.value?r.value:typeof document<"u"?document.body:null),O=Qt(()=>Tc(g.value)),K=Qt(()=>Pc(g.value,s.form,s.initialData,"STRIP_DEFAULT",100)),J=Qt(()=>g1(O.value,s.form,s.initialData,"STRIP_DEFAULT")),lt=Qt(()=>{if(g.value.length===0)return!1;if(!c.value)return!0;const F=Number(h.value),W=Number(u.value);return Number.isFinite(F)&&Number.isFinite(W)&&F>0&&W>0});ue(c,(F,W)=>{F&&(h.value=Math.round(F.widthMm*10)/10,u.value=Math.round(F.heightMm*10)/10),(F&&!W||!F&&W)&&gi(()=>setTimeout(()=>Rs(),50))},{immediate:!0}),ue([h,u],()=>{c.value&&(b&&clearTimeout(b),b=setTimeout(()=>{const F=Number(h.value),W=Number(u.value);if(!Number.isFinite(F)||!Number.isFinite(W)||F<=0||W<=0){b=null;return}const pt=c.value;if(pt&&Math.abs(pt.widthMm-F)<.01&&Math.abs(pt.heightMm-W)<.01){b=null;return}o1(F,W),b=null},150))}),ue(g,F=>{i("dents-change",F)},{deep:!0});function Z(){switch(n.value){case 1:i("close");break;case 2:st(1);break;case 3:st(2);break;case 4:st(3);break;default:st(1)}}function st(F){n.value=F}function ct(){b&&(clearTimeout(b),b=null),l1(),g.value=[],c.value=null,h.value=0,u.value=0,k=!1,d.value=null,f.value=!1,La(!0),l.value=!1,s.form.repairCode=null,s.form.riskCode=null,s.form.materialCode=null,s.form.carClassCode=null,s.form.disassemblyCode=null,st(1),i("dents-change",[])}function tt(F){d.value=F,l.value=!0}function j(F){if(!s.selectedPart)return;l.value=!1;const W=d.value,pt=W==="circle"?s.circleSizes:s.stripSizes;a1(W,F,pt)}function R(){Mc()}function m(F){La(!F)}const T=F=>new Intl.NumberFormat("ru-RU").format(F),gt=async()=>{if(!o.value||!s.selectedPart)return;const F=typeof import.meta<"u"&&"/DentMetric/"||"";await Vf(o.value,s.selectedPart,s.userSettings.prices,W=>{g.value=W,i("dents-change",W)},F,W=>{c.value=W}),gi(()=>setTimeout(()=>Rs(),150))};return ue(()=>n.value,F=>{gi(()=>{Qf(F<=2),F>=3&&setTimeout(()=>Rs(),150)})},{immediate:!0}),ue(()=>[s.selectedClassId,s.selectedPartId,s.selectedPart],()=>{gi(()=>setTimeout(gt,50))},{deep:!0}),io(()=>{gi(()=>setTimeout(gt,100));const F=window.visualViewport;F&&(F.addEventListener("resize",M),F.addEventListener("scroll",M),M())}),so(()=>{const F=window.visualViewport;F&&(F.removeEventListener("resize",M),F.removeEventListener("scroll",M)),c1()}),(F,W)=>(B(),z("div",{ref_key:"graphicsRoot",ref:r,class:"graphics-fullscreen-wrapper"},[be(sg,{"selected-class-id":e.selectedClassId,"selected-part-id":e.selectedPartId,"car-classes":e.carClasses,"parts-list":e.partsList,"lock-selection":n.value>=3,"show-reset":!0,"current-step":n.value,onBack:Z,"onUpdate:selectedClassId":W[0]||(W[0]=pt=>F.$emit("update:selectedClassId",pt)),"onUpdate:selectedPartId":W[1]||(W[1]=pt=>F.$emit("update:selectedPartId",pt)),onReset:ct},null,8,["selected-class-id","selected-part-id","car-classes","parts-list","lock-selection","current-step"]),p("div",{class:Ft(["graphics-stage-area flex flex-col",n.value>=3?"graphics-stage-preview shrink-0":"flex-1 min-h-0"])},[p("div",{id:"canvas-wrapper",class:Ft(["canvas-editor-wrap relative overflow-hidden matrix-container",n.value>=3?"h-[40vh] min-h-[200px] max-h-[45vh]":"flex-1 min-h-0"]),style:{"background-color":"#0b0f14"}},[p("div",{ref_key:"konvaContainer",ref:o,id:"konva-container",class:"absolute inset-0 w-full h-full",style:{"background-color":"#0b0f14",padding:"0",margin:"0"}},null,512),n.value>=3?(B(),z("div",Hg)):zt("",!0),n.value>=3?(B(),z("div",Wg,"  ")):zt("",!0),n.value<=2?(B(),z("div",$g,[W[12]||(W[12]=p("span",{class:"text-gray-400"},":",-1)),p("span",{class:Ft(O.value>0?"text-metric-green font-bold":"text-gray-500")},ot(O.value>0?T(Wt(gs)(O.value))+" ":""),3)])):zt("",!0),n.value===1?(B(),z("button",{key:3,type:"button",class:Ft(["hud-delete-btn",{"hud-delete-btn--active":c.value}]),disabled:!c.value,"aria-label":c.value?" ":"   ",onClick:W[2]||(W[2]=pt=>c.value&&R())},[...W[13]||(W[13]=[Hl('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b57cd314><polyline points="3 6 5 6 21 6" data-v-b57cd314></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-b57cd314></path><line x1="10" y1="11" x2="10" y2="17" data-v-b57cd314></line><line x1="14" y1="11" x2="14" y2="17" data-v-b57cd314></line></svg>',1)])],10,zg)):zt("",!0)],2)],2),p("div",{ref_key:"controlsAreaRef",ref:a,class:"graphics-controls-area shrink-0 overflow-y-auto border-t border-white/10 bg-black/80 pb-[env(safe-area-inset-bottom,0px)]",style:Gn(A.value)},[n.value===1?(B(),pi(cg,{key:0,"preview-price":Wt(gs)(O.value),"can-next":g.value.length>=1,onAddType:tt,onNext:W[3]||(W[3]=()=>st(2))},null,8,["preview-price","can-next"])):n.value===2?(B(),pi(Sg,{key:1,"selected-dent-size":c.value,"size-width-mm":h.value,"size-height-mm":u.value,"free-stretch":f.value,"preview-price":Wt(gs)(O.value),"can-next":lt.value,onDelete:R,"onUpdate:freeStretch":m,"onUpdate:sizeWidthMm":W[4]||(W[4]=pt=>h.value=pt),"onUpdate:sizeHeightMm":W[5]||(W[5]=pt=>u.value=pt),onDimensionsFocus:E,onNext:W[6]||(W[6]=()=>st(3))},null,8,["selected-dent-size","size-width-mm","size-height-mm","free-stretch","preview-price","can-next"])):n.value===3?(B(),pi(Rg,{key:2,model:e.form,"initial-data":e.initialData,"base-price":Wt(gs)(O.value),"total-price":K.value,onBackToEdit:W[7]||(W[7]=()=>st(2)),onCalculate:W[8]||(W[8]=()=>st(4))},null,8,["model","initial-data","base-price","total-price"])):n.value===4?(B(),pi(Bg,{key:3,breakdown:J.value,"total-price":K.value,onBackToEdit:W[9]||(W[9]=()=>st(2)),onReset:ct},null,8,["breakdown","total-price"])):zt("",!0)],4),(B(),pi(Td,{to:V.value,disabled:!V.value},[l.value?(B(),z("div",{key:0,class:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:W[11]||(W[11]=Vh(pt=>l.value=!1,["self"]))},[p("div",jg,[p("div",Ug,[p("h3",Xg,"   ("+ot(d.value==="circle"?"/":"")+") ",1),p("button",{onClick:W[10]||(W[10]=pt=>l.value=!1),class:"text-gray-400 p-2 text-xl"},"")]),p("div",Yg,[(B(!0),z(ut,null,wt(d.value==="circle"?e.circleSizes:e.stripSizes,pt=>(B(),z("button",{key:pt.code,onClick:yo=>j(pt.code),class:"card-metallic p-3 rounded-xl flex flex-col items-center justify-center gap-1 active:scale-95 transition-all hover:border-metric-green/50"},[p("span",Kg,ot(pt.code),1),p("span",qg,ot(pt.name),1)],8,Vg))),128))])])])):zt("",!0)],8,["to","disabled"]))],512))}},Jg=xo(Qg,[["__scopeId","data-v-b57cd314"]]),Zg={class:"max-w-md mx-auto relative h-screen flex flex-col bg-black text-white pb-[env(safe-area-inset-bottom)]"},t2={key:0,class:"flex flex-col h-full"},e2={key:0,class:"p-4 space-y-4 shrink-0 z-20 bg-black"},i2={class:"card-metallic rounded-2xl p-4 relative overflow-hidden text-center"},s2={key:0,class:"text-2xl align-top"},n2={class:"flex space-x-1 bg-[#151515] p-1 rounded-xl border border-[#333]"},r2={key:0,class:"space-y-4"},o2={class:"card-metallic rounded-2xl p-5"},a2={class:"mb-5"},l2={class:"flex space-x-3"},c2={class:"mb-2"},d2={class:"relative group"},h2=["value"],u2={class:"card-metallic rounded-2xl p-5"},f2={class:"relative"},g2=["value"],p2={class:"card-metallic rounded-2xl p-5 space-y-4"},m2={class:"relative"},b2=["value"],x2={class:"relative"},y2=["value"],v2={class:"relative"},_2=["value"],w2={class:"card-metallic rounded-2xl p-5"},S2={class:"relative"},C2=["value"],k2={key:1,class:"space-y-4"},M2={class:"card-metallic rounded-2xl p-5"},T2={class:"flex gap-3"},P2={class:"relative flex-1"},A2=["value"],E2={class:"flex items-center bg-[#151515] border border-[#333] rounded-xl px-4 min-w-[100px] justify-center shadow-inner"},R2={class:"card-metallic rounded-2xl p-5"},O2={class:"relative"},L2=["value"],I2={class:"card-metallic rounded-2xl p-5"},D2={class:"card-metallic rounded-2xl p-5 space-y-4"},G2={class:"relative"},F2=["value"],N2={class:"relative"},B2=["value"],H2={class:"relative"},W2=["value"],$2={class:"card-metallic rounded-2xl p-5"},z2={class:"relative"},j2=["value"],U2={key:1,class:"p-4 space-y-4 overflow-y-auto pb-24"},X2={class:"card-metallic rounded-2xl p-5 space-y-3"},Y2={class:"space-y-3"},V2=["onUpdate:modelValue"],K2=["onUpdate:modelValue"],q2=["onClick"],Q2={class:"card-metallic rounded-2xl p-5"},J2={class:"flex flex-col"},Z2={class:"font-bold text-sm text-gray-300"},tp={class:"text-xs text-gray-500"},ep=["onUpdate:modelValue"],ip={class:"card-metallic rounded-2xl p-5"},sp={class:"flex flex-col"},np={class:"font-bold text-sm text-gray-300"},rp={class:"text-xs text-gray-500"},op=["onUpdate:modelValue"],ap={key:2,class:"p-4 space-y-3 overflow-y-auto pb-24"},lp={class:"fixed bottom-0 left-0 w-full bg-[#050505] border-t border-[#222] flex justify-around items-center pb-[env(safe-area-inset-bottom)] z-50 shadow-[0_-5px_20px_rgba(0,0,0,0.8)]"},cp=["onClick"],dp={class:"text-2xl mb-1 filter drop-shadow-[0_0_5px_currentColor]"},hp={class:"text-[9px] font-bold uppercase tracking-widest"},up={__name:"App",setup(e){const t=Ut("calc"),i=Ut("standard"),s=[{id:"calc",label:"",icon:""},{id:"settings",label:"",icon:""},{id:"info",label:"",icon:""}],n=Ni({shape:"circle",sizeCode:null,repairCode:null,riskCode:null,materialCode:null,carClassCode:null,disassemblyCode:null,hours:null,masterIndex:null}),r=()=>{const R={};return Nt.circleSizes.forEach(m=>{R[m.code]=m.basePrice}),Nt.stripSizes.forEach(m=>{R[m.code]=m.basePrice}),R},o=Ni({prices:r(),masters:JSON.parse(JSON.stringify(Nt.defaultMasters)),hourlyRate:0}),a=localStorage.getItem("dentRepairSettings_v5");if(a)try{const R=JSON.parse(a);R.prices&&Object.assign(o.prices,R.prices),R.masters&&(o.masters=R.masters)}catch(R){console.error("Failed to load settings",R)}const l=Ni({selectedClass:null,selectedPart:null,dents:[]}),d={carClasses:[{id:"sedan",name:"",icon:""},{id:"crossover",name:"",icon:""},{id:"suv",name:"",icon:""}]},c=Qt(()=>l.selectedClass?.id==="crossover"?Da("crossover"):Object.values(Ia)),h=Ut("crossover"),u=Ut("hood");ue([l.selectedClass,l.selectedPart],()=>{l.selectedClass&&(h.value=l.selectedClass.id),l.selectedPart&&(u.value=l.selectedPart.id)},{immediate:!0}),ue([h,u],()=>{f()},{immediate:!0});function f(){const R=h.value||d.carClasses[0]?.id,m=d.carClasses.find(W=>W.id===R)||d.carClasses[0];l.selectedClass=m||null;const T=m?.id==="crossover"?Da("crossover"):Object.values(Ia),gt=u.value;let F=T.find(W=>W.id===gt);F||(F=T[0]||null),l.selectedPart=F,F&&(u.value=F.id),m&&(h.value=m.id)}const g=Qt(()=>n.shape==="circle"?Nt.circleSizes:Nt.stripSizes),b=Qt(()=>{const R=l.selectedPart;return R?.realSizeMm&&R?.asset?.type==="image"?f1:Nt.circleSizes}),v=Qt(()=>{if(!n.sizeCode)return 0;const R=o.prices[n.sizeCode]||0;return $r(R,n,Nt,n.sizeCode,100)}),_=Qt(()=>{if(!n.hours)return 0;const R=n.hours*o.hourlyRate;return $r(R,n,Nt,"STRIP_DEFAULT",100)}),w=Qt(()=>Pc(l.dents,n,Nt,"STRIP_DEFAULT",100)),M=Qt(()=>t.value!=="calc"?0:i.value==="standard"?v.value:i.value==="time"?_.value:i.value==="graphics"?w.value:0),k=R=>new Intl.NumberFormat("ru-RU").format(R),E=R=>{const m=window.Telegram?.WebApp;m?.HapticFeedback&&m.isVersionAtLeast&&m.isVersionAtLeast("6.1")&&(R==="selection"&&m.HapticFeedback.selectionChanged(),R==="success"&&m.HapticFeedback.notificationOccurred("success"))},A=R=>{i.value=R,E("selection"),R==="graphics"&&(window.Telegram?.WebApp?.expand&&window.Telegram.WebApp.expand(),f())},V=R=>{t.value=R,E("selection")},O=R=>{n.shape=R,n.sizeCode=null,E("selection")},K=()=>{n.sizeCode=null,n.repairCode=null,n.riskCode=null,n.materialCode=null,n.carClassCode=null,n.disassemblyCode=null,n.hours=null,n.masterIndex=null,E("selection")},J=()=>{n.masterIndex!==null&&(o.hourlyRate=o.masters[n.masterIndex].rate)},lt=()=>o.masters.push({name:"",rate:0}),Z=R=>o.masters.splice(R,1),st=()=>{const R={prices:o.prices,masters:o.masters};localStorage.setItem("dentRepairSettings_v5",JSON.stringify(R));const m=window.Telegram?.WebApp;m?.showPopup&&m?.isVersionAtLeast&&m.isVersionAtLeast("6.2")?m.showPopup({title:"",message:" ",buttons:[{type:"ok"}]}):alert(" "),E("success")},ct=()=>{confirm("   ?")&&(Object.assign(o.prices,r()),st())},tt=()=>{i.value="standard",l.dents=[],E("selection")};ue(M,R=>{const m=window.Telegram?.WebApp?.MainButton;m&&(R>0?(m.setText(`: ${k(R)} `),m.show()):m.hide())});const j=R=>{if(i.value==="graphics"&&(R.key==="Delete"||R.key==="Backspace")){const m=document.activeElement;if(m&&(m.tagName==="INPUT"||m.tagName==="TEXTAREA"||typeof m.isContentEditable=="boolean"&&m.isContentEditable))return;R.preventDefault(),Mc()}};return io(()=>{window.Telegram?.WebApp&&(window.Telegram.WebApp.ready(),window.Telegram.WebApp.expand(),window.Telegram.WebApp.MainButton.setParams({color:"#88E523",text_color:"#000000"})),window.addEventListener("keydown",j)}),ue(()=>i.value==="graphics",R=>{typeof document>"u"||(document.body.classList.toggle("graphics-fullscreen-active",R),R&&window.Telegram?.WebApp?.expand&&window.Telegram.WebApp.expand())},{immediate:!0}),so(()=>{window.removeEventListener("keydown",j)}),(R,m)=>(B(),z("div",Zg,[t.value==="calc"?(B(),z("div",t2,[i.value!=="graphics"?(B(),z("div",e2,[m[23]||(m[23]=p("div",{class:"flex justify-center pt-2 pb-2"},[p("img",{src:tu,alt:"DentMetric",class:"w-full max-w-[320px] h-auto object-contain drop-shadow-2xl",onerror:"this.style.display='none'"})],-1)),p("div",i2,[m[21]||(m[21]=p("div",{class:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-white/10 to-transparent"},null,-1)),m[22]||(m[22]=p("div",{class:"text-[11px] uppercase font-bold text-gray-400 tracking-widest mb-1"}," ",-1)),p("div",{class:Ft(["text-5xl font-black transition-all duration-300",M.value>0?"text-metric-green drop-shadow-[0_0_15px_rgba(136,229,35,0.3)]":"text-gray-600"])},[Bl(ot(M.value>0?k(M.value):"---")+" ",1),M.value>0?(B(),z("span",s2,"")):zt("",!0)],2),p("div",{class:Ft(["absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1/2 h-4 blur-xl transition-all duration-300",M.value>0?"bg-metric-green/10":"bg-transparent"])},null,2)]),p("div",n2,[p("button",{onClick:m[0]||(m[0]=T=>A("standard")),class:Ft(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="standard"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2),p("button",{onClick:m[1]||(m[1]=T=>A("time")),class:Ft(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="time"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2),p("button",{onClick:m[2]||(m[2]=T=>A("graphics")),class:Ft(["flex-1 py-3 text-xs font-bold rounded-lg transition-all uppercase tracking-wide",i.value==="graphics"?"bg-metric-green text-black shadow-neon":"text-gray-400 hover:text-white"])},"  ",2)])])):zt("",!0),p("div",{class:Ft(["flex-1 overflow-y-auto p-4 pt-0 pb-24",{"overflow-hidden h-0":i.value==="graphics"}])},[i.value==="standard"?(B(),z("div",r2,[p("div",o2,[p("div",a2,[m[27]||(m[27]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-3 tracking-widest"}," ",-1)),p("div",l2,[p("div",{onClick:m[3]||(m[3]=T=>O("circle")),class:Ft(["flex-1 relative rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 border",n.shape==="circle"?"bg-[#222] border-metric-green shadow-neon":"bg-[#151515] border-white/5 hover:border-white/10"])},[p("div",{class:Ft(["w-4 h-4 rounded-full border-2 mb-2 shadow-[0_0_5px_currentColor]",n.shape==="circle"?"border-metric-green bg-metric-green":"border-gray-500"])},null,2),p("span",{class:Ft(["text-xs font-bold uppercase",n.shape==="circle"?"text-white":"text-gray-400"])},"/",2)],2),p("div",{onClick:m[4]||(m[4]=T=>O("strip")),class:Ft(["flex-1 relative rounded-xl p-4 flex flex-col items-center justify-center cursor-pointer transition-all duration-200 border",n.shape==="strip"?"bg-[#222] border-metric-green shadow-neon":"bg-[#151515] border-white/5 hover:border-white/10"])},[p("div",{class:Ft(["w-6 h-2 rounded-sm mb-3 shadow-[0_0_5px_currentColor]",n.shape==="strip"?"bg-metric-green":"bg-gray-500"])},null,2),p("span",{class:Ft(["text-xs font-bold uppercase",n.shape==="strip"?"text-white":"text-gray-400"])},"",2)],2)]),m[28]||(m[28]=p("br",null,null,-1)),p("div",c2,[m[26]||(m[26]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",d2,[jt(p("select",{"onUpdate:modelValue":m[5]||(m[5]=T=>n.sizeCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[24]||(m[24]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(g.value,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,h2))),128))],512),[[he,n.sizeCode]]),m[25]||(m[25]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])])]),p("div",u2,[m[31]||(m[31]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",f2,[jt(p("select",{"onUpdate:modelValue":m[6]||(m[6]=T=>n.repairCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[29]||(m[29]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).repairTypes,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,g2))),128))],512),[[he,n.repairCode]]),m[30]||(m[30]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",p2,[m[41]||(m[41]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),p("div",null,[m[34]||(m[34]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",m2,[jt(p("select",{"onUpdate:modelValue":m[7]||(m[7]=T=>n.riskCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[32]||(m[32]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).risks,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,b2))),128))],512),[[he,n.riskCode]]),m[33]||(m[33]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[m[37]||(m[37]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",x2,[jt(p("select",{"onUpdate:modelValue":m[8]||(m[8]=T=>n.materialCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[35]||(m[35]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).materials,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,y2))),128))],512),[[he,n.materialCode]]),m[36]||(m[36]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[m[40]||(m[40]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",v2,[jt(p("select",{"onUpdate:modelValue":m[9]||(m[9]=T=>n.carClassCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[38]||(m[38]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).carClasses,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,_2))),128))],512),[[he,n.carClassCode]]),m[39]||(m[39]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),p("div",w2,[m[44]||(m[44]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),m[45]||(m[45]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",S2,[jt(p("select",{"onUpdate:modelValue":m[10]||(m[10]=T=>n.disassemblyCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[42]||(m[42]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).disassembly,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,C2))),128))],512),[[he,n.disassemblyCode]]),m[43]||(m[43]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("button",{onClick:K,class:"w-full py-4 text-xs font-bold uppercase tracking-widest text-red-400 hover:text-red-300 hover:bg-red-900/10 border border-transparent hover:border-red-900/20 rounded-xl transition-all flex items-center justify-center space-x-2 opacity-80 hover:opacity-100"},[...m[46]||(m[46]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p("span",null," ",-1)])])])):zt("",!0),i.value==="time"?(B(),z("div",k2,[p("div",M2,[m[49]||(m[49]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",T2,[p("div",P2,[jt(p("select",{"onUpdate:modelValue":m[11]||(m[11]=T=>n.masterIndex=T),required:"",onChange:J,class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[47]||(m[47]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(o.masters,(T,gt)=>(B(),z("option",{key:gt,value:gt},ot(T.name),9,A2))),128))],544),[[he,n.masterIndex]]),m[48]||(m[48]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))]),p("div",E2,[p("span",{class:Ft(["text-sm font-bold",o.hourlyRate>0?"text-metric-green":"text-gray-600"])},ot(o.hourlyRate>0?k(o.hourlyRate):"---"),3)])])]),p("div",R2,[m[52]||(m[52]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"},"",-1)),p("div",O2,[jt(p("select",{"onUpdate:modelValue":m[12]||(m[12]=T=>n.repairCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[50]||(m[50]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).repairTypes,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,L2))),128))],512),[[he,n.repairCode]]),m[51]||(m[51]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",I2,[m[53]||(m[53]=p("div",{class:"text-[10px] font-bold text-gray-500 uppercase mb-2 tracking-widest"}," ()",-1)),jt(p("input",{type:"number","onUpdate:modelValue":m[13]||(m[13]=T=>n.hours=T),min:"0",step:"0.5",placeholder:" ",inputmode:"decimal",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-xl font-bold shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none transition-colors placeholder-gray-600"},null,512),[[ts,n.hours,void 0,{number:!0}]])]),p("div",D2,[m[63]||(m[63]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-1"},"",-1)),p("div",null,[m[56]||(m[56]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",G2,[jt(p("select",{"onUpdate:modelValue":m[14]||(m[14]=T=>n.riskCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[54]||(m[54]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).risks,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,F2))),128))],512),[[he,n.riskCode]]),m[55]||(m[55]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[m[59]||(m[59]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"},"",-1)),p("div",N2,[jt(p("select",{"onUpdate:modelValue":m[15]||(m[15]=T=>n.materialCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[57]||(m[57]=p("option",{value:null,disabled:"",selected:""}," ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).materials,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,B2))),128))],512),[[he,n.materialCode]]),m[58]||(m[58]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("div",null,[m[62]||(m[62]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",H2,[jt(p("select",{"onUpdate:modelValue":m[16]||(m[16]=T=>n.carClassCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[60]||(m[60]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).carClasses,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,W2))),128))],512),[[he,n.carClassCode]]),m[61]||(m[61]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])])]),p("div",$2,[m[66]||(m[66]=p("div",{class:"text-[10px] font-bold text-gray-400 uppercase mb-2 tracking-widest"},"",-1)),m[67]||(m[67]=p("label",{class:"block text-[10px] font-bold text-gray-500 uppercase mb-1.5 ml-1"}," ",-1)),p("div",z2,[jt(p("select",{"onUpdate:modelValue":m[17]||(m[17]=T=>n.disassemblyCode=T),required:"",class:"w-full bg-[#151515] border border-[#333] rounded-xl px-4 py-3 text-white text-base font-medium shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none appearance-none transition-colors"},[m[64]||(m[64]=p("option",{value:null,disabled:"",selected:""},"  ",-1)),(B(!0),z(ut,null,wt(Wt(Nt).disassembly,T=>(B(),z("option",{key:T.code,value:T.code},ot(T.name),9,j2))),128))],512),[[he,n.disassemblyCode]]),m[65]||(m[65]=p("div",{class:"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none"},[p("svg",{class:"w-3 h-3 text-metric-green",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M19 9l-7 7-7-7"})])],-1))])]),p("button",{onClick:K,class:"w-full py-4 text-xs font-bold uppercase tracking-widest text-red-400 hover:text-red-300 hover:bg-red-900/10 border border-transparent hover:border-red-900/20 rounded-xl transition-all flex items-center justify-center space-x-2 opacity-80 hover:opacity-100"},[...m[68]||(m[68]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),p("span",null," ",-1)])])])):zt("",!0),i.value==="graphics"?(B(),pi(Jg,{key:2,"selected-class-id":h.value,"onUpdate:selectedClassId":m[18]||(m[18]=T=>h.value=T),"selected-part-id":u.value,"onUpdate:selectedPartId":m[19]||(m[19]=T=>u.value=T),form:n,"initial-data":Wt(Nt),"user-settings":o,"car-classes":d.carClasses,"parts-list":c.value,"selected-part":l.selectedPart,"circle-sizes":b.value,"strip-sizes":Wt(Nt).stripSizes,onClose:tt,onDentsChange:m[20]||(m[20]=T=>l.dents=T)},null,8,["selected-class-id","selected-part-id","form","initial-data","user-settings","car-classes","parts-list","selected-part","circle-sizes","strip-sizes"])):zt("",!0)],2)])):zt("",!0),t.value==="settings"?(B(),z("div",U2,[m[73]||(m[73]=p("div",{class:"card-metallic rounded-2xl p-5"},[p("h2",{class:"text-xl font-bold mb-1 text-white"},"")],-1)),p("div",X2,[p("div",{class:"flex justify-between items-center mb-4"},[m[69]||(m[69]=p("div",{class:"text-[10px] font-bold text-metric-green uppercase tracking-widest"},"",-1)),p("button",{onClick:lt,class:"text-xs text-metric-green border border-metric-green px-2 py-1 rounded hover:bg-metric-green hover:text-black transition-colors"},"+ ")]),p("div",Y2,[(B(!0),z(ut,null,wt(o.masters,(T,gt)=>(B(),z("div",{key:gt,class:"flex gap-2 items-center"},[jt(p("input",{"onUpdate:modelValue":F=>T.name=F,placeholder:"",class:"flex-1 bg-[#151515] border border-[#333] rounded-lg p-2 text-sm text-white focus:border-metric-green outline-none"},null,8,V2),[[ts,T.name]]),jt(p("input",{type:"number","onUpdate:modelValue":F=>T.rate=F,placeholder:"/",class:"w-20 bg-[#151515] border border-[#333] rounded-lg p-2 text-sm text-right text-white focus:border-metric-green outline-none"},null,8,K2),[[ts,T.rate,void 0,{number:!0}]]),p("button",{onClick:F=>Z(gt),class:"text-red-500 p-2 hover:bg-red-900/20 rounded"},[...m[70]||(m[70]=[p("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,q2)]))),128))])]),p("div",Q2,[m[71]||(m[71]=p("div",{class:"text-[10px] font-bold text-metric-green uppercase mb-4 tracking-widest"},"/ ()",-1)),(B(!0),z(ut,null,wt(Wt(Nt).circleSizes,T=>(B(),z("div",{key:T.code,class:"flex items-center justify-between mb-3 last:mb-0 border-b border-white/5 pb-2 last:border-0 last:pb-0"},[p("div",J2,[p("span",Z2,ot(T.code),1),p("span",tp,ot(T.name),1)]),jt(p("input",{type:"number","onUpdate:modelValue":gt=>o.prices[T.code]=gt,inputmode:"numeric",class:"w-28 bg-[#151515] border border-[#333] rounded-lg p-2 text-right font-medium text-white shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none"},null,8,ep),[[ts,o.prices[T.code],void 0,{number:!0}]])]))),128))]),p("div",ip,[m[72]||(m[72]=p("div",{class:"text-[10px] font-bold text-metric-green uppercase mb-4 tracking-widest"}," ()",-1)),(B(!0),z(ut,null,wt(Wt(Nt).stripSizes,T=>(B(),z("div",{key:T.code,class:"flex items-center justify-between mb-3 last:mb-0 border-b border-white/5 pb-2 last:border-0 last:pb-0"},[p("div",sp,[p("span",np,ot(T.code),1),p("span",rp,ot(T.name),1)]),jt(p("input",{type:"number","onUpdate:modelValue":gt=>o.prices[T.code]=gt,inputmode:"numeric",class:"w-28 bg-[#151515] border border-[#333] rounded-lg p-2 text-right font-medium text-white shadow-inner focus:border-metric-green/50 focus:ring-1 focus:ring-metric-green/50 outline-none"},null,8,op),[[ts,o.prices[T.code],void 0,{number:!0}]])]))),128))]),p("div",{class:"flex flex-col space-y-3 pt-4"},[p("button",{onClick:st,class:"w-full bg-metric-green text-black font-bold py-3.5 rounded-xl active:opacity-90 transition-opacity shadow-[0_0_15px_rgba(136,229,35,0.4)]"}," "),p("button",{onClick:ct,class:"w-full text-gray-400 text-sm font-medium py-3 hover:text-white transition-colors"},"  ")])])):zt("",!0),t.value==="info"?(B(),z("div",ap,[...m[74]||(m[74]=[Hl('<div class="flex items-center justify-center pb-4" data-v-170afed4><div class="px-5 py-1.5 rounded-full border border-white/10 bg-[#1a1a1a] shadow-lg" data-v-170afed4><span class="text-[10px] font-bold uppercase text-metric-green tracking-widest" data-v-170afed4> &amp; FAQ</span></div></div><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-170afed4><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-170afed4><div class="flex items-center space-x-3" data-v-170afed4><span class="text-lg opacity-80" data-v-170afed4></span><span class="font-bold text-sm text-white" data-v-170afed4> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-170afed4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-170afed4></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-170afed4><ul class="space-y-2 list-disc pl-4 marker:text-metric-green" data-v-170afed4><li data-v-170afed4>     .</li><li data-v-170afed4>  : <span class="text-white font-bold" data-v-170afed4></span>, <span class="text-white font-bold" data-v-170afed4> </span>  <span class="text-white font-bold" data-v-170afed4></span>.</li><li data-v-170afed4>   =  .    .</li></ul></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-170afed4><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-170afed4><div class="flex items-center space-x-3" data-v-170afed4><span class="text-lg opacity-80" data-v-170afed4></span><span class="font-bold text-sm text-white" data-v-170afed4> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-170afed4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-170afed4></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-170afed4><ol class="space-y-3 list-decimal pl-4 marker:text-metric-green marker:font-bold" data-v-170afed4><li data-v-170afed4>   ().</li><li data-v-170afed4>   (/  ).</li><li data-v-170afed4>  (S2-S11  LS1-LS8).   .</li><li data-v-170afed4>  (, , , ).</li><li data-v-170afed4>   .</li></ol></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-170afed4><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-170afed4><div class="flex items-center space-x-3" data-v-170afed4><span class="text-lg opacity-80" data-v-170afed4></span><span class="font-bold text-sm text-white" data-v-170afed4> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-170afed4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-170afed4></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4 space-y-5" data-v-170afed4><div data-v-170afed4><div class="font-bold text-metric-green text-[10px] uppercase mb-1 tracking-widest" data-v-170afed4></div><div class="text-gray-400 leading-snug" data-v-170afed4>S ()  LS ().    .</div></div><div data-v-170afed4><div class="font-bold text-metric-green text-[10px] uppercase mb-2 tracking-widest" data-v-170afed4> (K)</div><div class="space-y-1.5" data-v-170afed4><div class="flex space-x-2" data-v-170afed4><span class="text-white font-bold w-6" data-v-170afed4>K1:</span><span data-v-170afed4></span></div><div class="flex space-x-2" data-v-170afed4><span class="text-white font-bold w-6" data-v-170afed4>K2:</span><span data-v-170afed4></span></div><div class="flex space-x-2" data-v-170afed4><span class="text-white font-bold w-6" data-v-170afed4>K3:</span><span data-v-170afed4>  ,  .</span></div><div class="flex space-x-2" data-v-170afed4><span class="text-white font-bold w-6" data-v-170afed4>K4:</span><span data-v-170afed4>   , .</span></div></div></div><div data-v-170afed4><div class="font-bold text-metric-green text-[10px] uppercase mb-1 tracking-widest" data-v-170afed4> </div><div class="text-gray-400 leading-snug" data-v-170afed4> (x1.0), / (x1.2).</div></div></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-170afed4><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-170afed4><div class="flex items-center space-x-3" data-v-170afed4><span class="text-lg opacity-80" data-v-170afed4></span><span class="font-bold text-sm text-white" data-v-170afed4>  </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-170afed4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-170afed4></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-170afed4><p class="mb-4 leading-snug" data-v-170afed4>      .</p><div class="bg-[#151515] border border-white/10 rounded-lg p-3 font-mono text-xs text-metric-green flex items-center justify-center" data-v-170afed4>  = (  )   </div></div></details><details class="group card-metallic rounded-2xl overflow-hidden transition-all" data-v-170afed4><summary class="flex items-center justify-between p-4 cursor-pointer select-none" data-v-170afed4><div class="flex items-center space-x-3" data-v-170afed4><span class="text-lg opacity-80" data-v-170afed4></span><span class="font-bold text-sm text-white" data-v-170afed4> </span></div><svg class="w-5 h-5 text-gray-500 transition-transform duration-200 group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-170afed4><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-v-170afed4></path></svg></summary><div class="px-5 pb-5 pt-0 text-sm text-gray-400 leading-relaxed border-t border-white/5 mt-2 pt-4" data-v-170afed4><p class="mb-2" data-v-170afed4>      .</p><ol class="space-y-2 list-decimal pl-4 marker:text-metric-green marker:font-bold" data-v-170afed4><li data-v-170afed4>    .</li><li data-v-170afed4>  ()  .</li><li data-v-170afed4>    .</li><li data-v-170afed4><b class="text-white" data-v-170afed4> :</b>      (),   .</li></ol></div></details><div class="border border-red-500/30 bg-red-900/10 rounded-2xl p-4 flex gap-4 items-start mt-4" data-v-170afed4><div class="text-2xl pt-1" data-v-170afed4></div><div data-v-170afed4><div class="text-red-400 font-bold uppercase tracking-widest text-xs mb-1" data-v-170afed4></div><div class="text-sm text-gray-300 leading-relaxed" data-v-170afed4>   .          . </div></div></div>',7)])])):zt("",!0),p("div",lp,[(B(),z(ut,null,wt(s,T=>p("button",{key:T.id,onClick:gt=>V(T.id),class:Ft(["flex-1 py-4 flex flex-col items-center justify-center transition-all duration-300",t.value===T.id?"text-metric-green scale-105":"text-gray-600 hover:text-gray-400"])},[p("span",dp,ot(T.icon),1),p("span",hp,ot(T.label),1)],10,cp)),64))])]))}},fp=xo(up,[["__scopeId","data-v-170afed4"]]);Qh(fp).mount("#app");
